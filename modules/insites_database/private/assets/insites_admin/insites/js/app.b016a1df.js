(function(t){function e(e){for(var s,r,o=e[0],l=e[1],d=e[2],h=0,u=[];h<o.length;h++)r=o[h],a[r]&&u.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(u.length)u.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={app:0},n=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var c=l;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"02e3":function(t,e,i){},"18fa":function(t,e,i){},"1e17":function(t,e,i){},"24df":function(t,e,i){"use strict";var s=i("8a95"),a=i.n(s);a.a},2684:function(t,e,i){"use strict";var s=i("1e17"),a=i.n(s);a.a},"38b9":function(t,e,i){"use strict";var s=i("9602"),a=i.n(s);a.a},"3a10":function(t,e,i){"use strict";var s=i("02e3"),a=i.n(s);a.a},"42b4":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("75fc"),a=(i("cadf"),i("551c"),i("f751"),i("097d"),i("2b0e")),n=i("8c4f"),r=i("8206"),o=i.n(r),l=i("a7fe"),d=i.n(l),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"insites-database"}},[i("router-view")],1)},h=[],u=(i("96cf"),i("3b8d")),p=(i("a481"),i("28a5"),{data:function(){return{insRendererEl:void 0}},methods:{constructTableHeader:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;return{label:t,type:e,sortable:i,hasTag:s,hasLink:a,hasColumnAction:n,hasImage:r}},toastInvalidIDNotification:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";toastIt("warning","Invalid ".concat(t,", no data found."),InsitesUtil.ops())},apiHeader:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.getElementsByName("csrf-token")[0].content,e={"X-CSRF-Token":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"};return"localhost"!==window.location.hostname&&(e["X-CSRF-Token"]=t),e},checkValue:function(t,e){return t&&"undefined"!==t?"".concat(e?"+":"").concat(t):""},checkURLParamsID:function(){return this.$route.params.id},setURLParameter:function(t,e){this.$router.push({path:"".concat(t,"/").concat(e)})},objectHas:function(t,e){var i;return t&&t[e]&&(i=t[e]),i},capitalize:function(t){return this.checkValue(t).split("_").map(function(t){return t.charAt(0).toUpperCase()+t.substring(1)}).join(" ")},getName:function(t){return t.split("/")[t.split("/").length-1].split(".")[0]},getModuleName:function(t){return t.split("/")[1]},validateInput:function(t){return t=t.target?t.target:t,t.value?(InsitesUtil.validFieldNotif(t),0):(InsitesUtil.invalidFieldNotif(t),1)},convertToPhysicalPath:function(t){return t=t.split("/"),t.shift(),t=t.join("/"),t},removeArrLastIndex:function(t){return t=t.split("/"),t.pop(),t=t.join("/"),t},convertToFolder:function(t){return t.replace(/\//g,"|")},returnFormattedDate:function(t){return InsitesUtil.formatLocalisation(t)},localhostAssetManagerGetFileData:function(t,e){for(var i=[],s=0;s<e.results.items.results.length;s++){var a=e.results.items.results[s];if(a.physical_path===t){i=e.results.items.results[s];break}}return i}}}),m=i("8206"),f=p.methods.apiHeader();function _(t,e){return g.apply(this,arguments)}function g(){return g=Object(u["a"])(regeneratorRuntime.mark(function t(e,i){var s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:{},a=n.length>3&&void 0!==n[3]?n[3]:f,t.next=4,b(e,i,s,a).then(function(t){return{state:!0,results:t.data}}).catch(function(t){return{state:!1,results:t}});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)})),g.apply(this,arguments)}function b(t,e){return v.apply(this,arguments)}function v(){return v=Object(u["a"])(regeneratorRuntime.mark(function t(e,i){var s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:{},a=n.length>3&&void 0!==n[3]?n[3]:f,t.next=4,m({method:i,url:e,data:s,headers:a});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)})),v.apply(this,arguments)}i("913c"),i("e14f"),i("d650"),i("9f94");var y={name:"app",methods:{},mounted:function(){}},C=y,E=(i("9d14"),i("2877")),k=Object(E["a"])(C,c,h,!1,null,null,null),x=k.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-container-full"},[i("div",{staticClass:"spacer small"}),i("div",{staticClass:"grid-x grid-margin-x margin-bottom-30"},[i("div",{staticClass:"large-4 medium-12 small-12 cell"},[i("SystemField",{attrs:{heading:"Group Label",type:"group_label"}})],1)]),i("div",{staticClass:"spacer large"})])},T=[],w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"system-field-wrap"},[i("h2",[t._v(t._s(t.heading))]),t.loading?t._e():i("ins-base-table",{ref:"systemFieldTable",attrs:{"without-search":"","static-table":""},on:{onPaginationChange:t.onPaginationChangeHandler}},[i("ins-base-table-row",[i("ins-base-table-td",[i("div",{staticClass:"new-system-field-wrap"},[i("InsInputWrap",{attrs:{placeholder:"Please enter "+t.heading},model:{value:t.newSystemField,callback:function(e){t.newSystemField=e},expression:"newSystemField"}}),i("ins-button",{ref:"newSystemFieldButton",attrs:{label:"Save",solid:"",loading:t.addingSystemField},on:{onClickInsButton:t.addSystemField}})],1)])],1),t._l(t.fields.results,function(e){return t.loading?t._e():i("ins-base-table-row",{key:e.id},[i("ins-base-table-td",{staticClass:"system-field-wrap__data"},[e.editMode?t._e():i("div",{staticClass:"view-mode"},[t._v("\n          "+t._s(e.field_label)+"\n        ")]),e.editMode?i("div",{staticClass:"edit-mode"},[i("InsInputWrap",{attrs:{placeholder:"Please enter "+t.heading},model:{value:e.tempValue,callback:function(i){t.$set(e,"tempValue",i)},expression:"field.tempValue"}}),i("div",{staticClass:"edit-mode__buttons"},[i("ins-button",{attrs:{label:"update",size:"small"},on:{onClickInsButton:function(i){return t.updateSystemField(e)}}}),i("ins-button",{attrs:{label:"cancel",size:"small"},on:{onClickInsButton:function(i){return t.cancelEditMode(e)}}})],1)],1):t._e(),e.editMode?t._e():i("div",{staticClass:"actions-wrap"},[i("button",{staticClass:"action edit",on:{click:function(i){return t.enableEditMode(e)}}},[t._v("\n            Edit\n          ")]),i("span",{staticClass:"seperator"},[t._v("|")]),i("button",{staticClass:"action archive",on:{click:function(i){return t.archiveSystemField(e)}}},[t._v("\n            Delete\n          ")])])])],1)})],2)],1)},R=[],S=i("f499"),I=i.n(S),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-input",{ref:"insInputEl",attrs:{label:t.label,value:t.convertValue(t.value),placeholder:t.placeholder,name:t.name,field:t.field,"field-id":t.fieldId,icon:t.icon,disabled:t.disabled,readonly:t.readonly,required:t.required,maxlength:t.maxlength,"error-message":t.errorMessage,"has-error":t.hasError},on:{valueChange:t.onValueChange}})},A=[],B=i("59ad"),N=i.n(B),P=i("dcf0"),F={methods:{validateEmail:function(t){var e={from:{email:!0}},i={from:t};return Object(P["validate"])(i,e)},validateURL:function(t){var e={website:{url:!0}},i={website:t};return Object(P["validate"])(i,e)}}},M={name:"InsInputWrap",mixins:[F,p],props:{label:String,value:String,placeholder:String,name:String,field:String,fieldId:String,secondary:String,icon:String,errorMessage:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String,maxlength:String,validate:Boolean},methods:{convertValue:function(t){return"number"===this.field&&(t=N()(t)),t},onValueChange:function(t){var e=t.detail;"url"===this.field&&(e=InsitesUtil.checkURLinput(e,this.secondary),this.$refs.insInputEl.value=e),this.validate&&this.checkInput(e),this.$emit("input",e)},checkInput:function(t){if(this.required&&!t)return this.toggleError(!0,"".concat(this.label," is required."));if(t){var e,i;switch(this.field){case"email":e=this.validateEmail(t),i=e?"Invalid email address.":"";break;case"url":"text"!==this.secondary&&(e=this.validateURL(t),i=e?"Invalid url.":"");break}this.toggleError(e,i)}else this.toggleError(!1,"")},toggleError:function(t,e){this.$refs.insInputEl.hasError=!!t,this.$refs.insInputEl.errorMessage=e,this.$emit("fieldError",{error:!!t,target:this})}}},L=M,j=(i("24df"),Object(E["a"])(L,O,A,!1,null,null,null)),H=j.exports,U="/insites/api/",W="/api/customizations";function q(){return z.apply(this,arguments)}function z(){return z=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a,n,r,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,i=o.length>1&&void 0!==o[1]?o[1]:10,s=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,n=o.length>4?o[4]:void 0,r="".concat(U,"get-database-list-data.json?page=").concat(e,"&size=").concat(i).concat(s?"&sort=".concat(s):"").concat(a?"&order=".concat(a):"").concat(n?"&keyword=".concat(n):""),t.next=8,_(r,"get");case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},t)})),z.apply(this,arguments)}function K(t){return V.apply(this,arguments)}function V(){return V=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i,s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=n.length>1&&void 0!==n[1]?n[1]:1,s=n.length>2&&void 0!==n[2]?n[2]:10,a="".concat(U,"get-database-list-data.json?id=").concat(e,"&page=").concat(i,"&size=").concat(s),t.next=5,_(a,"get");case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)})),V.apply(this,arguments)}function G(t){return Y.apply(this,arguments)}function Y(){return Y=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i,s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=n.length>1&&void 0!==n[1]?n[1]:1,s=n.length>2&&void 0!==n[2]?n[2]:10,a="".concat(U,"search-database-by-name-data.json?keyword=").concat(e,"&page=").concat(i,"&size=").concat(s),t.next=5,_(a,"get");case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)})),Y.apply(this,arguments)}function J(){return X.apply(this,arguments)}function X(){return X=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:1,i=a.length>1&&void 0!==a[1]?a[1]:10,s="".concat(U,"get-all-database-field-groups.json?page=").concat(e,"&size=").concat(i),t.next=5,_(s,"get");case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)})),X.apply(this,arguments)}function Q(t){return Z.apply(this,arguments)}function Z(){return Z=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"get-database-field-group-details.json?id=").concat(e),t.next=3,_(i,"get");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),Z.apply(this,arguments)}function tt(){return et.apply(this,arguments)}function et(){return et=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",i=n.length>1&&void 0!==n[1]?n[1]:1,s=n.length>2&&void 0!==n[2]?n[2]:10,a="".concat(U,"get-database-items-list.json?page=").concat(i,"&size=").concat(s,"&name=").concat(e),t.next=6,_(a,"get");case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)})),et.apply(this,arguments)}function it(t){return st.apply(this,arguments)}function st(){return st=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"get-database-item-details.json?id=").concat(e),t.next=3,_(i,"get");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),st.apply(this,arguments)}function at(){return nt.apply(this,arguments)}function nt(){return nt=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",i=n.length>1&&void 0!==n[1]?n[1]:1,s=n.length>2&&void 0!==n[2]?n[2]:10,a="".concat(U,"get-form-configurations-list.json?page=").concat(i,"&size=").concat(s,"&name=").concat(e),t.next=6,_(a,"get");case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)})),nt.apply(this,arguments)}function rt(t){return ot.apply(this,arguments)}function ot(){return ot=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"create-database.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),ot.apply(this,arguments)}function lt(t){return dt.apply(this,arguments)}function dt(){return dt=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"update-database.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),dt.apply(this,arguments)}function ct(t){return ht.apply(this,arguments)}function ht(){return ht=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"delete-database.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),ht.apply(this,arguments)}function ut(t){return pt.apply(this,arguments)}function pt(){return pt=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"truncate-database.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),pt.apply(this,arguments)}function mt(t){return ft.apply(this,arguments)}function ft(){return ft=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"create-form-configuration.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),ft.apply(this,arguments)}function _t(t){return gt.apply(this,arguments)}function gt(){return gt=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"update-form-configuration.json"),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),gt.apply(this,arguments)}function bt(t){return vt.apply(this,arguments)}function vt(){return vt=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(W),t.next=3,_(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),vt.apply(this,arguments)}function yt(t){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"create-database-item.json"),t.next=3,b(i,"post",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),Ct.apply(this,arguments)}function Et(t){return $t.apply(this,arguments)}function $t(){return $t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"update-database-item.json"),t.next=3,b(i,"put",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),$t.apply(this,arguments)}function kt(t){return xt.apply(this,arguments)}function xt(){return xt=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(U,"delete-database-item.json"),t.next=3,b(i,"delete",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),xt.apply(this,arguments)}function Dt(){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a,n,r,o,l,d=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=d.length>0&&void 0!==d[0]?d[0]:"",i=d.length>1&&void 0!==d[1]?d[1]:1,s=d.length>2&&void 0!==d[2]?d[2]:10,a=d.length>3?d[3]:void 0,n=d.length>4?d[4]:void 0,r=d.length>5?d[5]:void 0,o=d.length>6?d[6]:void 0,l="".concat(U,"get-database-items-list.json?page=").concat(i,"&size=").concat(s,"&name=").concat(e).concat(o?"&field=".concat(r,"&keyword=").concat(o):"").concat(a?"&sort=".concat(a):"").concat(n?"&order=".concat(n):""),t.next=10,_(l,"get");case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}},t)})),Tt.apply(this,arguments)}function wt(){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s,a,n,r,o,l=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:"",i=l.length>1&&void 0!==l[1]?l[1]:1,s=l.length>2&&void 0!==l[2]?l[2]:10,a=l.length>3?l[3]:void 0,n=l.length>4?l[4]:void 0,r=l.length>5?l[5]:void 0,o="".concat(U,"search-database-item-id.json?page=").concat(i,"&size=").concat(s,"&name=").concat(e,"&id=").concat(r).concat(a?"&sort=".concat(a):"").concat(n?"&order=".concat(n):""),t.next=9,_(o,"get");case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t)})),Rt.apply(this,arguments)}var St={name:"SystemField",mixins:[p],components:{InsInputWrap:H},props:{heading:String,type:String},data:function(){return{fields:{results:[]},loading:!1,newSystemField:"",addingSystemField:!1,pageNumber:1,pageSize:10,headers:{},sourceURL:"/api/customizations/",systemFieldModel:{form_configuration_name:"modules/insites_database/insites_manage_field_groups",parent_resource_id:"modules/insites_database/insites_field_groups",form:{properties:{field_label:"",is_enabled:"true"}}}}},methods:{enableEditMode:function(t){t.editMode=!0},cancelEditMode:function(t){t.tempValue=t.field_label,t.editMode=!1},mutateSystemField:function(t,e,i){this.systemFieldModel.form.properties.field_label=e.tempValue;var s="".concat(this.sourceURL).concat("put"===t?e.id:""),a=I()(this.systemFieldModel),n={headers:this.headers};this.$http[t](s,a,n).then(i).catch(this.errorHandler)},addSystemField:function(){var t=this;if(this.newSystemField){this.addingSystemField=!0,this.systemFieldModel.form.properties.is_enabled=!0;this.newSystemField.toLowerCase();var e={tempValue:this.newSystemField};this.mutateSystemField("post",e,function(){setTimeout(function(){toastIt("success","New field group has been created.",InsitesUtil.ops()),t.addingSystemField=!1,t.newSystemField="",t.fetchSystemFields(),t.$store.dispatch("fetchSystemFields",t.type)},1e3)})}else toastIt("error","Cannot add empty field.",InsitesUtil.ops())},updateSystemField:function(t){var e=this;t.tempValue?this.mutateSystemField("put",t,function(i){t.field_label=t.tempValue,t.editMode=!1,setTimeout(function(){e.$store.dispatch("fetchSystemFields",e.type),toastIt("success","Field group has been updated.",InsitesUtil.ops())},1e3)}):toastIt("error","Cannot add empty field.",InsitesUtil.ops())},archiveSystemField:function(t){var e=this,i="Are you sure you want to delete this Field Group?";swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(i,'">\n          </ins-loader>'),type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(i){i.value&&(e.systemFieldModel.form.properties.is_enabled=!1,e.mutateSystemField("put",t,function(){setTimeout(function(){toastIt("success","Field group has been deleted.",InsitesUtil.ops()),e.fetchSystemFields(),e.$store.dispatch("fetchSystemFields",e.type)},1e3)}))})},onPaginationChangeHandler:function(t){this.pageNumber=t.detail.pageNumber,this.pageSize=t.detail.pageSize,this.fetchSystemFields()},fetchSystemFields:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.loaderStateHandler("","Loading field groups...","processing"),t.next=4,J(this.pageNumber,this.pageSize);case 4:e=t.sent,e.state?(e.results.items.results.map(this.constructResults),this.fields=e.results.items):toastIt("error","Failed to load field groups.",InsitesUtil.ops()),this.loading=!1,this.setupTable();case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),constructResults:function(t){return t.tempValue=t.field_label,t.editMode=!1,t},errorHandler:function(t){console.error("error...",t),this.addingSystemField=!1,toastIt("error","Failed to load field groups.",InsitesUtil.ops())},loaderStateHandler:function(t,e,i){this.$refs.systemFieldTable.loadingScreen=!0,this.$refs.systemFieldTable.loaderTitle=t,this.$refs.systemFieldTable.loaderMessage=e,this.$refs.systemFieldTable.loaderIcon=i},setupTable:function(){var t=this;setTimeout(function(){t.$refs.systemFieldTable.totalCount=t.fields.total_entries,t.$refs.systemFieldTable.pageNumber=t.pageNumber,t.$refs.systemFieldTable.pageSize=t.pageSize,t.$refs.systemFieldTable.loadingScreen=!1},300)}},mounted:function(){this.headers=this.apiHeader(),this.fetchSystemFields()}},It=St,Ot=(i("2684"),Object(E["a"])(It,w,R,!1,null,null,null)),At=Ot.exports,Bt=i("e6f8"),Nt={name:"SystemFields",components:{SystemField:At},data:function(){return{}},methods:{},mounted:function(){}},Pt=Nt,Ft=Object(E["a"])(Pt,D,T,!1,null,null,null),Mt=Ft.exports,Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-container-full pages"},[i("div",{staticClass:"grid-x"},[i("div",{staticClass:"large-12 cell database-list-container"},[i("div",{staticClass:"database-filter"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasData,expression:"!hasData"}]},[i("ins-card",{attrs:{steady:""}},[i("h2",{staticClass:"title-page h2desc"},[t._v("Welcome to Database")]),i("p",{staticClass:"pdesc"},[t._v("Database are your customisations data which you can assign data columns and attributes. \n                            Each database can be used as a dynamic data storage which you can use across your website content.")])]),i("div",{staticClass:"pages-bottom"},[i("h2",{staticClass:"pages-title-secondary h2desc"},[t._v("You don't have any database yet.")]),i("p",{staticClass:"pdesc"},[t._v("Would you like to create your first database?")]),i("ins-button",{attrs:{label:"ADD NEW Database",solid:""},on:{onClickInsButton:t.gotToCreateDatabase}})],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasData,expression:"hasData"}],staticClass:"table-list-container"},[i("div",{staticClass:"header-buttons"},[i("ins-button",{attrs:{label:"ADD NEW Database",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:t.gotToCreateDatabase}})],1),i("div",{staticClass:"ins-table-container"},[i("ins-base-table",{ref:"insBaseTable",attrs:{"searchbar-placeholder":"Search by Database Name"},on:{onPaginationChange:t.tablePaginationHandler,onTableRowAction:t.tableRowActionHandler,onTableSort:t.tableSortHandler,onTableSearch:t.tableSearchHandler}}),i("div",{staticClass:"spacer large"})],1)])])])])},jt=[],Ht=i("795b"),Ut=i.n(Ht),Wt=(i("7f7f"),i("ac6a"),i("2ef0")),qt={mixins:[p],data:function(){return{dir:"modules/ins_database/public"}},methods:{convertToDatabaseFileName:function(t){return InsitesUtil.removeWhitespace(t).trim().replace(/[ -]/g,"_").replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()},convertToModuleName:function(t){return InsitesUtil.removeWhitespace(t).replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()},setDatabasePhysicalPath:function(t){var e=this.convertToDatabaseFileName(t);return""!==e?"".concat(this.dir,"/custom_model_types/").concat(e,".yml"):""},setFormConfigurationPhysicalPath:function(t){var e=this.convertToDatabaseFileName(t);return""!==e?"".concat(this.dir,"/form_configurations/").concat(e,".liquid"):""},setFormConfigurationName:function(t){return"modules/ins_database/".concat(this.convertToModuleName(t))},getFormConfigurationName:function(t){return t.split("/")[t.split("/").length-1]},buildDatabaseSchema:function(t,e,i,s,a){var n={payload:{schema:{name:this.getFormConfigurationName(e),metadata:{is_enabled:"true",label:InsitesUtil.removeWhitespace(t)},properties:this.setProperties(i,s)}}};return a||(n.payload.schema.physical_file_path=this.setDatabasePhysicalPath(this.getFormConfigurationName(e))),n},setProperties:function(t,e){var i=this.buildFieldProperties(t);return this.setTableHeader(i,e)},buildFieldProperties:function(t){for(var e=[],i=0;i<t.length;i++)e[i]={},e[i].default_value=t[i].default_value,e[i].id=t[i].id,e[i].name=t[i].id?t[i].name:this.convertToModuleName(t[i].name),e[i].metadata=t[i].metadata,t[i].id||(e[i].attribute_type=t[i].attribute_type);return e},setTableHeader:function(t,e){for(var i=0;i<t.length;i++)i===e&&(t[i].metadata.is_header="true");return t},setFieldMetadata:function(t,e,i,s){return{attribute_type:t.metadata.attribute_type,counter:e,default_value:null,id:i||null,name:i?t.name:this.convertToModuleName(t.name),label:t.label,metadata:{label:InsitesUtil.removeWhitespace(t.label),group_id:t.group_id,type:t.metadata.id,is_header:"false",is_required:t.metadata.is_required?"true":"false",is_enabled:"true",status:"enabled",values:t.values?Object(Wt["uniqBy"])(t.values.split(",")):[],weight:i?s:e},is_required:t.mandatory?"true":"false"}},buildFormConfigurationSchema:function(t,e,i,s){return{payload:{schema:{name:this.getFormConfigurationName(t),physical_file_path:i,resource:"Customizations",resource_owner:"anyone",authorization_policy_ids:[],metadata:{is_enabled:"true",label:InsitesUtil.removeWhitespace(e)},configuration:{properties:this.setFormCongurationProperties(s)}}}}},setFormCongurationProperties:function(t){for(var e={},i=0;i<t.length;i++)"true"===t[i].metadata.is_required?(e[t[i].name]={},e[t[i].name].validation={},e[t[i].name].validation.presence=!0):e[t[i].name]=null;return e},invalidParamIDHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";toastIt("error","Failed to get ".concat(t," info. Invalid ").concat(t," ID or does not exist."),InsitesUtil.ops()),this.redirectToDBList()},noDatabaseErrorHandler:function(){toastIt("error","Failed to get Database fields.",InsitesUtil.ops()),this.redirectToDBList()},redirectToDBList:function(){InsitesUtil.renderPage("Database List","#/database"),this.$router.push("/database")}}},zt={mixins:[p,qt],methods:{convertToCustomizationName:function(t){return"modules/"+this.getModuleName(t)+"/"+this.getName(t)},buildFormData:function(t,e){var i={payload:{}};if(e&&(i.payload["id"]=e),t)for(var s in i.payload["customization"]={},i.payload["customization"]["custom_model_type_name"]=t.name,i.payload["customization"]["properties"]=[],t.properties)i.payload["customization"]["properties"].push({name:s,value:"string"===typeof t.properties[s]?t.properties[s]:I()(t.properties[s])});else this.payloadErrorHandler("Missing data fields.");return I()(i)},payloadErrorHandler:function(t){toastIt("error","Error invalid form data. ".concat(t),InsitesUtil.ops())},dynamicSort:function(t,e,i){var s="desc";return i&&(s=i),function(i,a){return a=a[e][t],i=i[e][t],"desc"===s?a>i?1:-1:i<a?-1:1}}}},Kt={name:"DatabaseDeleteMixins",methods:{deleteHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e,i){var s,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt(i);case 2:return s=t.sent,t.abrupt("return",new Ut.a(function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!s.state){t.next=14;break}if(r={state:!1},!s.results.items.results.length){t.next=8;break}return t.next=5,a.truncateDatabaseHandler(e,i);case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,a.deleteDatabaseHandler(e);case 10:r=t.sent;case 11:n(r),t.next=15;break;case 14:n({state:!1});case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}},t)}));function e(e,i){return t.apply(this,arguments)}return e}(),truncateDatabaseHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e,i){var s,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut({name:i});case 2:return s=t.sent,t.abrupt("return",new Ut.a(function(t){s.state?a.deleteDatabaseHandler(e):t({state:!1})}));case 4:case"end":return t.stop()}},t)}));function e(e,i){return t.apply(this,arguments)}return e}(),deleteDatabaseHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct({id:e});case 2:return i=t.sent,t.abrupt("return",new Ut.a(function(t){i.state?t({state:!0}):t({state:!1})}));case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},Vt={name:"ListDatabase",mixins:[qt,zt,Kt],data:function(){return{hasData:!1,databaseList:[],pageSize:10,pageNumber:1,sortedKeyword:"",sortedBy:"asc",searchKeyword:"",continueDeletion:!1,is_enabled:"true"}},methods:{gotToCreateDatabase:function(){InsitesUtil.renderPage("Add New Database","#/manage-database"),this.$router.push("/manage-database")},gotToManageDatabase:function(t,e){InsitesUtil.renderPage("".concat(e," Database"),"#/edit-database/".concat(t.id)),this.$store.commit("updateDatabaseFormData",{data:t,action:e}),this.$router.push("/edit-database/".concat(t.id))},viewDatabaseItems:function(t){InsitesUtil.renderPage("".concat(t.Name),"#/list-database-items/".concat(t.id))},constructTableData:function(t){return{rawData:t,id:t.id,Name:t.name}},setupInsBaseTable:function(){this.$refs.insBaseTable.rowActions=["View","Edit","Delete"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("Name","string",!0)]},constructTableHeader:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;return{label:t,type:e,sortable:i,hasTag:s,hasLink:a,hasColumnAction:n,hasImage:r}},tablePaginationHandler:function(t){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=t.detail.pageSize,this.pageNumber=t.detail.pageNumber,this.getDatabaseList()},tableSearchHandler:function(t){this.searchKeyword=t.detail.value,13===t.detail.keyCode&&""!==t.detail.value?(this.pageNumber=1,this.$refs.insBaseTable.pageNumber=1,this.getDatabaseList()):this.searchKeyword||this.getDatabaseList()},tableSortHandler:function(t){this.sortedKeyword=t.detail.keyword,this.sortedBy=t.detail.order,this.getDatabaseList()},tableRowActionHandler:function(t){var e=t.detail.data,i=t.detail.action;switch(t.detail.action){case"Delete":this.deleteItem(t.detail.data);break;case"Edit":this.gotToManageDatabase(e,i);break;case"View":this.viewDatabaseItems(t.detail.data);break}},deleteItem:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=this,swal({title:"",html:'\n\t\t\t\t\t<ins-loader\n\t\t\t\t\t\tstate-icon="warning"\n\t\t\t\t\t\ticon-color="warning"\n\t\t\t\t\t\tstate-message="Are you sure you want to delete this database? This will also delete existing data.">\n\t\t\t\t\t</ins-loader>',type:"",width:330,showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(t){t.value&&i.processDeleteDatabase(e)});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),processDeleteDatabase:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.deleteHandler(e.id,this.convertToCustomizationName(e.rawData.physical_file_path));case 2:i=t.sent,i.state?(toastIt("success","Database has been deleted.",InsitesUtil.ops()),this.getDatabaseList()):toastIt("error","Failed to delete database. Please try again.",InsitesUtil.ops());case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),updateTableData:function(t){var e=t;this.$refs.insBaseTable.totalCount=e.total_entries,this.$refs.insBaseTable.tableData=e.results.map(this.constructTableData),this.$refs.insBaseTable.loadingScreen=!1,this.hasData=!0},fetchDatabaseList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q(this.pageNumber,this.pageSize,this.sortedKeyword,this.sortedBy,this.searchKeyword);case 2:return e=t.sent,t.abrupt("return",new Ut.a(function(t){e.state?t(e.results):(toastIt("error","Failed to fetch data. Please try again.",InsitesUtil.ops()),t())}));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getDatabaseList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.hasData=!0,this.setInsBaseTableLoader("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),t.next=4,this.fetchDatabaseList();case 4:e=t.sent,e.items.results.length?this.updateTableData(e.items):(this.databaselist=[],this.hasData=!1);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),searchDatabaseList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchDatabaseList();case 2:e=t.sent,e.items.results.length?this.updateTableData(e.items):this.searchKeyword?(i='No results for "'.concat(this.searchKeyword,'"'),this.setInsBaseTableLoader("",i,"no-data")):this.hasData=!1;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateDatabaseHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="",i=this.buildFormData(),i["payload"]["id"]=e,t.next=5,s(i);case 5:s=t.sent;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),buildFormData:function(){var t=this.setPhysicalPath("custom_model_types",this.databaseName),e="";return I()(this.buildDatabaseSchema(e,t,this.is_enabled))},setInsBaseTableLoader:function(t,e,i){this.$refs.insBaseTable.loadingScreen=!0,this.$refs.insBaseTable.loaderTitle=t,this.$refs.insBaseTable.loaderMessage=e,this.$refs.insBaseTable.loaderIcon=i}},mounted:function(){this.setupInsBaseTable(),this.getDatabaseList()}},Gt=Vt,Yt=(i("38b9"),Object(E["a"])(Gt,Lt,jt,!1,null,null,null)),Jt=Yt.exports,Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-container-full pages"},[i("div",{staticClass:"grid-x"},[i("div",{staticClass:"large-12 cell manage-database-container"},[i("div",{staticClass:"database-filter"}),i("ins-card",{staticClass:"height-auto",attrs:{steady:""}},[i("div",{staticClass:"page-addnew-top"},[i("h2",{staticClass:"h2desc"},[t._v("Database Details")])]),i("div",{staticClass:"row-margin-x"},[i("div",{staticClass:"grid-x grid-padding-x"},[i("div",{staticClass:"large-5 cell database-details-form"},[i("InsInputWrap",{attrs:{field:"text",required:"'true'",placeholder:"Database Name",label:"Database Name*",maxlength:"50",errorMessage:"Database Name is required."},model:{value:t.databaseName,callback:function(e){t.databaseName=e},expression:"databaseName"}})],1),i("div",{staticClass:"large-7 cell database-details-form"},[i("div",{staticClass:"database-column-name"},[i("label",{staticClass:"liquid-label"},[t._v("Customization Model Name")]),i("pre",{staticClass:"liquid-wrap"},[t._v(t._s(t.setCustomizationModelName(t.databasePhysicalFilePath)))])])])])])]),i("div",{staticClass:"spacer"}),i("ins-card",{attrs:{steady:""}},[i("div",{staticClass:"no-margin-bottom"},[i("h2",{staticClass:"h2desc"},[t._v("Fields")])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"grid-x grid-padding-y"},[i("div",{staticClass:"large-6 small-12 cell"},[i("ins-button",{attrs:{outlined:"",color:"blue",label:"Add Field",disabled:t.hasProcessingRequest},on:{click:t.resetDatabaseField}})],1),i("div",{staticClass:"large-6 small-12 cell unpublished-changes align-right vertical-align-middle"},[t.hasUnpublishedChanges?i("p",{staticClass:"p-warning"},[i("span",{staticClass:"icon-warning"}),t._v(" You have unsaved changes.")]):t._e(),t.fieldTableHeaderCounter<0&&t.fields.length?i("p",{staticClass:"p-warning"},[t._v("No table header is set.")]):t._e(),t.hasExistingFields?i("p",{staticClass:"p-error"},[i("span",{staticClass:"icon-error"}),t._v("  Database has duplicate field names.")]):t._e()])]),i("div",{staticClass:"grid-x"},[i("div",{staticClass:"medium-4 cell"},[i("InsDropdownList",{ref:"insDropdownListEl",attrs:{options:t.setDropdownListOptions(),header:t.fieldTableHeaderCounter},on:{selectChange:t.selectDatabaseField}}),i("div",{staticClass:"sort-buttons"},[i("ins-button",{attrs:{solid:"",color:"blue",icon:"icon-caret-up",label:"",disabled:!t.fieldProperties.name||t.hasProcessingRequest},on:{click:t.sortFieldUp}}),i("ins-button",{attrs:{solid:"",color:"blue",icon:"icon-caret-down",label:"",disabled:!t.fieldProperties.name||t.hasProcessingRequest},on:{click:t.sortFieldDown}})],1)],1),i("div",{staticClass:"medium-8 cell dropdown-list-fields"},[i("div",{staticClass:"grid-x"},[t.hasFieldPropertiesData?i("div",{staticClass:"cell large-12 medium-12 small-12"},[i("div",{staticClass:"dropdown-list-fields-form row-margin-x grid-x grid-padding-x"},[i("div",{staticClass:"large-6 cell"},[i("InsInputWrap",{staticClass:"database-field-name",attrs:{field:"text",maxlength:"50",placeholder:"Field Name",label:"Field Name*",required:"'true'",errorMessage:t.fieldNameErrorMessage},on:{input:t.checkFieldName},model:{value:t.fieldName,callback:function(e){t.fieldName=e},expression:"fieldName"}})],1),i("div",{staticClass:"large-6 cell"},[i("div",{staticClass:"database-column-name"},[i("label",{staticClass:"liquid-label"},[t._v("Database Column Name")]),i("pre",{staticClass:"liquid-wrap"},[t._v(t._s(t.setDatabaseColumnName(t.fieldName)))])])]),i("div",{staticClass:"large-6 cell"},[i("InsSelectWrap",{ref:"fieldTypeWrap",staticClass:"large-12 medium-12 small-12 cell",attrs:{label:t.fieldProperties.id?"Field Type":"Field Type*",placeholder:"- Select -",required:!0,errorMessage:"Field Type is required.",searchable:""},on:{input:t.fieldTypeInputHandler},model:{value:t.fieldType,callback:function(e){t.fieldType=e},expression:"fieldType"}},t._l(t.getFieldTypes(),function(e){return t.fieldTypes.length?i("ins-select-option",{key:e.id,attrs:{label:e.name,value:e.id}}):t._e()}),1)],1),t.fieldMetadata.has_metadata_value?i("div",{staticClass:"large-6 cell position-relative"},[i("InsInputWrap",{staticClass:"inline-b",attrs:{field:"text",placeholder:"Options",label:"Options* (separated by comma)",required:"'true'",errorMessage:"Options is required."},model:{value:t.fieldMetadataValue,callback:function(e){t.fieldMetadataValue=e},expression:"fieldMetadataValue"}}),i("i",{staticClass:"ins-tooltip position-absolute",attrs:{"tooltip-content":"Column marked as 'table header' will be displayed on item list table."}})],1):t._e()]),i("div",{staticClass:"grid-x"},[t.mutatedGroups?i("InsSelectWrap",{staticClass:"large-12 medium-12 small-12 cell",attrs:{label:"Field Group",placeholder:"- Select -","dynamic-placeholder":"Add New Field Group",searchable:"","with-dynamic-option":""},on:{onSubmitOption:t.onSubmitOptionHandler},model:{value:t.fieldGroup,callback:function(e){t.fieldGroup=e},expression:"fieldGroup"}},[t.fieldGroups.length?t._e():i("ins-select-option",{attrs:{label:"No field group yet.",value:"",disabled:""}}),t.fieldGroups.length&&t.fieldProperties.name?i("ins-select-option",{attrs:{label:"None",value:""}}):t._e(),t._l(t.fieldGroups,function(t){return i("ins-select-option",{key:t.id,attrs:{label:t.field_label,value:t.id}})})],2):t._e()],1),i("div",{staticClass:"row-margin-x"},[i("div",{staticClass:"grid-x grid-padding-x"},[i("div",{staticClass:"large-6 cell"},[i("InsToggleWrap",{staticClass:"inline-block",attrs:{checked:t.fieldTableHeader,label:"Table Header"},model:{value:t.fieldTableHeader,callback:function(e){t.fieldTableHeader=e},expression:"fieldTableHeader"}}),i("i",{staticClass:"ins-tooltip",attrs:{"tooltip-content":"Column marked as 'table header' will be displayed on item list table."}})],1),t.fieldMetadata.has_mandatory?i("div",{staticClass:"large-6 cell"},[i("InsToggleWrap",{attrs:{checked:t.fieldMandatory,label:"Mandatory"},model:{value:t.fieldMandatory,callback:function(e){t.fieldMandatory=e},expression:"fieldMandatory"}})],1):t._e()])]),i("div",{staticClass:"grid-x grid-padding-y"},[i("div",{staticClass:"large-6 medium-5 small-12 cell footer-btn-container"},[!t.fieldProperties.id&&t.fieldProperties.counter>-1?i("ins-button",{attrs:{color:"negative",label:"Remove Field"},on:{click:function(e){return t.removeDatabaseField(t.fieldProperties.counter)}}}):t._e()],1),i("div",{staticClass:"large-5 large-offset-1 medium-5 medium-offset-2 small-12 cell text-right footer-btn-container"},[i("ins-button",{attrs:{solid:"",color:"blue",label:"Save Field",disabled:t.hasProcessingRequest},on:{click:t.saveDatabaseField}})],1)])]):t._e()])])])])]),i("div",{staticClass:"grid-x grid-padding-y"},[i("div",{staticClass:"large-4 medium-5 small-12 cell footer-btn-container"},["EditDatabase"===t.$route.name?i("ins-button",{attrs:{color:"negative",label:"Delete Database",disabled:t.hasProcessingRequest},on:{click:t.onDeleteHandler}}):t._e()],1),i("div",{staticClass:"large-4 large-offset-4 medium-5 medium-offset-2 small-12 cell text-right footer-btn-container"},[i("ins-button",{attrs:{outlined:"",color:"blue",disabled:t.hasProcessingRequest,label:"Cancel"},on:{click:t.onCancelHandler}}),i("ins-button",{attrs:{solid:"",color:"blue",disabled:t.hasExistingFields||t.hasProcessingRequest,label:"EditDatabase"===t.$route.name?"Update":"Save"},on:{click:t.onSubmitHandler}})],1)])],1)])])},Qt=[],Zt=i("774e"),te=i.n(Zt),ee=(i("7514"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-toggle-switch",{ref:"insToggleEl",attrs:{label:t.label,value:t.value,disabled:t.disabled,checked:t.value},on:{onCheckInsToggleSwitch:t.onValueChange}})}),ie=[],se={name:"InsToggleWrap",props:{label:String,disabled:Boolean,checked:Boolean,value:[Boolean,String]},methods:{onValueChange:function(t){this.$emit("input",t.detail.checked)}}},ae=se,ne=(i("3a10"),Object(E["a"])(ae,ee,ie,!1,null,null,null)),re=ne.exports,oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-select",{ref:"insSelectEl",attrs:{label:t.label,value:t.value,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly,required:t.required,button:t.button,small:t.small,searchable:t.searchable,multiple:t.multiple,"has-error":t.hasError,"error-message":t.errorMessage,"with-dynamic-option":t.withDynamicOption,"dynamic-placeholder":t.dynamicPlaceholder},on:{onSubmitOption:t.onSubmitOptionHandler,valueChange:t.onValueChange}},[t._t("default")],2)},le=[],de={name:"InsSelectWrap",props:{label:String,value:String,placeholder:String,dynamicPlaceholder:String,disabled:Boolean,readonly:Boolean,button:Boolean,small:Boolean,searchable:Boolean,multiple:Boolean,withDynamicOption:Boolean,hasError:Boolean,errorMessage:String,required:Boolean},methods:{onValueChange:function(t){var e=this;e.$emit("input",t.detail),this.checkInput(t.detail)},onSubmitOptionHandler:function(t){this.$emit("onSubmitOption",t.detail)},checkInput:function(t){if(this.required&&!t)return this.toggleError(!0,this.errorMessage?this.errorMessage:"".concat(this.label," is required."));this.toggleError(!1,"")},toggleError:function(t,e){this.$refs.insSelectEl.hasError=!!t,this.$refs.insSelectEl.errorMessage=e,this.$emit("fieldError",{error:!!t,target:this})}}},ce=de,he=(i("c3dc"),Object(E["a"])(ce,oe,le,!1,null,null,null)),ue=he.exports,pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ins-dropdown-list-container"},[i("ul",t._l(t.options,function(e){return i("li",{class:t.setActiveHeader(e.counter),on:{click:function(i){return t.selectedHandler(e)}}},[t._v(t._s(e.label)),"true"===e.is_required|!0===e.is_required?i("span",[t._v(" *")]):t._e()])}),0)])},me=[],fe={name:"InsDropdownList",data:function(){return{selected:"",header:""}},mixins:[F,p],props:{options:Array},methods:{setActiveHeader:function(t){var e="";return this.selected===t&&(e+="is-active"),this.header===t&&(e+=e?" is-header":"is-header"),e},resetSelectedHandler:function(){this.selected=""},selectedHandler:function(t){this.selected=t.counter,this.$emit("selectChange",t)},setHeader:function(t){this.header=t}}},_e=fe,ge=(i("f5a2"),Object(E["a"])(_e,pe,me,!1,null,null,null)),be=ge.exports,ve={link:"",app:!1,withSubmenu:!0,label:"Database",formattedRoute:"#/database"},ye={link:"#/database",app:!1,withSubmenu:!1,label:"Database List"},Ce={link:"#/manage-database",withSubmenu:!1,app:!1,label:"Add New Database"},Ee={data:function(){return{groupModel:{form_configuration_name:"modules/insites_database/insites_manage_field_groups",parent_resource_id:"modules/insites_database/insites_field_groups",form:{properties:{field_label:"",is_enabled:"true"}}},mutatedGroups:!1,oldFields:{},oldFieldTableHeaderCounter:-1,databaseName:"",databasePhysicalFilePath:"",customizationModelName:"",hasProcessingRequest:!1,hasUnpublishedChanges:!1,hasExistingFields:!1,isExisting:!1,fieldNameErrorMessage:"Field Name is required.",isPublished:!0,hasFieldPropertiesData:!1,fields:[],selectedField:"",fieldTableHeaderCounter:-1,fieldTableHeader:!1,fieldName:"",fieldType:"",fieldMetadataValue:"",fieldGroup:"",fieldMetadata:{},fieldMandatory:!1,deprecatedAttributeTypes:[{attribute_type:"array",new_value:"string"},{attribute_type:"text",new_value:"string"}],fieldTypes:[{id:"text",name:"Text",attribute_type:"string",has_metadata_value:!1,has_mandatory:!0},{id:"link",name:"Link",attribute_type:"string",has_metadata_value:!1,has_mandatory:!0},{id:"multi_line",name:"Multi-line",attribute_type:"string",has_metadata_value:!1,has_mandatory:!0},{id:"list_select",name:"List (Select)",attribute_type:"string",has_metadata_value:!0,has_mandatory:!0},{id:"list_checkbox",name:"List (Checkbox)",attribute_type:"string",has_metadata_value:!0,has_mandatory:!0},{id:"list_radio",name:"List (Radio)",attribute_type:"string",has_metadata_value:!0,has_mandatory:!0},{id:"toggle",name:"Toggle",attribute_type:"boolean",has_metadata_value:!1,has_mandatory:!1},{id:"number",name:"Number",attribute_type:"integer",has_metadata_value:!1,has_mandatory:!0},{id:"decimal",name:"Decimal",attribute_type:"float",has_metadata_value:!1,has_mandatory:!0},{id:"date",name:"Date",attribute_type:"date",has_metadata_value:!1,has_mandatory:!0}],fieldProperties:{},selectedGroup:""}},components:{InsDropdownList:be,InsSelectWrap:ue,InsInputWrap:H,InsToggleWrap:re},computed:Object(Bt["b"])({databaseFormData:function(t){return t.DatabaseStore.databaseFormData},fieldGroups:function(t){return t.DatabaseStore.fieldGroups}}),mixins:[p,qt,zt,Kt],methods:{sortFieldUp:function(){var t=this.setDropdownListOptions(),e=this.fieldProperties.metadata.weight-1;e>=0&&(this.fields[t[this.fieldProperties.metadata.weight-1].counter].metadata.weight=this.fieldProperties.metadata.weight,this.fields[this.fieldProperties.counter].metadata.weight=e,this.setUnpublishedChanges()),this.fieldProperties=this.fields[this.fieldProperties.counter]},sortFieldDown:function(){var t=this.setDropdownListOptions(),e=this.fieldProperties.metadata.weight+1,i=t[t.length-1].metadata.weight;e<=i&&(this.fields[t[this.fieldProperties.metadata.weight+1].counter].metadata.weight=this.fieldProperties.metadata.weight,this.fields[this.fieldProperties.counter].metadata.weight=e,this.setUnpublishedChanges()),this.fieldProperties=this.fields[this.fieldProperties.counter]},setDropdownListOptions:function(){var t=Object(Wt["sortBy"])(this.fields,[function(t){return t.metadata.weight}]);return t},onSubmitOptionHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.groupModel.form.properties.field_label=e,this.mutatedGroups=!1,t.next=4,bt(this.groupModel);case 4:i=t.sent,this.mutatedGroups=!0,i.state?(this.fieldGroups.push({id:i.results.id,field_label:e}),this.fieldGroup=i.results.id,this.onSuccessRequestState("New field group has been created.")):this.onErrorRequestState("group");case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),setCustomizationModelName:function(t){return"EditDatabase"===this.$route.name?this.customizationModelName=this.convertToCustomizationName(this.databasePhysicalFilePath):this.customizationModelName=this.convertToCustomizationName(this.setFormConfigurationName(this.databaseName)),this.customizationModelName},setDatabaseColumnName:function(t){if(this.fieldProperties.id)return this.convertToModuleName(this.fieldProperties.name);var e=this.convertToModuleName(t);return e||" "},onDeleteHandler:function(){var t=this;swal({title:"",html:'\n\t\t\t\t\t<ins-loader\n\t\t\t\t\t\tstate-icon="warning"\n\t\t\t\t\t\ticon-color="warning"\n\t\t\t\t\t\tstate-message="Are you sure you want to delete this database? \n This will also delete existing data.">\n\t\t\t\t\t</ins-loader>',type:"",width:330,showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(e){e.value&&t.processDeleteDatabase()})},processDeleteDatabase:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.deleteHandler(this.checkURLParamsID(),this.convertToCustomizationName(this.databasePhysicalFilePath));case 2:e=t.sent,e.state?this.onSuccessRequestState("Database deleted.",!0):this.onErrorRequestState("database");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getFieldTypes:function(){var t=[];return this.fieldProperties.id?(t=this.getFilteredFieldTypes(this.getDeprecatedAttributeTypesNewValue(this.fieldProperties.attribute_type)),this.fieldProperties.metadata.type||(this.fieldType=t[0].id)):t=this.fieldTypes,t},getFilteredFieldTypes:function(t){for(var e=[],i=0;i<this.fieldTypes.length;i++)this.fieldTypes[i].attribute_type===t&&e.push(this.fieldTypes[i]);return e},getDeprecatedAttributeTypesNewValue:function(t){for(var e=0;e<this.deprecatedAttributeTypes.length;e++)if(t===this.deprecatedAttributeTypes[e].attribute_type)return this.deprecatedAttributeTypes[e].new_value;return t},checkFieldName:function(){for(var t=!1,e=0;e<this.fields.length;e++)if(this.convertToModuleName(this.fieldName)===this.fields[e].name&&!this.fieldProperties.id){t=!0,InsitesUtil.invalidFieldNotif($(".database-field-name").find("input")[0]),this.fieldNameErrorMessage="Field Name already exist.";break}t||(InsitesUtil.validFieldNotif($(".database-field-name").find("input")[0]),this.fieldNameErrorMessage="Field Name is required.")},checkDuplicateFields:function(){var t=Object(Wt["uniqBy"])(this.fields,"name");this.hasExistingFields=t.length!==this.fields.length},removeDatabaseField:function(t){this.fields.splice(t,1),this.resetDatabaseField(),this.setUnpublishedChanges()},saveDatabaseField:function(){var t=$(".dropdown-list-fields-form"),e=te()(t.find(".ins-form-field, .ins-select-value-input, .ins-textarea-field")),i=this.validateDatabaseFields(e);i&&(this.updateDatabaseFields(),this.resetDatabaseField(),this.setUnpublishedChanges())},updateDatabaseFields:function(){this.fieldMetadata.is_required=this.fieldMandatory,this.fieldProperties.name?(this.setTableHeaderCounter(this.fieldProperties.counter),this.fields[this.fieldProperties.counter]=this.setFieldMetadata(this.setDatabaseFieldData(),this.fieldProperties.counter,this.fieldProperties.id,this.fieldProperties.metadata.weight)):(this.setTableHeaderCounter(this.fields.length),this.fields.push(this.setFieldMetadata(this.setDatabaseFieldData(),this.fields.length)))},setTableHeaderCounter:function(t){this.fieldTableHeader?this.fieldTableHeaderCounter=t:this.fieldTableHeaderCounter!==t||this.fieldTableHeader||(this.fieldTableHeaderCounter=-1),this.$refs.insDropdownListEl.setHeader(this.fieldTableHeaderCounter)},setUnpublishedChanges:function(){"EditDatabase"===this.$route.name&&(this.oldFieldTableHeaderCounter===this.fieldTableHeaderCounter&&Object(Wt["isEqualWith"])(JSON.parse(this.oldFields),JSON.parse(I()(this.fields)))?this.hasUnpublishedChanges=!1:this.hasUnpublishedChanges=!0)},setDatabaseFieldData:function(){return{label:InsitesUtil.removeWhitespace(this.fieldName),name:this.fieldProperties.id?this.fieldProperties.name:this.convertToModuleName(this.fieldName),group_id:this.fieldGroup,metadata:this.fieldMetadata,values:this.fieldMetadataValue,mandatory:this.fieldMandatory}},validateDatabaseFields:function(t){var e=this;return t.forEach(function(t){if("ins-select-value-input"===t.className){var i=t.parentElement.parentElement.parentElement;"true"===i.getAttribute("required")&&(t.setAttribute("required",!0),e.$refs.fieldTypeWrap.checkInput(t.value))}}),InsitesUtil.formValidate(t)},selectDatabaseField:function(t){var e=this;this.getFieldTypes(),this.hasFieldPropertiesData=!1,this.fieldProperties=t,this.fieldName=t.label?t.label:t.name,this.fieldType=t.metadata.type?t.metadata.type:this.fieldTypes[0].id,this.fieldGroup=t.metadata.group_id,this.fieldMandatory="true"===t.metadata.is_required,this.fieldTableHeader=t.counter===this.fieldTableHeaderCounter,this.fieldMetadataValue=t.metadata.values.length?t.metadata.values.join(","):"",this.fieldTypeInputHandler(this.fieldType),this.$refs.insDropdownListEl.setHeader(this.fieldTableHeaderCounter),setTimeout(function(){e.hasFieldPropertiesData=!0})},initManageDatabase:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:e=t.sent,this.mutatedGroups=!0,e.state?(this.$store.commit("updateDatabaseFieldGroups",e.results.items.results),"EditDatabase"===this.$route.name?this.checkDatabaseFormData():"ManageDatabase"===this.$route.name&&this.$store.commit("resetDatabaseFormData")):this.onErrorRequestState("database",!0);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),checkDatabaseFormData:function(){this.checkURLParamsID()?this.databaseFormData.data?(this.setDatabaseFieldsValue(),this.setDatabaseFields(this.databaseFormData.data.rawData.database_fields),this.checkDuplicateFields()):this.updateDatabaseFormData():this.onErrorRequestState("database",!0)},setDatabaseFieldsValue:function(){this.databaseName=this.databaseFormData.data.Name,this.databasePhysicalFilePath=this.databaseFormData.data.rawData.physical_file_path,this.setBreadCrumbs()},updateDatabaseFormData:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K(this.checkURLParamsID());case 2:e=t.sent,e.state?(this.$store.commit("updateDatabaseFormData",this.setDatabaseRawData(e.results.items.results[0],"Edit")),this.setDatabaseFields(e.results.items.results[0].database_fields),this.setDatabaseFieldsValue(),this.checkDuplicateFields()):this.onErrorRequestState("database",!0);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setDatabaseRawData:function(t,e){return t.metadata||(t.metadata={}),{action:e,data:{Name:t.metadata.label?t.metadata.label:t.name,id:t.id,rawData:t}}},setDatabaseFields:function(t){for(var e=[],i=0;i<t.length;i++)t[i].metadata||(t[i].metadata={}),e[i]={},e[i].attribute_type=this.getDeprecatedAttributeTypesNewValue(t[i].attribute_type),e[i].counter=i,e[i].default_value=null,e[i].id=t[i].id,e[i].name=this.convertToModuleName(t[i].name),e[i].label=t[i].metadata.label?t[i].metadata.label:t[i].name,e[i].is_required=t[i].metadata.is_required?t[i].metadata.is_required:"false","true"===t[i].metadata.is_header&&(this.oldFieldTableHeaderCounter=i,this.fieldTableHeaderCounter=i,this.$refs.insDropdownListEl.setHeader(i)),e[i].metadata={},e[i].metadata=this.setDatabaseFieldMetadata(t[i],i),e[i].metadata.is_header="false";this.fields=e,this.oldFields=I()(e)},setDatabaseFieldMetadata:function(t,e){return t.metadata.values||(t.metadata.values=[]),{label:t.metadata.label?t.metadata.label:t.name,group_id:t.metadata.group_id,type:t.metadata.type&&t.id?t.metadata.type:this.setDatabaseFieldMetadataType(t.attribute_type),is_required:t.metadata.is_required?t.metadata.is_required:"false",is_enabled:"true",status:"enabled",values:t.metadata.values.length?Object(Wt["uniqBy"])(t.metadata.values):[],weight:"undefined"!==typeof t.metadata.weight?t.metadata.weight:e}},setDatabaseFieldMetadataType:function(t){var e=this.getFilteredFieldTypes(this.getDeprecatedAttributeTypesNewValue(t));return!!e.length&&e[0].id},onSubmitHandler:function(){var t=$(".database-details-form"),e=te()(t.find(".ins-form-field, .ins-select-value-input, .ins-textarea-field")),i=InsitesUtil.formValidate(e);i&&this.saveDatabase()},checkDatabaseFormConfiguration:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,at(this.setFormConfigurationName(this.databaseName));case 2:e=t.sent,e.state?e.results.items.results.length?this.updateDatabaseFormConfiguration(e.results.items.results[0].id):this.createDatabaseFormConfiguration():this.onErrorRequestState("form configuration");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),createDatabaseFormConfiguration:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.hasProcessingRequest=!0,t.next=3,mt(this.setDatabaseFormConfigurationPayload());case 3:e=t.sent,e.state?this.saveDatabase():this.onErrorRequestState("form configuration");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateDatabaseFormConfiguration:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.hasProcessingRequest=!0,t.next=3,_t(this.setDatabaseFormConfigurationPayload(e));case 3:i=t.sent,i.state?this.saveDatabase():this.onErrorRequestState("form configuration");case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),setDatabasePayload:function(){var t=this.buildDatabaseSchema(this.databaseName,this.customizationModelName,this.fields,this.fieldTableHeaderCounter,this.databasePhysicalFilePath);return t},setDatabaseFormConfigurationPayload:function(t){var e=this.buildFormConfigurationSchema(this.customizationModelName,this.databaseName,this.setFormConfigurationPhysicalPath(this.databaseName),this.fields);return t&&(e.id=t),e},onCancelHandler:function(){var t=this;t.hasUnpublishedChanges?swal({title:"",html:'\n\t\t\t\t\t\t<ins-loader\n\t\t\t\t\t\t\tstate-icon="warning"\n\t\t\t\t\t\t\ticon-color="warning"\n\t\t\t\t\t\t\tstate-message="You have unsaved changes.\n Would you like to continue and discard changes?">\n\t\t\t\t\t\t</ins-loader>',type:"",width:330,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes"}).then(function(e){e.value&&t.$router.push({name:"ListDatabase"})}):t.$router.push({name:"ListDatabase"})},saveDatabase:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.setDatabasePayload(),i={},this.hasProcessingRequest=!0,"EditDatabase"!==this.$route.name){t.next=10;break}return e.payload.id=this.checkURLParamsID(),t.next=7,lt(e);case 7:i=t.sent,t.next=14;break;case 10:if("ManageDatabase"!==this.$route.name){t.next=14;break}return t.next=13,rt(e);case 13:i=t.sent;case 14:this.onSuccessSaveDatabase(i);case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onSuccessRequestState:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];toastIt("success",t,InsitesUtil.ops()),this.hasProcessingRequest=!1,e&&this.$router.push({name:"ListDatabase"})},onErrorRequestState:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.toastInvalidIDNotification(t),this.hasProcessingRequest=!1,e&&this.$router.push({name:"ListDatabase"})},onSuccessSaveDatabase:function(t){t.state?this.onSuccessRequestState("Database has been ".concat("EditDatabase"===this.$route.name?"updated":"created","."),!0):this.onErrorRequestState("database")},resetDatabaseField:function(){var t=this;this.hasFieldPropertiesData=!1,this.fieldProperties={},this.fieldName="",this.fieldType="",this.fieldGroup="",this.fieldMetadataValue="",this.fieldMetadata={},this.fieldMandatory=!1,this.fieldTableHeader=!1,this.$refs.insDropdownListEl.resetSelectedHandler(),setTimeout(function(){t.hasFieldPropertiesData=!0})},fieldTypeInputHandler:function(t){for(var e=0;e<this.fieldTypes.length;e++)if(t===this.fieldTypes[e].id){this.fieldMetadata=this.fieldTypes[e];break}this.fieldMetadata.has_mandatory||(this.fieldMandatory=!1)},setBreadCrumbs:function(){var t=[];t=[ve,ye],"EditDatabase"===this.$route.name?t.push({label:"Edit Database",link:"#".concat(this.$route.path),withSubmenu:!1,app:!1}):"ManageDatabase"===this.$route.name&&t.push(Ce),InsitesUtil.setBreadCrumbs(t)}},mounted:function(){this.initManageDatabase(),this.resetDatabaseField(),this.setBreadCrumbs()},beforeDestroy:function(){this.$store.commit("resetDatabaseFormData")}},$e=Ee,ke=(i("9816"),Object(E["a"])($e,Xt,Qt,!1,null,null,null)),xe=ke.exports,De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-container-full pages"},[i("div",{staticClass:"grid-x"},[i("div",{staticClass:"large-12 cell items-list-container"},[i("div",{staticClass:"database-filter"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasData,expression:"!hasData"}]},[i("div",{staticClass:"pages-bottom"},[i("h2",{staticClass:"pages-title-secondary h2desc"},[t._v("You don't have any items yet.")]),i("p",{staticClass:"pdesc"},[t._v("Would you like to create your first item?")]),i("ins-button",{attrs:{label:"Add New Item",solid:""},on:{onClickInsButton:t.goToAddNewDatabaseItem}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasData,expression:"hasData"}],staticClass:"table-list-container"},[i("div",{staticClass:"header-buttons"},[i("ins-button",{attrs:{label:"Add New Item",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:t.goToAddNewDatabaseItem}}),i("ins-button",{attrs:{label:"Edit Database Settings",color:"primary",size:"normal",outlined:""},on:{onClickInsButton:t.goToEditDatabase}})],1),i("div",{staticClass:"ins-table-container"},[i("ins-base-table",{ref:"insBaseTable",attrs:{"searchbar-placeholder":"Search by "+(t.tableHeader?t.tableHeader:"ID")},on:{onPaginationChange:t.tablePaginationHandler,onTableSort:t.tableSortHandler,onTableSearch:t.tableSearchHandler,onTableBulkAction:t.tableBulkActionHandler,onTableRowAction:t.tableRowActionHandler}}),i("div",{staticClass:"spacer large"})],1)])])])])},Te=[],we={name:"ListDatabaseItems",mixins:[qt,zt,p],data:function(){return{hasData:!1,databaseID:this.checkURLParamsID(),databaseName:"",databasePhysicalPath:"",itemList:[],pageSize:10,pageNumber:1,sortedKeyword:"",sortedBy:"asc",searchKeyword:"",continueDeletion:!1,is_enabled:"true",customization_url:"/api/customizations",tableHeader:null,tableHeaderName:null}},methods:{goToAddNewDatabaseItem:function(t){InsitesUtil.renderPage("Add New Item","#/add-database-item/".concat(this.checkURLParamsID())),this.$router.push("/add-database-item/".concat(this.checkURLParamsID()))},goToManageDatabaseItem:function(t,e){InsitesUtil.renderPage("".concat(e," Page"),"#/edit-database-item/".concat(t.id)),this.$router.push("/edit-database-item/".concat(t.id))},goToImportDatabase:function(t){InsitesUtil.renderPage("Import Data","#/import-data/".concat(this.checkURLParamsID())),this.$router.push("/import-data/".concat(this.checkURLParamsID()))},goToEditDatabase:function(t,e){InsitesUtil.renderPage("Edit ".concat(this.capitalize(this.databaseName)),"#/edit-database/".concat(this.checkURLParamsID())),this.$router.push("/edit-database/".concat(this.checkURLParamsID()))},getDBName:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:if(i=t.sent,!i.state){t.next=17;break}if(!i.results.items.results.length){t.next=14;break}return i=i.results.items.results[0],s=this.convertToCustomizationName(i.physical_file_path),t.next=9,tt(s,this.pageNumber,this.pageSize);case 9:a=t.sent,this.setupInsBaseTable(),a.results.items.results.length?this.updateTableData(a.results.items):(this.itemList=[],this.hasData=!1),t.next=15;break;case 14:this.invalidParamIDHandler("database");case 15:t.next=18;break;case 17:this.invalidParamIDHandler("database");case 18:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),fetchDatabaseItemsList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.hasData=!0,this.setInsBaseTableLoader("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),t.next=4,this.getDBName(this.checkURLParamsID());case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),deleteItem:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e,i){var s,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=this.buildFormData(this.getName(e.name)),t.next=3,kt(s).then(function(t){a.deleteSuccessHandler(t,i)}).catch(function(t){a.deleteErrorHandler(t)});case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(e,i){return t.apply(this,arguments)}return e}(),deleteSuccessHandler:function(t,e){toastIt("success","".concat(e," been deleted."),InsitesUtil.ops()),this.getDatabaseList()},deleteErrorHandler:function(t){console.error("Delete item Error: ",t),toastIt("error","Failed to delete item. Please try again.",InsitesUtil.ops())},bulkDeleteHandler:function(t){var e=this,i=0;t.forEach(function(s){e.continueDeletion&&(e.deleteItem(s.rawData,"The selected items have"),i++,t.length===i&&(e.continueDeletion=!1,e.is_enabled=!0))})},archiveItem:function(t){var e=this;swal({title:"",html:'\n\t\t\t\t\t<ins-loader\n\t\t\t\t\t\tstate-icon="warning"\n\t\t\t\t\t\ticon-color="warning"\n\t\t\t\t\t\tstate-message="Are you sure you want to delete this item?">\n\t\t\t\t\t</ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(i){i.value&&e.deleteItem(t.rawData,"item has")})},archiveSelection:function(t){var e=this;swal({title:"",html:'\n\t\t\t\t\t<ins-loader\n\t\t\t\t\t\tstate-icon="warning"\n\t\t\t\t\t\ticon-color="warning"\n\t\t\t\t\t\tstate-message="Are you sure you want to delete these items?">\n\t\t\t\t\t</ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(i){i.value&&(e.continueDeletion=!0,e.bulkDeleteHandler(t))})},updateTableData:function(t){var e=t;this.$refs.insBaseTable.totalCount=e.total_entries,this.$refs.insBaseTable.tableData=e.results.map(this.constructTableData),this.$refs.insBaseTable.loadingScreen=!1,this.hasData=!0},getTableHeader:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K(this.checkURLParamsID());case 2:if(e=t.sent,e.state)if(e=e.results.items.results,e.length)for(i in this.databaseName=e[0].name,this.databasePhysicalPath=e[0].physical_file_path,this.setBreadCrumbs(),e=e[0].database_fields,e)e[i].metadata.is_header||(e[i].metadata={}),"true"!==e[i].metadata.is_header&&!0!==e[i].metadata.is_header||(e[i].metadata.label?this.tableHeader=e[i].metadata.label:this.tableHeader=e[i].name,this.tableHeaderName=e[i].name);else this.invalidParamIDHandler("database");else this.invalidParamIDHandler("database");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),constructTableData:function(t){var e={rawData:t,id:t.id,ID:t.id,"Created Date":InsitesUtil.formatLocalisation(t.created_date)};return this.tableHeaderName&&(e[this.tableHeader]=t.properties[this.tableHeaderName]),e},setupInsBaseTable:function(){this.$refs.insBaseTable.bulkActions=["Delete"],this.$refs.insBaseTable.rowActions=["Edit","Delete"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("ID","string",!0),this.constructTableHeader("Created Date","string",!0)],this.tableHeader&&this.$refs.insBaseTable.tableHeaders.splice(1,0,this.constructTableHeader(this.tableHeader,"string",!0))},tableSortHandler:function(t){var e="";switch(t.detail.keyword){case"ID":e="id";break;case"Created Date":e="created_at";break;default:e="properties.".concat(this.tableHeaderName)}this.sortedKeyword=e,this.sortedBy=t.detail.order,this.searchDatabase()},tablePaginationHandler:function(t){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=t.detail.pageSize,this.pageNumber=t.detail.pageNumber,this.fetchDatabaseItemsList()},tableSearchHandler:function(t){13===t.detail.keyCode&&""!==t.detail.value?(this.searchKeyword=t.detail.value,this.pageNumber=1,this.$refs.insBaseTable.pageNumber=1,this.searchDatabase()):""===t.detail.value&&""!==this.searchKeyword&&this.fetchDatabaseItemsList()},searchDatabase:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.insBaseTable.loadingScreen=!0,"properties.".concat(this.tableHeaderName),!this.tableHeader){t.next=8;break}return t.next=5,Dt(this.convertToCustomizationName(this.databasePhysicalPath),this.pageNumber,this.pageSize,this.sortedKeyword,this.sortedBy,this.sortedKeyword,this.searchKeyword);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,wt(this.convertToCustomizationName(this.databasePhysicalPath),this.pageNumber,this.pageSize,this.sortedKeyword,this.sortedBy,this.searchKeyword);case 10:t.t0=t.sent;case 11:e=t.t0,this.setupInsBaseTable(),e.state?e.results.items.results.length?this.updateTableData(e.results.items):(this.itemList=[],this.hasData=!1):(console.log("Error search item",e.results),toastIt("error","Failed to search item. Please try again.",InsitesUtil.ops()));case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),tableBulkActionHandler:function(t){switch(t.detail.action){case"Delete":this.archiveSelection(t.detail.selections);break}},tableRowActionHandler:function(t){var e=t.detail.data,i=t.detail.action;switch(t.detail.action){case"Delete":this.archiveItem(t.detail.data);break;case"Edit":this.goToManageDatabaseItem(e,i);break}},setInsBaseTableLoader:function(t,e,i){this.$refs.insBaseTable.loadingScreen=!0,this.$refs.insBaseTable.loaderTitle=t,this.$refs.insBaseTable.loaderMessage=e,this.$refs.insBaseTable.loaderIcon=i},setBreadCrumbs:function(){var t=[];t=[ve,ye,{link:"#".concat(this.$route.path),app:!1,withSubmenu:!1,label:"".concat(this.databaseName)}],InsitesUtil.setBreadCrumbs(t)}},mounted:function(){this.getTableHeader(),this.fetchDatabaseItemsList()}},Re=we,Se=Object(E["a"])(Re,De,Te,!1,null,null,null),Ie=Se.exports,Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-container-full pages"},[i("div",{staticClass:"grid-x",attrs:{id:"databaseItem"}},[t.showPage?i("div",{staticClass:"large-9 medium-12 small-12 cell"},[i("form",{attrs:{id:"dbItemForm",novalidate:"",onsubmit:"event.preventDefault()"}},[t.databaseFields.length?i("ins-card",{staticClass:"height-auto",attrs:{steady:""}},[i("div",{staticClass:"grid-x"},[i("div",{staticClass:"large-9 medium-9 small-12 cell"},[i("h2",{staticClass:"h2desc"},[t._v("Details")])]),i("div",{staticClass:"large-3 medium-3 small-12 cell padding-right--small"})]),t._l(t.databaseFields,function(e){return i("DynamicFields",{key:e.id,attrs:{name:e.name,label:t.objectHas(e.metadata,"label")?t.objectHas(e.metadata,"label"):e.name,is_required:t.objectHas(e.metadata,"is_required"),weight:t.objectHas(e.metadata,"weight"),values:t.objectHas(e.metadata,"values"),type:t.objectHas(e.metadata,"type")?t.objectHas(e.metadata,"type"):e.attribute_type,data:t.pageElementData[0]},on:{checkboxInputChange:t.listCheckBoxHandler,radioInputChange:t.listRadioHandler,dateInputChange:t.dateInputHandler}})})],2):t._e(),i("div",{staticClass:"spacer"}),t.showPage&&t.fieldGroups.length?i("div",{ref:"item-field-groups",staticClass:"grouped-fields"},t._l(t.fieldGroups,function(e,s){return i("div",{key:e.id,staticClass:"group-card"},[i("ins-card",{staticClass:"height-auto",attrs:{steady:""}},[i("h2",{staticClass:"h2desc"},[t._v(t._s(e.field_label))]),t._l(e.fields,function(e){return i("DynamicFields",{key:e.id,attrs:{name:e.name,label:t.objectHas(e.metadata,"label")?t.objectHas(e.metadata,"label"):e.name,is_required:t.objectHas(e.metadata,"is_required").toString(),weight:t.objectHas(e.metadata,"weight"),values:t.objectHas(e.metadata,"values"),type:t.objectHas(e.metadata,"type")?t.objectHas(e.metadata,"type"):e.attribute_type,data:t.pageElementData[0]},on:{checkboxInputChange:t.listCheckBoxHandler,radioInputChange:t.listRadioHandler,dateInputChange:t.dateInputHandler}})})],2),s!==t.fieldGroups.length-1?i("div",{staticClass:"spacer"}):t._e()],1)}),0):t._e(),i("div",{staticClass:"grid-x grid-padding-y"},[i("div",{staticClass:"large-4 medium-5 small-12 cell footer-btn-container"},["Add"!==t.formType?i("ins-button",{attrs:{disabled:t.bindingValues,color:"negative",label:"Delete"},on:{onClickInsButton:t.archiveItem}}):t._e()],1),i("div",{staticClass:"large-4 large-offset-4 medium-5 medium-offset-2 small-12 cell text-right footer-btn-container"},[i("ins-button",{attrs:{outlined:"",color:"blue",label:"Cancel",disabled:t.bindingValues},on:{onClickInsButton:t.goBackHandler}}),i("ins-button",{attrs:{solid:"",color:"blue",label:t.formType,disabled:t.bindingValues},on:{onClickInsButton:t.submitFormHandler}}),"Add"==t.formType?i("ins-button",{attrs:{type:"button",label:"Save and Add Another",color:"blue",solid:"true",size:"normal",disabled:t.bindingValues},on:{onClickInsButton:function(e){return t.saveAddMore()}}}):t._e()],1)])],1)]):i("div",{staticClass:"large-9 medium-12 small-12 cell"},[i("ins-card",{attrs:{steady:""}},[i("div",{staticClass:"height-full vertical-align-middle"},[i("ins-loader",{attrs:{"state-title":"Processing","state-message":"Please wait, we're already processing your data.","state-icon":"processing"}})],1)])],1)])])},Ae=[],Be=(i("6762"),i("2fdb"),i("55dd"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-x"},["text"===t.type||"string"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsInputWrap",{attrs:{field:"text",placeholder:t.label,label:""+("true"===t.is_required?t.label+"*":t.label),required:t.is_required,errorMessage:t.label+" is required."},nativeOn:{keyup:function(e){return t.validateInput(e)}},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):"number"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsInputWrap",{attrs:{field:"number",label:""+("true"===t.is_required?t.label+"*":t.label),required:t.is_required,errorMessage:t.label+" is required."},nativeOn:{keyup:function(e){return t.validateInput(e)}},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):"decimal"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsInputWrap",{attrs:{field:"number",label:""+("true"===t.is_required?t.label+"*":t.label),required:t.is_required,errorMessage:t.label+" is required."},nativeOn:{keyup:function(e){return t.validateInput(e)}},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):"list_select"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsSelectWrap",{staticClass:"large-12 medium-12 small-12 cell",attrs:{placeholder:"- Select -",label:""+("true"===t.is_required?t.label+"*":t.label),required:"true"===t.is_required,errorMessage:t.label+" is required.",searchable:""},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}},t._l(t.values,function(t){return i("ins-select-option",{key:t,attrs:{label:t,value:t}})}),1)],1):"list_checkbox"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("div",{class:"ins-checkbox-group-wrapper"+("true"===t.is_required?" required":""),attrs:{"group-name":t.name}},[i("label",[t._v(t._s("true"===t.is_required?t.label+"*":t.label))]),t._l(t.values,function(e,s){return i("InsCheckboxWrap",{key:s,attrs:{name:t.name,label:e,value:e,required:"true"===t.is_required,checked:t.checkListValue(e)},on:{input:t.listCheckboxHandler}})}),i("div",{staticClass:"ins-form-error"},[t._v(t._s(t.label)+" is required.")])],2)]):"list_radio"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("div",{class:"ins-radio-group-wrapper"+("true"===t.is_required?" required":""),attrs:{"group-name":t.name}},[i("label",[t._v(t._s("true"===t.is_required?t.label+"*":t.label))]),t._l(t.values,function(e,s){return i("InsRadioWrap",{key:s,attrs:{name:t.name,label:e,required:"true"===t.is_required,checked:e===t.data.properties[t.name]},on:{event:t.listRadioHandler},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})}),i("div",{staticClass:"ins-form-error"},[t._v(t._s(t.label)+" is required.")])],2)]):"toggle"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsToggleWrap",{staticClass:"text-left",attrs:{label:t.label,name:t.name},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):"date"===t.type?i("div",{staticClass:"ins-datpicker-wrapper large-12 medium-12 small-12 cell"},[i("InsDatePicker",{attrs:{field:"date",dateFormat:"MM/DD/YYYY",label:""+("true"===t.is_required?t.label+"*":t.label),name:t.name,required:"true"===t.is_required,errorMessage:t.label+" is required."},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):"link"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("div",{staticClass:"link-wrap"},[i("InsInputWrap",{attrs:{field:"link",icon:"icon-link",placeholder:t.label,label:""+("true"===t.is_required?t.label+"*":t.label),errorMessage:t.label+" is required."},nativeOn:{keyup:function(e){return t.validateInput(e)}},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1)]):"multi_line"===t.type?i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsTextareaWrap",{attrs:{field:"text",placeholder:t.label,label:""+("true"===t.is_required?t.label+"*":t.label),required:"true"===t.is_required?"true":"false",errorMessage:t.label+" is required."},nativeOn:{keyup:function(e){return t.validateInput(e)}},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1):i("div",{staticClass:"large-12 medium-12 small-12 cell"},[i("InsInputWrap",{attrs:{field:"text",placeholder:t.label,label:""+("true"===t.is_required?t.label+"*":t.label),required:t.is_required,errorMessage:t.label+" is required."},on:{input:t.validateInput},model:{value:t.data.properties[t.name],callback:function(e){t.$set(t.data.properties,t.name,e)},expression:"data.properties[name]"}})],1)])}),Ne=[],Pe=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-textarea",{attrs:{label:t.label,value:t.value,placeholder:t.placeholder,name:t.name,disabled:t.disabled,readonly:t.readonly,required:t.required,maxlength:t.maxlength,"error-message":t.errorMessage,"has-error":t.hasError},on:{valueChange:t.onValueChange}})}),Fe=[],Me={name:"InsTextareaWrap",props:{label:String,value:String,placeholder:String,name:String,errorMessage:String,maxlength:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String},methods:{onValueChange:function(t){this.$emit("input",t.detail)}}},Le=Me,je=(i("ff8a"),Object(E["a"])(Le,Pe,Fe,!1,null,null,null)),He=je.exports,Ue=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-radio",{ref:"insRadioEl",attrs:{label:t.label,name:t.name,checked:t.is_checked},on:{onSelect:t.onSelectChange}})},We=[],qe={name:"InsRadioWrap",props:{label:String,name:String,value:String,disabled:Boolean,checked:Boolean},data:function(){return{is_checked:!1}},methods:{onSelectChange:function(t){this.is_checked=t.detail.checked,this.$emit("input",this.label),this.$emit("event",t.detail)}},mounted:function(){this.is_checked=this.checked}},ze=qe,Ke=Object(E["a"])(ze,Ue,We,!1,null,null,null),Ve=Ke.exports,Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-checkbox",{ref:"insCheckboxEl",attrs:{label:t.label,name:t.name,value:t.value,checked:t.is_checked},on:{onCheckInsCheckbox:t.onSelectChange}})},Ye=[],Je={name:"InsCheckboxWrap",props:{label:String,name:String,value:String,disabled:Boolean,checked:Boolean},data:function(){return{is_checked:!1}},methods:{onSelectChange:function(t){this.is_checked=t.detail.checked,this.$emit("input",t.detail)}},mounted:function(){this.is_checked=this.checked}},Xe=Je,Qe=Object(E["a"])(Xe,Ge,Ye,!1,null,null,null),Ze=Qe.exports,ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ins-datepicker",{ref:"insDatePickerEl",attrs:{label:t.label,name:t.name,min:t.min,max:t.max,value:t.value,required:t.required,"has-error":t.hasError,"error-message":t.errorMessage},on:{onDateChange:t.onDateChange}})},ei=[],ii={name:"InsDatePicker",props:{label:String,name:String,disabled:Boolean,min:String,max:String,value:String,required:Boolean,dateFormat:String,hasError:Boolean,errorMessage:String},methods:{onDateChange:function(t){this.validateDate(t.detail.value),this.$emit("input",t.detail.value)},formatDate:function(t){if(t||""!==t)return moment(t).format("MM/DD/YYYY")},validateDate:function(t){!0===this.required&&""===t?this.toggleError(!0,"".concat(this.name," is required.")):this.validateFormat(t)},validateFormat:function(t){var e=/^\d{2}\/\d{2}\/\d{4}$/;e.test(t)&&"invalid date"!==this.formatDate(t).toLowerCase()?(this.toggleError(!1,"".concat(this.name," is required.")),this.$emit("input",t)):this.toggleError(!0,"Invalid date format. (".concat(this.dateFormat,")")),!0!==this.required&&""===t&&this.toggleError(!1,"".concat(this.name," is required."))},toggleError:function(t,e){this.$refs.insDatePickerEl.hasError=!!t,this.$refs.insDatePickerEl.errorMessage=e,this.$emit("fieldError",{error:!!t,target:this})}}},si=ii,ai=Object(E["a"])(si,ti,ei,!1,null,null,null),ni=ai.exports,ri={name:"DynamicFields",components:{InsInputWrap:H,InsSelectWrap:ue,InsTextareaWrap:He,InsToggleWrap:re,InsRadioWrap:Ve,InsCheckboxWrap:Ze,InsDatePicker:ni},mixins:[p],props:{value:[String,Boolean,Number,Array],values:Array,data:Object,name:String,label:String,type:[Boolean,String],is_required:[String],weight:[Number,Boolean]},methods:{listCheckboxHandler:function(t){this.$emit("checkboxInputChange",t)},listRadioHandler:function(t){this.$emit("radioInputChange",t)},validateInput:function(t){"true"===this.is_required&&(t=t.target?t.target:t,""===t.value.trim()?InsitesUtil.invalidFieldNotif(t):InsitesUtil.validFieldNotif(t))},checkListValue:function(t){if(t){var e=this.data.properties[this.name];return!!(this.data.properties[this.name]&&this.data.properties[this.name]&&(e=e.split(","),e.includes(t)))}return!1}}},oi=ri,li=Object(E["a"])(oi,Be,Ne,!1,null,null,null),di=li.exports,ci={name:"ManageDatabaseItemDetails",components:{InsToggleWrap:re,DynamicFields:di},mixins:[p,zt,qt],data:function(){return{itemID:"",databaseID:"",datatabaseName:"",storedDatabaseFields:{},databaseFields:[],pageElementData:[],fieldGroups:[],ungroupedFields:[],showPage:!1,size:100,current_page:1,total_pages:1,formType:"Add",bindingValues:!1,addMore:!1}},methods:{goBackHandler:function(){InsitesUtil.goBack()},saveAddMore:function(){this.addMore=!0,this.submitFormHandler()},dateInputHandler:function(t){},listCheckBoxHandler:function(t){var e=this.pageElementData[0].properties[t.name]&&""!==this.pageElementData[0].properties[t.name].trim()?this.pageElementData[0].properties[t.name].trim().split(","):[];if(e=Object(Wt["uniqBy"])(e),t.checked)e.push(t.value);else e.splice(e.indexOf(t.value),1);this.pageElementData[0].properties[t.name]=e.join(","),this.validateSelectOptions(t.name)},listRadioHandler:function(t){this.validateSelectOptions(t.name)},validateSelectOptions:function(t){var e=document.querySelectorAll(".required[group-name='".concat(t,"']"));""===this.pageElementData[0].properties[t]?e[0].classList.add("is-invalid"):e[0].classList.remove("is-invalid")},archiveItem:function(){var t=this;swal({title:"",html:'\n        <ins-loader\n          state-icon="warning"\n          icon-color="warning"\n          state-message="Are you sure you want to delete this item?">\n        </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(e){e.value&&(t.bindingValues=!0,t.deleteItem("Item has been deleted."))})},deleteItem:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=this.buildFormData(this.pageElementData[0],this.itemID),t.next=3,kt(i).then(function(t){s.successHandler(t,e)}).catch(function(t){s.errorHandler(t,"delete")});case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),submitFormHandler:function(){this.bindingValues=!0;var t=document.getElementById("databaseItem"),e=te()($(t).find(".ins-datepicker__date, .ins-checkbox-group-wrapper.required, .ins-radio-group-wrapper.required, .ins-form-field, ins-select, .ins-textarea-field"));InsitesUtil.formValidate(e)?"Add"===this.formType?this.createItemHandler():this.updateItemHandler():(this.addMore=!1,this.bindingValues=!1,this.submittingForm=!1)},createItemHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.buildFormData(this.pageElementData[0],this.itemID),t.next=3,yt(e).then(function(t){i.successHandler(t,"Item has been updated.")}).catch(function(t){i.errorHandler(t,"create")});case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateItemHandler:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.buildFormData(this.pageElementData[0],this.itemID),t.next=3,Et(e).then(function(t){i.successHandler(t,"Item has been updated.")}).catch(function(t){i.errorHandler(t,"update")});case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updatePageElementData:function(t){var e=this,i=function(i){var s=Object(Wt["find"])(e.storedDatabaseFields.database_fields,function(t){return t.name===i});switch(s.attribute_type){case"date":var a=moment(t.properties[i],"MM/DD/YYYY").format("YYYY-MM-DD");t.properties[i]="Invalid date"!==a?a:t.properties[i];break;case"string":t.properties[i]=t.properties[i];break;default:t.properties[i]=I()(t.properties[i])}};for(var s in t.properties)i(s);return t},successHandler:function(t,e){toastIt("success","".concat(e),InsitesUtil.ops()),document.getElementById("dbItemForm").reset(),this.bindingValues=!1,this.preSetFormData(),!this.addMore&&InsitesUtil.goBack(),this.addMore=!1},errorHandler:function(t,e){console.error("Form submit error: ",t),toastIt("error","Failed to ".concat(e," item. Please try again."),InsitesUtil.ops()),this.bindingValues=!1,this.addMore=!1},preSetFormData:function(){var t={};this.storedDatabaseFields.database_fields.forEach(function(e){var i=e.metadata?e.metadata.type:e.attribute_type.toLowerCase();t[e.name]="toggle"===i||"boolean"===i?"true":""}),this.pageElementData=[{name:this.convertToCustomizationName(this.storedDatabaseFields.physical_file_path),properties:t}]},renderPage:function(){"Add"===this.formType&&this.preSetFormData(),this.showPage=!0},assignToFieldGroup:function(){var t=this.databaseFields;this.fieldGroups.forEach(function(e){e["fields"]=[],e["fields"]=Object(Wt["remove"])(t,function(t){if(t.metadata&&t.metadata.group_id&&e.id===t.metadata.group_id)return t})}),this.sortGroupFields(),console.log("groups",this.fieldGroups),console.log("data",this.pageElementData),this.renderPage()},sortGroupFields:function(){for(var t in this.setDefaultGroupFieldsWeight(),this.fieldGroups){var e=this.fieldGroups[t].fields;e=Object(Wt["sortBy"])(e,function(t){return t.metadata.weight}),this.fieldGroups[t].fields=e}},setDefaultGroupFieldsWeight:function(){for(var t in this.fieldGroups)for(var e in this.fieldGroups[t].fields)this.fieldGroups[t].fields[e].metadata||(this.fieldGroups[t].fields[e].metadata={}),"number"!==typeof this.fieldGroups[t].fields[e].metadata.weight&&(this.fieldGroups[t].fields[e].metadata.weight=0)},getFieldMetadata:function(t){var e=null;return this.databaseFields.forEach(function(i){t===i.name&&(e=i.metadata)}),e},fetchDatabaseItemFieldValue:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it(this.itemID);case 2:if(e=t.sent,!e.state){t.next=16;break}if(!e.results.items.results.length){t.next=13;break}return i=JSON.parse(I()(e.results.items.results)),this.pageElementData=i,t.next=9,this.fetchDatabaseFields();case 9:for(s=0;s<i.length;s++)i[s]=this.updatePageElementData(i[s]);this.pageElementData=i,t.next=14;break;case 13:this.invalidParamIDHandler("item");case 14:t.next=17;break;case 16:this.invalidParamIDHandler("item");case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetchDatabaseFields:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.databaseID){t.next=6;break}return t.next=3,K(this.databaseID);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,G(this.pageElementData[0].name);case 8:t.t0=t.sent;case 9:e=t.t0,e.state&&e.results.items.results.length?(i=JSON.parse(I()(e.results.items.results[0].database_fields)),this.storedDatabaseFields=JSON.parse(I()(e.results.items.results[0])),i.metadata&&i.metadata.weight&&i.sort(this.dynamicSort("weight","metadata","asc")),this.databaseFields=i,this.setBreadCrumbs(),this.setFieldGroups()):this.noDatabaseErrorHandler();case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setFieldGroups:function(){var t=this,e=0;this.databaseFields.forEach(function(){var i=Object(u["a"])(regeneratorRuntime.mark(function i(s){return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(!s.metadata){i.next=4;break}if(!s.metadata.group_id){i.next=4;break}return i.next=4,t.checkGroupField(s.metadata.group_id);case 4:e++,e===t.databaseFields.length&&t.assignToFieldGroup();case 6:case"end":return i.stop()}},i)}));return function(t){return i.apply(this,arguments)}}())},checkGroupField:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:i=t.sent,i.results.items.results&&("localhost"===window.location.hostname?this.updateFieldGroups(Object(Wt["find"])(i.results.items.results,function(t){return t.id===e})):this.updateFieldGroups(i.results.items.results[0]));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),updateFieldGroups:function(t){t&&this.fieldGroups.push(t),this.fieldGroups=Object(Wt["flattenDeep"])(this.fieldGroups);var e=Object(Wt["uniqBy"])(this.fieldGroups,"id");e=Object(Wt["sortBy"])(e,function(t){return t.field_label}),this.fieldGroups=e},setBreadCrumbs:function(){var t=[];t=[ve,ye],t.push({link:"#/list-database-items/".concat(this.storedDatabaseFields.id),app:!1,withSubmenu:!1,label:"".concat(this.storedDatabaseFields.name)}),"Update"===this.formType?t.push({label:"Item Details",link:"#".concat(this.$route.path),withSubmenu:!1,app:!1}):t.push({label:"Add New Item",link:"#".concat(this.$route.path),withSubmenu:!1,app:!1}),InsitesUtil.setBreadCrumbs(t)},setFormConfiguration:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.path.includes("/add-database-item")){t.next=6;break}this.formType="Add",this.checkURLParamsID()?this.databaseID=this.checkURLParamsID():this.invalidParamIDHandler("database"),this.fetchDatabaseFields(),t.next=14;break;case 6:if(this.formType="Update",!this.checkURLParamsID()){t.next=13;break}return this.itemID=this.checkURLParamsID(),t.next=11,this.fetchDatabaseItemFieldValue();case 11:t.next=14;break;case 13:this.invalidParamIDHandler("item");case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.setFormConfiguration()}},hi=ci,ui=(i("eb5e"),Object(E["a"])(hi,Oe,Ae,!1,null,null,null)),pi=ui.exports,mi=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},fi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"importDataContainer"}},[i("h5",[t._v("Coming Soon")])])}],_i={name:"ImportData",data:function(){return{}},methods:{},mounted:function(){}},gi=_i,bi=Object(E["a"])(gi,mi,fi,!1,null,null,null),vi=bi.exports;a["a"].use(n["a"]);var yi=new n["a"]({routes:[{path:"/field-groups",name:"FieldGroups",component:Mt},{path:"/database",name:"ListDatabase",component:Jt},{path:"/manage-database",name:"ManageDatabase",component:xe},{path:"/edit-database/:id?",name:"EditDatabase",component:xe},{path:"/list-database-items/:id?",name:"ListDatabaseItems",component:Ie},{path:"/add-database-item/:id?",name:"ManageDatabaseItemDetails",component:pi},{path:"/edit-database-item/:id?",name:"EditDatabaseItemDetails",component:pi},{path:"/import-data/:id?",name:"ImportData",component:vi}]}),Ci={state:{fieldGroups:[],databaseFormData:{}},mutations:{updateDatabaseFieldGroups:function(t,e){t.fieldGroups={},t.fieldGroups=e},updateDatabaseFormData:function(t,e){t.databaseFormData={},t.databaseFormData=e},resetDatabaseFormData:function(t){t.databaseFormData={}}}},Ei=Ci,$i={state:{redactor_doctype_html:"",redactor_html:"",redactor_body:"",redactor_style:"",redactor_body_tag:"",redactor_head:""},mutations:{updateRedactorDoctypeHTML:function(t,e){t.redactor_doctype_html="",t.redactor_doctype_html=e},updateRedactorHTML:function(t,e){t.redactor_html="",t.redactor_html=e},updateRedactorBody:function(t,e){t.redactor_body="",t.redactor_body=e},updateRedactorStyle:function(t,e){t.redactor_style="",t.redactor_style=e},updateRedactorBodyTag:function(t,e){t.redactor_body_tag="",t.redactor_body_tag=e},updateRedactorHead:function(t,e){t.redactor_head="",t.redactor_head=e}}},ki=$i;a["a"].use(Bt["a"]);var xi=new Bt["a"].Store({modules:{RedactorStore:ki,DatabaseStore:Ei}}),Di=["ins-card","ins-filter","ins-filter-item","ins-datepicker","ins-sparkline","ins-line-chart","ins-searchbar","ins-table","ins-tr","ins-th","ins-th-checkbox","ins-td","ins-td-checkbox","ins-checkbox","ins-action","ins-action-item","ins-loader","ins-button","ins-dropdown","ins-bar-chart","ins-radio","ins-toggle-switch","ins-input","ins-base-table","ins-base-table-row","ins-base-table-th","ins-base-table-td","ins-input-tel","ins-select","ins-select-option","ins-textarea","ins-image-picker","ins-backdrop","ins-heading"];a["a"].use(n["a"]),a["a"].use(d.a,o.a),a["a"].config.productionTip=!1,a["a"].config.ignoredElements=Object(s["a"])(Di),new a["a"]({router:yi,store:xi,render:function(t){return t(x)}}).$mount("#insites-database")},"589e":function(t,e,i){},"6c4e":function(t,e,i){},"8a95":function(t,e,i){},"913c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b54a"),core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("795b"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e814"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4504"),core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b9a1"),core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a745"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("386d"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("59ad"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("a4bb"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16__),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7618");!function(){var Ajax={settings:{},post:function(t){return new AjaxRequest("post",t)},get:function(t){return new AjaxRequest("get",t)}},AjaxRequest=function(t,e){var i={method:t,url:"",before:function(){},success:function(){},error:function(){},data:!1,async:!0,headers:{}};this.p=this.extend(i,e),this.p=this.extend(this.p,Ajax.settings),this.p.method=this.p.method.toUpperCase(),this.prepareData(),this.xhr=new XMLHttpRequest,this.xhr.open(this.p.method,this.p.url,this.p.async),this.setHeaders();var s="function"!=typeof this.p.before||this.p.before(this.xhr);!1!==s&&this.send()};AjaxRequest.prototype={extend:function(t,e){if(e)for(var i in e)t[i]=e[i];return t},prepareData:function(){"POST"!==this.p.method||this.isFormData()||(this.p.headers["Content-Type"]="application/x-www-form-urlencoded"),"object"!=Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.p.data)||this.isFormData()||(this.p.data=this.toParams(this.p.data)),"GET"===this.p.method&&(this.p.url=this.p.data?this.p.url+"?"+this.p.data:this.p.url)},setHeaders:function(){for(var t in this.xhr.setRequestHeader("X-Requested-With",this.p.headers["X-Requested-With"]||"XMLHttpRequest"),this.p.headers)this.xhr.setRequestHeader(t,this.p.headers[t])},isFormData:function(){return"undefined"!=typeof window.FormData&&this.p.data instanceof window.FormData},isComplete:function(){return!(this.xhr.status<200||this.xhr.status>=300&&304!==this.xhr.status)},send:function(){this.p.async?(this.xhr.onload=this.loaded.bind(this),this.xhr.send(this.p.data)):(this.xhr.send(this.p.data),this.loaded.call(this))},loaded:function(){if(this.isComplete()){var t=this.xhr.response,e=this.parseJson(t);t=e||t,"function"==typeof this.p.success&&this.p.success(t,this.xhr)}else"function"==typeof this.p.error&&this.p.error(this.xhr.statusText)},parseJson:function(t){try{var e=JSON.parse(t);if(e&&"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e))return e}catch(i){}return!1},toParams:function(t){return C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}};var DomCache=[0],DomExpando="data"+ +new Date,DomHClass="is-hidden",DomHMClass="is-hidden-mobile",Dom=function(t,e){return this.parse(t,e)};Dom.ready=function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)},Dom.prototype={get dom(){return!0},get length(){return this.nodes.length},parse:function(t,e){var i,s=/^\s*<(\w+|!)[^>]*>/;if(t){if(t.dom)return this.nodes=t.nodes,t;i="string"!=typeof t?t.nodeType&&11===t.nodeType?t.childNodes:t.nodeType||t===window?[t]:t:s.test(t)?this.create(t):this._query(t,e)}else i=[];this.nodes=this._slice(i)},create:function(t){if(/^<(\w+)\s*\/?>(?:<\/\1>|)$/.test(t))return[document.createElement(RegExp.$1)];var e=[],i=document.createElement("div"),s=i.childNodes;i.innerHTML=t;for(var a=0,n=s.length;n>a;a++)e.push(s[a]);return e},add:function(t){this.nodes=this.nodes.concat(this._toArray(t))},get:function(t){return this.nodes[t||0]||!1},getAll:function(){return this.nodes},eq:function(t){return new Dom(this.nodes[t])},first:function(){return new Dom(this.nodes[0])},last:function(){return new Dom(this.nodes[this.nodes.length-1])},contents:function(){return this.get().childNodes},each:function(t){for(var e=this.nodes.length,i=0;e>i;i++)t.call(this,this.nodes[i].dom?this.nodes[i].get():this.nodes[i],i);return this},is:function(t){return this.filter(t).length>0},filter:function(t){var e;return void 0===t?this:(e="function"==typeof t?t:function(e){return t instanceof Node?t===e:t&&t.dom?-1!==t.nodes.indexOf(e):(e.matches=e.matches||e.msMatchesSelector||e.webkitMatchesSelector,1===e.nodeType&&e.matches(t||"*"))},new Dom(this.nodes.filter(e)))},not:function(t){return this.filter(function(e){return!new Dom(e).is(t||!0)})},find:function(t){var e=[];return this.each(function(i){for(var s=this._query(t||"*",i),a=0;a<s.length;a++)e.push(s[a])}),new Dom(e)},children:function(t){var e=[];return this.each(function(t){if(t.children)for(var i=t.children,s=0;s<i.length;s++)e.push(i[s])}),new Dom(e).filter(t)},parent:function(t){var e=[];return this.each(function(t){t.parentNode&&e.push(t.parentNode)}),new Dom(e).filter(t)},parents:function(t,e){e=this._getContext(e);var i=[];return this.each(function(s){for(var a=s.parentNode;a&&a!==e;)t?new Dom(a).is(t)&&i.push(a):i.push(a),a=a.parentNode}),new Dom(i)},closest:function(t,e){e=this._getContext(e),t=t.dom?t.get():t;var i=[],s=t&&t.nodeType;return this.each(function(a){do{if(s&&a===t||new Dom(a).is(t))return i.push(a)}while((a=a.parentNode)&&a!==e)}),new Dom(i)},next:function(t){return this._getSibling(t,"nextSibling")},nextElement:function(t){return this._getSibling(t,"nextElementSibling")},prev:function(t){return this._getSibling(t,"previousSibling")},prevElement:function(t){return this._getSibling(t,"previousElementSibling")},css:function(t,e){if(void 0===e&&"object"!=Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)){var i=this.get();return"width"===t||"height"===t?i.style?this._getHeightOrWidth(t,i,!1)+"px":void 0:i.style?getComputedStyle(i,null)[t]:void 0}return this.each(function(i){var s={};for(var a in"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)?s=t:s[t]=e,s)i.style&&(i.style[a]=s[a])})},attr:function(t,e,i){if(i=i?"data-":"",void 0===e&&"object"!=Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)){var s=this.get();return s&&3!==s.nodeType?"checked"===t?s.checked:this._getBooleanFromStr(s.getAttribute(i+t)):void 0}return this.each(function(s){var a={};for(var n in"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)?a=t:a[t]=e,a)3!==s.nodeType&&("checked"===n?s.checked=a[n]:s.setAttribute(i+n,a[n]))})},data:function(t,e){if(void 0===t){var i=/^data\-(.+)$/,s=this.get().attributes,a={},n=function(t){return t[1].toUpperCase()};for(var r in s)if(s[r]&&i.test(s[r].nodeName)){var o=s[r].nodeName.match(i)[1],l=s[r].value;o=o.replace(/-([a-z])/g,n),l=this._isObjectString(l)?this._toObject(l):this._isNumber(l)?C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(l):this._getBooleanFromStr(l),a[o]=l}return a}return this.attr(t,e,!0)},val:function(t){if(void 0===t){var e=this.get();return e.type&&"checkbox"===e.type?e.checked:e.value}return this.each(function(e){e.value=t})},removeAttr:function(t){return this.each(function(e){var i=function(t){3!==e.nodeType&&e.removeAttribute(t)};t.split(" ").forEach(i)})},removeData:function(t){return this.each(function(e){var i=function(t){3!==e.nodeType&&e.removeAttribute("data-"+t)};t.split(" ").forEach(i)})},dataset:function(t,e){return this.each(function(i){DomCache[this.dataindex(i)][t]=e})},dataget:function(t){return DomCache[this.dataindex(this.get())][t]},dataindex:function(t){var e=t[DomExpando],i=DomCache.length;return e||(e=t[DomExpando]=i,DomCache[e]={}),e},addClass:function(t){return this._eachClass(t,"add")},removeClass:function(t){return this._eachClass(t,"remove")},toggleClass:function(t){return this._eachClass(t,"toggle")},hasClass:function(t){return this.nodes.some(function(e){return!!e.classList&&e.classList.contains(t)})},empty:function(){return this.each(function(t){t.innerHTML=""})},html:function(t){return void 0===t?this.get().innerHTML||"":this.empty().append(t)},text:function(t){return void 0===t?this.get().textContent||"":this.each(function(e){e.textContent=t})},after:function(t){return this._inject(t,function(t,e){if("string"==typeof t)e.insertAdjacentHTML("afterend",t);else for(var i=t instanceof Node?[t]:this._toArray(t).reverse(),s=0;s<i.length;s++)e.parentNode.insertBefore(i[s],e.nextSibling);return e})},before:function(t){return this._inject(t,function(t,e){if("string"==typeof t)e.insertAdjacentHTML("beforebegin",t);else for(var i=t instanceof Node?[t]:this._toArray(t),s=0;s<i.length;s++)e.parentNode.insertBefore(i[s],e);return e})},append:function(t){return this._inject(t,function(t,e){if("string"==typeof t||"number"==typeof t)e.insertAdjacentHTML("beforeend",t);else for(var i=t instanceof Node?[t]:this._toArray(t),s=0;s<i.length;s++)e.appendChild(i[s]);return e})},prepend:function(t){return this._inject(t,function(t,e){if("string"==typeof t||"number"==typeof t)e.insertAdjacentHTML("afterbegin",t);else for(var i=t instanceof Node?[t]:this._toArray(t).reverse(),s=0;s<i.length;s++)e.insertBefore(i[s],e.firstChild);return e})},wrap:function(t){return this._inject(t,function(t,e){var i="string"==typeof t||"number"==typeof t?this.create(t)[0]:t instanceof Node?t:this._toArray(t)[0];return e.parentNode&&e.parentNode.insertBefore(i,e),i.appendChild(e),new Dom(i)})},unwrap:function(){return this.each(function(t){var e=new Dom(t);return e.replaceWith(e.contents())})},replaceWith:function(t){return this._inject(t,function(t,e){for(var i=document.createDocumentFragment(),s="string"==typeof t||"number"==typeof t?this.create(t):t instanceof Node?[t]:this._toArray(t),a=0;a<s.length;a++)i.appendChild(s[a]);var n=i.childNodes[0];return e.parentNode.replaceChild(i,e),n})},remove:function(){return this.each(function(t){t.parentNode&&t.parentNode.removeChild(t)})},clone:function(t){var e=[];return this.each(function(i){var s=this._clone(i);t&&(s=this._cloneEvents(i,s)),e.push(s)}),new Dom(e)},show:function(){return this.each(function(t){if(t.style&&this._hasDisplayNone(t)){var e,i=t.getAttribute("domTargetShow"),s=!!t.classList&&t.classList.contains(DomHClass),a=!!t.classList&&t.classList.contains(DomHMClass);s?(e=DomHClass,t.classList.remove(DomHClass)):a?(e=DomHMClass,t.classList.remove(DomHMClass)):t.style.display=i||"block",e&&t.setAttribute("domTargetHide",e),t.removeAttribute("domTargetShow")}}.bind(this))},hide:function(){return this.each(function(t){if(t.style&&!this._hasDisplayNone(t)){var e=t.style.display,i=t.getAttribute("domTargetHide");i===DomHClass?t.classList.add(DomHClass):i===DomHMClass?t.classList.add(DomHMClass):("block"!==e&&t.setAttribute("domTargetShow",e),t.style.display="none"),t.removeAttribute("domTargetHide")}})},scrollTop:function(t){var e=this.get(),i=e===window,s=9===e.nodeType,a=s?document.scrollingElement||document.body.parentNode||document.body||document.documentElement:e;return void 0!==t?void(i?window.scrollTo(0,t):a.scrollTop=t):s?"undefined"!=typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0:i?window.pageYOffset:a.scrollTop},offset:function(){return this._getDim("Offset")},position:function(){return this._getDim("Position")},width:function(t,e){return this._getSize("width","Width",t,e)},height:function(t,e){return this._getSize("height","Height",t,e)},outerWidth:function(){return this._getInnerOrOuter("width","outer")},outerHeight:function(){return this._getInnerOrOuter("height","outer")},innerWidth:function(){return this._getInnerOrOuter("width","inner")},innerHeight:function(){return this._getInnerOrOuter("height","inner")},click:function(){return this._triggerEvent("click")},focus:function(){return this._triggerEvent("focus")},trigger:function(t){return this.each(function(e){for(var i=t.split(" "),s=0;s<i.length;s++){var a,n={bubbles:!0,cancelable:!0};try{a=new window.CustomEvent(i[s],n)}catch(r){a=document.createEvent("CustomEvent"),a.initCustomEvent(i[s],!0,!0)}e.dispatchEvent(a)}})},on:function(t,e,i){return this.each(function(s){for(var a=t.split(" "),n=0;n<a.length;n++){var r=this._getEventName(a[n]),o=this._getEventNamespace(a[n]);e=i?this._getOneHandler(e,t):e,s.addEventListener(r,e),s._e=s._e||{},s._e[o]=s._e[o]||{},s._e[o][r]=s._e[o][r]||[],s._e[o][r].push(e)}})},one:function(t,e){return this.on(t,e,!0)},off:function(t,e){var i=function(t,e,i){return t===i},s=function(t,e,i,s){return e===s},a=function(t,e,i,s){return t===i&&e===s},n=function(){return!0};return void 0===t?this.each(function(t){this._offEvent(t,!1,!1,e,n)}):this.each(function(n){for(var r=t.split(" "),o=0;o<r.length;o++){var l=this._getEventName(r[o]),d=this._getEventNamespace(r[o]);"_events"===d?this._offEvent(n,l,d,e,i):l||"_events"===d?this._offEvent(n,l,d,e,a):this._offEvent(n,l,d,e,s)}})},serialize:function(t){for(var e={},i=this.get().elements,s=0;s<i.length;s++){var a=i[s];if((!/(checkbox|radio)/.test(a.type)||a.checked)&&a.name&&!a.disabled&&"file"!==a.type){if("select-multiple"===a.type)for(var n=0;n<a.options.length;n++){var r=a.options[n];r.selected&&(e[a.name]=r.value)}e[a.name]=this._isNumber(a.value)?C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.value):this._getBooleanFromStr(a.value)}}return t?e:this._toParams(e)},ajax:function(t,e){if("undefined"!=typeof AjaxRequest){var i=this.attr("method")||"post",s={url:this.attr("action"),data:this.serialize(),success:t,error:e};return new AjaxRequest(i,s)}},_queryContext:function(t,e){return e=this._getContext(e),3!==e.nodeType&&"function"==typeof e.querySelectorAll?e.querySelectorAll(t):[]},_query:function(t,e){if(e)return this._queryContext(t,e);if(/^[.#]?[\w-]*$/.test(t)){if("#"===t[0]){var i=document.getElementById(t.slice(1));return i?[i]:[]}return"."===t[0]?document.getElementsByClassName(t.slice(1)):document.getElementsByTagName(t)}return document.querySelectorAll(t)},_getContext:function(t){return t="string"==typeof t?document.querySelector(t):t,t&&t.dom?t.get():t||document},_inject:function(t,e){for(var i=this.nodes.length,s=[];i--;){var a="function"==typeof t?t.call(this,this.nodes[i]):t,n=0===i?a:this._clone(a),r=e.call(this,n,this.nodes[i]);r&&(r.dom?s.push(r.get()):s.push(r))}return new Dom(s)},_cloneEvents:function(t,e){var i=t._e;if(i)for(var s in e._e=i,i._events)for(var a=0;a<i._events[s].length;a++)e.addEventListener(s,i._events[s][a]);return e},_clone:function(t){return"undefined"!=typeof t?"string"==typeof t?t:t instanceof Node||t.nodeType?t.cloneNode(!0):"length"in t?[].map.call(this._toArray(t),function(t){return t.cloneNode(!0)}):void 0:void 0},_slice:function(t){return t&&0!==t.length?t.length?[].slice.call(t.nodes||t):[t]:[]},_eachClass:function(t,e){return this.each(function(i){if(t){var s=function(t){i.classList&&i.classList[e](t)};t.split(" ").forEach(s)}})},_triggerEvent:function(t){var e=this.get();return e&&3!==e.nodeType&&e[t](),this},_getOneHandler:function(t,e){var i=this;return function(){t.apply(this,arguments),i.off(e)}},_getEventNamespace:function(t){var e=t.split("."),i=e[1]?e[1]:"_events";return e[2]?i+e[2]:i},_getEventName:function(t){return t.split(".")[0]},_offEvent:function(t,e,i,s,a){for(var n in t._e)for(var r in t._e[n])if(a(r,n,e,i))for(var o=t._e[n][r],l=0;l<o.length;l++)"undefined"!=typeof s&&o[l].toString()!==s.toString()||(t.removeEventListener(r,o[l]),t._e[n][r].splice(l,1),0===t._e[n][r].length&&delete t._e[n][r],0===C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(t._e[n]).length&&delete t._e[n])},_getInnerOrOuter:function(t,e){return this[t](void 0,e)},_getDocSize:function(t,e){var i=t.body,s=t.documentElement;return Math.max(i["scroll"+e],i["offset"+e],s["client"+e],s["scroll"+e],s["offset"+e])},_getSize:function(t,e,i,s){if(void 0===i){var a=this.get();return i=3===a.nodeType?0:9===a.nodeType?this._getDocSize(a,e):a===window?window["inner"+e]:this._getHeightOrWidth(t,a,s||"normal"),Math.round(i)}return this.each(function(e){i=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(i),i+=this._adjustResultHeightOrWidth(t,e,s||"normal"),new Dom(e).css(t,i+"px")}.bind(this))},_getHeightOrWidth:function(t,e,i){if(!e)return 0;var s=t.charAt(0).toUpperCase()+t.slice(1),a=0,n=getComputedStyle(e,null),r=new Dom(e),o=r.parents().filter(function(t){return 1===t.nodeType&&"none"===getComputedStyle(t,null).display&&t});if("none"===n.display&&o.add(e),0!==o.length){var l="visibility: hidden !important; display: block !important;",d=[];o.each(function(t){var e=new Dom(t),i=e.attr("style");null!==i&&d.push(i),e.attr("style",null!==i?i+";"+l:l)}),a=r.get()["offset"+s]-this._adjustResultHeightOrWidth(t,e,i),o.each(function(t,e){var i=new Dom(t);void 0===d[e]?i.removeAttr("style"):i.attr("style",d[e])})}else a=e["offset"+s]-this._adjustResultHeightOrWidth(t,e,i);return a},_adjustResultHeightOrWidth:function(t,e,i){if(!e||!1===i)return 0;var s=0,a=getComputedStyle(e,null),n="border-box"===a.boxSizing;return"height"===t?(("inner"===i||"normal"===i&&n)&&(s+=(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderTopWidth)||0)+(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderBottomWidth)||0)),"outer"===i&&(s-=(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginTop)||0)+(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginBottom)||0))):(("inner"===i||"normal"===i&&n)&&(s+=(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderLeftWidth)||0)+(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderRightWidth)||0)),"outer"===i&&(s-=(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginLeft)||0)+(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginRight)||0))),s},_getDim:function(t){var e=this.get();return 3===e.nodeType?{top:0,left:0}:this["_get"+t](e)},_getPosition:function(t){return{top:t.offsetTop,left:t.offsetLeft}},_getOffset:function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,s=i.documentElement,a=i.defaultView;return{top:e.top+a.pageYOffset-s.clientTop,left:e.left+a.pageXOffset-s.clientLeft}},_getSibling:function(t,e){t=t&&t.dom?t.get():t;var i,s=t&&t.nodeType;return this.each(function(a){for(;a=a[e];)if(s&&a===t||new Dom(a).is(t))return void(i=a)}),new Dom(i)},_toArray:function(t){if(t instanceof NodeList){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e}return void 0===t?[]:t.dom?t.nodes:t},_toParams:function(t){var e="";for(var i in t)e+="&"+this._encodeUri(i)+"="+this._encodeUri(t[i]);return e.replace(/^&/,"")},_toObject:function(t){return new Function("return "+t)()},_encodeUri:function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_isNumber:function(t){return!isNaN(t)&&!isNaN(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(t))},_isObjectString:function(t){return-1!==t.search(/^{/)},_getBooleanFromStr:function(t){return"true"===t||"false"!==t&&t},_hasDisplayNone:function(t){return"none"===t.style.display||"none"===(t.currentStyle?t.currentStyle.display:getComputedStyle(t,null).display)}};var uuid=0,$R=function(t,e){return RedactorApp(t,e,[].slice.call(arguments,2))};$R.app=[],$R.version="3.1.6",$R.options={},$R.modules={},$R.services={},$R.classes={},$R.plugins={},$R.mixins={},$R.modals={},$R.lang={},$R.dom=function(t,e){return new Dom(t,e)},$R.ajax=Ajax,$R.Dom=Dom,$R.keycodes={BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37},$R.env={plugin:"plugins",module:"modules",service:"services",class:"classes",mixin:"mixins"},"undefined"!=typeof jQuery&&function(t){t.fn.redactor=function(t){return RedactorApp(this.toArray(),t,[].slice.call(arguments,1))}}(jQuery);var RedactorApp=function(t,e,i){for(var s,a="redactor",n=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(t)?t:t&&t.nodeType?[t]:document.querySelectorAll(t),r="string"==typeof e||"function"==typeof e,o=[],l=0;l<n.length;l++){var d=n[l],c=$R.dom(d);if(s=c.dataget(a),s||r||(s=new App(d,e,uuid),c.dataset(a,s),$R.app[uuid]=s,uuid++),s&&r){var h,u="destroy"===e;e=u?"stop":e,"function"==typeof e?h=e.apply(s,i):(i.unshift(e),h=s.api.apply(s,i)),void 0!==h&&o.push(h),u&&c.dataset(a,!1)}}return 0===o.length||1===o.length?0===o.length?s:o[0]:o};$R.add=function(t,e,i){if("undefined"!=typeof $R.env[t])if(i.translations&&($R.lang=$R.extend(!0,{},$R.lang,i.translations)),i.modals&&($R.modals=$R.extend(!0,{},$R.modals,i.modals)),"mixin"===t)$R[$R.env[t]][e]=i;else{var s=function(){};if(s.prototype=i,i.mixins)for(var a=0;a<i.mixins.length;a++)$R.inherit(s,$R.mixins[i.mixins[a]]);$R[$R.env[t]][e]=s}},$R.addLang=function(t,e){"undefined"==typeof $R.lang[t]&&($R.lang[t]={}),$R.lang[t]=$R.extend($R.lang[t],e)},$R.create=function(t){var e=t.split("."),i=[].slice.call(arguments,1),s="classes";"undefined"!=typeof $R.env[e[0]]&&(s=$R.env[e[0]],t=e.slice(1).join("."));var a=new $R[s][t];if(a.init){var n=a.init.apply(a,i);return n||a}return a},$R.inherit=function(t,e){var i=function(){};i.prototype=e;var s=new i;for(var a in t.prototype)t.prototype.__lookupGetter__(a)?s.__defineGetter__(a,t.prototype.__lookupGetter__(a)):s[a]=t.prototype[a];return t.prototype=s,t.prototype["super"]=e,t},$R.error=function(t){throw t},$R.extend=function(){var t={},e=!1,i=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);for(var a=function(i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e&&"[object Object]"===Object.prototype.toString.call(i[s])?t[s]=$R.extend(!0,t[s],i[s]):t[s]=i[s])};s>i;i++){var n=arguments[i];a(n)}return t},$R.opts={animation:!0,lang:"en",direction:"ltr",spellcheck:!0,structure:!1,scrollTarget:!1,styles:!0,stylesClass:"redactor-styles",placeholder:!1,source:!0,showSource:!1,inline:!1,breakline:!1,markup:"p",enterKey:!0,clickToEdit:!1,clickToSave:!1,clickToCancel:!1,focus:!1,focusEnd:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:[],callbacks:{},preClass:!1,preSpaces:4,tabindex:!1,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveData:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarContext:!0,air:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,formattingHide:!1,buttons:["html","format","bold","italic","deleted","lists","image","file","link"],buttonsTextLabeled:!1,buttonsAdd:[],buttonsAddFirst:[],buttonsAddAfter:!1,buttonsAddBefore:!1,buttonsHide:[],buttonsHideOnMobile:[],imageUpload:!0,imageUploadParam:"file",imageData:!1,imageEditable:!1,imageCaption:!1,imageLink:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",imageFigure:!1,fileUpload:!1,fileUploadParam:"file",fileData:!1,fileAttachment:!1,uploadData:!1,dragUpload:!0,multipleUpload:!0,clipboardUpload:!0,uploadBase64:!1,linkTarget:!1,linkTitle:!1,linkNewTab:!1,linkNofollow:!1,linkSize:30,linkValidation:!0,cleanOnEnter:!0,cleanInlineOnEnter:!1,paragraphize:!0,removeScript:!0,removeNewLines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},pastePlainText:!1,pasteLinkTarget:!1,pasteImages:!0,pasteLinks:!0,pasteClean:!0,pasteKeepStyle:[],pasteKeepClass:[],pasteKeepAttrs:["td","th"],pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["a","img","br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i","abbr"],activeButtons:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",u:"underline"},activeButtonsAdd:{},activeButtonsObservers:{},autoparse:!0,autoparseStart:!0,autoparsePaste:!0,autoparseLinks:!0,autoparseImages:!0,autoparseVideo:!0,shortcodes:{"p.":{format:"p"},"quote.":{format:"blockquote"},"pre.":{format:"pre"},"h1.":{format:"h1"},"h2.":{format:"h2"},"h3.":{format:"h3"},"h4.":{format:"h4"},"h5.":{format:"h5"},"h6.":{format:"h6"},"*.":{format:"ul"}},shortcodesAdd:!1,shortcuts:{"ctrl+shift+m, meta+shift+m":{api:"module.inline.clearformat"},"ctrl+b, meta+b":{api:"module.inline.format",args:"b"},"ctrl+i, meta+i":{api:"module.inline.format",args:"i"},"ctrl+u, meta+u":{api:"module.inline.format",args:"u"},"ctrl+h, meta+h":{api:"module.inline.format",args:"sup"},"ctrl+l, meta+l":{api:"module.inline.format",args:"sub"},"ctrl+k, meta+k":{api:"module.link.open"},"ctrl+alt+0, meta+alt+0":{api:"module.block.format",args:"p"},"ctrl+alt+1, meta+alt+1":{api:"module.block.format",args:"h1"},"ctrl+alt+2, meta+alt+2":{api:"module.block.format",args:"h2"},"ctrl+alt+3, meta+alt+3":{api:"module.block.format",args:"h3"},"ctrl+alt+4, meta+alt+4":{api:"module.block.format",args:"h4"},"ctrl+alt+5, meta+alt+5":{api:"module.block.format",args:"h5"},"ctrl+alt+6, meta+alt+6":{api:"module.block.format",args:"h6"},"ctrl+shift+7, meta+shift+7":{api:"module.list.toggle",args:"ol"},"ctrl+shift+8, meta+shift+8":{api:"module.list.toggle",args:"ul"}},shortcutsAdd:!1,grammarly:!0,notranslate:!1,bufferLimit:100,emptyHtml:"<p></p>",markerChar:"\ufeff",imageTypes:["image/png","image/jpeg","image/gif"],inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small","abbr"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","table","tbody","thead","tfoot","tr","th","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],regex:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/(http|https)?:\/\/(?:www.|player.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_-]+)?/gi,imageurl:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi},input:!0,zindex:!1,modes:{inline:{pastePlainText:!0,pasteImages:!1,enterKey:!1,toolbar:!1,autoparse:!1,source:!1,showSource:!1,styles:!1,air:!1},original:{styles:!1}}},$R.lang.en={format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline",superscript:"Superscript",subscript:"Subscript","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U","superscript-abbr":"Sup","subscript-abbr":"Sub",lists:"Lists","link-insert":"Insert Link","link-edit":"Edit Link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save",delete:"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line",upload:"Upload","upload-label":"Drop an image file or click to upload","accessibility-help-label":"Rich text editor",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center",undo:"Undo",redo:"Redo"},$R.buttons={html:{title:"HTML",icon:!0,api:"module.source.toggle"},undo:{title:"## undo ##",icon:!0,api:"module.buffer.undo"},redo:{title:"## redo ##",icon:!0,api:"module.buffer.redo"},format:{title:"## format ##",icon:!0,dropdown:{p:{title:"## paragraph ##",api:"module.block.format",args:{tag:"p"}},blockquote:{title:"## quote ##",api:"module.block.format",args:{tag:"blockquote"}},pre:{title:"## code ##",api:"module.block.format",args:{tag:"pre"}},h1:{title:"## heading1 ##",api:"module.block.format",args:{tag:"h1"}},h2:{title:"## heading2 ##",api:"module.block.format",args:{tag:"h2"}},h3:{title:"## heading3 ##",api:"module.block.format",args:{tag:"h3"}},h4:{title:"## heading4 ##",api:"module.block.format",args:{tag:"h4"}},h5:{title:"## heading5 ##",api:"module.block.format",args:{tag:"h5"}},h6:{title:"## heading6 ##",api:"module.block.format",args:{tag:"h6"}}}},bold:{title:"## bold-abbr ##",icon:!0,tooltip:"## bold ##",api:"module.inline.format",args:{tag:"b"}},italic:{title:"## italic-abbr ##",icon:!0,tooltip:"## italic ##",api:"module.inline.format",args:{tag:"i"}},deleted:{title:"## deleted-abbr ##",icon:!0,tooltip:"## deleted ##",api:"module.inline.format",args:{tag:"del"}},underline:{title:"## underline-abbr ##",icon:!0,tooltip:"## underline ##",api:"module.inline.format",args:{tag:"u"}},sup:{title:"## superscript-abbr ##",icon:!0,tooltip:"## superscript ##",api:"module.inline.format",args:{tag:"sup"}},sub:{title:"## subscript-abbr ##",icon:!0,tooltip:"## subscript ##",api:"module.inline.format",args:{tag:"sub"}},lists:{title:"## lists ##",icon:!0,observe:"list",dropdown:{observe:"list",unorderedlist:{title:"&bull; ## unorderedlist ##",api:"module.list.toggle",args:"ul"},orderedlist:{title:"1. ## orderedlist ##",api:"module.list.toggle",args:"ol"},outdent:{title:"< ## outdent ##",api:"module.list.outdent"},indent:{title:"> ## indent ##",api:"module.list.indent"}}},ul:{title:"&bull; ## bulletslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ul"},ol:{title:"1. ## numberslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ol"},outdent:{title:"## outdent ##",icon:!0,api:"module.list.outdent",observe:"list"},indent:{title:"## indent ##",icon:!0,api:"module.list.indent",observe:"list"},image:{title:"## image ##",icon:!0,api:"module.image.open"},file:{title:"## file ##",icon:!0,api:"module.file.open"},link:{title:"## link ##",icon:!0,observe:"link",dropdown:{observe:"link",link:{title:"## link-insert ##",api:"module.link.open"},unlink:{title:"## unlink ##",api:"module.link.unlink"}}},line:{title:"## horizontalrule ##",icon:!0,api:"module.line.insert"}};var App=function(t,e,i){this.module={},this.plugin={},this.instances={},this.started=!1,this.stopped=!1,this.uuid=i,this.rootElement=t,this.rootOpts=e,this.dragInside=!1,this.dragComponentInside=!1,this.keycodes=$R.keycodes,this.namespace="redactor",this.$win=$R.dom(window),this.$doc=$R.dom(document),this.$body=$R.dom("body"),this.editorReadOnly=!1,this.opts=$R.create("service.options",e,t),this.lang=$R.create("service.lang",this),this.buildServices(),this.buildModules(),this.buildPlugins(),this.start()};App.prototype={start:function(){this.stopped=!1,this.broadcast("start"),this.broadcast("startcode"),this.opts.clickToEdit?this.broadcast("startclicktoedit"):(this.broadcast("enable"),this.opts.showSource&&this.broadcast("startcodeshow"),this.broadcast("enablefocus")),this.broadcast("started"),this.started=!0},stop:function(){this.started=!1,this.stopped=!0,this.broadcast("stop"),this.broadcast("disable"),this.broadcast("stopped")},isStarted:function(){return this.started},isStopped:function(){return this.stopped},buildServices:function(){var t=["options","lang"],e=["uuid","keycodes","opts","lang","$win","$doc","$body"],i=[];for(var s in $R.services)-1===t.indexOf(s)&&(this[s]=$R.create("service."+s,this),i.push(s),e.push(s));for(var a=0;a<i.length;a++)for(var n=i[a],r=0;r<e.length;r++){var o=e[r];n!==o&&(this[n][o]=this[o])}},buildModules:function(){for(var t in $R.modules)this.module[t]=$R.create("module."+t,this),this.instances[t]=this.module[t]},buildPlugins:function(){for(var t=this.opts.plugins,e=0;e<t.length;e++){var i=t[e];"undefined"!=typeof $R.plugins[i]&&(this.plugin[i]=$R.create("plugin."+i,this),this.instances[i]=this.plugin[i])}},isDragInside:function(){return this.dragInside},setDragInside:function(t){this.dragInside=t},isDragComponentInside:function(){return this.dragComponentInside},setDragComponentInside:function(t){this.dragComponentInside=t},getDragComponentInside:function(){return this.dragComponentInside},isReadOnly:function(){return this.editorReadOnly},enableReadOnly:function(){this.editorReadOnly=!0,this.broadcast("enablereadonly"),this.component.clearActive(),this.toolbar.disableButtons()},disableReadOnly:function(){this.editorReadOnly=!1,this.broadcast("disablereadonly"),this.toolbar.enableButtons()},callMessageHandler:function(t,e,i){var s=e.split(".");if(1===s.length)"function"==typeof t["on"+e]&&t["on"+e].apply(t,i);else{s[0]="on"+s[0];var a=this.utils.checkProperty(t,s);"function"==typeof a&&a.apply(t,i)}},broadcast:function(t){var e=[].slice.call(arguments,1);for(var i in this.instances)this.callMessageHandler(this.instances[i],t,e);return this.callback.trigger(t,e)},on:function(t,e){this.callback.add(t,e)},off:function(t,e){this.callback.remove(t,e)},api:function(t){if((this.isStarted()||"start"===t)&&(!this.isReadOnly()||"disableReadOnly"===t)){this.broadcast("state");var e=[].slice.call(arguments,1),i=t.split("."),s=1===i.length,a="on"===i[0]||"off"===i[0],n=!a&&2===i.length,r="plugin"===i[0],o="module"===i[0];if(s){if("function"==typeof this[i[0]])return this.callInstanceMethod(this,i[0],e)}else{if(a)return"on"===i[0]?this.on(i[1],e[0]):this.off(i[1],e[0]||void 0);if(n){if(this.isInstanceExists(this,i[0]))return this.callInstanceMethod(this[i[0]],i[1],e);$R.error(new Error('Service "'+i[0]+'" not found'))}else if(r){if(this.isInstanceExists(this.plugin,i[1]))return this.callInstanceMethod(this.plugin[i[1]],i[2],e);$R.error(new Error('Plugin "'+i[1]+'" not found'))}else if(o){if(this.isInstanceExists(this.module,i[1]))return this.callInstanceMethod(this.module[i[1]],i[2],e);$R.error(new Error('Module "'+i[1]+'" not found'))}}}},isInstanceExists:function(t,e){return"undefined"!=typeof t[e]},callInstanceMethod:function(t,e,i){return"function"==typeof t[e]?t[e].apply(t,i):void 0}},$R.add("mixin","formatter",{buildArgs:function(t){this.args={class:t["class"]||!1,style:t.style||!1,attr:t.attr||!1},this.args["class"]||this.args.style||this.args.attr||(this.args=!1)},applyArgs:function(t,e){return this.args?this[this.type](this.args,!1,t,e):this._clearAll(t,e)},clearClass:function(t,e){this.selection.save();var i=e?$R.dom(e):this.getElements(t,!0);return i.removeAttr("class"),e=this._unwrapSpanWithoutAttr(i.getAll()),this.selection.restore(),e},clearStyle:function(t,e){this.selection.save();var i=e?$R.dom(e):this.getElements(t,!0);return i.removeAttr("style"),e=this._unwrapSpanWithoutAttr(i.getAll()),this.selection.restore(),e},clearAttr:function(t,e){this.selection.save();var i=e?$R.dom(e):this.getElements(t,!0);return this._removeAllAttr(i),e=this._unwrapSpanWithoutAttr(i.getAll()),this.selection.restore(),e},set:function(t,e,i,s){!1!==s&&this.selection.save();var a=i?$R.dom(i):this.getElements(e);return t["class"]&&(a.removeAttr("class"),a.addClass(t["class"])),t.style&&(a.removeAttr("style"),a.css(t.style),a.each(function(t){var e=$R.dom(t);e.attr("data-redactor-style-cache",e.attr("style"))})),t.attr&&(this._removeAllAttr(a),a.attr(t.attr)),!1!==s&&this.selection.restore(),a.getAll()},toggle:function(t,e,i,s){!1!==s&&this.selection.save();var a,n=i?$R.dom(i):this.getElements(e);return t["class"]&&(n.toggleClass(t["class"]),n.each(function(t){""===t.className&&t.removeAttribute("class")})),t.style&&(a=t.style,n.each(function(t){var e=$R.dom(t);for(var i in a){var s=a[i],n=e.css(i);n=this.utils.isRgb(n)?this.utils.rgb2hex(n):n.replace(/"/g,""),s=this.utils.isRgb(s)?this.utils.rgb2hex(s):s.replace(/"/g,""),n=this.utils.hex2long(n),s=this.utils.hex2long(s);var r="string"==typeof s?s.toLowerCase():s,o="string"==typeof n?n.toLowerCase():n;r===o?e.css(i,""):e.css(i,s)}this._convertStyleQuotes(e),this.utils.removeEmptyAttr(t,"style")?e.removeAttr("data-redactor-style-cache"):e.attr("data-redactor-style-cache",e.attr("style"))}.bind(this))),t.attr&&(a=t.attr,n.each(function(t){var e=$R.dom(t);for(var i in a)e.attr(i)?e.removeAttr(i):e.attr(i,a[i])})),!1!==s&&this.selection.restore(),n.getAll()},add:function(t,e,i,s){!1!==s&&this.selection.save();var a=i?$R.dom(i):this.getElements(e);if(t["class"]&&a.addClass(t["class"]),t.style){var n=t.style;a.each(function(t){var e=$R.dom(t);e.css(n),e.attr("data-redactor-style-cache",e.attr("style")),this._convertStyleQuotes(e)}.bind(this))}return t.attr&&a.attr(t.attr),!1!==s&&this.selection.restore(),a.getAll()},remove:function(t,e,i,s){!1!==s&&this.selection.save();var a=i?$R.dom(i):this.getElements(e);if(t["class"]&&(a.removeClass(t["class"]),a.each(function(t){""===t.className&&t.removeAttribute("class")})),t.style){var n=t.style;a.each(function(t){var e=$R.dom(t);e.css(n,""),this.utils.removeEmptyAttr(t,"style")?e.removeAttr("data-redactor-style-cache"):e.attr("data-redactor-style-cache",e.attr("style"))}.bind(this))}return t.attr&&a.removeAttr(t.attr),i=this._unwrapSpanWithoutAttr(a.getAll()),!1!==s&&this.selection.restore(),i},_removeAllAttr:function(t){t.each(function(t){for(var e=t.attributes.length;e-- >0;){var i=t.attributes[e],s=i.name;"style"!==s&&"class"!==s&&t.removeAttributeNode(i)}})},_convertStyleQuotes:function(t){var e=t.attr("style");e&&t.attr("style",e.replace(/"/g,"'"))},_clearAll:function(t,e){!1!==e&&this.selection.save();for(var i=0;i<t.length;i++)for(var s=t[i];s.attributes.length>0;)s.removeAttribute(s.attributes[0].name);return t=this._unwrapSpanWithoutAttr(t),!1!==e&&this.selection.restore(),t},_unwrapSpanWithoutAttr:function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i],a=s.attributes.length;0>=a&&3!==s.nodeType&&"SPAN"===s.tagName?$R.dom(s).unwrap():e.push(s)}return e}}),$R.add("mixin","dom",$R.Dom.prototype),$R.add("mixin","component",{get cmnt(){return!0}}),$R.add("service","options",{init:function(t,e){var i=$R.dom(e),s=$R.extend({},$R.opts,e?i.data():{},$R.options);return $R.extend(!0,s,t)}}),$R.add("service","lang",{init:function(t){this.app=t,this.opts=t.opts,this.vars=this._build(this.opts.lang)},rebuild:function(t){this.opts.lang=t,this.vars=this._build(t)},extend:function(t){this.vars=$R.extend(this.vars,t)},parse:function(t){if(void 0===t)return"";var e=t.match(/## (.*?) ##/g);if(e)for(var i=0;i<e.length;i++){var s=e[i].replace(/^##\s/g,"").replace(/\s##$/g,"");t=t.replace(e[i],this.get(s))}return t},get:function(t){var e="";return"undefined"!=typeof this.vars[t]?e=this.vars[t]:"en"!==this.opts.lang&&"undefined"!=typeof $R.lang.en[t]&&(e=$R.lang.en[t]),e},_build:function(t){var e=$R.lang.en;return"en"!==t&&(e=void 0!==$R.lang[t]?$R.lang[t]:e),e}}),$R.add("service","callback",{init:function(t){this.app=t,this.opts=t.opts,this.callbacks={},this.opts.callbacks&&this._set(this.opts.callbacks,"")},stop:function(){this.callbacks={}},add:function(t,e){this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e)},remove:function(t,e){if(void 0===e)delete this.callbacks[t];else{for(var i=0;i<this.callbacks[t].length;i++)this.callbacks[t].splice(i,1);0===C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(this.callbacks[t]).length&&delete this.callbacks[t]}},trigger:function(t,e){var i=this._loop(t,e,this.callbacks);return"undefined"==typeof i&&e&&!1!==e[0]?e[0]:i},_set:function(t,e){for(var i in t){var s=""===e?i:e+"."+i;"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t[i])?this._set(t[i],s):(this.callbacks[s]=[],this.callbacks[s].push(t[i]))}},_loop:function(t,e,i){var s;for(var a in i)if(t===a)for(var n=0;n<i[a].length;n++)s=i[a][n].apply(this.app,e);return s}}),$R.add("service","animate",{init:function(t){this.animationOpt=t.opts.animation},start:function(t,e,i,s){var a={duration:!1,iterate:!1,delay:!1,timing:!1,prefix:"redactor-"};return a="function"==typeof i?a:$R.extend(a,i),s="function"==typeof i?i:s,new $R.AnimatePlay(t,e,a,s,this.animationOpt)},stop:function(t){this.$el=$R.dom(t),this.$el.removeClass("redactor-animated");var e=this.$el.attr("redactor-animate-effect");this.$el.removeClass(e),this.$el.removeAttr("redactor-animate-effect");var i=this.$el.attr("redactor-animate-hide");i&&this.$el.addClass(i).removeAttr("redactor-animate-hide"),this.$el.off("animationend webkitAnimationEnd")}}),$R.AnimatePlay=function(t,e,i,s,a){return this.hidableEffects=["fadeOut","flipOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"],this.prefixes=["","-webkit-"],this.$el=$R.dom(t),this.$body=$R.dom("body"),this.callback=s,this.animation=a?e:this.buildAnimationOff(e),this.defaults=i,"slideUp"===this.animation&&this.$el.height(this.$el.height()),this.isInanimate()?this.inanimate():this.animate()},$R.AnimatePlay.prototype={buildAnimationOff:function(t){return this.isHidable(t)?"hide":"show"},buildHideClass:function(){return"redactor-animate-hide"},isInanimate:function(){return"show"===this.animation||"hide"===this.animation},isAnimated:function(){return this.$el.hasClass("redactor-animated")},isHidable:function(t){return-1!==this.hidableEffects.indexOf(t)},inanimate:function(){var t;return this.defaults.timing="linear","show"===this.animation?(t=this.buildHideClass(),this.$el.attr("redactor-animate-hide",t),this.$el.removeClass(t)):(t=this.$el.attr("redactor-animate-hide"),this.$el.addClass(t).removeAttr("redactor-animate-hide")),"function"==typeof this.callback&&this.callback(this),this},animate:function(){var t=this.defaults.delay?this.defaults.delay:0;return setTimeout(function(){if(this.$body.addClass("no-scroll-x"),this.$el.addClass("redactor-animated"),!this.$el.attr("redactor-animate-hide")){var t=this.buildHideClass();this.$el.attr("redactor-animate-hide",t),this.$el.removeClass(t)}this.$el.addClass(this.defaults.prefix+this.animation),this.$el.attr("redactor-animate-effect",this.defaults.prefix+this.animation),this.set(this.defaults.duration+"s",this.defaults.iterate,this.defaults.timing),this.complete()}.bind(this),1e3*t),this},set:function(t,e,i){for(var s=this.prefixes.length;s--;)!1===t&&""!==t||this.$el.css(this.prefixes[s]+"animation-duration",t),!1===e&&""!==e||this.$el.css(this.prefixes[s]+"animation-iteration-count",e),!1===i&&""!==i||this.$el.css(this.prefixes[s]+"animation-timing-function",i)},clean:function(){this.$body.removeClass("no-scroll-x"),this.$el.removeClass("redactor-animated"),this.$el.removeClass(this.defaults.prefix+this.animation),this.$el.removeAttr("redactor-animate-effect"),this.set("","","")},complete:function(){this.$el.one("animationend webkitAnimationEnd",function(){if(this.$el.hasClass(this.defaults.prefix+this.animation)&&this.clean(),this.isHidable(this.animation)){var t=this.$el.attr("redactor-animate-hide");this.$el.addClass(t).removeAttr("redactor-animate-hide")}"slideUp"===this.animation&&this.$el.height(""),"function"==typeof this.callback&&this.callback(this.$el)}.bind(this))}},$R.add("service","caret",{init:function(t){this.app=t},setStart:function(t){this._setCaret("Start",t)},setEnd:function(t){this._setCaret("End",t)},setBefore:function(t){this._setCaret("Before",t)},setAfter:function(t){this._setCaret("After",t)},isStart:function(t){return this._isStartOrEnd(t,"First")},isEnd:function(t){return this._isStartOrEnd(t,"Last")},setAtEnd:function(t){var e=this.inspector.parse(t),i=e.getTag(),s=document.createRange();if(this._isInPage(t)){if("a"===i){var a=this.utils.createInvisibleChar();t.appendChild(a),s.setStartBefore(a),s.collapse(!0)}else s.selectNodeContents(t),s.collapse(!1);this.selection.setRange(s)}},setAtStart:function(t){var e=document.createRange(),i=this.inspector.parse(t);if(this._isInPage(t)){if(e.setStart(t,0),e.collapse(!0),i.isInline()||this.utils.isEmpty(t)){var s=this.utils.createInvisibleChar();e.insertNode(s),e.selectNodeContents(s),e.collapse(!1)}this.selection.setRange(e)}},setAtBefore:function(t){var e=this.inspector.parse(t),i=document.createRange();if(this._isInPage(t)){if(i.setStartBefore(t),i.collapse(!0),e.isInline()){var s=this.utils.createInvisibleChar();t.parentNode.insertBefore(s,t),i.selectNodeContents(s),i.collapse(!1)}this.selection.setRange(i)}},setAtAfter:function(t){var e=document.createRange();if(this._isInPage(t)){e.setStartAfter(t),e.collapse(!0);var i=this.utils.createInvisibleChar();e.insertNode(i),e.selectNodeContents(i),e.collapse(!1),this.selection.setRange(e)}},setAtPrev:function(t){var e=t.previousSibling;e&&(e=3===e.nodeType&&this._isEmptyTextNode(e)?e.previousElementSibling:e,e&&this.setEnd(e))},setAtNext:function(t){var e=t.nextSibling;e&&(e=3===e.nodeType&&this._isEmptyTextNode(e)?e.nextElementSibling:e,e&&this.setStart(e))},_setCaret:function(t,e){var i=this.inspector.parse(e),s=i.getNode();s&&(this.component.clearActive(),this["_set"+t](s,i,i.getTag()))},_setStart:function(t,e,i){if(e.isText())return this.editor.focus(),this.setAtStart(t);if("ul"===i||"ol"===i){t=e.findFirstNode("li");var s=this.utils.getFirstElement(t),a=this.inspector.parse(s);if(s&&a.isComponent())return this.setStart(a.getComponent())}else if("dl"===i)t=e.findFirstNode("dt");else{if("br"===i||"hr"===i)return this.setBefore(t);if("td"===i||"th"===i){var n=e.getFirstElement(t);if(n)return this.setStart(n)}else{if("table"===i||"tr"===i)return this.setStart(e.findFirstNode("th, td"));if(e.isComponentType("code")&&!e.isFigcaption()){var r=e.findLastNode("pre, code");return this.editor.focus(),this.setAtStart(r)}if("figure"===i&&e.isComponentType("table")){var o=e.getTable(),l=this.inspector.parse(o);return this.setStart(l.findFirstNode("th, td"))}if(!e.isComponentType("table")&&e.isComponent()&&!e.isFigcaption())return this.component.setActive(t)}}this.editor.focus(),this._setInline(t,"Start")||this.setAtStart(t)},_setEnd:function(t,e,i){if(e.isText())return this.editor.focus(),this.setAtEnd(t);if("ul"===i||"ol"===i){t=e.findLastNode("li");var s=this.utils.getLastElement(t),a=this.inspector.parse(s);if(s&&a.isComponent())return this.setEnd(a.getComponent())}else if("dl"===i)t=e.findLastNode("dd");else{if("br"===i||"hr"===i)return this.setAfter(t);if("td"===i||"th"===i){var n=e.getLastElement();if(n)return this.setEnd(n)}else{if("table"===i||"tr"===i)return this.setEnd(e.findLastNode("th, td"));if(e.isComponentType("code")&&!e.isFigcaption()){var r=e.findLastNode("pre, code");return this.editor.focus(),this.setAtEnd(r)}if("figure"===i&&e.isComponentType("table")){var o=e.getTable(),l=this.inspector.parse(o);return this.setEnd(l.findLastNode("th, td"))}if(!e.isComponentType("table")&&e.isComponent()&&!e.isFigcaption())return this.component.setActive(t)}}if(this.editor.focus(),!this._setInline(t,"End")){if(this.utils.isEmpty(t))return this.setStart(t);this.setAtEnd(t)}},_setBefore:function(t,e,i){return 3===t.nodeType?this.setAtBefore(t):e.isInline()?this.setAtBefore(t):e.isFirstTableCell()?this.setAtPrev(e.getComponent()):"td"===i||"th"===i?this.setAtPrev(t):e.isFirstListItem()?this.setAtPrev(e.getList()):e.isFigcaption()?this.setStart(e.getComponent()):!e.isComponentType("table")&&e.isComponent()?this.setAtPrev(e.getComponent()):e.isBlock()?this.setAtPrev(t):(this.editor.focus(),void this.setAtBefore(t))},_setAfter:function(t,e,i){return 3===t.nodeType?this.setAtAfter(t):e.isInline()?this.setAtAfter(t):e.isLastTableCell()?this.setAtNext(e.getComponent()):"td"===i||"th"===i?this.setAtNext(t):e.isFirstListItem()?this.setAtNext(e.getList()):!e.isComponentType("table")&&e.isComponent()?this.setAtNext(e.getComponent()):e.isBlock()?this.setAtNext(t):(this.editor.focus(),void this.setAtAfter(t))},_setInline:function(t,e){var i=this._hasInlineChild(t,"Start"===e?"first":"last");return i?("Start"===e?this.setStart(i):this.setEnd(i),!0):void 0},_isStartOrEnd:function(t,e){var i=this.utils.getNode(t);if(!i)return!1;var s=this.inspector.parse(i);if(i=this._getStartEndNode(i,s,e),i&&3!==i.nodeType&&"LI"!==i.tagName){var a=3===i.nodeType?i.textContent:i.innerHTML;if(a=this.utils.trimSpaces(a),""===a)return!0}if(!s.isFigcaption()&&s.isComponent()&&!s.isComponentEditable())return!0;var n=this.offset.get(i,!0);return!!n&&("First"===e?0===n.start:n.end===this.offset.size(i,!0))},_isInPage:function(t){return!(!t||!t.nodeType)&&(t!==document.body&&document.body.contains(t))},_hasInlineChild:function(t,e){var i=this.inspector.parse(t),s="first"===e?i.getFirstNode():i.getLastNode(),a=$R.dom(s);return s&&3!==s.nodeType&&this.inspector.isInlineTag(s.tagName)&&!a.hasClass("redactor-component")&&!a.hasClass("non-editable")?s:void 0},_isEmptyTextNode:function(t){var e=t.textContent.trim().replace(/\n/,"");return e=this.utils.removeInvisibleChars(e),""===e},_getStartEndNode:function(t,e,i){return e.isFigcaption()?t=e.getFigcaption():e.isTable()?t=e["find"+i+"Node"]("th, td"):e.isList()?t=e["find"+i+"Node"]("li"):e.isComponentType("code")&&(t=e.findLastNode("pre, code")),t}}),$R.add("service","selection",{init:function(t){this.app=t},is:function(){var t=this.get();if(t){var e=t.anchorNode,i=this.inspector.parse(e);return i.isInEditor()||i.isEditor()}return!1},isCollapsed:function(){var t=this.get(),e=this.getRange();return!(!t||!t.isCollapsed)||!(!e||0!==e.toString().length)},isBackwards:function(){var t=!1,e=this.get();if(e&&!e.isCollapsed){var i=document.createRange();i.setStart(e.anchorNode,e.anchorOffset),i.setEnd(e.focusNode,e.focusOffset),t=i.collapsed,i.detach()}return t},isIn:function(t){var e=$R.dom(t).get(),i=this.getCurrent();return!(!i||!e)&&e.contains(i)},isText:function(){var t=this.get();if(t){var e=t.anchorNode,i=this.getBlock(e),s=this.getBlocks();if(i&&this.inspector.isTableCellTag(i.tagName)||!1===i&&0===s.length)return!0}return!1},isAll:function(t){var e=this.utils.getNode(t);if(!e)return!1;var i=this.editor.isEditor(e),s=this.inspector.parse(e);if(!s.isFigcaption()&&this.component.isNonEditable(e)&&this.component.isActive(e))return!0;if(i){var a=this.editor.getElement(),n=a.html().replace(/<p><\/p>$/i,""),r=this.getHtml(!1).length,o=n.length;if(r!==o)return!1}if(i&&this.editor.isEmpty()||this.isCollapsed())return!1;var l=this.offset.get(e,!0),d=this.offset.size(e,!0);return!i&&s.isComponentType("code")&&(d=this.getText().trim().length),!(!l||0!==l.start||l.end!==d)},hasNonEditable:function(){var t=this.getHtml(),e=$R.dom("<div>").html(t);return!this.isCollapsed()&&0!==e.find(".non-editable").length},setRange:function(t){var e=window.getSelection();e.removeAllRanges(),e.addRange(t)},setAll:function(t){var e=this.utils.getNode(t);if(e){var i=this.inspector.parse(e);if(this.component.clearActive(),this.editor.focus(),this.editor.saveScroll(),this.editor.disableNonEditables(),e&&"TABLE"===e.tagName){var s=i.findFirstNode("td, th"),a=i.findLastNode("td, th");$R.dom(s).prepend(this.marker.build("start")),$R.dom(a).append(this.marker.build("end")),this.restoreMarkers()}else if(!i.isFigcaption()&&this.component.isNonEditable(e))this.component.setActive(e);else{i.isComponentType("code")&&(e=i.getComponentCodeElement(),e.focus());var n=document.createRange();n.selectNodeContents(e),this.setRange(n)}this.editor.enableNonEditables(),this.editor.restoreScroll()}},get:function(){var t=window.getSelection();return t.rangeCount>0?t:null},getRange:function(){var t=this.get();return t&&t.getRangeAt(0)?t.getRangeAt(0):null},getTextBeforeCaret:function(t){t="undefined"==typeof t?1:t;var e=this.editor.getElement().get(),i=this.getRange(),s=!1;return i&&(i=i.cloneRange(),i.collapse(!0),i.setStart(e,0),s=i.toString().slice(-t)),s},getTextAfterCaret:function(t){t="undefined"==typeof t?1:t;var e=this.editor.getElement().get(),i=this.getRange(),s=!1;if(i){var a=i.cloneRange();a.selectNodeContents(e),a.setStart(i.endContainer,i.endOffset),s=a.toString().slice(0,t)}return s},getPosition:function(){var t=this.getRange(),e={top:0,left:0,width:0,height:0};if(window.getSelection&&t.getBoundingClientRect){t=t.cloneRange();var i=t.startOffset-1;t.setStart(t.startContainer,0>i?0:i);var s=t.getBoundingClientRect();e={top:s.top,left:s.left,width:s.right-s.left,height:s.bottom-s.top}}return e},getCurrent:function(){var t=!1,e=this.get(),i=this.component.getActive();if(i)t=i;else if(e&&this.is()){var s=this.inspector.parse(e.anchorNode);t=!s.isEditor()&&e.anchorNode}return t},getParent:function(){var t=!1,e=this.getCurrent();if(e){var i=e.parentNode,s=this.inspector.parse(i);t=!s.isEditor()&&i}return t},getElement:function(t){for(var e=t||this.getCurrent();e;){var i=this.inspector.parse(e);if(i.isElement()&&i.isInEditor())return e;e=e.parentNode}return!1},getInline:function(t){for(var e=t||this.getCurrent(),i=!1;e;)this._isInlineNode(e)&&(i=e),e=e.parentNode;return i},getInlineFirst:function(t){for(var e=t||this.getCurrent();e;){if(this._isInlineNode(e))return e;e=e.parentNode}return!1},getInlineAll:function(t){for(var e=t||this.getCurrent(),i=[];e;)this._isInlineNode(e)&&i.push(e),e=e.parentNode;return i},getBlock:function(t){for(var e=t||this.getCurrent();e;){var i=this.inspector.parse(e),s=this.inspector.isBlockTag(e.tagName);if(s&&i.isInEditor(e))return e;e=e.parentNode}return!1},getInlinesAllSelected:function(t){if(this.isAll())return[];var e=this.getInlines({all:!0}),i=this.getNodes({textnodes:!0,inline:!1}),s=this.getText().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),a=[];if(0!==i.length)return a;if(""===s)a=e;else if(e.length>1)for(var n=0;n<e.length;n++)this._isTextSelected(e[n],s)&&a.push(e[n]);else 1===e.length&&this._isTextSelected(e[0],s)&&(a=e);return t&&t.tags?this._filterNodesByTags(a,t.tags):a},getInlines:function(t){for(var e=this.getNodes(),i=[],s=0;s<e.length;s++){var a;if(t&&t.all)for(a=e[s];a;)this._isInlineNode(a)&&!this._isInNodesArray(i,a)&&i.push(a),a=a.parentNode;else a=this.getInline(e[s]),a&&!this._isInNodesArray(i,a)&&i.push(a)}return i=t&&t.tags?this._filterNodesByTags(i,t.tags):i,t&&t.inside?this._filterInlinesInside(i,t):i},getBlocks:function(t){var e=this.getNodes(),i=this.getBlock();e=0===e.length&&i?[i]:e;for(var s=[],a=0;a<e.length;a++){var n=this.getBlock(e[a]);n&&!this._isInNodesArray(s,n)&&s.push(n)}return s=t&&t.tags?this._filterNodesByTags(s,t.tags):s,t&&t.first?this._filterBlocksFirst(s,t):s},getElements:function(t){var e=this.getNodes({textnodes:!1}),i=this.getBlock();e=0===e.length&&i?[i]:e;for(var s=[],a=0;a<e.length;a++)this._isInNodesArray(s,e[a])||s.push(e[a]);return t&&t.tags?this._filterNodesByTags(s,t.tags):s},getNodes:function(t){var e=[],i=this.component.getActive();if(i)e=this._getNodesComponent(i);else if(this.isCollapsed()){var s=this.getCurrent();e=s?[s]:[]}else this.is()&&!i&&(e=this._getRangeSelectedNodes());return e=this._filterServicesNodes(e),e=this._filterEditor(e),e=t&&t.tags?this._filterNodesByTags(e,t.tags):e,e=t&&t.textnodes?this._filterNodesTexts(e,t):e,t&&!t.textnodes?this._filterNodesElements(e):e},getText:function(){var t=this.get();return t?this.utils.removeInvisibleChars(t.toString()):""},getHtml:function(t){var e="",i=this.get();if(i){for(var s=document.createElement("div"),a=i.rangeCount,n=0;a>n;++n)s.appendChild(i.getRangeAt(n).cloneContents());e=s.innerHTML,e=!1!==t?this.cleaner.output(e):e,e=e.replace(/<p><\/p>$/i,"")}return e},clear:function(){this.component.clearActive(),this.get().removeAllRanges()},collapseToStart:function(){var t=this.get();t&&!t.isCollapsed&&t.collapseToStart()},collapseToEnd:function(){var t=this.get();t&&!t.isCollapsed&&t.collapseToEnd()},saveActiveComponent:function(){var t=this.component.getActive();return!!t&&(this.savedComponent=t,!0)},restoreActiveComponent:function(){return!!this.savedComponent&&(this.component.setActive(this.savedComponent),!0)},save:function(){this._clearSaved();var t=this.getElement(),e=["TD","TH","P","DIV","PRE","H1","H2","H3","H4","H5","H6","LI","BLOCKQUOTE"];!t||-1===e.indexOf(t.tagName)||""!==t.innerHTML&&"<br>"!==t.innerHTML?this.saveActiveComponent()||(this.saved=this.offset.get()):this.savedElement=t},restore:function(){(this.saved||this.savedComponent||this.savedElement)&&(this.editor.saveScroll(),this.savedElement?this.caret.setStart(this.savedElement):this.restoreActiveComponent()||this.offset.set(this.saved),this._clearSaved(),this.editor.restoreScroll())},saveMarkers:function(){this._clearSaved(),this.saveActiveComponent()||this.marker.insert()},restoreMarkers:function(){this.editor.saveScroll(),this.restoreActiveComponent()||this.marker.restore(),this._clearSaved(),this.editor.restoreScroll()},_getNextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},_getNodesComponent:function(t){var e=this.getCurrent(),i=this.inspector.parse(e);return i.isFigcaption()?[i.getFigcaption()]:[t]},_getRangeSelectedNodes:function(){var t=[],e=this.getRange(),i=e.startContainer,s=e.startContainer,a=e.endContainer,n=this.editor.getElement();if(s===n.get()&&this.isAll())t=this.utils.getChildNodes(n);else if(i==a)t=[i];else{for(;i&&i!=a;)t.push(i=this._getNextNode(i));for(i=e.startContainer;i&&i!=e.commonAncestorContainer;)t.unshift(i),i=i.parentNode}return t},_isInNodesArray:function(t,e){return-1!==t.indexOf(e)},_filterEditor:function(t){for(var e=[],i=0;i<t.length;i++){var s=this.inspector.parse(t[i]);s.isInEditor()&&e.push(t[i])}return e},_filterServicesNodes:function(t){for(var e=[],i=0;i<t.length;i++){var s=$R.dom(t[i]),a=!1;t[i]&&3===t[i].nodeType&&this.utils.isEmpty(t[i])&&(a=!0),(s.hasClass("redactor-script-tag")||s.hasClass("redactor-component-caret")||s.hasClass("redactor-selection-marker")||s.hasClass("non-editable"))&&(a=!0),a||e.push(t[i])}return e},_filterNodesTexts:function(t,e){for(var i=[],s=0;s<t.length;s++)if(3===t[s].nodeType||e.keepbr&&"BR"===t[s].tagName){var a=this.getInline(t[s]),n=a&&e&&!1===e.inline;n||i.push(t[s])}return i},_filterNodesElements:function(t){for(var e=[],i=0;i<t.length;i++)3!==t[i].nodeType&&e.push(t[i]);return e},_filterNodesByTags:function(t,e,i){for(var s=[],a=0;a<t.length;a++)if(i&&3===t[a].nodeType)s.push(t[a]);else if(3!==t[a].nodeType){var n=t[a].tagName.toLowerCase();-1!==e.indexOf(n.toLowerCase())&&s.push(t[a])}return s},_filterBlocksFirst:function(t){for(var e=[],i=0;i<t.length;i++){var s=$R.dom(t[i]),a=s.parent().get(),n=s.parent().hasClass("redactor-in"),r=a&&("TD"===a.tagName||"TH"===a.tagName);(n||r)&&e.push(t[i])}return e},_filterInlinesInside:function(t){for(var e=[],i=0;i<t.length;i++)window.getSelection().containsNode(t[i],!0)&&e.push(t[i]);return e},_isTextSelected:function(t,e){var i=this.utils.removeInvisibleChars(t.textContent);return e===i||-1!==i.search(e)||-1!==e.search(new RegExp("^"+i))||-1!==e.search(new RegExp(i+"$"))},_isInlineNode:function(t){var e=this.inspector.parse(t);return this.inspector.isInlineTag(t.tagName)&&e.isInEditor()},_clearSaved:function(){this.saved=!1,this.savedComponent=!1,this.savedElement=!1}}),$R.add("service","element",{init:function(t){this.app=t,this.rootElement=t.rootElement,this.$element={},this.type="inline"},start:function(){this._build(),this._buildType()},isType:function(t){return t===this.type},getType:function(){return this.type},getElement:function(){return this.$element},_build:function(){this.$element=$R.dom(this.rootElement)},_buildType:function(){var t=this.$element.get().tagName;this.type="TEXTAREA"===t?"textarea":this.type,this.type="DIV"===t?"div":this.type,this.type=this.opts.inline?"inline":this.type}}),$R.add("service","editor",{init:function(t){this.app=t,this.scrolltop=!1,this.pasting=!1},start:function(){this._build()},focus:function(){this.isFocus()||this._isContenteditableFocus()||(this.saveScroll(),this.$editor.focus(),this.restoreScroll())},startFocus:function(){this.caret.setStart(this.getFirstNode())},endFocus:function(){this.caret.setEnd(this.getLastNode())},isPasting:function(){return this.pasting},enablePasting:function(){this.pasting=!0},disablePasting:function(){this.pasting=!1},saveScroll:function(){this.scrolltop=this._getScrollTarget().scrollTop()},restoreScroll:function(){!1!==this.scrolltop&&(this._getScrollTarget().scrollTop(this.scrolltop),this.scrolltop=!1)},disableNonEditables:function(){this.$noneditables=this.$editor.find("[contenteditable=false]"),this.$noneditables.attr("contenteditable",!0)},enableNonEditables:function(){this.$noneditables&&setTimeout(function(){this.$noneditables.attr("contenteditable",!1)}.bind(this),1)},getFirstNode:function(){return this.$editor.contents()[0]},getLastNode:function(){var t=this.$editor.contents();return t[t.length-1]},isSourceMode:function(){var t=this.source.getElement();return t.hasClass("redactor-source-open")},isEditor:function(t){var e=$R.dom(t).get();return e===this.$editor.get()},isEmpty:function(t){return this.utils.isEmptyHtml(this.$editor.html(),!1,t)},isFocus:function(){var t=$R.dom(document.activeElement),e=0!==this.$editor.find(".redactor-component-active").length;return e||0!==t.closest(".redactor-in-"+this.uuid).length},setEmpty:function(){this.$editor.html(this.opts.emptyHtml)},getElement:function(){return this.$editor},_build:function(){var t=this.element.getElement(),e=this.element.isType("textarea")?"<div>":t.get();this.$editor=$R.dom(e)},_getScrollTarget:function(){var t=this.$doc;return this.opts.toolbarFixedTarget!==document?$R.dom(this.opts.toolbarFixedTarget):this.opts.scrollTarget?$R.dom(this.opts.scrollTarget):t},_isContenteditableFocus:function(){var t=this.selection.getBlock(),e=t?$R.dom(t).closest("[contenteditable=true]").not(".redactor-in"):[];return 0!==e.length}}),$R.add("service","container",{init:function(t){this.app=t},start:function(){this._build()},getElement:function(){return this.$container},_build:function(){var t=this.element.isType("inline")?"<span>":"<div>";this.$container=$R.dom(t)}}),$R.add("service","source",{init:function(t){this.app=t,this.$source={},this.content=""},start:function(){this._build(),this._buildName(),this._buildStartedContent()},getElement:function(){return this.$source},getCode:function(){return this.$source.val()},getName:function(){return this.$source.attr("name")},getStartedContent:function(){return this.content},setCode:function(t){return this.insertion.set(t,!0,!1)},isNameGenerated:function(){return this.name},rebuildStartedContent:function(){this._buildStartedContent()},_build:function(){var t=this.element.getElement(),e=this.element.isType("textarea"),i=e?t.get():"<textarea>";this.$source=$R.dom(i)},_buildName:function(){var t=this.element.getElement();this.name=t.attr("name"),this.$source.attr("name",this.name?this.name:"content-"+this.uuid)},_buildStartedContent:function(){var t=this.element.getElement(),e=this.element.isType("textarea")?t.val():t.html();this.content=e.trim()}}),$R.add("service","statusbar",{init:function(t){this.app=t,this.$statusbar={},this.items=[]},start:function(){this.$statusbar=$R.dom("<ul>"),this.$statusbar.attr("dir",this.opts.direction)},add:function(t,e){return this.update(t,e)},update:function(t,e){var i;return"undefined"!=typeof this.items[t]?i=this.items[t]:(i=$R.dom("<li>"),this.$statusbar.append(i),this.items[t]=i),i.html(e)},get:function(t){return!!this.items[t]&&this.items[t]},remove:function(t){this.items[t]&&(this.items[t].remove(),delete this.items[t])},getItems:function(){return this.items},removeItems:function(){this.items={},this.$statusbar.html("")},getElement:function(){return this.$statusbar}}),$R.add("service","toolbar",{init:function(t){this.app=t,this.buttons=[],this.dropdownOpened=!1,this.buttonsObservers={}},start:function(){this.is()&&(this.opts.activeButtons=this.opts.activeButtonsAdd?this._extendActiveButtons():this.opts.activeButtons,this.create())},stopObservers:function(){this.buttonsObservers={}},create:function(){this.$wrapper=$R.dom("<div>"),this.$toolbar=$R.dom("<div>")},observe:function(){if(this.is()){var t,e;for(var i in this.setButtonsInactive(),this.buttonsObservers)e=this.buttonsObservers[i],t=this.getButton(i),this.app.broadcast("button."+e+".observe",t);var s=this.opts.activeButtons,a=this.selection.getInlinesAllSelected(),n=this.selection.getInline();this.selection.isCollapsed()&&n&&a.push(n);var r=this._inlinesToTags(a);for(var o in s)-1!==r.indexOf(o)&&(t=this.getButton(s[o]),t.setActive())}},is:function(){return!(!this.opts.toolbar||this.detector.isMobile()&&this.opts.air)},isAir:function(){return!!this.is()&&this.$toolbar.hasClass("redactor-air")},isFixed:function(){return!!this.is()&&this.$toolbar.hasClass("redactor-toolbar-fixed")},isContextBar:function(){var t=this.$body.find("#redactor-context-toolbar-"+this.uuid);return t.hasClass("open")},isTarget:function(){return this.opts.toolbarFixedTarget!==document},getElement:function(){return this.$toolbar},getWrapper:function(){return this.$wrapper},getDropdown:function(){return this.dropdownOpened},getTargetElement:function(){return $R.dom(this.opts.toolbarFixedTarget)},getButton:function(t){var e=this._findButton(".re-"+t);return 0!==e.length&&e.dataget("data-button-instance")},getButtonByIndex:function(t){var e=this.$toolbar.find(".re-button").eq(t);return 0!==e.length&&e.dataget("data-button-instance")},getButtons:function(){var t=[];return this._findButtons().each(function(e){var i=$R.dom(e);t.push(i.dataget("data-button-instance"))}),t},getButtonsKeys:function(){var t=[];return this._findButtons().each(function(e){var i=$R.dom(e);t.push(i.attr("data-re-name"))}),t},addButton:function(t,e,i,s,a){i=i||"end";var n=this._getButtonIndex(t),r=$R.create("toolbar.button",this.app,t,e);if(e.observe&&(this.opts.activeButtonsObservers[t]={observe:e.observe,button:r}),!0!==a)if(0===n)i="first";else if(-1!==n){var o=this.getButtonByIndex(n-1);o&&(i="after",s=o)}return this.is()&&("first"===i?this.$toolbar.prepend(r):"after"===i?s.after(r):"before"===i?s.before(r):this.$toolbar.append(r)),r},addButtonFirst:function(t,e){return this.addButton(t,e,"first")},addButtonAfter:function(t,e,i){var s=this.getButton(t);return s?this.addButton(e,i,"after",s):this.addButton(e,i)},addButtonBefore:function(t,e,i){var s=this.getButton(t);return s?this.addButton(e,i,"before",s):this.addButton(e,i)},addButtonObserver:function(t,e){this.buttonsObservers[t]=e},setButtons:function(t){this.buttons=t},setDropdown:function(t){this.dropdownOpened=t},setButtonsInactive:function(){for(var t=this.getButtons(),e=0;e<t.length;e++)t[e].setInactive()},setButtonsActive:function(){for(var t=this.getButtons(),e=0;e<t.length;e++)t[e].setActive()},disableButtons:function(){for(var t=this.getButtons(),e=0;e<t.length;e++)t[e].disable()},enableButtons:function(){for(var t=this.getButtons(),e=0;e<t.length;e++)t[e].enable()},_getButtonIndex:function(t){var e=this.buttons.indexOf(t);return-1!==e&&e},_findButton:function(t){return this.is()?this.$toolbar.find(t):$R.dom()},_findButtons:function(){return this.is()?this.$toolbar.find(".re-button"):$R.dom()},_extendActiveButtons:function(){return $R.extend({},this.opts.activeButtons,this.opts.activeButtonsAdd)},_inlinesToTags:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].tagName.toLowerCase());return e}}),$R.add("class","toolbar.button",{mixins:["dom"],init:function(t,e,i){this.app=t,this.opts=t.opts,this.lang=t.lang,this.$body=t.$body,this.toolbar=t.toolbar,this.detector=t.detector,this.obj=i,this.name=e,this.dropdown=!1,this.tooltip=!1,this._init()},isActive:function(){return this.hasClass("redactor-button-active")},isDisabled:function(){return this.hasClass("redactor-button-disabled")},hasIcon:function(){return this.obj.icon&&!this.opts.buttonsTextLabeled},setDropdown:function(t){this.obj.dropdown=t,this.obj.message=!1,this.dropdown=$R.create("toolbar.dropdown",this.app,this.name,this.obj.dropdown),this.attr("data-dropdown",!0)},setMessage:function(t,e){this.obj.message=t,this.obj.args=e,this.obj.dropdown=!1},setApi:function(t,e){this.obj.api=t,this.obj.args=e,this.obj.dropdown=!1},setTitle:function(t){this.obj.title=this.lang.parse(t),this.obj.tooltip=this.obj.title,this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip}),this.attr("data-re-icon")||this.html(this.obj.title)},setTooltip:function(t){this.obj.tooltip=this.lang.parse(t),this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip})},setIcon:function(t){this.opts.buttonsTextLabeled||(this.obj.icon=!0,this.$icon=$R.dom(t),this.html(""),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon"),this.setTooltip(this.obj.title),this._buildTooltip())},setActive:function(){this.addClass("redactor-button-active")},setInactive:function(){this.removeClass("redactor-button-active")},hideTooltip:function(){this.$body.find(".re-button-tooltip").remove()},getDropdown:function(){return this.dropdown},disable:function(){this.addClass("redactor-button-disabled")},enable:function(){this.removeClass("redactor-button-disabled")},toggle:function(t){t&&t.preventDefault(),this.isDisabled()||(this.obj.dropdown?this.dropdown.toggle(t):this.obj.api?this.app.api(this.obj.api,this.obj.args,this.name):this.obj.message&&this.app.broadcast(this.obj.message,this.obj.args,this.name),this.hideTooltip())},_init:function(){this._parseTitle(),this._parseTooltip(),this._build(),this._buildCallback(),this._buildAttributes(),this._buildObserver(),this.hasIcon()?(this._buildIcon(),this._buildTooltip()):this.html(this.obj.title)},_parseTooltip:function(){this.obj.tooltip=this.obj.tooltip?this.lang.parse(this.obj.tooltip):this.obj.title},_parseTitle:function(){this.obj.title=this.lang.parse(this.obj.title)},_build:function(){this.parse("<a>"),this.addClass("re-button re-"+this.name),this.attr("data-re-name",this.name),this.dataset("data-button-instance",this),this.obj.dropdown&&this.setDropdown(this.obj.dropdown)},_buildCallback:function(){this.on("click",this.toggle.bind(this))},_buildAttributes:function(){var t={href:"#",alt:this.obj.tooltip,rel:this.name,role:"button","aria-label":this.obj.tooltip,tabindex:"-1"};this.attr(t)},_buildObserver:function(){"undefined"!=typeof this.obj.observe&&this.toolbar.addButtonObserver(this.name,this.obj.observe)},_buildIcon:function(){var t=this.obj.icon,e=/(<([^>]+)>)/gi.test(t);this.$icon=e?$R.dom(t):$R.dom("<i>"),e||this.$icon.addClass("re-icon-"+this.name),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon")},_buildTooltip:function(){this.detector.isDesktop()&&(this.tooltip=$R.create("toolbar.button.tooltip",this.app,this))}}),$R.add("class","toolbar.button.tooltip",{mixins:["dom"],init:function(t,e){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.$body=t.$body,this.toolbar=t.toolbar,this.$button=e,this.created=!1,this._init()},open:function(){if(!this.$button.hasClass("redactor-button-disabled")&&!this.$button.hasClass("redactor-button-active")){this.created=!0,this.parse("<span>"),this.addClass("re-button-tooltip re-button-tooltip-"+this.uuid),this.$body.append(this),this.html(this.$button.attr("alt"));var t=this.$button.offset(),e="absolute",i=this.$button.height(),s=this.$button.width(),a=4;this.css({top:t.top+i+a+"px",left:t.left+s/2-this.width()/2+"px",position:e}),this.show()}},close:function(){this.created&&!this.$button.hasClass("redactor-button-disabled")&&(this.remove(),this.created=!1)},_init:function(){this.$button.on("mouseover",this.open.bind(this)),this.$button.on("mouseout",this.close.bind(this))}}),$R.add("class","toolbar.dropdown",{mixins:["dom"],init:function(t,e,i){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.$win=t.$win,this.$doc=t.$doc,this.$body=t.$body,this.animate=t.animate,this.toolbar=t.toolbar,this.name=e,this.started=!1,this.items=i,this.$items=[]},toggle:function(t){this.started||this._build(),this.isOpened()&&this.isActive()?this.close(!1):this.open(t)},isOpened:function(){var t=this.$body.find(".redactor-dropdown-"+this.uuid+".open");return 0!==t.length&&t.attr("data-re-name")===this.name},isActive:function(){var t=this.$body.find("#redactor-dropdown-"+this.uuid+"-"+this.name+".open");return 0!==t.length},getName:function(){return this.attr("data-re-name")},getItem:function(t){return this.$items[t]},getItemsByClass:function(t){var e=[];for(var i in this.$items)"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.$items[i])&&this.$items[i].hasClass(t)&&e.push(this.$items[i]);return e},open:function(t){this._closeAll(),this.$btn=this.toolbar.getButton(this.name),this.app.broadcast("dropdown.open",t,this,this.$btn),this.toolbar.setDropdown(this),this.show(),this.removeClass("redactor-animate-hide"),this.addClass("open"),this._observe(),this.$btn.hideTooltip(),this.$btn.setActive(),this.$doc.on("keyup.redactor.dropdown-"+this.uuid,this._handleKeyboard.bind(this)),this.$doc.on("click.redactor.dropdown-"+this.uuid+" touchstart.redactor.dropdown-"+this.uuid,this.close.bind(this)),this.updatePosition(),this.app.broadcast("dropdown.opened",t,this,this.$btn)},close:function(t,e){if(t){var i=$R.dom(t.target);if(this._isButton(t)||i.hasClass("redactor-dropdown-not-close")||i.hasClass("redactor-dropdown-item-disabled"))return void t.preventDefault()}this.app.broadcast("dropdown.close",this,this.$btn),this.toolbar.setDropdown(!1),this.$btn.setInactive(),!1===e?this._close():this.animate.start(this,"fadeOut",this._close.bind(this))},updatePosition:function(){var t=this.toolbar.isFixed(),e=this.$btn.offset();e.top=t?this.$btn.position().top:e.top;var i=this.$btn.height(),s=this.$btn.width(),a=t?"fixed":"absolute",n=t?2+this.opts.toolbarFixedTopOffset:2,r=0,o=e.left+r,l=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(this.css("width")),d=this.$win.width(),c=o+l>d?l-s:0,h=o-c;h=0>h?4:h,this.css({position:a,top:e.top+i+n+"px",left:h+"px"})},_build:function(){this.parse("<div>"),this.attr("dir",this.opts.direction),this.attr("id","redactor-dropdown-"+this.uuid+"-"+this.name),this.attr("data-re-name",this.name),this.addClass("redactor-dropdown redactor-dropdown-"+this.uuid+" redactor-dropdown-"+this.name),this.dataset("data-dropdown-instance",this);var t=this.items.dom||"string"==typeof this.items;t?this._buildDom():this._buildItems(),this.$body.append(this),this.started=!0},_buildDom:function(){this.html("").append($R.dom(this.items))},_buildItems:function(){for(var t in this.items="format"===this.name?this._buildFormattingItems():this.items,this.items){var e=this.items[t];if("observe"===t)this.attr("data-observe",this.items[t]);else{var i=$R.create("toolbar.dropdown.item",this.app,t,e,this);this.$items[t]=i,this.append(i)}}},_buildFormattingItems:function(){for(var t in this.items)-1===this.opts.formatting.indexOf(t)&&delete this.items[t];if(this.opts.formattingHide)for(var t in this.items)-1!==this.opts.formattingHide.indexOf(t)&&delete this.items[t];if(this.opts.formattingAdd)for(var t in this.opts.formattingAdd)this.items[t]=this.opts.formattingAdd[t];return this.items},_handleKeyboard:function(t){27===t.which&&this.close()},_isButton:function(t){var e=$R.dom(t.target),i=e.closest(".re-button");return i.get()===this.$btn.get()},_close:function(){this.$btn.setInactive(),this.$doc.off(".redactor.dropdown-"+this.uuid),this.removeClass("open"),this.addClass("redactor-animate-hide"),this.app.broadcast("dropdown.closed",this,this.$btn)},_closeAll:function(){this.$body.find(".redactor-dropdown-"+this.uuid+".open").each(function(t){var e=$R.dom(t),i=e.dataget("data-dropdown-instance");i._close()})},_observe:function(){var t=this.attr("data-observe");t&&this.app.broadcast("dropdown."+t+".observe",this)}}),$R.add("class","toolbar.dropdown.item",{mixins:["dom"],init:function(t,e,i,s){this.app=t,this.lang=t.lang,this.dropdown=s,this.name=e,this.obj=i,this._init()},setTitle:function(t){this.$span.html(t)},getTitle:function(){return this.$span.html()},enable:function(){this.removeClass("redactor-dropdown-item-disabled")},disable:function(){this.addClass("redactor-dropdown-item-disabled")},toggle:function(t){t&&t.preventDefault(),this.hasClass("redactor-dropdown-item-disabled")||(this.obj.message?this.app.broadcast(this.obj.message,this.obj.args,this.name):this.obj.api&&this.app.api(this.obj.api,this.obj.args,this.name))},_init:function(){this.parse("<a>"),this.attr("href","#"),this.addClass("redactor-dropdown-item-"+this.name),this.obj.classname&&this.addClass(this.obj.classname),this.attr("data-re-name",this.name),this.on("click",this.toggle.bind(this)),this.$span=$R.dom("<span>"),this.append(this.$span),this.setTitle(this.lang.parse(this.obj.title))}}),$R.add("service","cleaner",{init:function(t){this.app=t,this.opts=t.opts,this.storedComponents=[],this.storedImages=[],this.storedLinks=[],this.deniedTags=["font","html","head","link","title","body","meta","applet"],this.convertRules={},this.unconvertRules={},this.reComments=/<!--[\s\S]*?-->/g,this.reSpacedEmpty=/^(||\s||<br\s?\/?>||&nbsp;)$/i,this.reScriptTag=/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi},addConvertRules:function(t,e){this.convertRules[t]=e},addUnconvertRules:function(t,e){this.unconvertRules[t]=e},input:function(t,e,i){t=this.encodePreCode(t),t=t.replace(/\$/g,"&#36;"),t=t.replace(/&amp;/g,"&");var s=$R.create("cleaner.figure",this.app);return t=s.convert(t,this.convertRules),t=this.storeComponents(t),t=this.replaceTags(t,this.opts.replaceTags),t=this._setSpanAttr(t),t=this._setStyleCache(t),t=this.removeTags(t,this.deniedTags),t=this.opts.removeScript?this._removeScriptTag(t):this._replaceScriptTag(t),t=this.opts.removeComments?this.removeComments(t):t,t=this._isSpacedEmpty(t)?this.opts.emptyHtml:t,t=this.restoreComponents(t),t=this._cleanWrapped(t),e?this.paragraphize(t):t},output:function(t,e){if(t=this.removeInvisibleSpaces(t),this._isSpacedEmpty(t))return"";if(this._isParagraphEmpty(t))return"";t=this.removeServiceTagsAndAttrs(t,e),t=this.storeComponents(t),t=this.removeSpanWithoutAttributes(t),t=this.removeFirstBlockBreaklineInHtml(t),t=this.opts.removeScript?t:this._unreplaceScriptTag(t),t=this.opts.preClass?this._setPreClass(t):t,t=this.opts.linkNofollow?this._setLinkNofollow(t):t,t=this.opts.removeNewLines?this.cleanNewLines(t):t,t=this.restoreComponents(t);var i=$R.create("cleaner.figure",this.app);return t=i.unconvert(t,this.unconvertRules),t=this.removeEmptyAttributes(t,["style","class","rel","alt","title"]),t=this.cleanSpacesInPre(t),t=this.tidy(t),t=t.replace(/&amp;/g,"&"),""===t.replace(/\n/g,"")?"":t},paste:function(t){t=this.storeComponents(t);var e=this.deniedTags.concat(["iframe"]);t=this.removeTags(t,e),t=t.replace(new RegExp("<!doctype([\\s\\S]+?)>","gi"),""),t=t.replace(new RegExp("<style([\\s\\S]+?)</style>","gi"),""),t=t.replace(new RegExp("</p><br /><p","gi"),"</p><p");var i=this._isHtmlMsWord(t);if(t=this._cleanGDocs(t),t=i?this._cleanMsWord(t):t,!this.opts.pasteClean)return this.restoreComponents(t);if(this.opts.pastePlainText)return t=this.restoreComponents(t),this.pastePlainText(t);var s=this.opts.pasteBlockTags.concat(this.opts.pasteInlineTags);t=this.removeTagsExcept(t,s),t=this.opts.pasteLinks?t:this.removeTags(t,["a"]),t=this.opts.pasteImages?t:this.removeTags(t,["img"]);var a=this.utils.buildWrapper(t),n=a.find("*"),r=0!==this.opts.pasteKeepStyle.length?","+this.opts.pasteKeepStyle.join(","):"";n.not("[data-redactor-style-cache]"+r).removeAttr("style");var o=0!==this.opts.pasteKeepClass.length?","+this.opts.pasteKeepClass.join(","):"";n.not("[data-redactor-style-cache], span.redactor-component"+o).removeAttr("class");var l=0!==this.opts.pasteKeepAttrs.length?","+this.opts.pasteKeepAttrs.join(","):"";return n.not("img, a, span.redactor-component, [data-redactor-style-cache]"+l).each(function(t){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name)}),this.opts.pasteLinks&&!1!==this.opts.pasteLinkTarget&&a.find("a").attr("target",this.opts.pasteLinkTarget),a.find("[data-redactor-style-cache]").each(function(t){var e=t.getAttribute("data-redactor-style-cache");t.setAttribute("style",e)}),a.find("span").each(function(t){0===t.attributes.length&&$R.dom(t).unwrap()}),a.find(this.opts.inlineTags.join(",")).each(function(t){0===t.attributes.length&&this.utils.isEmptyHtml(t.innerHTML)&&$R.dom(t).unwrap()}.bind(this)),a.find("ul, ol").each(function(t){var e=t.previousSibling;if(e&&"LI"===e.tagName){var i=$R.dom(e);i.find("p").unwrap(),i.append(t)}}),t=this.utils.getWrapperHtml(a),t=t.replace(/<li><p>/gi,"<li>"),t=t.replace(/<\/p><\/li>/gi,"</li>"),t=t.replace(/<p>&nbsp;<\/p>/gi,"<p></p>"),t=t.replace(/<p><br\s?\/?><\/p>/gi,"<p></p>"),i&&(t=t.replace(/<p><\/p>/gi,""),t=t.replace(/<p>\s<\/p>/gi,"")),this.restoreComponents(t)},pastePlainText:function(t){return t=this.opts.pasteLinks?this.storeLinks(t):t,t=this.opts.pasteImages?this.storeImages(t):t,t=this.getPlainText(t),t=this._replaceNlToBr(t),t=this.opts.pasteLinks?this.restoreLinks(t):t,this.opts.pasteImages?this.restoreImages(t):t},tidy:function(t){return t},paragraphize:function(t){var e=$R.create("cleaner.paragraphize",this.app);return e.convert(t)},getFlatText:function(t){var e=$R.dom("<div>");return t.nodeType||t.dom?e.append(t):(t=t.toString(),t=t.trim(),e.html(t)),t=e.get().textContent||e.get().innerText||"",void 0===t?"":t},getPlainText:function(t){t=t.replace(/<!--[\s\S]*?-->/gi,""),t=t.replace(/<style[\s\S]*?style>/gi,""),t=t.replace(/<p><\/p>/g,""),t=t.replace(/<\/div>|<\/li>|<\/td>/gi,"\n"),t=t.replace(/<\/p>/gi,"\n\n"),t=t.replace(/<\/H[1-6]>/gi,"\n\n");var e=document.createElement("div");return e.innerHTML=t,t=e.textContent||e.innerText,t.trim()},replaceTags:function(t,e){if(e){var i=this,s=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(e),a=this.utils.buildWrapper(t);a.find(s.join(",")).each(function(t){i.utils.replaceToTag(t,e[t.tagName.toLowerCase()])}),t=this.utils.getWrapperHtml(a)}return t},replaceNbspToSpaces:function(t){return t.replace("&nbsp;"," ")},replaceBlocksToBr:function(t){return t.replace(/<\/div>|<\/li>|<\/td>|<\/p>|<\/H[1-6]>/gi,"<br>")},cleanNewLines:function(t){return t.replace(/\r?\n/g,"")},cleanSpacesInPre:function(t){return t.replace("&nbsp;&nbsp;&nbsp;&nbsp;","    ")},removeInvisibleSpaces:function(t){return t=this.utils.removeInvisibleChars(t),t.replace(/&#65279;/gi,"")},removeNl:function(t){return t=t.replace(/\n/g," "),t.replace(/\s+/g,"s")},removeBrAtEnd:function(t){return t=t.replace(/<br\s?\/?>$/gi," "),t.replace(/<br\s?\/?><li/gi,"<li")},removeTags:function(t,e){var i=e?/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi:/(<([^>]+)>)/gi,s=e?function(t,i){return-1===e.indexOf(i.toLowerCase())?t:""}:"";return t.replace(i,s)},removeTagsExcept:function(t,e){if(void 0===e)return t.replace(/(<([^>]+)>)/gi,"");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return-1===e.indexOf(i.toLowerCase())?"":t})},removeComments:function(t){return t.replace(this.reComments,"")},removeServiceTagsAndAttrs:function(t,e){var i=this.utils.buildWrapper(t),s=this;return!1!==e&&i.find(".redactor-selection-marker").each(function(t){var e=$R.dom(t),i=s.utils.removeInvisibleChars(e.text());return""===i?e.remove():e.unwrap()}),i.find("[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),this.utils.getWrapperHtml(i)},removeSpanWithoutAttributes:function(t){var e=this.utils.buildWrapper(t);return e.find("span").removeAttr("data-redactor-span data-redactor-style-cache").each(function(t){0===t.attributes.length&&$R.dom(t).unwrap()}),this.utils.getWrapperHtml(e)},removeFirstBlockBreaklineInHtml:function(t){return t.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>")},removeEmptyAttributes:function(t,e){for(var i=this.utils.buildWrapper(t),s=0;s<e.length;s++)i.find("["+e[s]+'=""]').removeAttr(e[s]);return this.utils.getWrapperHtml(i)},encodeHtml:function(t){return t=t.replace(/<br\s?\/?>/g,"\n"),t=t.replace(/&nbsp;/g," "),t=t.replace(/”/g,'"'),t=t.replace(/“/g,'"'),t=t.replace(/‘/g,"'"),t=t.replace(/’/g,"'"),t=this.encodeEntities(t),t=t.replace(/\$/g,"&#36;"),this.opts.preSpaces&&(t=t.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),t},encodePreCode:function(t){var e=t.match(new RegExp("<code(.*?)>(.*?)<pre(.*?)>(.*?)</pre>(.*?)</code>","gi"));if(null!==e)for(var i=0;i<e.length;i++){var s=e[i].match(new RegExp("<pre(.*?)>([\\w\\W]*?)</pre>","i"));t=t.replace(s[0],this.encodeEntities(s[0]))}var a=this.utils.buildWrapper(t);return a.find("code code").replaceWith(this._encodeOuter.bind(this)),a.find("code pre").replaceWith(this._encodeOuter.bind(this)),a.find("pre pre").replaceWith(this._encodeOuter.bind(this)),a.find("code, pre").each(this._encodePreCodeLine.bind(this)),t=this.utils.getWrapperHtml(a),this._decodeMarkers(t)},encodeEntities:function(t){return t=this.decodeEntities(t),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},encodePhpCode:function(t){return t=t.replace("<?php","&lt;?php"),t=t.replace("<?","&lt;?"),t.replace("?>","?&gt;")},decodeEntities:function(t){return String(t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},storeComponents:function(t){var e=this.utils.getElementsFromHtml(t,"figure","table");return this._storeMatched(t,e,"Components","figure")},restoreComponents:function(t){return this._restoreMatched(t,"Components","figure")},storeLinks:function(t){var e=this.utils.getElementsFromHtml(t,"a");return this._storeMatched(t,e,"Links","a")},storeImages:function(t){var e=this.utils.getElementsFromHtml(t,"img");return this._storeMatched(t,e,"Images","img")},restoreLinks:function(t){return this._restoreMatched(t,"Links","a")},restoreImages:function(t){return this._restoreMatched(t,"Images","img")},_cleanWrapped:function(t){return t.replace(new RegExp("<p><figure([\\w\\W]*?)</figure></p>","gi"),"<figure$1</figure>")},_cleanGDocs:function(t){return t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),t=t.replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>"),t=t.replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),t.replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>")},_cleanMsWord:function(t){t=t.replace(/<!--[\s\S]+?-->/gi,""),t=t.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),t=t.replace(/<(\/?)s>/gi,"<$1strike>"),t=t.replace(/&nbsp;/gi," "),t=t.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(" "):""});var e=this.utils.buildWrapper(t);e.find("p").each(function(t){var e=$R.dom(t),i=e.attr("style"),s=/mso-list:\w+ \w+([0-9]+)/.exec(i);s&&e.data("_listLevel",C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(s[1],10))}),this._parseWordLists(e),e.find("[style]").removeAttr("style"),e.find("[align]").removeAttr("align"),e.find("[name]").removeAttr("name"),e.find("span").unwrap(),e.find("[class^='Mso']").removeAttr("class"),e.find("a").filter(function(t){return!t.hasAttribute("href")}).unwrap(),t=this.utils.getWrapperHtml(e),t=t.replace(/<p[^>]*><\/p>/gi,""),t=t.replace(/<li>·/gi,"<li>"),t=t.trim(),t=t.replace(/\/(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)>\s+<(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)/gi,"/$1>\n<$2");for(var i="",s=t.split(/\n/),a=0;a<s.length;a++){var n=""!==s[a]&&-1===s[a].search(/>$/)?" ":"\n";i+=s[a]+n}return i},_parseWordLists:function(t){var e=0,i=null;t.find("p").each(function(t){var s=$R.dom(t),a=s.data("_listLevel");if(null!==a){var n=s.text(),r="<ul></ul>";if(/^\s*\w+\./.test(n)){var o=/([0-9])\./.exec(n);if(o){var l=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(o[1],10);r=l>1?'<ol start="'+l+'"></ol>':"<ol></ol>"}else r="<ol></ol>"}if(a>e)if(0===e)s.before(r),i=s.prev();else{var d=$R.dom(r);i.append(d)}if(e>a)for(var c=0;e-a>c;c++)i=i.parent();s.find("span").first().unwrap(),i.append("<li>"+s.html()+"</li>"),s.remove(),e=a}else e=0})},_isSpacedEmpty:function(t){return-1!==t.search(this.reSpacedEmpty)},_isParagraphEmpty:function(t){return-1!==t.search(/^<p><\/p>$/i)},_isHtmlMsWord:function(t){return t.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},_setSpanAttr:function(t){var e=this.utils.buildWrapper(t);return e.find("span").attr("data-redactor-span",!0),this.utils.getWrapperHtml(e)},_setStyleCache:function(t){var e=this.utils.buildWrapper(t);return e.find("[style]").each(function(t){var e=$R.dom(t);e.attr("data-redactor-style-cache",e.attr("style"))}),this.utils.getWrapperHtml(e)},_setPreClass:function(t){var e=this.utils.buildWrapper(t);return e.find("pre").addClass(this.opts.preClass),this.utils.getWrapperHtml(e)},_setLinkNofollow:function(t){var e=this.utils.buildWrapper(t);return e.find("a").attr("rel","nofollow"),this.utils.getWrapperHtml(e)},_replaceScriptTag:function(t){return t.replace(this.reScriptTag,'<pre class="redactor-script-tag" $1>$2</pre>')},_unreplaceScriptTag:function(t){return t.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2<\/script>")},_replaceNlToBr:function(t){return t.replace(/\n/g,"<br />")},_removeScriptTag:function(t){return t.replace(this.reScriptTag,"")},_storeMatched:function(t,e,i,s){if(this["stored"+i]=[],e)for(var a=0;a<e.length;a++)this["stored"+i][a]=e[a],t=t.replace(e[a],"####"+s+a+"####");return t},_restoreMatched:function(t,e,i){if(this["stored"+e])for(var s=0;s<this["stored"+e].length;s++)t=t.replace("####"+i+s+"####",this["stored"+e][s]);return t},_decodeMarkers:function(t){var e='<span id="selection-marker-$1" class="redactor-selection-marker">​</span>';return t.replace(/&lt;span\sid="selection-marker-(start|end)"\sclass="redactor-selection-marker"&gt;(.*?[^>]?)&lt;\/span&gt;/g,e)},_encodeOuter:function(t){return this.encodeEntities(t.outerHTML)},_encodePreCodeLine:function(t){var e=t.firstChild;if("PRE"!=t.tagName||!e||"CODE"!==e.tagName){var i=this.decodeEntities(t.innerHTML);i=i.replace(/&nbsp;/g," ").replace(/<br\s?\/?>/g,"\n"),i=this.opts.preSpaces?i.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" ")):i,t.textContent=i}}}),$R.add("class","cleaner.figure",{init:function(t){this.app=t,this.opts=t.opts,this.utils=t.utils,this.detector=t.detector},convert:function(t,e){var i=this.utils.buildWrapper(t);return i.find("img").each(this._convertImage.bind(this)),i.find("hr").each(this._convertLine.bind(this)),i.find("iframe").each(this._convertIframe.bind(this)),i.find("table").each(this._convertTable.bind(this)),i.find("form").each(this._convertForm.bind(this)),i.find("figure pre").each(this._convertCode.bind(this)),i.find("[data-redactor-type=variable]").addClass("redactor-component"),i.find("figure").not(".redactor-component, .redactor-figure-code").each(this._convertWidget.bind(this)),i.find("figure pre").each(this._setContenteditableCode.bind(this)),i.find(".redactor-component, .non-editable").attr("contenteditable",!1),this.detector.isIe()&&i.find("[data-redactor-type=table]").attr("contenteditable",!0),i.find("figcaption, td, th").attr("contenteditable",!0),i.find(".redactor-component, figcaption").attr("tabindex","-1"),this._acceptExtraRules(i,e),this.utils.getWrapperHtml(i)},unconvert:function(t,e){var i=this.utils.buildWrapper(t);return i.find("th, td, figcaption, figure, pre, code, .redactor-component").removeAttr("contenteditable tabindex"),i.find("figure").removeClass("redactor-component redactor-component-active redactor-uploaded-figure"),i.find("[data-redactor-type=variable]").removeClass("redactor-component"),i.find("figure[data-redactor-type=line]").unwrap(),i.find("figure[data-redactor-type=widget]").each(this._unconvertWidget.bind(this)),i.find("figure[data-redactor-type=form]").each(this._unconvertForm.bind(this)),i.find("figure[data-redactor-type=table]").each(this._unconvertTable.bind(this)),i.find("figure[data-redactor-type=image]").removeAttr("rel").each(this._unconvertImages.bind(this)),i.find("img").removeAttr("data-redactor-type").removeClass("redactor-component"),i.find(".non-editable").removeAttr("contenteditable"),i.find("figure").each(this._removeTypes.bind(this)),i.find("span.redactor-component-caret").remove(),this.opts.breakline&&i.find('[data-redactor-tag="br"]').each(function(t){t.lastChild&&"BR"!==t.lastChild.tagName&&t.appendChild(document.createElement("br"))}).unwrap(),this._acceptExtraRules(i,e),t=this.utils.getWrapperHtml(i),t.replace(/<br\s?\/?>$/,"")},_convertImage:function(t){var e=$R.dom(t);if(!this._isNonEditable(e)){e.attr("data-image")||e.attr("data-image",this.utils.getRandomId());var i=e.closest("a"),s=e.closest("figure"),a=0===s.children().not("a, img, br, figcaption").length;a&&(0===s.length?s=0!==i.length?i.wrap("<figure>"):e.wrap("<figure>"):s.hasClass("redactor-uploaded-figure")?s.removeClass("redactor-uploaded-figure"):s.addClass("redactor-keep-figure"),this._setFigure(s,"image"))}},_convertTable:function(t){if(!this._isNonEditable(t)){var e=this._wrapFigure(t);this._setFigure(e,"table")}},_convertLine:function(t){if(!this._isNonEditable(t)){var e=this._wrapFigure(t);this._setFigure(e,"line")}},_convertForm:function(t){if(!this._isNonEditable(t)){var e=this.utils.replaceToTag(t,"figure");this._setFigure(e,"form")}},_convertIframe:function(t){if(!this._isNonEditable(t)){var e=$R.dom(t);if(0===e.closest(".redactor-component").length){var i=t.getAttribute("src"),s=i&&(i.match(this.opts.regex.youtube)||i.match(this.opts.regex.vimeo)),a=this._wrapFigure(t);s&&this._setFigure(a,"video")}}},_convertCode:function(t){if(!this._isNonEditable(t)){var e=this._wrapFigure(t);this._setFigure(e,"code")}},_convertWidget:function(t){if(!this._isNonEditable(t)){var e=$R.dom(t);e.addClass("redactor-component"),e.attr("data-redactor-type","widget"),e.attr("data-widget-code",encodeURI(t.innerHTML.trim()))}},_unconvertForm:function(t){this.utils.replaceToTag(t,"form")},_unconvertTable:function(t){var e=$R.dom(t);e.unwrap()},_unconvertWidget:function(t){var e=$R.dom(t);e.html(decodeURI(e.attr("data-widget-code"))),e.removeAttr("data-widget-code")},_unconvertImages:function(t){var e=$R.dom(t);e.removeClass("redactor-component");var i=0!==e.closest("li").length,s=0!==e.closest("table").length,a=0!==e.find("figcaption").length,n=e.attr("style"),r=!(null===n||""===n),o=""!==e.attr("class");(i||s&&!a&&!r&&!o)&&e.unwrap()},_removeTypes:function(t){var e=$R.dom(t),i=e.attr("data-redactor-type"),s=["image","widget","line","video","code","form","table"];if(i&&-1!==s.indexOf(i)&&e.removeAttr("data-redactor-type"),e.hasClass("redactor-keep-figure"))e.removeClass("redactor-keep-figure");else if(!1===this.opts.imageFigure){var a=0!==e.find("figcaption").length;a||e.unwrap()}},_wrapFigure:function(t){var e=$R.dom(t),i=e.closest("figure");return 0===i.length?e.wrap("<figure>"):i},_setFigure:function(t,e){t.addClass("redactor-component"),t.attr("data-redactor-type",e)},_setContenteditableCode:function(t){if(!this._isNonEditable(t)){var e=$R.dom(t),i=e.children("code").first(),s=0!==i.length?i:e;s.attr("contenteditable",!0).attr("tabindex","-1")}},_acceptExtraRules:function(t,e){for(var i in e)"function"==typeof e[i]&&e[i](t)},_isNonEditable:function(t){return 0!==$R.dom(t).closest(".non-editable").length}}),$R.add("class","cleaner.paragraphize",{init:function(t){this.app=t,this.opts=t.opts,this.utils=t.utils,this.element=t.element,this.stored=[],this.remStart="#####replace",this.remEnd="#####",this.paragraphizeTags=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"]},convert:function(t){var e=this._isConverted(t);return!0===e?this._convert(t):e},_convert:function(t){var e=this.opts.breakline?"sdivtag":this.opts.markup;return t=this._storeTags(t),t=t.trim(),this.opts.breakline?(t=t.replace(new RegExp("\\n#####","gi"),"xnonbreakmarkerz#####"),t=t.replace(new RegExp("#####\\n\\n","gi"),"#####\nxnonbreakmarkerz"),t=t.replace(new RegExp("#####\\n","gi"),"#####xnonbreakmarkerz"),t=t.replace(/<br\s?\/?>\n/gi,"<br>"),t=t.replace(/\n/g,"<br>"),t=t.replace(/xnonbreakmarkerz/gi,"\n")):t=t.replace(/[\n]+/g,"\n"),t=this._trimEmptyLines(t),t=this.opts.breakline?t:t.replace(/<br\s?\/?>\n/gi,"xbreakmarkerz\n"),t=t.replace(/(?:\r\n|\r|\n)/g,"xparagraphmarkerz"),t=t.replace(/xparagraphmarkerz/gi,"</"+e+">\n<"+e+">"),t=this.opts.breakline?t:t.replace(/xbreakmarkerz/gi,"<br>"),t="<"+e+">"+t+"</"+e+">",t=t.replace(new RegExp("<"+e+">#####","gi"),"#####"),t=t.replace(new RegExp("#####</"+e+">","gi"),"#####"),t=this._restoreTags(t),t=this.opts.breakline?t:t.replace(new RegExp("<"+e+"><br\\s?/?></"+e+">","gi"),"<"+e+"></"+e+">"),t=t.replace(new RegExp("<sdivtag>","gi"),'<div data-redactor-tag="br">'),t.replace(new RegExp("sdivtag","gi"),"div")},_storeTags:function(t){var e=this,i=this.utils.buildWrapper(t);return this.opts.breakline&&i.find("p").each(function(t){var e=$R.dom(t),i=0===e.closest("figure[data-redactor-type=widget],figure[data-redactor-type=form],.non-editable").length;i&&(e.append("<br><br>"),e.unwrap())}),i.find(this.paragraphizeTags.join(", ")).each(function(t,i){var s=document.createTextNode("\n"+e.remStart+i+e.remEnd+"\n");e.stored.push(t.outerHTML),t.parentNode.replaceChild(s,t)}),this.utils.getWrapperHtml(i)},_restoreTags:function(t){for(var e=0;e<this.stored.length;e++)this.stored[e]=this.stored[e].replace(/\$/g,"&#36;"),t=t.replace(this.remStart+e+this.remEnd,this.stored[e]);return t},_trimEmptyLines:function(t){for(var e="",i=t.split("\n"),s=0;s<i.length;s++)""!==i[s].trim()&&(e+=i[s]+"\n");return e.replace(/\n$/,"")},_isConverted:function(t){return this._isDisabled(t)?t:!this._isEmptyHtml(t)||this.opts.emptyHtml},_isDisabled:function(){return!1===this.opts.paragraphize||this.element.isType("inline")},_isEmptyHtml:function(t){return""===t||"<p></p>"===t||"<div></div>"===t}}),$R.add("service","detector",{init:function(t){this.app=t,this.userAgent=navigator.userAgent.toLowerCase()},isWebkit:function(){return/webkit/.test(this.userAgent)},isFirefox:function(){return this.userAgent.indexOf("firefox")>-1},isIe:function(t){return document.documentMode||/Edge/.test(navigator.userAgent)?"edge":(e=RegExp("msie"+(isNaN(t)?"":"\\s"+t),"i").test(navigator.userAgent),e||(e=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),e);var e},isMobile:function(){return/(iPhone|iPod|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}),$R.add("service","offset",{init:function(t){this.app=t},get:function(t,e){var i={start:0,end:0},s=this.utils.getNode(t);if(!s)return!1;var a=this.editor.isEditor(s),n=!!a||this.selection.isIn(s),r=this.selection.getRange();if(a||n){if(this.selection.is()&&n){var o=$R.dom(r.startContainer),l=o.hasClass("redactor-component")?r.startOffset:0,d=r.cloneRange();d.selectNodeContents(s),d.setEnd(r.startContainer,r.startOffset);var c=this._getString(r,e);i.start=this._getString(d,e).length-l,i.end=i.start+c.length+l}}else i=!1;return i},set:function(t,e){if(!this._setComponentOffset(e)){this.component.clearActive();var i=this.utils.getNode(e);if(i){var s=this.size(i),a=0,n=document.createRange();t.end=t.end>s?s:t.end,n.setStart(i,0),n.collapse(!0);for(var r=[i],o=!1,l=!1;!l&&(i=r.pop());)if(3==i.nodeType){var d=a+i.length;!o&&!this._isFigcaptionNext(i)&&t.start>=a&&t.start<=d&&(n.setStart(i,t.start-a),o=!0),o&&t.end>=a&&t.end<=d&&(n.setEnd(i,t.end-a),l=!0),a=d}else for(var c=i.childNodes.length;c--;)r.push(i.childNodes[c]);this.selection.setRange(n)}}},size:function(t,e){var i=this.utils.getNode(t);if(i){var s=document.createRange(),a=s.cloneRange();return a.selectNodeContents(i),this._getString(a,e).length}return 0},_getString:function(t,e){var i=t.toString();return i=this.editor.isEmpty()?i.replace(/\uFEFF/g,""):i,e?i.trim():i},_setComponentOffset:function(t){return!!this.component.isNonEditable(t)&&this.component.setActive(t)},_isFigcaptionNext:function(t){var e=t.nextSibling;return""===t.nodeValue.trim()&&e&&"FIGCAPTION"===e.tagName}}),$R.add("service","inspector",{init:function(t){this.app=t},parse:function(t){return $R.create("inspector.parser",this.app,this,t)},isText:function(t){if("string"==typeof t&&!/^\s*<(\w+|!)[^>]*>/.test(t))return!0;var e=$R.dom(t).get();return e&&3===e.nodeType},isInlineTag:function(t,e){var i=this._extendTags(this.opts.inlineTags,e);return this._isTag(t)&&-1!==i.indexOf(t.toLowerCase())},isBlockTag:function(t,e){var i=this._extendTags(this.opts.blockTags,e);return this._isTag(t)&&-1!==i.indexOf(t.toLowerCase())},isTableCellTag:function(t){return-1!==["td","th"].indexOf(t.toLowerCase())},isHeadingTag:function(t){return-1!==["h1","h2","h3","h4","h5","h6"].indexOf(t.toLowerCase())},_isTag:function(t){return void 0!==t&&t},_extendTags:function(t,e){if(t=t.concat(t),e)for(var i=0;i<e.length;i++)t.push(e[i]);return t}}),$R.add("class","inspector.parser",{init:function(t,e,i){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.utils=t.utils,this.editor=t.editor,this.selection=t.selection,this.inspector=e,this.el=i,this.$el=$R.dom(this.el),this.node=this.$el.get(),this.$component=this.$el.closest(".redactor-component",".redactor-in")},isEditor:function(){return this.node===this.editor.getElement().get()},isInEditor:function(){return 0!==this.$el.parents(".redactor-in-"+this.uuid).length},isComponent:function(){return 0!==this.$component.length},isComponentType:function(t){return this.getComponentType()===t},isComponentActive:function(){return this.isComponent()&&this.$component.hasClass("redactor-component-active")},isComponentEditable:function(){var t=["code","table"],e=this.getComponentType();return this.isComponent()&&-1!==t.indexOf(e)},isFigcaption:function(){return this.getFigcaption()},isPre:function(){return this.getPre()},isCode:function(){var t=this.$el.closest("code"),e=t.parent("pre");return 0!==t.length&&0===e.length},isList:function(){return this.getList()},isFirstListItem:function(){return this._getLastOrFirstListItem("first")},isLastListItem:function(){return this._getLastOrFirstListItem("last")},isFirstTableCell:function(){return this._getLastOrFirstTableCell("first")},isLastTableCell:function(){return this._getLastOrFirstTableCell("last")},isTable:function(){return this.isComponentType("table")||this.getTable()},isHeading:function(){return this.getHeading()},isBlockquote:function(){return this.getBlockquote()},isDl:function(){return this.getDl()},isParagraph:function(){return this.getParagraph()},isLink:function(){return this.getLink()},isFile:function(){return this.getFile()},isText:function(){return this.inspector.isText(this.el)},isInline:function(){var t=this.opts.inlineTags;return!!this.isElement()&&-1!==t.indexOf(this.node.tagName.toLowerCase())},isBlock:function(){var t=this.opts.blockTags;return!!this.isElement()&&-1!==t.indexOf(this.node.tagName.toLowerCase())},isElement:function(){return this.node&&this.node.nodeType&&3!==this.node.nodeType},hasParent:function(t){return 0!==this.$el.closest(t.join(",")).length},getNode:function(){return this.node},getTag:function(){return!!this.isElement()&&this.node.tagName.toLowerCase()},getComponent:function(){return!!this.isComponent()&&this.$component.get()},getComponentType:function(){return!!this.isComponent()&&this.$component.attr("data-redactor-type")},getFirstNode:function(){return this.utils.getFirstNode(this.node)},getLastNode:function(){return this.utils.getLastNode(this.node)},getFirstElement:function(){return this.utils.getFirstElement(this.node)},getLastElement:function(){return this.utils.getLastElement(this.node)},getFigcaption:function(){return this._getClosestNode("figcaption")},getPre:function(){return this._getClosestNode("pre")},getCode:function(){return this._getClosestNode("code")},getList:function(){return this._getClosestNode("ul, ol")},getParentList:function(){return this._getClosestUpNode("ul, ol")},getListItem:function(){return this._getClosestNode("li")},getTable:function(){return this.getComponentType("table")?this.$component.find("table").get():this._getClosestNode("table")},getTableCell:function(){var t=this.$el.closest("td, th");return 0!==t.length&&t.get()},getComponentCodeElement:function(){return!!this.isComponentType("code")&&this.$component.find("pre code, pre").last().get()},getImageElement:function(){return!!this.isComponentType("image")&&this.$component.find("img").get()},getParagraph:function(){return this._getClosestNode("p")},getHeading:function(){return this._getClosestNode("h1, h2, h3, h4, h5, h6")},getDl:function(){return this._getClosestNode("dl")},getBlockquote:function(){return this._getClosestNode("blockquote")},getLink:function(){var t=this.isComponent()&&!this.isFigcaption(),e=this.isComponentType("table");if(e||!t){var i=this._getClosestElement("a");return!(!i||i.attr("data-file"))&&i.get()}return!1},getFile:function(){var t=this.isComponent(),e=this.isComponentType("table");if(e||!t){var i=this._getClosestElement("a");return!(!i||!i.attr("data-file"))&&i.get()}return!1},findFirstNode:function(t){return this.$el.find(t).first().get()},findLastNode:function(t){return this.$el.find(t).last().get()},_getLastOrFirstListItem:function(t){var e=this.getList(),i=this.getTag();if(e&&"li"===i){var s=$R.dom(e).find("li")[t]().get();if(s&&this.node===s)return!0}return!1},_getLastOrFirstTableCell:function(t){var e=this.getTable(),i=this.getTag();if(e&&("td"===i||"th"===i)){var s=$R.dom(e).find("td, th")[t]().get();if(s&&this.node===s)return!0}return!1},_getClosestUpNode:function(t){var e=this.$el.parents(t,".redactor-in").last();return 0!==e.length&&e.get()},_getClosestNode:function(t){var e=this.$el.closest(t,".redactor-in");return 0!==e.length&&e.get()},_getClosestElement:function(t){var e=this.$el.closest(t,".redactor-in");return 0!==e.length&&e}}),$R.add("service","marker",{init:function(t){this.app=t},build:function(t,e){var i=document.createElement("span");return i.id="selection-marker-"+this._getPos(t),i.className="redactor-selection-marker",i.innerHTML=this.opts.markerChar,e?i.outerHTML:i},buildHtml:function(t){return this.build(t,!0)},insert:function(t){this.remove();var e="both"!==t&&("start"===t||this.selection.isCollapsed());this.selection.is()||this.editor.focus();var i=this.selection.getRange();if(i){var s=this.build("start"),a=this.build("end"),n=i.cloneRange();return e||(n.collapse(!1),n.insertNode(a)),n.setStart(i.startContainer,i.startOffset),n.collapse(!0),n.insertNode(s),i.setStartAfter(s),e||i.setEndBefore(a),this.selection.setRange(i),s}},find:function(t,e){var i=this.editor.getElement(),s=(e||i).find("span#selection-marker-"+this._getPos(t));return 0!==s.length&&s.get()},restore:function(){var t=this.find("start"),e=this.find("end"),i=this.selection.getRange();if(i&&this.selection.is()||(this.editor.focus(),i=document.createRange()),t){var s=!!e&&e.previousSibling,a=t.nextSibling;a=(!a||3!==a.nodeType||""!==a.textContent.replace(/[\n\t]/g,""))&&a,e?a&&"selection-marker-end"===a.id?this._restoreInject(i,t):s&&a?(i.selectNodeContents(s),i.collapse(!1),i.setStart(a,0)):s&&!a?(i.selectNodeContents(s),i.collapse(!1),i.setStartAfter(t)):(i.setStartAfter(t),i.setEndBefore(e)):a?(i.selectNodeContents(a),i.collapse(!0)):this._restoreInject(i,t),this.selection.setRange(i),t&&t.parentNode.removeChild(t),e&&e.parentNode.removeChild(e)}},remove:function(){var t=this.find("start"),e=this.find("end");t&&t.parentNode.removeChild(t),e&&e.parentNode.removeChild(e)},_getPos:function(t){return void 0===t?"start":t},_restoreInject:function(t,e){var i=this.utils.createInvisibleChar();$R.dom(e).after(i),t.selectNodeContents(i),t.collapse(!1)}}),$R.add("service","component",{init:function(t){this.app=t,this.activeClass="redactor-component-active"},create:function(t,e){return $R.create(t+".component",this.app,e)},build:function(t){var e,i=$R.dom(t),s=i.attr("data-redactor-type");return s&&(e=this.create(s,t)),e||t},remove:function(t,e){var i=$R.dom(t).closest(".redactor-component"),s=i.attr("data-redactor-type"),a=i.parent(),n=this.inspector.parse(a),r=this.utils.findSiblings(i,"prev"),o=this.utils.findSiblings(i,"next"),l=this.app.broadcast(s+".delete",i);if(!1!==l){if(i.remove(),this.app.broadcast(s+".deleted",i),this.app.broadcast("contextbar.close"),this.app.broadcast("imageresizer.stop"),!1!==e){var d=n.getTableCell();d&&this.utils.isEmptyHtml(d.innerHTML)?this.caret.setStart(d):o?this.caret.setStart(o):r?this.caret.setEnd(r):this.editor.startFocus()}this.editor.isEmpty()&&(this.editor.setEmpty(),this.editor.startFocus(),this.app.broadcast("empty"))}},isNonEditable:function(t){var e=this.inspector.parse(t);return e.isComponent()&&!e.isComponentEditable()},isActive:function(t){var e;if(t){var i=this.inspector.parse(t);return e=$R.dom(i.getComponent()),e.hasClass(this.activeClass)}return e=this._find(),0!==e.length},getActive:function(t){var e=this._find();return 0!==e.length&&(t?e:e.get())},setActive:function(t){this.clearActive(),this.editor.focus();var e=this.inspector.parse(t),i=e.getComponent(),s=$R.dom(i);if(!e.isFigcaption()){var a=s.find(".redactor-component-caret");0===a.length&&(a=this._buildCaret(),s.prepend(a)),this.caret.setAtStart(a.get())}s.addClass(this.activeClass)},clearActive:function(){var t=this._find();t.removeClass(this.activeClass),t.find(".redactor-component-caret").remove(),this.app.broadcast("imageresizer.stop")},setOnEvent:function(t,e){this.clearActive();var i=this.inspector.parse(t.target);i.isFigcaption()||i.isComponentEditable()||i.isComponent()&&(this.setActive(t.target),!0!==e&&t.preventDefault())},executeScripts:function executeScripts(){for(var $editor=this.editor.getElement(),scripts=$editor.find("[data-redactor-type]").find("script").getAll(),i=0;i<scripts.length;i++)if(""!==scripts[i].src){var src=scripts[i].src;this.$doc.find('head script[src="'+src+'"]').remove();var $script=$R.dom("<script>");$script.attr("src",src),$script.attr("async defer"),-1!==src.search("instagram")&&$script.attr("onload","window.instgrm.Embeds.process()");var head=document.getElementsByTagName("head")[0];head&&head.appendChild($script.get())}else eval(scripts[i].innerHTML)},_find:function(){return this.editor.getElement().find("."+this.activeClass)},_buildCaret:function(){var t=$R.dom("<span>");return t.addClass("redactor-component-caret"),t.attr("contenteditable",!0),t}}),$R.add("service","insertion",{init:function(t){this.app=t},set:function(t,e,i){t=!1!==e?this.cleaner.input(t):t,t=!1!==e?this.cleaner.paragraphize(t):t;var s=this.editor.getElement();return s.html(t),!1!==i&&this.editor.endFocus(),t},insertNode:function(t,e){this.editor.focus();var i=this.utils.isFragment(t)?t:this.utils.createFragment(t);return this._collapseSelection(),this._insertFragment(i),this._setCaret(e,i),this._sendNodes(i.nodes)},insertBreakLine:function(){return this.insertNode(document.createElement("br"),"after")},insertNewline:function(){return this.insertNode(document.createTextNode("\n"),"after")},insertText:function(t){return this.insertHtml(this.cleaner.getFlatText(t))},insertChar:function(t){return this.insertNode(t,"after")},insertRaw:function(t){return this.insertHtml(t,!1)},insertToEnd:function(t,e){if(t){3===t.nodeType&&-1!==t.nodeValue.search(/^\n/)&&(t=t.previousElementSibling);var i=$R.dom(t);if(i.attr("data-redactor-type")===e){var s=this.opts.breakline?"<br>":"<p>",a=$R.dom(s);i.after(a),this.caret.setStart(a)}}},insertPoint:function(t){var e,i,s=this.marker.build("start"),a=!1,n=t.clientX,r=t.clientY;if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(n,r),l=document.getSelection();i=this.inspector.parse(o.offsetNode),i.isInEditor()&&(e=l.getRangeAt(0),e.setStart(o.offsetNode,o.offset),e.collapse(!0),e.insertNode(s),a=!0)}else document.caretRangeFromPoint&&(e=document.caretRangeFromPoint(n,r),i=this.inspector.parse(e.startContainer),i.isInEditor()&&(e.insertNode(s),a=!0));return a},insertToPoint:function(t,e,i){var s=!0===i||this.insertPoint(t);if(!s){var a=this.editor.getLastNode();$R.dom(a).after(this.marker.build("start"))}return this.component.clearActive(),this.selection.restoreMarkers(),this.insertHtml(e)},insertToOffset:function(t,e){return this.offset.set({start:t,end:t}),this.insertHtml(e)},insertHtml:function(t,e){if(this.opts.input){var i=this.utils.parseHtml(t);if(this.selection.isAll())return this._insertToAllSelected(i);if(!this.selection.is()){var s=$R.dom("<p>"),a=this.editor.getElement();a.append(s),this.caret.setStart(s)}var n=this.selection.isCollapsed(),r=this.selection.isText(),o=this.selection.getCurrent(),l=this.inspector.parse(o);this._collapseSelection(),i=this._getCleanedInput(i,l,e);var d,c,h=this._isFigure(i.html),u=this._isComponentSpan(i.html),p=this.inspector.isText(i.html);if(this.editor.isEmpty())return this._insertToEmptyEditor(i.html);if(l.isComponent()&&!l.isComponentEditable())return this._insertToWidget(o,l,i.html);if(u)return this.insertNode(i.nodes,"end");if(h&&!r&&!l.isList())return l.isInline()?this._insertToInline(o,i):(d=this.utils.createFragment(i.html),this.utils.splitNode(o,d),this.caret.setEnd(d.last),this._sendNodes(d.nodes));if(l.isCode())return this._insertToCode(i,o,e);if(l.isPre())return this._insertToPre(i,e);if(l.isHeading()||l.isFigcaption())return i.html=!1!==e?this.cleaner.removeTagsExcept(i.html,["a"]):i.html,i.html=!1!==e?this.cleaner.replaceNbspToSpaces(i.html):i.html,d=this.utils.createFragment(i.html),this.insertNode(d,"end");if(p)return!r&&"br"!==this.opts.markup&&this._hasBlocksAndImages(i.nodes)?(i.html=!1!==e?this.cleaner.paragraphize(i.html):i.html,d=this.utils.createFragment(i.html),this.utils.splitNode(o,d),this.caret.setEnd(d.last),this._sendNodes(d.nodes)):(i.html=!1!==e?i.html.replace(/\n/g,"<br>"):i.html,d=this.utils.createFragment(i.html),this.insertNode(d.nodes,"end"));if(!n&&!h)return i.html=!1!==e?this.cleaner.paragraphize(i.html):i.html,d=this.utils.createFragment(i.html),this.insertNode(d,"end");if(l.isInline()&&!this._isPlainHtml(i.html))return this._insertToInline(o,i);if(l.isBlockquote()||l.isDl())return c=this.opts.inlineTags,c.concat(["br"]),i.html=!1!==e?this.cleaner.replaceBlocksToBr(i.html):i.html,i.html=!1!==e?this.cleaner.removeTagsExcept(i.html,c):i.html,d=this.utils.createFragment(i.html),this.insertNode(d,"end");if(l.isParagraph())return this._isPlainHtml(i.html)?this.insertNode(i.nodes,"end"):(i.html=!1!==e?this.cleaner.paragraphize(i.html):i.html,d=this.utils.createFragment(i.html),this.utils.splitNode(o,d),this.caret.setEnd(d.last),this._sendNodes(d.nodes));if(l.isList()&&(c=this.opts.inlineTags,c=c.concat(["br","li","ul","ol","img"]),i.html=!1!==e?this.cleaner.replaceBlocksToBr(i.html):i.html,i.html=!1!==e?this.cleaner.removeTagsExcept(i.html,c):i.html,i.html=!1!==e?this.cleaner.removeBrAtEnd(i.html):i.html,d=this.utils.createFragment(i.html),i.nodes=d.nodes,this._containsTags(i.html,["ul","ol","li"]))){var m=this.selection.getElement(o);if(m&&"LI"===m.tagName&&this.caret.isStart(m)){i.nodes=$R.dom(d.nodes).unwrap("ul, ol").getAll(),$R.dom(m).before(i.nodes);var f=i.nodes[i.nodes.length-1];return this.caret.setEnd(f),this._sendNodes(i.nodes)}return this._isPlainHtml(i.html)?this.insertNode(d,"end"):(d=this._buildList(i,m,d),this.utils.splitNode(o,d,!0),this.caret.setEnd(d.last),this._sendNodes(d.nodes))}return this.insertNode(i.nodes,"end")}},_insertToAllSelected:function(t){var e=this.set(t.html),i=this.utils.parseHtml(e);return this._sendNodes(i.nodes)},_insertToEmptyEditor:function(t){t=this.cleaner.paragraphize(t);var e=this.utils.createFragment(t),i=this.editor.getElement();return i.html(""),i.append(e.frag),this.caret.setEnd(e.last),this._sendNodes(e.nodes)},_insertToInline:function(t,e){var i=this.utils.createFragment(e.html);return this.utils.splitNode(t,i,!1,!0),this.caret.setEnd(i.last),this._sendNodes(i.nodes)},_insertToCode:function(t,e,i){t.html=!1!==i?this.cleaner.encodeHtml(t.html):t.html,t.html=!1!==i?this.cleaner.removeNl(t.html):t.html;var s=this.utils.createFragment(t.html),a=this.insertNode(s,"end");return this.utils.normalizeTextNodes(e),a},_insertToPre:function(t,e){t.html=!1!==e?this.cleaner.encodeHtml(t.html):t.html;var i=this.utils.createFragment(t.html);return this.insertNode(i,"end")},_insertToWidget:function(t,e,i){i=this._isComponentSpan(i)?i:this.cleaner.paragraphize(i);var s=this.utils.createFragment(i),a=e.getComponent(),n=$R.dom(a);return n.after(s.frag),n.remove(),this.caret.setEnd(s.last),this._sendNodes(s.nodes)},_insertFragment:function(t){var e=this.selection.getRange();if(e){if(this.selection.isCollapsed()){var i=e.startContainer;3!==i.nodeType&&"BR"===i.tagName&&(this.caret.setAfter(i),i.parentNode.removeChild(i))}else e.deleteContents();e.insertNode(t.frag)}},_sendNodes:function(t){for(var e=0;e<t.length;e++){var i=t[e],s=3!==i.nodeType&&"function"==typeof i.getAttribute&&i.getAttribute("data-redactor-type");s&&this.app.broadcast(s+".inserted",this.component.build(i))}return this.detector.isIe()&&this.editor.getElement().find("[data-redactor-type=table]").attr("contenteditable",!0),this.app.broadcast("inserted",t),this.component.executeScripts(),t},_setCaret:function(t,e){var i=this._isLastInline(e);t?(t=i&&"end"===t?"after":t,this.caret["set"+this.utils.ucfirst(t)](e.last)):!1!==t&&i&&this.caret.setAfter(e.last)},_isLastInline:function(t){if(t.last){var e=this.inspector.parse(t.last);return e.isInline()}return!1},_getCleanedInput:function(t,e,i){var s=e.isCode()||e.isPre();return t.html=t.html.replace(/&nbsp;/g," "),t.html=s||!1===i?t.html:this.cleaner.input(t.html),s||!1===i?t:this.utils.parseHtml(t.html)},_getContainer:function(t){return $R.dom(this.utils.createTmpContainer(t))},_buildList:function(t,e,i){var s=t.nodes,a=s[0];if(a&&3!==a.nodeType&&"li"===a.tagName){var n=$R.dom(e),r=n.get().tagName.toLowerCase(),o=$R.dom("<"+r+" />");return o.append(i.nodes),this.utils.createFragment(o.get().outerHTML)}return i},_containsTags:function(t,e){return 0!==this._getContainer(t).find(e.join(",")).length},_collapseSelection:function(){},_hasFigureOrTable:function(t){return 0!==this._getContainer(t).find("figure, table").length},_hasBlocks:function(t){return 0!==this._getContainer(t).find(this.opts.blockTags.join(",")).length},_hasBlocksAndImages:function(t){return 0!==this._getContainer(t).find(this.opts.blockTags.join(",")+",img").length},_isPlainHtml:function(t){return 0===this._getContainer(t).find(this.opts.blockTags.join(",")+", img").length},_isFigure:function(t){return this._isHtmlString(t)?0!==$R.dom(t).closest("figure").length:void 0},_isComponentSpan:function(t){return this._isHtmlString(t)?0!==$R.dom(t).closest("span.redactor-component").length:void 0},_isHtmlString:function(t){return!("string"==typeof t&&!/^\s*<(\w+|!)[^>]*>/.test(t))}}),$R.add("service","block",{mixins:["formatter"],init:function(t){this.app=t},format:function(t){return this.type=t.type?t.type:"set",this.tag="string"==typeof t?t:t.tag,this.tag=this._prepareTag(this.tag),this.tag=this.tag.toLowerCase(),"string"==typeof t?this.args=!1:this.buildArgs(t),this._format()},getBlocks:function(t){return this.selection.getBlocks({tags:t||this._getTags(),first:!0})},getElements:function(t){var e=this.selection.getBlock();return this.selection.isCollapsed()||!e||"TD"!==e.tagName&&"TH"!==e.tagName?$R.dom(this.getBlocks(t)):this._wrapInsideTable("div")},clearFormat:function(t){this.selection.save();var e=this.getElements(t||this._getTags());return e.each(function(t){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name)}),this.selection.restore(),e.getAll()},_format:function(){this.selection.save();var t,e,i=this.getBlocks(),s=this.selection.getBlock(),a=[];if(1===i.length&&"DIV"===i[0].tagName){if(t=this._getTextNodesData(),!t||0===t.nodes.length)return a=this._replaceBlocks(i),a=this._sendNodes(a),setTimeout(function(){this.selection.restore()}.bind(this),0),a;e=this._getReplacedTag("set"),o=$R.dom("<"+e+">"),l=t.last.nextSibling,l&&"BR"===l.tagName&&$R.dom(l).remove();for(var n=0;n<t.nodes.length;n++)o.append(t.nodes[n]);return this.utils.splitNode(i[0],[o.get()]),a=this._sendNodes([o.get()]),this.utils.isEmptyHtml(o.html())?this.caret.setStart(o):setTimeout(function(){this.selection.restore()}.bind(this),0),a}if(i.length>0)return a=this._replaceBlocks(i),a=this._sendNodes(a),setTimeout(function(){this.selection.restore()}.bind(this),0),a;if(!this.selection.isCollapsed()&&s&&("TD"===s.tagName||"TH"===s.tagName))return e=this._getReplacedTag("set"),o=this._wrapInsideTable(e),this.selection.setAll(o),this._sendNodes([o.get()]);if(this.selection.isCollapsed()&&s&&("TD"===s.tagName||"TH"===s.tagName)){var r=this._getChildTextNodes(s);e=this._getReplacedTag("set");var o=$R.dom("<"+e+">");$R.dom(r.first).before(o);for(n=0;n<r.nodes.length;n++)o.append(r.nodes[n]);var l=o.get().nextSibling;return l&&"BR"===l.tagName&&$R.dom(l).remove(),this._sendNodes([o.get()])}return a},_wrapInsideTable:function(t){var e=this._getTextNodesData(),i=$R.dom("<"+t+">");$R.dom(e.first).before(i);for(var s=0;s<e.nodes.length;s++)i.append(e.nodes[s]);var a=i.get().nextSibling;return a&&"BR"===a.tagName&&$R.dom(a).remove(),i},_prepareTag:function(t){return"undefined"==typeof t?this.opts.markup:t},_sendNodes:function(t){return t.length>0&&(t=this.applyArgs(t,!1),t=this._combinePre(t),t=this._cleanBlocks(t)),t},_getTags:function(){return["div","p","blockquote","pre","h1","h2","h3","h4","h5","h6"]},_replaceBlocks:function(t){for(var e=[],i=this._isToggleFormatType(t)?"toggle":"set",s=this._getReplacedTag(i),a=0;a<t.length;a++){var n=this.utils.replaceToTag(t[a],s);e.push(n.get())}return e},_getReplacedTag:function(t){var e="toggle"===t?this.opts.markup:this.tag;return this.opts.breakline&&"p"===e?"div":e},_getChildTextNodes:function(t){for(var e=t.childNodes,i=e[0],s=[],a=0;a<=e.length;a++){var n=e[a];if(n&&3!==n.nodeType&&this.inspector.isBlockTag(n.tagName))break;s.push(n)}return{nodes:s,first:i}},_getTextNodesData:function(){var t=this.selection.getNodes({textnodes:!0,keepbr:!0});if(0===t.length)return!1;for(var e=t[0],i=t[t.length-1],s=i,a=!1;!a;){var n=this.selection.getInline(s);s=n?n.nextSibling:s.nextSibling,s&&(3===s.nodeType||"BR"!==s.tagName&&!this.inspector.isBlockTag(s.tagName))?t.push(s):a=!0}return{nodes:t,first:e,last:i}},_isToggleFormatType:function(t){for(var e=0,i=t.length,s=0;i>s;s++)t[s]&&this.tag===t[s].tagName.toLowerCase()&&e++;return e===i},_combinePre:function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i].nextElementSibling;if(s&&"PRE"===t[i].tagName&&"PRE"===s.tagName){var a=$R.dom(t[i]),n=$R.dom(s),r=document.createTextNode("\n");a.append(r),a.append(n),n.unwrap("pre")}e.push(t[i])}return e},_cleanBlocks:function(t){for(var e=["h1","h2","h3","h4","h5","h6"],i=this.opts.inlineTags,s=0;s<t.length;s++){var a=t[s].tagName.toLowerCase(),n=$R.dom(t[s]);-1!==e.indexOf(a)?n.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker").unwrap():"pre"===a&&n.find(i.join(",")).not(".redactor-selection-marker").unwrap(),this.opts.breakline&&"div"===a?n.attr("data-redactor-tag","br"):n.removeAttr("data-redactor-tag"),this.utils.normalizeTextNodes(t[s])}return t}}),$R.add("service","inline",{mixins:["formatter"],init:function(t){this.app=t,this.count=0},format:function(t){if(!this._isFormat())return[];this.type=t.type?t.type:"set",this.tag="string"==typeof t?t:t.tag,this.tag=this.tag.toLowerCase(),this.tag=this.arrangeTag(this.tag),"string"==typeof t?this.args=!1:this.buildArgs(t),this.detector.isIe()||this.editor.disableNonEditables();var e=this.selection.isCollapsed()?this.formatCollapsed():this.formatUncollapsed();return this.detector.isIe()||this.editor.enableNonEditables(),e},_isFormat:function(){var t=this.selection.getCurrent(),e=this.inspector.parse(t),i=e.isComponent()&&!e.isComponentType("table")&&!e.isFigcaption();return!(!1!==t||!this.selection.isAll())||t&&!e.isPre()&&!e.isCode()&&!i},arrangeTag:function(t){var e=this.opts.replaceTags;for(var i in e)t===i&&(t=e[i]);return t},formatCollapsed:function(){var t,e,i,s,a=[],n=this.selection.getInlineFirst(),r=this.selection.getInlines({all:!0}),o=$R.dom(n);if(n){var l=this.inspector.parse(n),d=this.utils.isEmptyHtml(n.innerHTML);if(d)if(n.tagName.toLowerCase()===this.tag)if(this.hasSameArgs(n)){this.caret.setAfter(n),o.remove();var c=this.selection.getElement();this.utils.normalizeTextNodes(c)}else"span"===this.tag?(a=this.applyArgs([n],!1),this.caret.setStart(n)):a=this.insertInline(a);else l.hasParent([this.tag])?(t=o.closest(this.tag),e=t.get(),this.hasSameArgs(e)?(t.unwrap(),this.caret.setStart(n)):a=this.insertInline(a)):a=this.insertInline(a);else if(n.tagName.toLowerCase()===this.tag)this.hasSameArgs(n)?(s=this.utils.extractHtmlFromCaret(n),i=$R.dom("<"+this.tag+" />"),i=this.utils.cloneAttributes(n,i),o.after(i.append(s)),this.caret.setAfter(n)):a=this.insertInline(a);else if(l.hasParent([this.tag]))if(t=o.closest(this.tag),e=t.get(),this.hasSameArgs(e)){s=this.utils.extractHtmlFromCaret(e,e),i=$R.dom("<"+this.tag+" />"),i=this.utils.cloneAttributes(e,i);var h,u,p=0;r=r.reverse();for(var m=0;m<r.length;m++)r[m]!==e&&(u=$R.dom("<"+r[m].tagName.toLowerCase()+">"),0===p?h=u:h.append(u),p++);t.after(i.append(s)),t.after(h),this.caret.setStart(u)}else a=this.insertInline(a);else a=this.insertInline(a)}else a=this.insertInline(a);return a},insertInline:function(t){var e=document.createElement(this.tag);return t=this.insertion.insertNode(e,"start"),this.applyArgs(t,!1)},hasSameArgs:function(t){if(0===t.attributes.length&&!1===this.args)return!0;var e=!0;if(this.args){var i=0;for(var s in this.args){var a=$R.dom(t),n=this.args[s],r=this.utils.toParams(n),o=a.attr(s);if(n)if("style"===s){r=r.trim().replace(/;$/,"");for(var l=this.utils.styleToObj(a.attr("style")),d=r.split(";"),c=0,h=0;h<d.length;h++){var u=d[h].split(":"),p=u[0].trim(),m=u[1].trim();if(-1!==p.search(/color/)){var f=a.css(p);!f||f!==m&&this.utils.rgb2hex(f)!==m||c++}else a.css(p)===m&&c++}c===d.length&&C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(l).length===d.length&&i++}else o===r&&i++;else o&&""!==o||i++}e=i===C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(this.args).length}return e},formatUncollapsed:function(){var t=this.selection.getInlines({all:!0,inside:!0});this.detector.isIe()?this.selection.saveMarkers():this.selection.save(),this._convertTags("u"),this._convertTags("del"),this._convertToStrike(t),this.detector.isIe()?this.selection.restoreMarkers():this.selection.restore(),document.execCommand("strikethrough"),this._clearDecoration(),this.selection.save();var e=this._revertToInlines();e=this.applyArgs(e,!1);for(var i=0;i<e.length;i++){var s=e[i],a=s.tagName.toLowerCase(),n=s.attributes.length;a===this.tag&&0===n&&this.args&&($R.dom(s).unwrap(),e.splice(i,1))}return this.selection.restore(),this._clearEmptyStyle(),this._normalizeBlocks(e)},_convertTags:function(t){if(this.tag!==t){var e=this.editor.getElement();e.find(t).each(function(e){var i=this.utils.replaceToTag(e,"span");i.addClass("redactor-convertable-"+t)}.bind(this))}},_revertTags:function(t){var e=this.editor.getElement();e.find("span.redactor-convertable-"+t).each(function(e){var i=this.utils.replaceToTag(e,t);i.removeClass("redactor-convertable-"+t),this.utils.removeEmptyAttr(i,"class")&&i.removeAttr("class")}.bind(this))},_convertToStrike:function(t){for(var e=this.selection.getText().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i=0;i<t.length;i++){var s=this.arrangeTag(t[i].tagName.toLowerCase()),a=t[i],n=$R.dom(a),r=this.hasSameArgs(a);s===this.tag&&("span"===this.tag&&this._isTextSelected(a,e)?n.addClass("redactor-convertable-apply"):r&&"a"!==this.tag?this._replaceToStrike(n):"span"===this.tag?n.addClass("redactor-unconvertable-apply"):r||n.addClass("redactor-convertable-apply"))}},_replaceToStrike:function(t){t.replaceWith(function(){return $R.dom("<strike>").append(t.contents())})},_revertToInlines:function(){var t=[],e=this.editor.getElement();return"u"!==this.tag&&e.find("u").unwrap(),e.find(".redactor-convertable-apply").each(function(e){var i=$R.dom(e);i.find("strike").unwrap(),this._forceRemoveClass(i,"redactor-convertable-apply"),t.push(e)}.bind(this)),e.find("span.redactor-unconvertable-apply").each(function(t){var e=$R.dom(t);this._forceRemoveClass(e,"redactor-unconvertable-apply")}.bind(this)),e.find("strike").each(function(e){var i=this.utils.replaceToTag(e,this.tag);t.push(i.get())}.bind(this)),this._revertTags("u"),this._revertTags("del"),t},_normalizeBlocks:function(t){var e=this.opts.inlineTags,i=this.selection.getBlocks();if(i)for(var s=0;s<i.length;s++)if("PRE"===i[s].tagName){var a=$R.dom(i[s]);a.find(e.join(",")).not(".redactor-selection-marker").each(function(e){-1!==t.indexOf(e)&&(t=this.utils.removeFromArrayByValue(t,e)),$R.dom(e).unwrap()}.bind(this))}return t},_clearDecoration:function(){var t=this.editor.getElement();t.find(this.opts.inlineTags.join(",")).each(function(t){if("line-through"===t.style.textDecoration||"line-through"===t.style.textDecorationLine){var e=$R.dom(t);e.css("textDecorationLine",""),e.css("textDecoration",""),e.wrap("<strike>")}})},_clearEmptyStyle:function(){for(var t=this.getInlines(),e=0;e<t.length;e++){this._clearEmptyStyleAttr(t[e]);var i=t[e].childNodes;if(i)for(var s=0;s<i.length;s++)this._clearEmptyStyleAttr(i[s])}},_clearEmptyStyleAttr:function(t){3!==t.nodeType&&this.utils.removeEmptyAttr(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-redactor-style-cache"))},_forceRemoveClass:function(t,e){t.removeClass(e),this.utils.removeEmptyAttr(t,"class")&&t.removeAttr("class")},_isTextSelected:function(t,e){var i=this.utils.removeInvisibleChars(t.textContent);return e===i||-1!==e.search(new RegExp("^"+this.utils.escapeRegExp(i)+"$"))},getInlines:function(t){return t?this.selection.getInlines({tags:t,all:!0}):this.selection.getInlines({all:!0})},getElements:function(t){return $R.dom(this.getInlines(t))},clearFormat:function(){this.selection.save();for(var t=this.selection.getInlines({all:!0}),e=0;e<t.length;e++){var i=$R.dom(t[e]),s=this.selection.getInline(t[e]);s&&i.unwrap()}this.selection.restore()}}),$R.add("service","autoparser",{init:function(t){this.app=t},observe:function(){var t=this.editor.getElement(),e=t.find(".redactor-autoparser-object").each(function(t){var e=$R.dom(t);e.removeClass("redactor-autoparser-object"),""===e.attr("class")&&e.removeAttr("class")});e.length>0&&e.each(function(t){var e,i=!1,s=t.tagName;"A"===s?e="link":"IMG"===s?e="image":"IFRAME"===s&&(e="video"),e&&(i=$R.create(e+".component",this.app,t),this.app.broadcast(e+".inserted",i),this.app.broadcast("autoparse",e,i))}.bind(this))},format:function(t,e){this._isKey(e)&&this._format(e===this.keycodes.ENTER)},parse:function(t){var e=["figure","pre","iframe","code","a","img"],i=[],s=0;t=this.cleaner.encodePreCode(t);for(var a=0;a<e.length;a++){var n="img"===e[a]?"<"+e[a]+"[^>]*>":"<"+e[a]+"([\\w\\W]*?)</"+e[a]+">",r=t.match(new RegExp(n,"gi"));if(null!==r)for(var o=0;o<r.length;o++)t=t.replace(r[o],"#####replaceparse"+s+"#####"),i.push(r[o]),s++}if(this.opts.autoparseImages&&t.match(this.opts.regex.imageurl)){var l=t.match(this.opts.regex.imageurl);for(a=0;a<l.length;a++)t=t.replace(l[a],'<img class="redactor-autoparser-object" src="'+l[a]+'">')}if(this.opts.autoparseVideo&&(t.match(this.opts.regex.youtube)||t.match(this.opts.regex.vimeo))){var d,c,h='<iframe width="500" height="281" src="',u='" frameborder="0" allowfullscreen></iframe>';t.match(this.opts.regex.youtube)?(d="//www.youtube.com/embed/$1",c=this.opts.regex.youtube):t.match(this.opts.regex.vimeo)&&(d="//player.vimeo.com/video/$2",c=this.opts.regex.vimeo);var p=this.component.create("video",h+d+u);t=t.replace(c,p.get().outerHTML)}return this.opts.autoparseLinks&&t.match(this.opts.regex.url)&&(t=this._formatLinks(t)),t=this._restoreReplaced(i,t),this._restoreReplaced(i,t)},_isKey:function(t){return t===this.keycodes.ENTER||t===this.keycodes.SPACE},_format:function(t){var e=this.selection.getParent(),i=$R.dom(e),s=e&&0!==i.closest("figure, pre, code, img, a, iframe").length;if(!s&&this.selection.isCollapsed()){var a=this.utils.createInvisibleChar(),n=this.selection.getRange();n.insertNode(a);var r=this.selection.getCurrent(),o=this.inspector.parse(r),l=$R.dom(r);if(a.parentNode.removeChild(a),r&&3===r.nodeType){var d,c=r.textContent;if(this.opts.autoparseImages&&c.match(this._convertToRegExp(this.opts.regex.imageurl))){var h=o.isList(),u=c.match(this.opts.regex.imageurl),p=h?void 0:"<figure><img></figure>",m=this.component.create("image",p);m.setSrc(u[0]),m.addClass("redactor-autoparser-object"),c=c.replace(u[0],m.get().outerHTML),d="image"}else if(this.opts.autoparseVideo&&(c.match(this._convertToRegExp(this.opts.regex.youtube))||c.match(this._convertToRegExp(this.opts.regex.vimeo)))){var f,_,g='<iframe width="500" height="281" src="',b='" frameborder="0" allowfullscreen></iframe>';c.match(this.opts.regex.youtube)?(f="//www.youtube.com/embed/$1",_=this.opts.regex.youtube):c.match(this.opts.regex.vimeo)&&(f="//player.vimeo.com/video/$2",_=this.opts.regex.vimeo);var v=this.component.create("video",g+f+b);v.addClass("redactor-autoparser-object"),c=c.replace(_,v.get().outerHTML),d="video"}else this.opts.autoparseLinks&&c.match(this._convertToRegExp(this.opts.regex.url))&&(c=this._formatLinks(c,t),d="link");if(d){t?(this.selection.save(),l.replaceWith(c),this.selection.restore()):l.replaceWith(c);var y=this.editor.getElement(),C=y.find(".redactor-autoparser-object").removeClass("redactor-autoparser-object");if(C="link"===d?$R.create("link.component",this.app,C):C,"link"===d)t||this.caret.setAfter(C),this.app.broadcast("link.inserted",C);else{this.caret.setAfter(C);var E=C.clone();C.remove(),C=this.insertion.insertHtml(E),C=this.component.build(C)}this.app.broadcast("autoparse",d,C)}}}},_formatLinks:function(t,e){for(var i=t.match(this.opts.regex.url),s={},a=0;a<i.length;a++){e&&-1!==i[a].search(/\.$/)&&(i[a]=i[a].replace(/\.$/,""));var n=i[a],r=n,o=null!==n.match(/(https?|ftp):\/\//i)?"":"http://",l=-1!==["/","&","="].indexOf(n.slice(-1))?"":"\\b",d=!1!==this.opts.pasteLinkTarget?' target="'+this.opts.pasteLinkTarget+'"':"";r=r.length>this.opts.linkSize?r.substring(0,this.opts.linkSize)+"...":r,r=-1===r.search("%")?decodeURIComponent(r):r;var c="("+n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")",h=' class="redactor-autoparser-object"';s[c]='<a href="'+o+n.trim()+'"'+d+h+">"+r.trim()+"</a>"}for(var u in s)t=t.replace(new RegExp(u,"g"),s[u]);return t},_restoreReplaced:function(t,e){for(var i=0;i<t.length;i++)e=e.replace("#####replaceparse"+i+"#####",t[i]);return e},_convertToRegExp:function(t){return new RegExp(String(t).replace(/^\//,"").replace(/\/ig$/,"").replace(/\/gi$/,"")+"$","gi")}}),$R.add("service","storage",{init:function(t){this.app=t,this.data=[]},observeImages:function(){var t=this.editor.getElement(),e=t.find("[data-image]");e.each(this._addImage.bind(this))},observeFiles:function(){var t=this.editor.getElement(),e=t.find("[data-file]");e.each(this._addFile.bind(this))},setStatus:function(t,e){this.data[t].status=e},getChanges:function(){var t=this.editor.getElement();for(var e in this.data){var i=this.data[e],s=t.find("[data-"+i.type+'="'+i.id+'"]');this.setStatus(i.id,0!==s.length)}return this.data},add:function(t,e){var i=$R.dom(e),s=i.attr("data-"+t);this.data[s]={type:t,status:!0,node:i.get(),id:i.attr("data-"+t)}},_addImage:function(t){this.add("image",t)},_addFile:function(t){this.add("file",t)}}),$R.add("service","utils",{init:function(t){this.app=t},isEmpty:function(t){var e=!1;return t=$R.dom(t).get(),t&&(e=3===t.nodeType?""===t.textContent.trim().replace(/\n/,""):""===t.innerHTML),e},isEmptyHtml:function(t,e,i){return t=this.removeInvisibleChars(t),t=t.replace(/&nbsp;/gi,""),t=t.replace(/<\/?br\s?\/?>/g,e?"br":""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),t=t.replace(/^<div>[^\W\w\D\d]*?<\/div>$/i,""),i&&(t=t.replace(/<ul(.*?[^>])>$/i,"ul"),t=t.replace(/<ol(.*?[^>])>$/i,"ol")),t=t.replace(/<hr(.*?[^>])>$/i,"hr"),t=t.replace(/<iframe(.*?[^>])>$/i,"iframe"),t=t.replace(/<source(.*?[^>])>$/i,"source"),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.trim(),""===t},trimSpaces:function(t){return this.removeInvisibleChars(t.trim())},createInvisibleChar:function(){return document.createTextNode(this.opts.markerChar)},searchInvisibleChars:function(t){return t.search(/^\uFEFF$/g)},removeInvisibleChars:function(t){return t.replace(/\uFEFF/g,"")},trimInvisibleChars:function(t){if(this.selection.isCollapsed()){var e=this.selection.getCurrent(),i="left"===t?this.selection.getTextBeforeCaret():this.selection.getTextAfterCaret(),s=e&&3===e.nodeType&&0===this.searchInvisibleChars(i);if(s)if("left"===t)$R.dom(e).replaceWith(e.textContent.trim());else{var a=this.offset.get();this.offset.set({start:a.start+1,end:a.end+1})}}},buildWrapper:function(t){return $R.dom("<div>").html(t)},getWrapperHtml:function(t){var e=t.html();return t.remove(),e},createTmpContainer:function(t){var e=$R.dom("<div>");return"string"==typeof t?e.html(t):e.append($R.dom(t).clone(!0)),e.get()},createFragment:function(t){for(var e,i,s,a=this.createTmpContainer(t),n=document.createDocumentFragment(),r=[],o=0;e=a.firstChild;){o++;var l=n.appendChild(e);1===o&&(i=l),r.push(l),s=l}return{frag:n,first:i,last:s,nodes:r}},isFragment:function(t){return"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)&&t.frag},parseHtml:function(t){var e=this.createTmpContainer(t);return{html:e.innerHTML,nodes:e.childNodes}},splitNode:function(t,e,i,s){var a;e=this.isFragment(e)?e.frag:e,a=s?this.inspector.isInlineTag(t.tagName)?t:this.selection.getInline(t):this.inspector.isBlockTag(t.tagName)?t:this.selection.getBlock(t);var n=$R.dom(a);if(!s&&this.isEmptyHtml(a.innerHTML,!0))return n.after(e),n.remove(),e;var r=n.get().tagName.toLowerCase(),o=this.caret.isEnd(a),l=this.caret.isStart(a);if(!o&&!l){var d=this.extractHtmlFromCaret(s),c=$R.dom("<"+r+" />");c=this.cloneAttributes(a,c),n.after(c.append(d))}if(l)return n.before(e);if(i)return n.append(e);e=n.after(e);var h=n.html();return h=this.removeInvisibleChars(h),h=h.replace(/&nbsp;/gi,""),""===h&&n.remove(),e},extractHtmlFromCaret:function(t,e){var i=this.selection.getRange();if(i&&(e=e||(t?this.selection.getInline():this.selection.getBlock()))){var s=i.cloneRange();return s.selectNodeContents(e),s.setStart(i.endContainer,i.endOffset),s.extractContents()}},createMarkup:function(t){var e=document.createElement(this.opts.markup);this.opts.breakline&&e.setAttribute("data-redactor-tag","br");var i=$R.dom(t);i.after(e),this.caret.setStart(e)},createMarkupBefore:function(t){var e=document.createElement(this.opts.markup);this.opts.breakline&&e.setAttribute("data-redactor-tag","br");var i=$R.dom(t);i.before(e),this.caret.setEnd(e)},getNode:function(t){var e=$R.dom(t).get(),i=this.editor.getElement().get();return"undefined"==typeof t?i:e||!1},findSiblings:function(t,e){for(t=$R.dom(t).get(),e="next"===e?"nextSibling":"previousSibling";t=t[e];)if((3!==t.nodeType||""!==t.textContent.trim())&&"BR"!==t.tagName)return t;return!1},getElementsFromHtml:function(t,e,i){var s=document.createElement("div");s.innerHTML=t;var a=s.querySelectorAll(e),n=function(t,e){if("number"==typeof this.length&&"function"==typeof t){var i=[];if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this))for(var s=0;s<this.length;s++){if(!(s in this))return;i[s]=t.call(e||this,this[s],s,this)}return i}};return n.call(a,function(t){var e=t.getAttribute("data-redactor-type");return i&&e&&e===i?void 0:t.outerHTML})},getChildNodes:function(t,e,i){t=t&&t.nodeType&&11===t.nodeType?t:$R.dom(t).get();var s=t.childNodes,a=[];if(s)for(var n=0;n<s.length;n++)if(!(!0===i&&3===s[n].nodeType||3===s[n].nodeType&&this.isEmpty(s[n])||(a.push(s[n]),!1===e))){var r=this.getChildNodes(s[n],i);r.length>0&&(a=a.concat(r))}return a},getChildElements:function(t){return this.getChildNodes(t,!0,!0)},getFirstNode:function(t){return this._getFirst(this.getChildNodes(t,!1))},getLastNode:function(t){return this._getLast(this.getChildNodes(t,!1))},getFirstElement:function(t){return this._getFirst(this.getChildNodes(t,!1,!0))},getLastElement:function(t){return this._getLast(this.getChildNodes(t,!1,!0))},replaceToTag:function(t,e){var i=$R.dom(t);return i.replaceWith(function(t){var i=$R.dom("<"+e+">").append($R.dom(t).contents());if(t.attributes)for(var s=t.attributes,a=0;a<s.length;a++)i.attr(s[a].nodeName,s[a].value);return i})},ucfirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},removeFromArrayByValue:function(t,e){for(var i,s=arguments,a=s.length;a>1&&t.length;)for(e=s[--a];-1!==(i=t.indexOf(e));)t.splice(i,1);return t},removeEmptyAttr:function(t,e){var i=$R.dom(t);return"undefined"==typeof i.attr(e)||null===i.attr(e)||""===i.attr(e)&&(i.removeAttr(e),!0)},cloneAttributes:function(t,e){t=$R.dom(t).get(),e=$R.dom(e);for(var i=t.attributes,s=i.length;s--;){var a=i[s];e.attr(a.name,a.value)}return e},toParams:function(t){if("object"!=Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t))return t;var e=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(t);if(!e.length)return"";for(var i="",s=0;s<e.length;s++){var a=e[s];i+=a+":"+t[a]+";"}return i},styleToObj:function(t){var e={};if(t)for(var i=t.replace(/;$/,"").split(";"),s=0;s<i.length;s++){var a=i[s].split(":");e[a[0].trim()]=a[1].trim()}return e},checkProperty:function(t){for(var e=arguments[1]&&C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(arguments[1])?arguments[1]:[].slice.call(arguments,1),i=0;i<e.length;i++){if(!t||"undefined"==typeof t[e[i]])return!1;t=t[e[i]]}return t},extendData:function(t,e){for(var i in e)if("elements"===i){var s=$R.dom(e[i]);s.each(function(e){var i=$R.dom(e);if("FORM"===e.tagName){var s=i.serialize(!0);for(var a in s)t=this._setData(t,a,s[a])}else{var n=i.attr("name")?i.attr("name"):i.attr("id");t=this._setData(t,n,i.val())}}.bind(this))}else t=this._setData(t,i,e[i]);return t},_setData:function(t,e,i){return t instanceof FormData?t.append(e,i):t[e]=i,t},normalizeTextNodes:function(t){t=$R.dom(t).get(),t&&t.normalize()},isRgb:function(t){return 0===t.search(/^rgb/i)},rgb2hex:function(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t[1],10).toString(16)).slice(-2)+("0"+C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t[2],10).toString(16)).slice(-2)+("0"+C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t[3],10).toString(16)).slice(-2):""},hex2long:function(t){return-1!==t.search(/^#/)&&4===t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),t},escapeRegExp:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},getRandomId:function(){for(var t="",e="abcdefghijklmnopqrstuvwxyz0123456789",i=0;12>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},_getFirst:function(t){return 0!==t.length&&t[0]},_getLast:function(t){return 0!==t.length&&t[t.length-1]}}),$R.add("service","progress",{init:function(t){this.app=t,this.$box=null,this.$bar=null},show:function(){this._is()||this._build(),this.$box.show()},hide:function(){this._is()&&this.animate.start(this.$box,"fadeOut",this._destroy.bind(this))},update:function(t){this.show(),this.$bar.css("width",t+"%")},_is:function(){return null!==this.$box},_build:function(){this.$bar=$R.dom("<span />"),this.$box=$R.dom('<div id="redactor-progress" />'),this.$box.append(this.$bar),this.$body.append(this.$box)},_destroy:function(){this._is()&&this.$box.remove(),this.$box=null,this.$bar=null}}),$R.add("module","starter",{init:function(t){this.app=t,this.opts=t.opts,this.plugin=t.plugin,this.module=t.module},onstart:function(){var t=["element","container","source","editor","statusbar","toolbar"],e=["element","container","source","editor","statusbar","contextbar","input"];this._startStop("start",this.app,t),this._startStop("start",this.module,e)},onstop:function(){var t=["observer","element","container","source","editor","contextbar"];this._startStop("stop",this.module,t)},onenable:function(){var t=["observer","toolbar"],e=this.opts.plugins;this._startStop("start",this.module,t),this._startStop("start",this.plugin,e)},ondisable:function(){var t=["observer","toolbar"],e=this.opts.plugins;this._startStop("stop",this.module,t),this._startStop("stop",this.plugin,e)},_startStop:function(t,e,i){for(var s=0;s<i.length;s++)"undefined"!=typeof e[i[s]]&&this.app.callInstanceMethod(e[i[s]],t)}}),$R.add("module","element",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.namespace=t.namespace,this.element=t.element,this.rootOpts=$R.extend({},!0,$R.options,t.rootOpts)},start:function(){this._build(),this._buildModes(),this._buildMarkup()},stop:function(){var t=this.element.getElement();t.removeData(this.namespace+"-uuid")},_build:function(){var t=this.element.getElement();t.data(this.namespace+"-uuid",this.uuid)},_buildModes:function(){var t=this.element.getType();"inline"===t&&this._redefineOptions(this.opts.modes.inline),"div"===t&&this._redefineOptions(this.opts.modes.original),"inline"!==t&&(this._isRootOption("styles")&&this.rootOpts.styles&&(this.opts.styles=!0),this._isRootOption("source")&&!this.rootOpts.source&&(this.opts.showSource=!1))},_buildMarkup:function(){var t=this.element.getType();"inline"===t?this.opts.emptyHtml="":this.opts.breakline?(this.opts.markup="div",this.opts.emptyHtml='<div data-redactor-tag="br">'+this.opts.markerChar+"</div>"):this.opts.emptyHtml="<"+this.opts.markup+"></"+this.opts.markup+">"},_redefineOptions:function(t){for(var e in t)this.opts[e]=t[e]},_isRootOption:function(){return"undefined"!=typeof this.rootOpts.styles}}),$R.add("module","editor",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.editor=t.editor,this.source=t.source,this.element=t.element,this.component=t.component,this.container=t.container,this.inspector=t.inspector,this.autoparser=t.autoparser,this.placeholder=!1,this.events=!1},onenable:function(){this.enable()},ondisable:function(){this.disable()},onenablefocus:function(){this._enableFocus()},oncontextmenu:function(t){this.component.setOnEvent(t,!0)},onclick:function(t){this.component.setOnEvent(t)},onkeyup:function(t){var e=this.inspector.parse(t.target);e.isComponent()||this.component.clearActive()},onenablereadonly:function(){this._enableReadOnly()},ondisablereadonly:function(){this._disableReadOnly()},onautoparseobserve:function(){this.autoparser.observe()},onplaceholder:{build:function(){this._buildPlaceholder()},toggle:function(){this._togglePlacehodler()}},start:function(){this._build(),this._buildEvents(),this._buildOptions(),this._buildAccesibility()},stop:function(){var t=this.editor.getElement(),e=this.container.getElement(),i=["redactor-in","redactor-in-"+this.uuid,"redactor-structure","redactor-placeholder","notranslate",this.opts.stylesClass],s=["redactor-focus","redactor-blur","redactor-over","redactor-styles-on","redactor-styles-off","redactor-toolbar-on","redactor-text-labeled-on","redactor-source-view"];t.removeAttr("spellcheck"),t.removeAttr("dir"),t.removeAttr("contenteditable"),t.removeAttr("placeholder"),t.removeAttr("data-gramm_editor"),t.removeClass(i.join(" ")),e.removeClass(s.join(" ")),this._destroyEvents(),0===t.get().classList.length&&t.removeAttr("class")},enable:function(){var t=this.editor.getElement(),e=this.container.getElement();t.addClass("redactor-in redactor-in-"+this.uuid),t.attr({contenteditable:!0}),this.opts.structure&&t.addClass("redactor-structure"),!this.opts.toolbar||this.opts.air||this.opts.toolbarExternal||e.addClass("redactor-toolbar-on"),this._disableBrowsersEditing()},disable:function(){var t=this.editor.getElement(),e=this.container.getElement();t.removeClass("redactor-in redactor-in-"+this.uuid),t.removeClass("redactor-structure"),t.removeAttr("contenteditable"),e.addClass("redactor-toolbar-on")},_build:function(){var t=this.editor.getElement(),e=this.element.getElement(),i=this.container.getElement();i.addClass("redactor-blur"),this.opts.grammarly||t.attr("data-gramm_editor",!1),this.opts.notranslate&&t.addClass("notranslate"),this.opts.styles?(t.addClass(this.opts.stylesClass),i.addClass("redactor-styles-on")):i.addClass("redactor-styles-off"),this.opts.buttonsTextLabeled&&i.addClass("redactor-text-labeled-on"),this.element.isType("textarea")&&e.before(t)},_buildEvents:function(){this.events=$R.create("editor.events",this.app)},_buildOptions:function(){var t=this.editor.getElement();t.attr("dir",this.opts.direction),this.opts.tabindex&&t.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&t.css("min-height",this.opts.minHeight),this.opts.maxHeight&&t.css("max-height",this.opts.maxHeight),this.opts.maxWidth&&t.css({"max-width":this.opts.maxWidth,margin:"auto"})},_buildAccesibility:function(){var t=this.editor.getElement();t.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},_buildPlaceholder:function(){this.placeholder=$R.create("editor.placeholder",this.app)},_enableFocus:function(){this.opts.showSource?this._enableFocusSource():this._enableFocusEditor()},_enableFocusSource:function(){var t=this.source.getElement();this.opts.focus?(t.focus(),t.get().setSelectionRange(0,0)):this.opts.focusEnd&&t.focus()},_enableFocusEditor:function(){this.opts.focus?setTimeout(this.editor.startFocus.bind(this.editor),100):this.opts.focusEnd&&setTimeout(this.editor.endFocus.bind(this.editor),100)},_togglePlacehodler:function(){this.placeholder&&this.placeholder.toggle()},_disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1);var t=this.editor.getElement(),e=t.get();e.addEventListener?e.addEventListener("mscontrolselect",function(t){t.preventDefault()}):e.attachEvent("oncontrolselect",function(t){t.returnValue=!1})}catch(i){}},_destroyEvents:function(){this.events&&this.events.destroy()},_enableReadOnly:function(){var t=this.editor.getElement();this._getEditables(t).removeAttr("contenteditable"),t.removeAttr("contenteditable"),t.addClass("redactor-read-only"),this.events&&this.events.destroy()},_disableReadOnly:function(){var t=this.editor.getElement();this._getEditables(t).attr({contenteditable:!0}),t.removeClass("redactor-read-only"),t.attr({contenteditable:!0}),this._buildEvents()},_getEditables:function(t){return t.find("figcaption, td, th")}}),$R.add("class","editor.placeholder",{init:function(t){this.app=t,this.opts=t.opts,this.editor=t.editor,this.element=t.element,this.build()},build:function(){var t=this.element.getElement(),e=this.editor.getElement();if(!1!==this.opts.placeholder||t.attr("placeholder")){var i=!1!==this.opts.placeholder?this.opts.placeholder:t.attr("placeholder");e.attr("placeholder",i),this.toggle()}},toggle:function(){return this.editor.isEmpty(!0)?this.show():this.hide()},show:function(){var t=this.editor.getElement();t.addClass("redactor-placeholder")},hide:function(){var t=this.editor.getElement();t.removeClass("redactor-placeholder")}}),$R.add("class","editor.events",{init:function(t){this.app=t,this.opts=t.opts,this.$doc=t.$doc,this.uuid=t.uuid,this.source=t.source,this.editor=t.editor,this.cleaner=t.cleaner,this.container=t.container,this.insertion=t.insertion,this.inspector=t.inspector,this.selection=t.selection,this.component=t.component,this.blurNamespace=".redactor-blur."+this.uuid,this.eventsList=["paste","click","contextmenu","keydown","keyup","mouseup","touchstart","cut","copy","dragenter","dragstart","drop","dragover","dragleave"],this._init()},destroy:function(){var t=this.editor.getElement();t.off(".redactor-focus"),this.$doc.off("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace),this._loop("off")},focus:function(t){var e=this.container.getElement();this.editor.isPasting()||e.hasClass("redactor-focus")||(e.addClass("redactor-focus"),e.removeClass("redactor-blur"),this.app.broadcast("observe",t),this.app.broadcast("focus",t),this.isFocused=!0,this.isBlured=!1)},blur:function(t){var e=this.container.getElement(),i=$R.dom(t.target),s=[".redactor-in-"+this.uuid,".redactor-toolbar",".redactor-dropdown",".redactor-context-toolbar","#redactor-modal","#redactor-image-resizer"];this.app.broadcast("originalblur",t),this.app.stopBlur||this.app.isStarted()&&!this.editor.isPasting()&&0===i.closest(s.join(",")).length&&(this.isBlured||e.hasClass("redactor-blur")||(e.removeClass("redactor-focus"),e.addClass("redactor-blur"),this.app.broadcast("blur",t),this.isFocused=!1,this.isBlured=!0))},cut:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e);this.app.broadcast("state",t),this.component.isNonEditable(e)&&(this._passSelectionToClipboard(t,i,!0),t.preventDefault())},copy:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e);this.app.broadcast("state",t),this.component.isNonEditable(e)&&(this._passSelectionToClipboard(t,i,!1),t.preventDefault())},drop:function(t){if(t=t.originalEvent||t,t.stopPropagation(),this._removeOverClass(),!1!==this.opts.dragUpload){if(this.app.isDragComponentInside()){var e=$R.dom(this.app.getDragComponentInside()),i=e.clone(!0);return this.insertion.insertToPoint(t,i),e.remove(),this.app.setDragComponentInside(!1),this.app.broadcast("state",t),this.app.broadcast("drop",t),this.app.broadcast("image.observe",t),void t.preventDefault()}if(this.app.isDragInside()&&this.opts.input){this.insertion.insertPoint(t);var s=t.dataTransfer,a=s.getData("text/html"),n=this.selection.getRange();if(n){var r=this.selection.getBlocks();n.deleteContents();for(var o=0;o<r.length;o++)""===r[o].innerHTML&&$R.dom(r[o]).remove()}return $R.create("input.paste",this.app,t,!0,a,!0),this.app.broadcast("state",t),this.app.broadcast("drop",t),this.app.setDragInside(!1),void t.preventDefault()}this.app.broadcast("state",t),this.app.broadcast("paste",t,t.dataTransfer),this.app.broadcast("drop",t)}else t.preventDefault()},dragenter:function(t){t.preventDefault()},dragstart:function(t){this.app.setDragComponentInside(!1),this.app.setDragInside(!1);var e=this.inspector.parse(t.target);!e.isComponent()||e.isComponentEditable()||e.isFigcaption()?this.selection.is()&&!this.selection.isCollapsed()&&(this.app.setDragInside(!0),this._setDragData(t)):this.app.setDragComponentInside(e.getComponent()),this.app.broadcast("dragstart",t)},dragover:function(t){this.app.broadcast("dragover",t)},dragleave:function(t){this.app.broadcast("dragleave",t)},paste:function(t){this.app.broadcast("paste",t)},contextmenu:function(t){this.editor.disableNonEditables(),setTimeout(function(){this.editor.enableNonEditables(),this.app.broadcast("contextmenu",t)}.bind(this),0)},click:function(t){if(3===t.detail){t.preventDefault();var e=this.selection.getBlock(),i=document.createRange();i.selectNodeContents(e),this.selection.setRange(i)}var s=$R.dom(t.target);if(s.hasClass("redactor-in")){var a=s.offset().top,n=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(s.css("padding-bottom")),r=s.height(),o=a+r-2*n;o<t.pageY&&this.app.broadcast("bottomclick",t)}this.app.broadcast("state",t),this.app.broadcast("click",t)},keydown:function(t){this.app.broadcast("state",t);var e=this.app.broadcast("keydown",t);return!1===e?t.preventDefault():void 0},keyup:function(t){this.app.broadcast("keyup",t)},mouseup:function(t){this.app.broadcast("observe",t),this.app.broadcast("state",t)},touchstart:function(t){this.app.broadcast("observe",t),this.app.broadcast("state",t)},_init:function(){var t=this.editor.getElement();t.on("focus.redactor-focus click.redactor-focus",this.focus.bind(this)),this.$doc.on("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace,this.blur.bind(this)),this._loop("on")},_removeOverClass:function(){var t=this.editor.getElement();t.removeClass("over")},_loop:function(t){for(var e=this.editor.getElement(),i=0;i<this.eventsList.length;i++){var s=this.eventsList[i]+".redactor-events",a=this.eventsList[i];e[t](s,this[a].bind(this))}},_passAllToClipboard:function(t){var e=t.clipboardData,i=this.source.getCode();e.setData("text/html",i),e.setData("text/plain",i.toString().replace(/\n$/,""))},_passSelectionToClipboard:function(t,e,i){var s=t.clipboardData,a=e.getComponent(),n=$R.dom(a),r=n.clone();r.find(".redactor-component-caret").remove(),r.removeClass("redactor-component-active"),r.removeAttr("contenteditable"),r.removeAttr("tabindex");var o=r.get().outerHTML;i&&this.component.remove(a),s.setData("text/html",o),s.setData("text/plain",o.toString().replace(/\n$/,""))},_setDragData:function(t){t=t.originalEvent||t;var e=t.dataTransfer;e.effectAllowed="move",e.setData("text/Html",this.selection.getHtml())}}),$R.add("module","container",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.lang=t.lang,this.element=t.element,this.container=t.container},start:function(){this._build(),this._buildAccesibility()},stop:function(){var t=this.element.getElement(),e=this.container.getElement();e.after(t),e.remove(),t.show()},_build:function(){var t=this.element.getElement(),e=this.container.getElement();e.addClass("redactor-box"),e.attr("dir",this.opts.direction),this.element.isType("inline")&&e.addClass("redactor-inline"),t.after(e),e.append(t)},_buildAccesibility:function(){var t=this.container.getElement(),e=$R.dom("<span />");e.addClass("redactor-voice-label"),e.attr({id:"redactor-voice-"+this.uuid,"aria-hidden":!1}),e.html(this.lang.get("accessibility-help-label")),t.prepend(e)}}),$R.add("module","source",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.utils=t.utils,this.element=t.element,this.source=t.source,this.editor=t.editor,this.toolbar=t.toolbar,this.cleaner=t.cleaner,this.component=t.component,this.container=t.container,this.autoparser=t.autoparser,this.selection=t.selection,this.syncedHtml=""},onstartcode:function(){var t=this.source.getStartedContent(),e=this.editor.getElement(),i=this.source.getElement();this.opts.autoparse&&this.opts.autoparseStart&&(t=this.autoparser.parse(t));var s=this.cleaner.input(t,!0,!0),a=this.cleaner.output(s);e.html(s),i.val(a),this.syncedHtml=a,this.app.broadcast("placeholder.build"),this.app.broadcast("autoparseobserve"),this.component.executeScripts()},onstartcodeshow:function(){this.show()},ontrytosync:function(){this.sync()},onhardsync:function(){var t=this.editor.getElement(),e=t.html();e=this.app.broadcast("syncBefore",e),e=this.cleaner.output(e),this._syncing(e)},start:function(){this._build(),this._buildClasses()},stop:function(){var t=this.element.getElement(),e=this.source.getElement();t.removeClass("redactor-source redactor-source-open"),e.off("input.redactor-source"),e.removeAttr("data-gramm_editor"),0===e.get().classList.length&&e.removeAttr("class"),this.source.isNameGenerated()||t.removeAttr("name"),this.element.isType("textarea")||e.remove()},getCode:function(){return this.source.getCode()},toggle:function(){if(this.opts.source){var t=this.source.getElement();return t.hasClass("redactor-source-open")?this.hide():this.show()}},show:function(){if(this.opts.source){var t=this.editor.getElement(),e=this.source.getElement(),i=this.container.getElement(),s=e.val();this.app.isStarted()&&(s=this.app.broadcast("source.open",s));var a=$R.create("source.selection",this.app),n=a.insertMarkersToEditor();n=this.cleaner.output(n,!1),n=n.trim();var r=t.height();t.hide(),e.height(r),e.val(s.trim()),e.show(),e.addClass("redactor-source-open"),e.on("input.redactor-source-events",this._onChangedSource.bind(this)),e.on("keydown.redactor-source-events",this._onTabKey.bind(this)),e.on("focus.redactor-source-events",this._onFocus.bind(this)),i.addClass("redactor-source-view"),a.setSelectionOffsetSource(n),setTimeout(function(){this._disableButtons(),this._setActiveSourceButton()}.bind(this),100),this.app.isStarted()&&this.app.broadcast("source.opened")}},hide:function(){if(this.opts.source){var t=this.editor.getElement(),e=this.source.getElement(),i=this.container.getElement(),s=e.val(),a=$R.create("source.selection",this.app);s=a.insertMarkersToSource(s),s=this.cleaner.input(s,!0),s=this.utils.isEmptyHtml(s)?this.opts.emptyHtml:s,s=this.app.broadcast("source.close",s),this._enableButtons(),this._setInactiveSourceButton(),e.hide(),e.removeClass("redactor-source-open"),e.off(".redactor-source-events"),t.show(),t.html(s),i.removeClass("redactor-source-view"),setTimeout(function(){a.isOffset()?this.selection.restoreMarkers():a.isOffsetEnd()?this.editor.endFocus():this.editor.startFocus(),this.component.executeScripts()}.bind(this),0),this.app.broadcast("source.closed")}},sync:function(){var t=this,e=this.editor.getElement(),i=e.html();i=this.app.broadcast("syncBefore",i),i=this.cleaner.output(i),this._isSync(i)&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t._syncing(i)},200))},_build:function(){var t=this.source.getElement(),e=this.element.getElement();t.hide(),this.opts.grammarly||t.attr("data-gramm_editor",!1),this.element.isType("textarea")||e.after(t)},_buildClasses:function(){var t=this.source.getElement();t.addClass("redactor-source")},_syncing:function(t){t=this.app.broadcast("syncing",t);var e=this.source.getElement();e.val(t),this.app.broadcast("synced",t),this.app.broadcast("changed",t)},_isSync:function(t){return this.syncedHtml!==t&&(this.syncedHtml=t,!0)},_onChangedSource:function(){var t=this.source.getElement(),e=t.val();this.app.broadcast("changed",e),this.app.broadcast("source.changed",e)},_onTabKey:function(t){if(9!==t.keyCode)return!0;t.preventDefault();var e=this.source.getElement(),i=e.get(),s=i.selectionStart;e.val(e.val().substring(0,s)+"    "+e.val().substring(i.selectionEnd)),i.selectionStart=i.selectionEnd=s+4},_onFocus:function(){this.app.broadcast("sourcefocus")},_disableButtons:function(){this.toolbar.disableButtons()},_enableButtons:function(){this.toolbar.enableButtons()},_setActiveSourceButton:function(){var t=this.toolbar.getButton("html");t.enable(),t.setActive()},_setInactiveSourceButton:function(){var t=this.toolbar.getButton("html");t.setInactive()}}),$R.add("class","source.selection",{init:function(t){this.app=t,this.utils=t.utils,this.source=t.source,this.editor=t.editor,this.marker=t.marker,this.component=t.component,this.selection=t.selection,this.markersOffset=!1,this.markersOffsetEnd=!1},insertMarkersToEditor:function(){var t=this.editor.getElement(),e=this.marker.build("start"),i=this.marker.build("end"),s=this.component.getActive();if(s){this.marker.remove();var a=$R.dom(s);a.after(i),a.after(e)}else window.getSelection&&this.selection.is()&&this.marker.insert("both");return this._getHtmlAndRemoveMarkers(t)},setSelectionOffsetSource:function(t){var e=0,i=0,s=this.source.getElement();if(""!==t){var a=this.utils.removeInvisibleChars(this.marker.buildHtml("start")),n=this.utils.removeInvisibleChars(this.marker.buildHtml("end"));e=this._strpos(t,a),i=this._strpos(t,n)-n.toString().length-2,!1===e&&(e=0,i=0)}s.get().setSelectionRange(e,i),s.get().scrollTop=0,setTimeout(function(){s.focus()}.bind(this),0)},isOffset:function(){return this.markersOffset},isOffsetEnd:function(){return this.markersOffsetEnd},insertMarkersToSource:function(t){var e=this.source.getElement(),i=this.marker.buildHtml("start"),s=this.marker.buildHtml("end"),a=i.toString().length,n=this._enlargeOffset(t,e.get().selectionStart),r=this._enlargeOffset(t,e.get().selectionEnd),o=t.length;return n===o?this.markersOffsetEnd=!0:0!==n&&0!==r?(this.markersOffset=!0,t=t.substr(0,n)+i+t.substr(n),t=t.substr(0,r+a)+s+t.substr(r+a)):this.markersOffset=!1,t},_getHtmlAndRemoveMarkers:function(t){var e=t.html();return t.find(".redactor-selection-marker").remove(),e},_strpos:function(t,e,i){var s=t.indexOf(e,i);return s>=0&&s},_enlargeOffset:function(t,e){var i=t.length,s=0;if(">"===t[e])s++;else for(var a=e;i>=a&&(s++,">"!==t[a]);a++)if("<"===t[a]||a===i){s=0;break}return e+s}}),$R.add("module","observer",{init:function(t){this.app=t,this.editor=t.editor,this.observerUnit=!1},start:function(){if(window.MutationObserver){var t=this.editor.getElement(),e=t.get();this.observerUnit=this._build(e),this.observerUnit.observe(e,{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})}},stop:function(){this.observerUnit&&this.observerUnit.disconnect()},_build:function(t){var e=this;return new MutationObserver(function(i){e._observe(i[i.length-1],t)})},_observe:function(t,e){this.app.isReadOnly()||"attributes"===t.type&&t.target===e||(this.app.broadcast("observe"),this.app.broadcast("trytosync"),this.app.broadcast("placeholder.toggle"))}}),$R.add("module","clicktoedit",{init:function(t){this.app=t,this.opts=t.opts,this.source=t.source,this.editor=t.editor,this.container=t.container,this.selection=t.selection},onstartclicktoedit:function(){this.start()},onenablereadonly:function(){this._isEnabled()||this.stop()},ondisablereadonly:function(){this._isEnabled()||this.start()},onstop:function(){this.stop()},start:function(){this._build()},stop:function(){this.buttonSave&&this.buttonSave.stop(),this.buttonCancel&&this.buttonCancel.stop(),this._destroy(),this.app.broadcast("disable")},enable:function(){this.app.broadcast("clickStart");var t=this.editor.isEmpty();t||this.selection.saveMarkers(),this._setFocus(),this._destroy(),this.app.broadcast("enable"),this.buttonSave.enable(),this.buttonCancel.enable(),t||this.selection.restoreMarkers(),t&&this.editor.focus();var e=this.container.getElement();e.addClass("redactor-clicktoedit-enabled"),this.source.rebuildStartedContent(),this.app.broadcast("startcode"),this.app.broadcast("image.observe")},save:function(t){t&&t.preventDefault();var e=this.source.getCode();this.app.broadcast("disable"),this.app.broadcast("clickSave",e),this.app.broadcast("clickStop"),this._build()},cancel:function(t){t&&t.preventDefault();var e=this.saved,i=this.editor.getElement();i.html(e),this.saved="",this.app.broadcast("disable"),this.app.broadcast("clickCancel",e),this.app.broadcast("clickStop"),this._build()},_build:function(){this.buttonSave=$R.create("clicktoedit.button","save",this.app,this),this.buttonCancel=$R.create("clicktoedit.button","cancel",this.app,this),this.buttonSave.stop(),this.buttonCancel.stop();var t=this.editor.getElement(),e=this.container.getElement();t.on("click.redactor-click-to-edit mouseup.redactor-click-to-edit",this.enable.bind(this)),e.addClass("redactor-over"),e.removeClass("redactor-clicktoedit-enabled")},_isEnabled:function(){return this.container.getElement().hasClass("redactor-clicktoedit-enabled")},_destroy:function(){var t=this.editor.getElement(),e=this.container.getElement();t.off(".redactor-click-to-edit"),e.removeClass("redactor-over redactor-clicktoedit-enabled")},_setFocus:function(){this.saved=this.source.getCode(),this.buttonSave.start(),this.buttonCancel.start()}}),$R.add("class","clicktoedit.button",{init:function(t,e,i){this.app=e,this.opts=e.opts,this.toolbar=e.toolbar,this.context=i,this.type=t,this.name="save"===t?"clickToSave":"clickToCancel",this.objected=!1,this.enabled=!1,this.namespace=".redactor-click-to-edit",this._build()},enable:function(){if(this.objected){var t=this.opts[this.name];t.api="module.clicktoedit."+this.type,this.toolbar.addButton(this.type,t),this.enabled=!0}},start:function(){this.objected||(this.$button.off(this.namespace),this.$button.show(),this.$button.on("click"+this.namespace,this.context[this.type].bind(this.context)))},stop:function(){!this.objected&&this.enabled&&this.$button.hide()},_build:function(){this.objected="object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts[this.name]),this.objected||(this.$button=$R.dom(this.opts[this.name]),this.enabled=!0)}}),$R.add("module","statusbar",{init:function(t){this.app=t,this.opts=t.opts,this.element=t.element,this.statusbar=t.statusbar,this.container=t.container},start:function(){if(!this.element.isType("inline")){var t=this.statusbar.getElement(),e=this.container.getElement();t.addClass("redactor-statusbar"),e.append(t)}}}),$R.add("module","contextbar",{init:function(t){this.app=t,this.opts=t.opts,this.uuid=t.uuid,this.$win=t.$win,this.$doc=t.$doc,this.$body=t.$body,this.editor=t.editor,this.toolbar=t.toolbar,this.detector=t.detector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body},onenablereadonly:function(){this.stop()},ondisablereadonly:function(){this.start()},oncontextbar:{close:function(){this.close()}},start:function(){if(this.opts.toolbarContext){var t=this.editor.getElement();this._build(),t.on("click.redactor-context mouseup.redactor-context",this.open.bind(this)),this.opts.scrollTarget&&$R.dom(this.opts.scrollTarget).on("scroll.redactor-context",this.close.bind(this))}},stop:function(){var t=this.editor.getElement();t.off(".redactor-context"),this.$doc.off(".redactor-context"),this.$win.off(".redactor-context"),this.$contextbar&&this.$contextbar.remove(),this.opts.scrollTarget&&$R.dom(this.opts.scrollTarget).off(".redactor-context")},is:function(){return this.$contextbar&&this.$contextbar.hasClass("open")},set:function(t,e,i,s){for(var a in this.$contextbar.html(""),this.$el=$R.dom(e),i){var n=$R.create("contextbar.button",this.app,i[a]);""!==n.html()&&this.$contextbar.append(n)}var r=this._buildPosition(t,this.$el,s);this.$contextbar.css(r),this.$contextbar.show(),this.$contextbar.addClass("open"),this.$doc.on("click.redactor-context mouseup.redactor-context",this.close.bind(this)),this.$win.on("resize.redactor-context",this.close.bind(this))},open:function(t){setTimeout(function(){this.app.broadcast("contextbar",t,this)}.bind(this),0)},close:function(t){if(this.$contextbar){if(t){var e=$R.dom(t.target);if(this.$el&&0!==e.closest(this.$el).length)return}this.$contextbar.hide(),this.$contextbar.removeClass("open"),this.$doc.off(".redactor.context")}},_build:function(){this.$contextbar=$R.dom("<div>"),this.$contextbar.attr("id","redactor-context-toolbar-"+this.uuid),this.$contextbar.attr("dir",this.opts.direction),this.$contextbar.addClass("redactor-context-toolbar"),this.$contextbar.hide(),this.$target.append(this.$contextbar)},_buildPosition:function(t,e,i){var s,a,n=this.toolbar.isTarget(),r=n?e.position():e.offset(),o=e.width(),l=e.height(),d=this.$contextbar.width(),c=this.$contextbar.height(),h=n?this.$target.scrollTop()+this.$doc.scrollTop():this.$doc.scrollTop(),u=this.$target.offset(),p=n?u.left:0,m=n?u.top:0;return i?"top"===i?(s=r.top-c,a=r.left+o/2-d/2):"bottom"===i&&(s=r.top+l,a=r.left+o/2-d/2):(s=t.clientY+h-c,a=t.clientX-d/2),0>a&&(a=0),{top:s-m+"px",left:a-p+"px"}}}),$R.add("class","contextbar.button",{mixins:["dom"],init:function(t,e){this.app=t,this.obj=e,this._init()},_init:function(){this.parse("<a>"),this.attr("href","#"),this._buildTitle(),this._buildMessage()},_buildTitle:function(){this.html(this.obj.title)},_buildMessage:function(){"undefined"==typeof this.obj.message&&"undefined"==typeof this.obj.api||this.on("click",this._toggle.bind(this))},_toggle:function(t){t.preventDefault(),this.obj.message?this.app.broadcast(this.obj.message,this.obj.args):this.obj.api&&this.app.api(this.obj.api,this.obj.args)}}),$R.add("module","toolbar",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.utils=t.utils,this.toolbar=t.toolbar,this.buttons=[],this.toolbarModule=!1},onsource:{open:function(){!this.toolbar.isAir()&&this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},opened:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.createSourceHelper(),setTimeout(function(){$R.dom(".re-button-tooltip-"+this.uuid).remove()}.bind(this),100)},close:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.destroySourceHelper()},closed:function(){this.toolbar.is()&&this.opts.air&&this.toolbarModule.openSelected()}},onobserve:function(){this.toolbar.is()&&this.toolbar.observe()},onfocus:function(){this._setExternalOnFocus()},onsourcefocus:function(){this._setExternalOnFocus()},onempty:function(){this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},onenablereadonly:function(){this.toolbar.isAir()&&this.toolbarModule.close()},start:function(){this.toolbar.is()&&(this._buildButtons(),this._initToolbar(),this._initButtons())},stop:function(){this.toolbarModule&&this.toolbarModule.stop(),$R.dom(".redactor-dropdown-"+this.uuid).remove()},_buildButtons:function(){this.buttons=this.opts.buttons.concat(),this._buildImageButton(),this._buildFileButton(),this._buildSourceButton(),this._buildAdditionalButtons(),this._buildHiddenButtons()},_buildImageButton:function(){this.opts.imageUpload||this.utils.removeFromArrayByValue(this.buttons,"image")},_buildFileButton:function(){this.opts.fileUpload||this.utils.removeFromArrayByValue(this.buttons,"file")},_buildSourceButton:function(){this.opts.source||this.utils.removeFromArrayByValue(this.buttons,"html")},_buildAdditionalButtons:function(){var t,e;if(0!==this.opts.buttonsAdd.length&&(this.opts.buttonsAdd=this._removeExistButtons(this.opts.buttonsAdd),this.buttons=this.buttons.concat(this.opts.buttonsAdd)),0!==this.opts.buttonsAddFirst.length&&(this.opts.buttonsAddFirst=this._removeExistButtons(this.opts.buttonsAddFirst),this.buttons.unshift(this.opts.buttonsAddFirst)),!1!==this.opts.buttonsAddAfter){t=this.buttons.indexOf(this.opts.buttonsAddAfter.after)+1,e=this.opts.buttonsAddAfter.buttons;for(var i=0;i<e.length;i++)this.buttons.splice(t+i,0,e[i])}if(!1!==this.opts.buttonsAddBefore){t=this.buttons.indexOf(this.opts.buttonsAddBefore.before)+1,e=this.opts.buttonsAddBefore.buttons;for(i=0;i<e.length;i++)this.buttons.splice(t-(1-i),0,e[i])}},_buildHiddenButtons:function(){if(0!==this.opts.buttonsHide.length)for(var t=this.opts.buttonsHide,e=0;e<t.length;e++)this.utils.removeFromArrayByValue(this.buttons,t[e])},_removeExistButtons:function(t){for(var e=0;e<t.length;e++)-1!==this.opts.buttons.indexOf(t[e])&&this.utils.removeFromArrayByValue(t,t[e]);return t},_setExternalOnFocus:function(){!this.opts.air&&this.opts.toolbarExternal&&this.toolbarModule.setExternal()},_initToolbar:function(){this.toolbarModule=this.opts.air?$R.create("toolbar.air",this.app):$R.create("toolbar.standard",this.app)},_initButtons:function(){this.toolbar.setButtons(this.buttons);for(var t=0;t<this.buttons.length;t++){var e=this.buttons[t];$R.buttons[e]&&this.toolbar.addButton(e,$R.buttons[e],!1,!1,!0)}}}),$R.add("class","toolbar.air",{init:function(t){this.app=t,this.uuid=t.uuid,this.$doc=t.$doc,this.$win=t.$win,this.utils=t.utils,this.editor=t.editor,this.animate=t.animate,this.toolbar=t.toolbar,this.container=t.container,this.inspector=t.inspector,this.selection=t.selection,this.clicks=0,this._init()},stop:function(){var t=this.toolbar.getWrapper();t.remove();var e=this.editor.getElement();e.off(".redactor-air-trigger-"+this.uuid),this.$doc.off(".redactor-air-"+this.uuid),this.$doc.off(".redactor-air-trigger-"+this.uuid),this.toolbar.stopObservers()},createSourceHelper:function(){this.$airHelper=$R.dom("<span>"),this.$airHelper.addClass("redactor-air-helper"),this.$airHelper.html('<i class="re-icon-html"></i>'),this.$airHelper.on("click",function(t){t.preventDefault(),this.app.api("module.source.hide")}.bind(this));var t=this.container.getElement();t.append(this.$airHelper)},destroySourceHelper:function(){this.$airHelper&&this.$airHelper.remove()},openSelected:function(){setTimeout(function(){this._isSelection()&&this._open(!1)}.bind(this),0)},close:function(){this.$doc.off(".redactor-air-"+this.uuid);var t=this.toolbar.getElement();t.removeClass("open"),t.hide()},_init:function(){this.toolbar.create();var t=this.toolbar.getWrapper(),e=this.toolbar.getElement(),i=this.editor.getElement(),s=this.container.getElement();t.addClass("redactor-toolbar-wrapper-air"),e.addClass("redactor-air"),e.hide(),t.append(e),s.prepend(t),this.openSelected(),this.$doc.on("mouseup.redactor-air-trigger-"+this.uuid,this._open.bind(this)),i.on("keyup.redactor-air-trigger-"+this.uuid,this._openCmd.bind(this))},_isSelection:function(){return this.selection.is()&&!this.selection.isCollapsed()},_isOpened:function(){var t=this.toolbar.getElement();return t.hasClass("open")},_open:function(t){var e=!!t&&t.target,i=!!t&&$R.dom(t.target),s=this.inspector.parse(e),a=s.isComponent()&&!s.isComponentType("table"),n=s.isFigcaption(),r=i&&0!==i.closest(".redactor-modal").length,o=t&&0!==i.closest(".re-button").length,l=t&&0!==i.closest(".redactor-dropdown").length;if(!(l||o||r||n||a||this.toolbar.isContextBar())&&this._isSelection()){var d=this.selection.getPosition();setTimeout(function(){this.app.isReadOnly()||this._isSelection()&&this._doOpen(d)}.bind(this),1)}},_openCmd:function(){if(this.selection.isAll()){var t=this.toolbar.getElement(),e=this.selection.getPosition();e.top=e.top<20?0:e.top-t.height(),e.height=0,this._doOpen(e)}},_doOpen:function(t){var e=this.toolbar.getWrapper(),i=this.toolbar.getElement(),s=this.container.getElement(),a=s.offset(),n=0,r=this.$win.width(),o=i.width();if(r<t.left+o){var l=this.selection.getPosition();n=o-l.width}e.css({left:t.left-a.left-n+"px",top:t.top-a.top+t.height+this.$doc.scrollTop()+"px"}),this.app.broadcast("airOpen"),i.addClass("open"),i.show(),this.$doc.on("click.redactor-air-"+this.uuid,this._close.bind(this)),this.$doc.on("keydown.redactor-air-"+this.uuid,this._close.bind(this)),this.app.broadcast("airOpened")},_close:function(t){var e=!!t&&$R.dom(t.target),i=t&&0!==e.closest("[data-dropdown], .redactor-dropdown-not-close").length,s=!i&&t&&0!==e.closest(".re-button").length;(s||!i&&this._isOpened())&&(this.app.broadcast("airClose"),this.close(),this.app.broadcast("airClosed"))}}),$R.add("class","toolbar.fixed",{init:function(t){this.app=t,this.uuid=t.uuid,this.opts=t.opts,this.$doc=t.$doc,this.$win=t.$win,this.editor=t.editor,this.toolbar=t.toolbar,this.detector=t.detector,this.container=t.container,this._init()},stop:function(){this.$fixedTarget.off(".redactor-toolbar-"+this.uuid),this.$win.off(".redactor-toolbar-"+this.uuid)},reset:function(){var t=this.toolbar.getElement(),e=this.toolbar.getWrapper();e.css("height",""),t.removeClass("redactor-toolbar-fixed"),t.css({position:"",top:"",left:"",width:""});var i=this.toolbar.getDropdown();i&&i.updatePosition()},_init:function(){this.$fixedTarget=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$win,this._doFixed(),this.toolbar.isTarget()&&(this.$win.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$win.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))),this.$fixedTarget.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$fixedTarget.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))},_doFixed:function(){var t=this.editor.getElement(),e=this.container.getElement(),i=this.toolbar.getElement(),s=this.toolbar.getWrapper();if(!this.editor.isSourceMode()){var a=e.parents().filter(function(t){return"none"===getComputedStyle(t,null).display&&t});if(0===a.length){var n=t.height()<100,r=this.editor.isEmpty();if(!(n||r||this.editor.isSourceMode())){var o=i.height(),l=60,d=e.offset(),c=d.top,h=c+e.height()-l,u=this.$fixedTarget.scrollTop()+this.opts.toolbarFixedTopOffset,p=this.toolbar.isTarget()?this.$fixedTarget.offset().top-this.$win.scrollTop():0;if(u>c&&h>u){var m=this.detector.isDesktop()?"fixed":"absolute";p=this.detector.isDesktop()?p:u-c+this.opts.toolbarFixedTopOffset,this.detector.isMobile()&&(this.fixedScrollTimeout&&clearTimeout(this.fixedScrollTimeout),i.hide(),this.fixedScrollTimeout=setTimeout(function(){i.show()},250)),s.height(o),i.addClass("redactor-toolbar-fixed"),i.css({position:m,top:p+this.opts.toolbarFixedTopOffset+"px",width:e.width()+"px"});var f=this.toolbar.getDropdown();f&&f.updatePosition(),this.app.broadcast("toolbar.fixed")}else this.reset(),this.app.broadcast("toolbar.unfixed")}}}}}),$R.add("class","toolbar.standard",{init:function(t){this.app=t,this.opts=t.opts,this.uuid=t.uuid,this.$body=t.$body,this.toolbar=t.toolbar,this.container=t.container,this.isExternalMultiple=!1,this.toolbarFixed=!1,this._init()},stop:function(){var t=this.toolbar.getWrapper();t.remove(),this.toolbarFixed&&this.toolbarFixed.stop(),this.opts.toolbarExternal&&this._findToolbars(),this.toolbar.stopObservers(),this.$body.find(".re-button-tooltip-"+this.uuid).remove()},setExternal:function(){if(this._findToolbars(),this.isExternalMultiple){this.$toolbars.hide();var t=this.$external.find(".redactor-toolbar-external-"+this.uuid);t.show()}},resetPosition:function(){this.toolbarFixed&&this.toolbarFixed.reset()},_init:function(){if(this._build(),this.opts.toolbarExternal)this._buildExternal();else{this._buildFixed();var t=this.toolbar.getElement();t.show()}},_build:function(){this.toolbar.create();var t=this.toolbar.getWrapper(),e=this.toolbar.getElement();if(t.addClass("redactor-toolbar-wrapper"),e.addClass("redactor-toolbar"),e.hide(),t.append(e),!this.opts.toolbarExternal){var i=this.container.getElement();i.prepend(t)}},_buildExternal:function(){if(this._initExternal(),this._findToolbars(),this.isExternalMultiple)this._hideToolbarsExceptFirst();else{var t=this.toolbar.getElement();t.show()}},_buildFixed:function(){this.opts.toolbarFixed&&(this.toolbarFixed=$R.create("toolbar.fixed",this.app))},_initExternal:function(){var t=this.toolbar.getElement(),e=this.toolbar.getElement();t.addClass("redactor-toolbar-external redactor-toolbar-external-"+this.uuid),this.$external=$R.dom(this.opts.toolbarExternal),this.$external.append(e)},_findToolbars:function(){this.$toolbars=this.$external.find(".redactor-toolbar-external"),this.isExternalMultiple=this.$toolbars.length>1},_hideToolbarsExceptFirst:function(){this.$toolbars.hide();var t=this.$toolbars.first();t.show()}}),$R.add("module","line",{init:function(t){this.app=t,this.lang=t.lang,this.component=t.component,this.inspector=t.inspector,this.insertion=t.insertion},oncontextbar:function(t,e){var i=this.inspector.parse(t.target);if(i.isComponentType("line")){var s=i.getComponent(),a={remove:{title:this.lang.get("delete"),api:"module.line.remove",args:s}};e.set(t,s,a,"bottom")}},insert:function(){var t=this.component.create("line");this.insertion.insertRaw(t)},remove:function(t){this.component.remove(t)}}),$R.add("class","line.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,e&&void 0!==e.cmnt?e:this._init(e)},_init:function(t){var e,i;if("undefined"!=typeof t){var s=$R.dom(t),a=s.get();"HR"===a.tagName?i=a:"FIGURE"===a.tagName&&(e=a,i=s.find("hr").get())}this._buildWrapper(e),this._buildElement(i),this._initWrapper()},_buildElement:function(t){t?this.$element=$R.dom(t):(this.$element=$R.dom("<hr>"),this.append(this.$element))},_buildWrapper:function(t){t=t||"<figure>",this.parse(t)},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"line",tabindex:"-1",contenteditable:!1})}}),$R.add("module","link",{modals:{link:'<form action="">                 <div class="form-item">                     <label for="modal-link-url">URL <span class="req">*</span></label>                     <input type="text" id="modal-link-url" name="url">                 </div>                 <div class="form-item">                     <label for="modal-link-text">## text ##</label>                     <input type="text" id="modal-link-text" name="text">                 </div>                 <div class="form-item form-item-title">                     <label for="modal-link-title">## title ##</label>                     <input type="text" id="modal-link-title" name="title">                 </div>                 <div class="form-item form-item-target">                     <label class="checkbox">                         <input type="checkbox" name="target"> ## link-in-new-tab ##                     </label>                 </div>             </form>'},init:function(t){this.app=t,this.opts=t.opts,this.lang=t.lang,this.caret=t.caret,this.utils=t.utils,this.inline=t.inline,this.editor=t.editor,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection,this.isCurrentLink=!1,this.currentText=!1},onmodal:{link:{open:function(t,e){this._setFormData(e,t)},opened:function(t,e){this._setFormFocus(e)},update:function(t,e){var i=e.getData();this._validateData(e,i)&&this._update(i)},insert:function(t,e){var i=e.getData();this._validateData(e,i)&&this._insert(i)},unlink:function(){this._unlink()}}},onbutton:{link:{observe:function(t){this._observeButton(t)}}},ondropdown:{link:{observe:function(t){this._observeUnlink(t),this._observeEdit(t)}}},oncontextbar:function(t,e){var i=this._getCurrent(),s=this.inspector.parse(i);if(s.isLink()){var a=s.getLink(),n=$R.dom(a),r=$R.dom("<a>"),o=n.attr("href");r.text(this._truncateText(o)),r.attr("href",o),r.attr("target","_blank");var l={link:{title:r},edit:{title:this.lang.get("edit"),api:"module.link.open"},unlink:{title:this.lang.get("unlink"),api:"module.link.unlink"}};e.set(t,a,l,"bottom")}},open:function(){this.$link=this._buildCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(t){this._insert(t)},update:function(t){this._update(t)},unlink:function(){this._unlink()},_observeButton:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e);i.isPre()||i.isCode()?t.disable():t.enable()},_observeUnlink:function(t){var e=t.getItem("unlink"),i=this._getLinks();0===i.length?e.disable():e.enable()},_observeEdit:function(t){var e=this._getCurrent(),i=t.getItem("link"),s=this.inspector.parse(e),a=s.isLink()?this.lang.get("link-edit"):this.lang.get("link-insert");i.setTitle(a)},_unlink:function(){this.app.api("module.modal.close");var t=[],e=this._getLinks();this.selection.save();for(var i=0;i<e.length;i++){var s=$R.create("link.component",this.app,e[i]);t.push(this.selection.getElement(e[i])),s.unwrap(),this.app.broadcast("link.deleted",s)}this.selection.restore();for(i=0;i<t.length;i++){var a=t[i]?t[i]:this.editor.getElement();this.utils.normalizeTextNodes(a)}this._resetCurrent()},_update:function(t){this.app.api("module.modal.close");var e=this._getLinks();this._setLinkData(e,t,"updated"),this._resetCurrent()},_insert:function(t){this.app.api("module.modal.close");var e=this._getLinks();this._insertSingle(e,t)||(this._removeInSelection(e),this._insertMultiple(t)),this._resetCurrent()},_removeInSelection:function(t){this.selection.save();for(var e=0;e<t.length;e++){var i=$R.create("link.component",this.app,t[e]),s=i.clone();i.unwrap(),this.app.broadcast("link.deleted",s)}this.selection.restore()},_insertMultiple:function(t){var e=this.selection.getRange();e&&this._isCurrentTextChanged(t)&&this._deleteContents(e);var i=this.inline.format({tag:"a"});this._setLinkData(i,t,"inserted")},_insertSingle:function(t,e){var i=this.selection.getInline();if(1===t.length&&t[0].textContext===this.selection.getText()||i&&"A"===i.tagName){var s=$R.create("link.component",this.app,t[0]);return s.setData(e),this.caret.setAfter(s),this.app.broadcast("link.inserted",s),!0}return!1},_setLinkData:function(t,e,i){e.text=""===e.text.trim()?this._truncateText(e.url):e.text;var s=!this.currentText||this.currentText!==e.text;this.selection.save();for(var a=0;a<t.length;a++){var n=$R.create("link.component",this.app,t[a]),r={};e.text&&s&&(r.text=e.text),e.url&&(r.url=e.url),void 0!==e.title&&(r.title=e.title),void 0!==e.target&&(r.target=e.target),n.setData(r),this.app.broadcast("link."+i,n)}setTimeout(this.selection.restore.bind(this.selection),0)},_deleteContents:function(t){var e=this.selection.getHtml(),i=this.utils.parseHtml(e),s=i.nodes[0];if(s&&3!==s.nodeType){var a=s.tagName.toLowerCase(),n=document.createElement(a);this.insertion.insertNode(n,"start")}else t.deleteContents()},_getModalData:function(){var t;t=this._isLink()?{update:{title:this.lang.get("save")},unlink:{title:this.lang.get("unlink"),type:"danger"},cancel:{title:this.lang.get("cancel")}}:{insert:{title:this.lang.get("insert")},cancel:{title:this.lang.get("cancel")}};var e={name:"link",title:this._isLink()?this.lang.get("link-edit"):this.lang.get("link-insert"),handle:this._isLink()?"update":"insert",commands:t};return e},_isLink:function(){return this.currentLink},_isCurrentTextChanged:function(t){return this.currentText&&this.currentText!==t.text},_buildCurrent:function(){var t,e=this._getCurrent(),i=this.inspector.parse(e);if(i.isLink())this.currentLink=!0,t=i.getLink(),t=$R.create("link.component",this.app,t);else{this.currentLink=!1,t=$R.create("link.component",this.app);var s={text:this.selection.getText()};t.setData(s)}return t},_getCurrent:function(){return this.selection.getInlinesAllSelected({tags:["a"]})[0]},_getLinks:function(){for(var t=this.selection.getInlines({all:!0,tags:["a"]}),e=[],i=0;i<t.length;i++){var s=this.inspector.parse(t[i]);s.isLink()&&e.push(t[i])}return e},_resetCurrent:function(){this.isCurrentLink=!1,this.currentText=!1},_truncateText:function(t){return t&&t.length>this.opts.linkSize?t.substring(0,this.opts.linkSize)+"...":t},_validateData:function(t,e){return""!==e.url.trim()||t.setError("url")},_setFormFocus:function(t){t.getField("url").focus()},_setFormData:function(t,e){var i=this.$link.getData(),s={url:i.url,text:i.text,title:i.title,target:this.opts.linkTarget||i.target};this.opts.linkNewTab||e.find(".form-item-target").hide(),this.opts.linkTitle||e.find(".form-item-title").hide(),t.setData(s),this.currentText=t.getField("text").val()}}),$R.add("class","link.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,this.opts=t.opts,this.reUrl=/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i,e&&void 0!==e.cmnt?e:this._init(e)},setData:function(t){for(var e in t)this._set(e,t[e])},getData:function(){for(var t=["url","text","target","title"],e={},i=0;i<t.length;i++)e[t[i]]=this._get(t[i]);return e},_init:function(t){var e=$R.dom(t);void 0===t?this.parse("<a>"):this.parse(e)},_set:function(t,e){this["_set_"+t](e)},_get:function(t){return this["_get_"+t]()},_get_target:function(){return!!this.attr("target")&&this.attr("target")},_get_url:function(){return this.attr("href")},_get_title:function(){return this.attr("title")},_get_text:function(){return this._getContext().text()},_getContext:function(){return this._findDeepestChild(this).element},_set_target:function(t){!1===t?this.removeAttr("target"):t&&this.attr("target",!0===t?"_blank":t)},_set_text:function(t){this._getContext().html(t)},_set_title:function(t){t&&""!==t?this.attr("title",t):this.removeAttr("title")},_set_url:function(t){this.opts.linkValidation&&(t=this._cleanUrl(t),this._isMailto(t)?t="mailto:"+t.replace("mailto:",""):this._isUrl(t)&&-1===t.search(/^(ftp|https?)/i)&&(t="http://"+t.replace(/(ftp|https?):\/\//i,""))),this.attr("href",t)},_isMailto:function(t){return-1!==t.search("@")&&!1===/(ftp|https?):\/\//i.test(t)},_isUrl:function(t){return this.reUrl.test(t)},_cleanUrl:function(t){return t.trim().replace(/[^\W\w\D\d+&\'@#\/%?=~_|!:,.;\(\)]/gi,"")},_findDeepestChild:function(t){var e={depth:0,element:t};return t.children().each(function(i){var s=$R.dom(i);if(i.outerHTML===t.html()){var a=this._findDeepestChild(s);a.depth+1>e.depth&&(e={depth:1+a.depth,element:a.element})}}.bind(this)),e}}),$R.add("module","modal",{init:function(t){this.app=t,this.lang=t.lang,this.$doc=t.$doc,this.$win=t.$win,this.$body=t.$body,this.utils=t.utils,this.editor=t.editor,this.animate=t.animate,this.detector=t.detector,this.selection=t.selection,this.$box=!1,this.$modal=!1,this.selectionMarkers=!1,this.defaults={name:!1,url:!1,title:!1,width:"600px",height:!1,handle:!1,commands:!1}},build:function(t){this._open(t)},close:function(){this._close()},stop:function(){this.$box&&(this.$box.remove(),this.$box=!1,this.$modal=!1,this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal")),this.$overlay&&this.$overlay.remove()},resize:function(){this.$modal.setWidth(this.p.width),this.$modal.updatePosition()},_isOpened:function(){return this.$modal&&this.$modal.hasClass("open")},_open:function(t){this._buildDefaults(t),this.p.url?this._openUrl():this._openTemplate()},_openUrl:function(){$R.ajax.post({url:this.p.url,success:this._doOpen.bind(this)})},_openTemplate:function(){if("undefined"!=typeof $R.modals[this.p.name]){var t=this.lang.parse($R.modals[this.p.name]);this._doOpen(t)}},_doOpen:function(t){this.stop(),this.selection.isCollapsed()?(this.selection.save(),this.selectionMarkers=!1):(this.selection.saveMarkers(),this.selectionMarkers=!0),this.detector.isDesktop()||document.activeElement.blur(),this._createModal(t),this._buildModalBox(),this._buildOverlay(),this._buildModal(),this._buildModalForm(),this._buildModalCommands(),this._broadcast("open"),this.$modal.updatePosition(),this._buildModalTabs(),this.animate.start(this.$box,"fadeIn",this._opened.bind(this)),this.animate.start(this.$overlay,"fadeIn")},_opened:function(){this.$modal.addClass("open"),this.$box.on("mousedown.redactor.modal",this._close.bind(this)),this.$doc.on("keyup.redactor.modal",this._handleEscape.bind(this)),this.$win.on("resize.redactor.modal",this.resize.bind(this)),this.$modal.getBody().find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor.modal",this._handleEnter.bind(this)),window.jQuery&&jQuery(document).off("focusin.modal"),this._broadcast("opened")},_close:function(t){if(this.$box&&this._isOpened()){if(t){if(!this._needToClose(t.target))return;t.stopPropagation(),t.preventDefault()}this.selectionMarkers?this.selection.restoreMarkers():this.selection.restore(),this.selectionMarkers=!1,this._broadcast("close"),this.animate.start(this.$box,"fadeOut",this._closed.bind(this)),this.animate.start(this.$overlay,"fadeOut")}},_closed:function(){this.$modal.removeClass("open"),this.$box.off(".redactor.modal"),this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal"),this._broadcast("closed")},_createModal:function(t){this.$modal=$R.create("modal.element",this.app,t)},_broadcast:function(t){this.app.broadcast("modal."+t,this.$modal,this.$modalForm),this.app.broadcast("modal."+this.p.name+"."+t,this.$modal,this.$modalForm)},_buildDefaults:function(t){this.p=$R.extend({},this.defaults,t)},_buildModalBox:function(){this.$box=$R.dom("<div>"),this.$box.attr("id","redactor-modal"),this.$box.addClass("redactor-animate-hide"),this.$box.html(""),this.$body.append(this.$box)},_buildOverlay:function(){this.$overlay=$R.dom("#redactor-overlay"),0===this.$overlay.length&&(this.$overlay=$R.dom("<div>"),this.$overlay.attr("id","redactor-overlay"),this.$overlay.addClass("redactor-animate-hide"),this.$body.prepend(this.$overlay))},_buildModal:function(){this.$box.append(this.$modal),this.$modal.setTitle(this.p.title),this.$modal.setHeight(this.p.height),this.$modal.setWidth(this.p.width)},_buildModalCommands:function(){if(this.p.commands){var t=this.p.commands,e=this.$modal.getFooter();for(var i in t){var s=$R.dom("<button>");s.html(t[i].title),s.attr("data-command",i),"cancel"===i&&(s.attr("data-action","close"),s.addClass("redactor-button-unstyled")),"undefined"!=typeof t[i].type&&"danger"===t[i].type&&s.addClass("redactor-button-danger"),s.on("click",this._handleCommand.bind(this)),e.append(s)}}},_buildModalTabs:function(){var t=this.$modal.getBody(),e=t.find(".redactor-modal-tab"),i=t.find(".redactor-modal-tabs");e.length>1&&(i=0===i.length?$R.dom("<div>"):i.html(""),i.addClass("redactor-modal-tabs"),e.each(function(t,e){var s=$R.dom(t),a=$R.dom("<a>");a.attr("href","#"),a.attr("rel",e),a.text(s.attr("data-title")),a.on("click",this._showTab.bind(this)),0===e&&a.addClass("active"),i.append(a)}.bind(this)),t.prepend(i))},_buildModalForm:function(){this.$modalForm=$R.create("modal.form",this.app,this.$modal.getForm())},_showTab:function(t){t.preventDefault();var e=$R.dom(t.target),i=e.attr("rel"),s=this.$modal.getBody(),a=s.find(".redactor-modal-tab");a.hide(),a.eq(i).show(),s.find(".redactor-modal-tabs a").removeClass("active"),e.addClass("active")},_needToClose:function(t){var e=$R.dom(t);return!("close"!==e.attr("data-action")&&!this.$modal.isCloseNode(t)&&0!==e.closest(".redactor-modal").length)},_handleCommand:function(t){var e=$R.dom(t.target).closest("button"),i=e.attr("data-command");"cancel"!==i&&t.preventDefault(),this._broadcast(i)},_handleEnter:function(t){13===t.which&&this.p.handle&&(t.preventDefault(),this._broadcast(this.p.handle))},_handleEscape:function(t){27===t.which&&this._close()}}),$R.add("class","modal.element",{mixins:["dom"],init:function(t,e){this.app=t,this.opts=t.opts,this.$win=t.$win,this._init(e)},getForm:function(){return this.find("form")},getHeader:function(){return this.$modalHeader},getBody:function(){return this.$modalBody},getFooter:function(){return this.$modalFooter},setTitle:function(t){t&&this.$modalHeader.html(t)},setWidth:function(t){t=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t)>=this.$win.width()?"96%":t,this.css("max-width",t)},setHeight:function(t){!1!==t&&this.$modalBody.css("height",t)},updatePosition:function(){var t=this.width();this.css({left:"50%","margin-left":"-"+t/2+"px"});var e=this.$win.height(),i=this.height(),s=e/2-i/2;e>i&&0!==s&&this.css("margin-top",s+"px")},isCloseNode:function(t){return t===this.$modalClose.get()},_init:function(t){this._build(),this._buildClose(),this._buildHeader(),this._buildBody(),this._buildFooter(),this._buildTemplate(t)},_build:function(){this.parse("<div>"),this.addClass("redactor-modal"),this.attr("dir",this.opts.direction)},_buildClose:function(){this.$modalClose=$R.dom("<span>"),this.$modalClose.addClass("redactor-close"),this.append(this.$modalClose)},_buildHeader:function(){this.$modalHeader=$R.dom("<div>"),this.$modalHeader.addClass("redactor-modal-header"),this.append(this.$modalHeader)},_buildBody:function(){this.$modalBody=$R.dom("<div>"),this.$modalBody.addClass("redactor-modal-body"),this.append(this.$modalBody)},_buildFooter:function(){this.$modalFooter=$R.dom("<div>"),this.$modalFooter.addClass("redactor-modal-footer"),this.append(this.$modalFooter)},_buildTemplate:function(t){this.$modalBody.html(t)}}),$R.add("class","modal.form",{mixins:["dom"],init:function(t,e){this.app=t,this.build(e)},build:function(t){this.parse(t)},getData:function(){var t={};return this.find("[name]").each(function(e){var i=$R.dom(e);t[i.attr("name")]=i.val()}),t},setData:function(t){this.find("[name]").each(function(e){var i=$R.dom(e),s=i.attr("name");t.hasOwnProperty(s)&&(e.type&&"checkbox"===e.type?e.checked=t[s]:i.val(t[s]))})},getField:function(t){return this.find("[name="+t+"]")},setError:function(t){var e=this.getField(t);return e.addClass("error"),e.one(this._getFieldEventName(e.get()),this._clearError),!1},_clearError:function(){return $R.dom(this).removeClass("error")},_getFieldEventName:function(t){return"SELECT"===t.tagName||"checkbox"===t.type||"radio"===t.type?"change":"keyup"}}),$R.add("module","block",{init:function(t){this.app=t,this.block=t.block},format:function(t){var e=this.block.format(t);this.app.broadcast("format","block",e)},clearformat:function(){this.block.clearFormat()},clearstyle:function(){this.block.clearStyle()},clearclass:function(){this.block.clearClass()},clearattr:function(){this.block.clearAttr()},add:function(t,e){this.block.add(t,e)},toggle:function(t,e){this.block.toggle(t,e)},set:function(t,e){this.block.set(t,e)},remove:function(t,e){this.block.remove(t,e)}}),$R.add("module","inline",{init:function(t){this.app=t,this.inline=t.inline},format:function(t){var e=this.inline.format(t);this.app.broadcast("format","inline",e)},clearformat:function(){this.inline.clearFormat()},clearstyle:function(){this.inline.clearStyle()},clearclass:function(){this.inline.clearClass()},clearattr:function(){this.inline.clearAttr()},add:function(t,e){this.inline.add(t,e)},toggle:function(t,e){this.inline.toggle(t,e)},set:function(t,e){this.inline.set(t,e)},remove:function(t,e){this.inline.remove(t,e)}}),$R.add("module","autosave",{init:function(t){this.app=t,this.opts=t.opts,this.utils=t.utils,this.source=t.source},onsynced:function(){this.opts.autosave&&this._send()},_send:function(){var t=this.opts.autosaveName?this.opts.autosaveName:this.source.getName(),e={};e[t]=this.source.getCode(),e=this.utils.extendData(e,this.opts.autosaveData),$R.ajax.post({url:this.opts.autosave,data:e,success:function(i){this._complete(i,t,e)}.bind(this)})},_complete:function(t,e,i){var s=t&&t.error?"autosaveError":"autosave";this.app.broadcast(s,e,i,t)}}),$R.add("module","input",{init:function(t){this.app=t,this.opts=t.opts,this.utils=t.utils,this.editor=t.editor,this.keycodes=t.keycodes,this.element=t.element,this.selection=t.selection,this.insertion=t.insertion,this.inspector=t.inspector,this.autoparser=t.autoparser,this.lastShiftKey=!1},onpaste:function(t,e){return this.opts.input?$R.create("input.paste",this.app,t,e):void 0},onkeydown:function(t){if(this.opts.input){var e=t.which,i=$R.create("input.shortcut",this.app,t);if(!i.is()){if((t.ctrlKey||t.metaKey)&&!t.altKey&&65===e)return t.preventDefault(),this._selectAll();var s=[this.keycodes.ENTER,this.keycodes.SPACE,this.keycodes.BACKSPACE,this.keycodes.DELETE],a=[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.LEFT,this.keycodes.RIGHT],n=-1!==s.indexOf(e),r=-1!==a.indexOf(e),o=(t.ctrlKey||t.metaKey)&&88===e,l=!t.ctrlKey&&!t.metaKey&&(e>=48&&57>=e||e>=65&&90>=e);if(this.selection.isAll()&&r&&(o||!t.ctrlKey&&!t.metaKey&&!t.altKey&&!t.shiftKey)){if(o)return this.editor.disableNonEditables(),void this.app.broadcast("empty");if(this._isArrowKey(e))return!0;if(n&&t.preventDefault(),this.element.isType("inline")){var d=this.editor.getElement();d.html(""),this.editor.startFocus()}else this.insertion.set(this.opts.emptyHtml);if(n)return;this.app.broadcast("empty")}return this.opts.autoparse&&this.autoparser.format(t,e),l&&this.selection.hasNonEditable()?void t.preventDefault():e===this.keycodes.ENTER?$R.create("input.enter",this.app,t,e):t.metaKey&&219===e?(t.preventDefault(),void this.app.api("module.list.outdent")):e===this.keycodes.TAB||t.metaKey&&221===e?$R.create("input.tab",this.app,t,e):e===this.keycodes.SPACE?$R.create("input.space",this.app,t,e,this.lastShiftKey):this._isDeleteKey(e)?$R.create("input.delete",this.app,t,e):this._isArrowKey(e)?$R.create("input.arrow",this.app,t,e):void 0}}},onkeyup:function(t){if(this.opts.input){var e=t.which;this.lastShiftKey=t.shiftKey,this.app.broadcast("contextbar.close");var i=$R.create("input.shortcode",this.app,t,e);if(!i.is()){if(e===this.keycodes.BACKSPACE){var s=this.editor.getElement(),a=this.utils.trimSpaces(s.html());if(a=a.replace(/<br\s?\/?>/g,""),a=a.replace(/<div><\/div>/,""),""===a)return t.preventDefault(),this.editor.setEmpty(),void this.editor.startFocus()}this.editor.isEmpty()&&this.app.broadcast("empty")}}},start:function(){this.opts.shortcutsAdd&&(this.opts.shortcuts=$R.extend({},!0,this.opts.shortcuts,this.opts.shortcutsAdd))},_selectAll:function(){var t,e=this.selection.getCurrent(),i=this.inspector.parse(e);return i.isComponentType("table")?(t=i.getTable(),void this.selection.setAll(t)):i.isComponentType("code")?(t=i.getComponentCodeElement(),void this.selection.setAll(t)):void this.selection.setAll()},_isArrowKey:function(t){return-1!==[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(t)},_isDeleteKey:function(t){return t===this.keycodes.BACKSPACE||t===this.keycodes.DELETE}}),$R.add("class","input.arrow",{init:function(t,e,i){this.app=t,this.opts=t.opts,this.utils=t.utils,this.caret=t.caret,this.offset=t.offset,this.marker=t.marker,this.editor=t.editor,this.keycodes=t.keycodes,this.component=t.component,this.inspector=t.inspector,this.selection=t.selection,this.key=i,this._init(e)},_init:function(t){if(!this._isRightLeftKey()||!this._isExitVariable(t)){if(this._isRightDownKey()){if(this._isExitOnDownRight(t))return;if(this._selectComponent(t,"End","next"))return}if(this._isLeftUpKey()){if(this._isExitOnUpLeft(t))return;if(this._selectComponent(t,"Start","prev"))return}this.key===this.keycodes.LEFT?this.utils.trimInvisibleChars("left"):this.key===this.keycodes.RIGHT&&this.utils.trimInvisibleChars("right")}},_isRightDownKey:function(){return-1!==[this.keycodes.DOWN,this.keycodes.RIGHT].indexOf(this.key)},_isLeftUpKey:function(){return-1!==[this.keycodes.UP,this.keycodes.LEFT].indexOf(this.key)},_isRightLeftKey:function(){return-1!==[this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(this.key)},_isExitVariable:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e),s=i.getComponent();if(i.isComponentType("variable")&&i.isComponentActive()){t.preventDefault();var a=this.key===this.keycodes.LEFT?"setBefore":"setAfter";this.caret[a](s)}else;},_isExitOnUpLeft:function(t){var e=this.selection.getCurrent(),i=this.selection.getBlock(e),s=this.inspector.parse(e),a=i.previousElementSibling,n=this.caret.isStart(i);if(n&&a&&"TABLE"===a.tagName)return t.preventDefault(),this.caret.setEnd(a),!0;if(s.isFigcaption()){i=s.getFigcaption(),n=this.caret.isStart(i);var r=$R.dom(i).closest(".redactor-component");if(n&&0!==r.length)return t.preventDefault(),this.caret.setEnd(r),!0}else{if(s.isTable()&&n)return t.preventDefault(),this.caret.setEnd(i.previousElementSibling),!0;if(!s.isComponentEditable()&&s.isComponent()&&!s.isComponentType("variable")){var o=s.getComponent();if(!o.previousElementSibling)return t.preventDefault(),this.component.clearActive(),this._exitPrevElement(t,s.getComponent());if(o.previousElementSibling)return t.preventDefault(),this.component.clearActive(),this.caret.setEnd(o.previousElementSibling),!0}}},_isExitOnDownRight:function(t){var e,i,s=this.editor.getElement(),a=this.selection.getCurrent(),n=this.inspector.parse(a),r=this.caret.isEnd();if(n.isTable()){if(i||r)return this._exitNextElement(t,n.getComponent())}else if(n.isFigcaption()){if(e=n.getFigcaption(),i=this.caret.isEnd(e),i||r)return this._exitNextElement(t,n.getComponent())}else if(n.isComponentType("code")){var o=n.getComponent(),l=$R.dom(n.getComponentCodeElement()).closest("pre");i=this.caret.isEnd(e);var d=l&&l.get().nextElementSibling;if(i&&!d)return this._exitNextElement(t,o)}else if(n.isPre()||n.isBlockquote()||n.isDl()){if(r){if(n.isPre())return this._exitNextElement(t,n.getPre());if(n.isBlockquote())return this._exitNextElement(t,n.getBlockquote());if(n.isDl())return this._exitNextElement(t,n.getDl())}}else if(n.isList()){var c=$R.dom(a).parents("ul, ol",s).last();if(i=this.caret.isEnd(c),i||r)return this._exitNextElement(t,c.get())}else if(n.isComponent()&&!n.isComponentType("variable")&&"span"!==n.getTag())return this.component.clearActive(),this._exitNextElement(t,n.getComponent())},_exitPrevElement:function(t,e){return t.preventDefault(),e.previousElementSibling?this.caret.setEnd(e.previousElementSibling):this.utils.createMarkupBefore(e),!0},_exitNextElement:function(t,e){return t.preventDefault(),e.nextElementSibling?this.caret.setStart(e.nextElementSibling):this.utils.createMarkup(e),!0},_selectComponent:function(t,e,i){var s=this.selection.getCurrent(),a=this.selection.getBlock(s),n=this.utils.findSiblings(s,i),r=this.utils.findSiblings(a,i);n&&this.caret["is"+e](s)?this._selectComponentItem(t,n,e):r&&this.caret["is"+e](a)&&this._selectComponentItem(t,r,e)},_selectComponentItem:function(t,e,i){return this.component.isNonEditable(e)?(t.preventDefault(),this.caret["set"+i](e),!0):void 0}}),$R.add("class","input.delete",{init:function(t,e,i){this.app=t,this.opts=t.opts,this.caret=t.caret,this.utils=t.utils,this.editor=t.editor,this.marker=t.marker,this.keycodes=t.keycodes,this.component=t.component,this.inspector=t.inspector,this.selection=t.selection,this.key=i,this._init(e)},_init:function(t){if(!this._removeActiveComponent(t)&&!this._removeAllSelectedTable(t)){if(this.key===this.keycodes.BACKSPACE){var e=this.editor.getElement(),i=this.utils.trimSpaces(e.html());if(i===this.opts.emptyHtml)return void t.preventDefault()}if(this._detectVariableOrNonEditable()||this.selection.hasNonEditable())return void t.preventDefault();this.selection.isCollapsed()&&(this.key===this.keycodes.BACKSPACE?this._traverseBackspace(t):this.key===this.keycodes.DELETE&&this._traverseDelete(t)),this.key===this.keycodes.BACKSPACE&&this.utils.trimInvisibleChars("left"),this._removeUnwantedStyles(),this._removeEmptySpans(),this._removeSpanTagsInHeadings(),this._removeInlineTagsInPre()}},_detectVariableOrNonEditable:function(){var t,e=this.selection.getBlock(),i=this.caret.isStart(e),s=this.caret.isEnd(e);if(this.key===this.keycodes.BACKSPACE&&i){if(t=e.previousSibling,this._isNonEditable(t))return!0}else if(this.key===this.keycodes.DELETE&&s&&(t=e.nextSibling,this._isNonEditable(t)))return!0;var a=this.selection.getCurrent(),n=this.caret.isStart(a),r=this.caret.isEnd(a),o=""===this.selection.getTextBeforeCaret().trim(),l=""===this.selection.getTextAfterCaret().trim();if(this.key===this.keycodes.BACKSPACE&&n&&!o){if(t=a.previousSibling,this._isVariable(t))return this.caret.setEnd(t),!0;if(this._isNonEditable(t))return!0}else if(this.key===this.keycodes.DELETE&&r&&!l){if(t=a.nextSibling,this._isVariable(t))return this.caret.setStart(t),!0;if(this._isNonEditable(t))return!0}},_isVariable:function(t){return 0!==$R.dom(t).closest('[data-redactor-type="variable"]').length},_isNonEditable:function(t){return 0!==$R.dom(t).closest(".non-editable").length},_getBlock:function(){var t=this.editor.getElement(),e=this.selection.getBlock(),i=this.inspector.parse(e);return e=i.isList()?$R.dom(e).parents("ul, ol",t).last().get():e,e=i.isDl()?i.getDl():e,i.isTable()?i.getTable():e},_traverseDelete:function(t){var e,i,s,a=this.selection.getCurrent(),n=this.inspector.parse(a);if(n.isFigcaption()){if(e=n.getFigcaption(),i=this.caret.isEnd(e))return void t.preventDefault()}else if(n.isComponentType("code")&&(e=n.getComponent(),i=this.caret.isEnd(e)))return void t.preventDefault();e=this._getBlock();var r=this.utils.findSiblings(e,"next");if(r){i=this.caret.isEnd(e);var o=this.inspector.parse(r),l="P"===r.tagName||"DIV"===r.tagName;if(i&&o.isComponentEditable())return t.preventDefault(),void this.component.remove(r,!1);if(i&&o.isComponent())return t.preventDefault(),this.caret.setStart(r),void(this.utils.isEmptyHtml(e.innerHTML)&&$R.dom(e).remove());if(i&&o.isList()){var d=$R.dom(e);if(s=$R.dom(r),n.isList())return t.preventDefault(),d.append(s),void s.unwrap();var c=s.children("li").first(),h=c.find("ul, ol");if(0!==h.length)return t.preventDefault(),s.prepend(h),h.unwrap(),d.append(c),void c.unwrap()}else if(i&&!n.isList()&&!n.isTable()&&l&&!this.utils.isEmptyHtml(e.innerHTML)){t.preventDefault();var u=$R.dom(e);return s=$R.dom(r),u.append(s),void s.unwrap()}}},_traverseBackspace:function(t){var e,i,s,a,n=this.selection.getCurrent(),r=this.inspector.parse(n);if(r.isFigcaption()){if(e=r.getFigcaption(),i=this.caret.isStart(e))return void t.preventDefault()}else if(r.isComponentType("code")&&(e=r.getComponent(),i=this.caret.isStart(e),i&&e.previousElementSibling))return t.preventDefault(),this.caret.setEnd(e.previousElementSibling),!0;e=this._getBlock();var o=this.utils.findSiblings(e,"prev");if(o){i=this.caret.isStart(e);var l=this.inspector.parse(o),d="P"===o.tagName||"DIV"===o.tagName;if(i&&l.isComponentEditable())return t.preventDefault(),void this.component.remove(o,!1);if(i&&l.isComponent())return t.preventDefault(),this.caret.setStart(o),void(this.utils.isEmptyHtml(e.innerHTML)&&$R.dom(e).remove());if(i&&r.isList())if(t.preventDefault(),a=$R.dom(e),s=$R.dom(o),l.isList())a.children("li").first().prepend(this.marker.build("start")),s.append(a),a.unwrap(),this.selection.restoreMarkers();else{var c=a.children("li").first(),h=c.get(),u=c.find("ul, ol"),p=this.utils.replaceToTag(h,this.opts.markup);this.opts.breakline&&p.attr("data-redactor-tag","br"),a.before(p),this.caret.setStart(p),0!==u.length&&(a.prepend(u),u.unwrap())}else if(i&&d){t.preventDefault();var m=this.utils.createInvisibleChar(),f=$R.dom(e);return s=$R.dom(o),this.caret.setEnd(s),f.prepend(m),s.append(f.contents()),void f.remove()}}else setTimeout(this._replaceBlock.bind(this),1)},_replaceBlock:function(){var t=this.selection.getBlock(),e=$R.dom(t);if("p"===this.opts.markup&&t&&this._isNeedToReplaceBlock(t)){var i=document.createElement(this.opts.markup);e.replaceWith(i),this.caret.setStart(i)}this.opts.breakline&&t&&"DIV"===t.tagName&&e.attr("data-redactor-tag","br")},_isNeedToReplaceBlock:function(t){return"DIV"===t.tagName&&this.utils.isEmptyHtml(t.innerHTML)},_removeActiveComponent:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e),s=i.getComponent();return i.isComponent()&&this.component.isActive(s)?(t.preventDefault(),this.component.remove(s),!0):void 0},_removeAllSelectedTable:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e),s=i.getTable();return s&&this.selection.isAll(s)?(t.preventDefault(),this.component.remove(s),!0):void 0},_removeUnwantedStyles:function(){var t=this.editor.getElement();setTimeout(function(){var e=t.find("*[style]");e.not("img, figure, iframe, [data-redactor-style-cache], [data-redactor-span]").removeAttr("style")},0)},_removeEmptySpans:function(){var t=this.editor.getElement();setTimeout(function(){t.find("span").each(function(t){0===t.attributes.length&&$R.dom(t).replaceWith(t.childNodes)})},0)},_removeSpanTagsInHeadings:function(){var t=this.editor.getElement();setTimeout(function(){t.find("h1, h2, h3, h4, h5, h6").each(function(t){var e=$R.dom(t);0===e.closest("figure").length&&e.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker, [data-redactor-style-cache], [data-redactor-span]").unwrap()})},1)},_removeInlineTagsInPre:function(){var t=this.editor.getElement(),e=this.opts.inlineTags;setTimeout(function(){t.find("pre").each(function(t){var i=$R.dom(t);0===i.closest("figure").length&&i.find(e.join(",")).not("code, .redactor-selection-marker").unwrap()})},1)}}),$R.add("class","input.enter",{init:function(t,e){this.app=t,this.opts=t.opts,this.utils=t.utils,this.caret=t.caret,this.editor=t.editor,this.insertion=t.insertion,this.selection=t.selection,this.inspector=t.inspector,this._init(e)},_init:function(t){if(!this.opts.enterKey)return this._disable(t);var e=this.app.broadcast("enter",t);return!1===e?t.preventDefault():this.selection.hasNonEditable()?void t.preventDefault():t.ctrlKey||t.shiftKey?this._insertBreak(t):void(this._isExit(t)||this._traverse(t))},_disable:function(t){t.preventDefault();var e=this.selection.getRange();e&&!e.collapsed&&e.deleteContents()},_insertBreak:function(t){t.preventDefault();var e=this.selection.getCurrent(),i=this.inspector.parse(e);i.isComponent()&&!i.isComponentEditable()||i.isCode()||(i.isPre()?this.insertion.insertNewline():this.insertion.insertBreakLine())},_isExit:function(t){var e=this.editor.getElement(),i=this.selection.getBlock(),s=this.inspector.parse(i),a=this.caret.isEnd(i),n=this.selection.getCurrent(),r=n.previousSibling;if(s.isBlockquote()){var o=a&&this._isExitableBlock(i,"P"),l=a&&this._isExitableDblBreak(r);if(o||l)return this._exitFromElement(t,l?r:i,s.getBlockquote())}else if(!s.isComponentType("code")&&s.isPre()){if(a){var d=i.innerHTML;if(d=this.utils.removeInvisibleChars(d),null!==d.match(/(\n\n\n)$/))return $R.dom(r.previousSibling.previousSibling).remove(),this._exitFromElement(t,r,i)}}else if(s.isDl()){if(a&&this._isExitableBlock(i,"DT"))return this._exitFromElement(t,i,s.getDl())}else if(s.isList()){var c=$R.dom(n).parents("ul, ol",e).last();if(a=this.caret.isEnd(c),a&&this._isExitableBlock(i,"LI"))return this._exitFromElement(t,i,c)}else if(s.isComponent()&&s.isComponentActive()&&!s.isFigcaption()&&!s.isComponentEditable())return this._exitFromElement(t,!1,s.getComponent())},_isExitableDblBreak:function(t){var e=!!t&&t.nextSibling;if(e){var i=this.utils.removeInvisibleChars(e.textContent);return 3===e.nodeType&&""===i.trim()}},_isExitableBlock:function(t,e){return t&&t.tagName===e&&this.utils.isEmptyHtml(t.innerHTML)},_exitFromElement:function(t,e,i){return t.preventDefault(),e&&$R.dom(e).remove(),this.utils.createMarkup(i),!0},_exitNextElement:function(t,e){return t.preventDefault(),e.nextSibling?this.caret.setStart(e.nextSibling):this.utils.createMarkup(e),!0},_traverse:function(t){var e=this.selection.getCurrent(),i=this.selection.isText(),s=this.selection.getBlock(),a=this.inspector.parse(e),n=!!s&&s.tagName.toLowerCase();if(a.isPre())return t.preventDefault(),this.insertion.insertNewline();if(!a.isBlockquote()){if(a.isFigcaption()){s=a.getFigcaption();var r=this.caret.isEnd(s),o=this.caret.isEnd();return r||o?this._exitNextElement(t,a.getComponent()):void t.preventDefault()}return a.isDl()?(t.preventDefault(),this._traverseDl(e)):i||this.opts.breakline&&"div"===n?(t.preventDefault(),this.insertion.insertBreakLine()):void setTimeout(this._replaceBlock.bind(this),1)}return s=this.selection.getBlock(e),s&&"BLOCKQUOTE"===s.tagName?(t.preventDefault(),this.insertion.insertBreakLine()):void 0},_traverseDl:function(t){var e=this.selection.getBlock(t),i=this.inspector.parse(e),s=i.getTag(),a=$R.dom(e),n=a.get().nextSibling||!1,r=$R.dom(n),o=n&&r.is("dd"),l=n&&r.is("dt"),d=this.caret.isEnd(e);if("dt"===s&&!o&&d){var c=document.createElement("dd");return a.after(c),void this.caret.setStart(c)}if("dd"===s&&!l&&d){var h=document.createElement("dt");return a.after(h),void this.caret.setStart(h)}return this.insertion.insertBreakLine()},_replaceBlock:function(){var t=this.selection.getBlock(),e=$R.dom(t);if("p"===this.opts.markup&&t&&this._isNeedToReplaceBlock(t)){var i=document.createElement(this.opts.markup);e.replaceWith(i),this.caret.setStart(i)}else if(t)if(this.utils.isEmptyHtml(t.innerHTML))this._clearBlock(e,t);else{var s=this.utils.getFirstNode(t);s&&"BR"===s.tagName&&($R.dom(s).remove(),this.caret.setStart(t))}t&&this._isNeedToCleanBlockStyle(t)&&this.opts.cleanOnEnter&&e.removeAttr("class style"),this.opts.breakline&&t&&"DIV"===t.tagName&&e.attr("data-redactor-tag","br")},_clearBlock:function(t,e){(this.opts.cleanInlineOnEnter||"<br>"===e.innerHTML)&&t.html(""),this.caret.setStart(e)},_isNeedToReplaceBlock:function(t){return"DIV"===t.tagName&&this.utils.isEmptyHtml(t.innerHTML)},_isNeedToCleanBlockStyle:function(t){return"P"===t.tagName&&this.utils.isEmptyHtml(t.innerHTML)}}),$R.add("class","input.paste",{init:function(t,e,i,s,a){this.app=t,this.opts=t.opts,this.editor=t.editor,this.cleaner=t.cleaner,this.container=t.container,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection,this.autoparser=t.autoparser,this.pasteHtml=s,this.pointInserted=a,this.dataTransfer=i,this._init(e)},_init:function(t){var e,i=this.dataTransfer||t.clipboardData,s=this.selection.getCurrent(),a=this.inspector.parse(s);if(this.dropPasted=this.dataTransfer,this.isRawCode=a.isPre()||a.isCode(),this.editor.enablePasting(),this.editor.saveScroll(),this.dropPasted||this.selection.saveMarkers(),this.isRawCode||!i)return e=this.isRawCode||i||!window.clipboardData?i.getData("text/plain"):window.clipboardData.getData("text"),t.preventDefault(),void this._insert(t,e);if(this.pasteHtml)t.preventDefault(),this._insert(t,this.pasteHtml);else{var n=i.getData("URL"),r=this._isPlainText(i)?i.getData("text/plain"):i.getData("text/html");if(r=n&&""!==n?n:r,null!==i.files&&i.files.length>0&&""===r){for(var o=[],l=0;l<i.files.length;l++){var d=i.files[l]||i.items[l].getAsFile();d&&o.push(d)}if(o.length>0)return t.preventDefault(),void this._insertFiles(t,o)}t.preventDefault(),this._insert(t,r)}},_isPlainText:function(t){var e=t.getData("text/plain"),i=t.getData("text/html");if(!e||!i)return null!==e;var s=document.createElement("div");return s.innerHTML=i,s.textContent===e?!s.querySelector(":not(meta)"):void 0},_restoreSelection:function(){this.editor.restoreScroll(),this.editor.disablePasting(),this.dropPasted||this.selection.restoreMarkers()},_insert:function(t,e){var i=this.app.broadcast("pasteBefore",e);if(e=void 0===i?e:i,e=this.isRawCode?e:this.cleaner.paste(e),e=this.isRawCode?this.cleaner.encodePhpCode(e):e,i=this.app.broadcast("pasting",e),e=void 0===i?e:i,this._restoreSelection(),this.opts.input){this.opts.autoparse&&this.opts.autoparsePaste&&(e=this.autoparser.parse(e));var s=this.dropPasted?this.insertion.insertToPoint(t,e,this.pointInserted):this.insertion.insertHtml(e);this.app.broadcast("pasted",s),this.app.broadcast("autoparseobserve")}},_insertFiles:function(t,e){this._restoreSelection();var i=-1!==this.opts.imageTypes.indexOf(e[0].type),s="undefined"==typeof this.dropPasted;i?this.app.broadcast("dropimage",t,e,s):this.app.broadcast("dropfile",t,e,s)}}),$R.add("class","input.shortcode",{init:function(t,e,i){this.app=t,this.opts=t.opts,this.utils=t.utils,this.marker=t.marker,this.keycodes=t.keycodes,this.selection=t.selection,this.worked=!1,i===this.keycodes.SPACE&&this._init()},is:function(){return this.worked},_init:function(){var t=this.selection.getCurrent();if(t&&3===t.nodeType){var e=this.utils.removeInvisibleChars(t.textContent),i=this.opts.shortcodes;for(var s in i){var a=new RegExp("^"+this.utils.escapeRegExp(s)),n=e.match(a);if(null!==n&&"undefined"!=typeof i[s].format)return this._format(i[s].format,t,a)}}},_format:function(t,e,i){var s=this.marker.insert("start");e=s.previousSibling;var a=e.textContent;a=this.utils.trimSpaces(a),a=a.replace(i,""),e.textContent=a;var n="ul"===t||"ol"===t?"module.list.toggle":"module.block.format";this.app.api(n,t),this.selection.restoreMarkers(),this.worked=!0}}),$R.add("class","input.shortcut",{init:function(t,e){this.app=t,this.opts=t.opts,this.worked=!1,this.hotkeys={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},this.hotkeysShiftNums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},this._init(e)},is:function(){return this.worked},_init:function(t){if(!1!==this.opts.shortcuts)for(var e in this.opts.shortcuts)this._build(t,e,this.opts.shortcuts[e]);else!t.ctrlKey&&!t.metaKey||66!==t.which&&73!==t.which||t.preventDefault()},_build:function(t,e,i){for(var s=e.split(","),a=s.length,n=0;a>n;n++)"string"==typeof s[n]&&this._handler(t,s[n].trim(),i)},_handler:function(t,e,i){e=e.toLowerCase().split(" ");for(var s=this.hotkeys[t.keyCode],a=String.fromCharCode(t.which).toLowerCase(),n="",r={},o=["meta","ctrl","alt","shift"],l=0;l<o.length;l++){var d=o[l];t[d+"Key"]&&s!==d&&(n+=d+"+")}s&&(r[n+s]=!0),a&&(r[n+a]=!0,r[n+this.hotkeysShiftNums[a]]=!0,"shift+"===n&&(r[this.hotkeysShiftNums[a]]=!0));var c=e.length;for(l=0;c>l;l++)if(r[e[l]])return t.preventDefault(),this.worked=!0,void(i.message?(this.app.broadcast(i.message,i.args),this.app.broadcast("buffer.trigger")):i.api&&(this.app.api(i.api,i.args),this.app.broadcast("buffer.trigger")))}}),$R.add("class","input.space",{init:function(t,e,i,s){this.app=t,this.keycodes=t.keycodes,this.insertion=t.insertion,this.selection=t.selection,this.key=i,this.lastShiftKey=s,this._init(e)},_init:function(t){return this.selection.hasNonEditable()?void t.preventDefault():this.lastShiftKey||this.key!==this.keycodes.SPACE||!t.ctrlKey&&!t.shiftKey||t.metaKey?void 0:(t.preventDefault(),void this.insertion.insertChar("&nbsp;"))}}),$R.add("class","input.tab",{init:function(t,e){this.app=t,this.opts=t.opts,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection,this._init(e)},_init:function(t){if(this.opts.tabKey){var e=this.app.broadcast("tab",t);return!1===e?t.preventDefault():void this._traverse(t)}},_traverse:function(t){var e=this.selection.getCurrent(),i=this.inspector.parse(e);return!i.isComponent()&&t.shiftKey?this._insertHardTab(t,4):i.isList()?(t.preventDefault(),this.app.api("module.list.indent")):i.isPre()||i.isComponentType("code")&&!i.isFigcaption()?this._tabCode(t):!1!==this.opts.tabAsSpaces?this._insertHardTab(t,this.opts.tabAsSpaces):void 0},_insertHardTab:function(t,e){t.preventDefault();var i=document.createTextNode(Array(e+1).join(" "));return this.insertion.insertNode(i,"end")},_tabCode:function(t){t.preventDefault();var e=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("\t");return this.insertion.insertNode(e,"end")}}),$R.add("module","upload",{init:function(t){this.app=t,this.opts=t.opts,this.lang=t.lang,this.utils=t.utils,this.editor=t.editor,this.progress=t.progress,this.defaults={event:!1,element:!1,name:!1,files:!1,url:!1,data:!1,paramName:!1}},build:function(t){this.p=$R.extend(this.defaults,t),this.$el=$R.dom(this.p.element),"INPUT"===this.$el.get().tagName?this._buildInput():this._buildBox()},send:function(t){this.p=$R.extend(this.defaults,t),this.$uploadbox=this.editor.getElement(),this._send(this.p.event,this.p.files)},complete:function(t,e){this._complete(t,e)},_buildInput:function(){this.box=!1,this.prefix="",this.$uploadbox=$R.dom('<div class="upload-redactor-box" />'),this.$el.hide(),this.$el.after(this.$uploadbox),this.opts.multipleUpload?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this._buildPlaceholder(),this._buildEvents()},_buildBox:function(){this.box=!0,this.prefix="box-",this.$uploadbox=this.$el,this.$uploadbox.attr("ondragstart","return false;"),this.$uploadbox.on("drop.redactor.upload",this._onDropBox.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_buildPlaceholder:function(){this.$placeholder=$R.dom('<div class="upload-redactor-placeholder" />'),this.$placeholder.html(this.lang.get("upload-label")),this.$uploadbox.append(this.$placeholder)},_buildEvents:function(){this.$el.on("change.redactor.upload",this._onChange.bind(this)),this.$uploadbox.on("click.redactor.upload",this._onClick.bind(this)),this.$uploadbox.on("drop.redactor.upload",this._onDrop.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_onClick:function(t){t.preventDefault(),this.$el.click()},_onChange:function(t){this._send(t,this.$el.get().files)},_onDrop:function(t){t.preventDefault(),this._clear(),this._setStatusDrop(),this._send(t)},_onDragOver:function(t){return t.preventDefault(),this._setStatusHover(),!1},_onDragLeave:function(t){return t.preventDefault(),this._removeStatusHover(),!1},_onDropBox:function(t){t.preventDefault(),this._clear(),this._setStatusDrop(),this._send(t)},_removeStatusHover:function(){this.$uploadbox.removeClass("upload-redactor-"+this.prefix+"hover")},_setStatusDrop:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"drop")},_setStatusHover:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"hover")},_setStatusError:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"error")},_setStatusSuccess:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"success")},_clear:function(){for(var t=["drop","hover","error","success"],e=0;e<t.length;e++)this.$uploadbox.removeClass("upload-redactor-"+this.prefix+t[e]);this.$uploadbox.removeAttr("ondragstart")},_send:function(t,e){t=t.originalEvent||t,e=e||t.dataTransfer.files;var i=new FormData,s=this._getUploadParam();i=this._buildData(s,e,i),i=this.utils.extendData(i,this.p.data);var a=this.app.broadcast("upload.start",t,i,e);!1!==a&&this._sendData(i,e,t)},_sendData:function(t,e,i){if(this.progress.show(),"function"==typeof this.p.url){var s=this.p.url(t,e,i,this);s instanceof C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1___default.a||this._complete(s,i)}else $R.ajax.post({url:this.p.url,data:t,before:function(t){return this.app.broadcast("upload.beforeSend",t)}.bind(this),success:function(t){this._complete(t,i)}.bind(this)})},_getUploadParam:function(){return this.p.paramName?this.p.paramName:"file"},_buildData:function(t,e,i){if(1===e.length)i.append(t+"[]",e[0]);else if(e.length>1&&!1!==this.opts.multipleUpload)for(var s=0;s<e.length;s++)i.append(t+"[]",e[s]);return i},_complete:function(t,e){this._clear(),this.progress.hide(),t&&t.error?(this._setStatusError(),this.app.broadcast("upload."+this.p.name+".error",t,e),this.app.broadcast("upload.error",t)):(this._setStatusSuccess(),this.app.broadcast("upload."+this.p.name+".complete",t,e),this.app.broadcast("upload.complete",t),setTimeout(this._clear.bind(this),500))}}),$R.add("class","code.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,e&&void 0!==e.cmnt?e:this._init(e)},_init:function(t){var e;if("undefined"!=typeof t){var i=$R.dom(t),s=i.closest("figure");0!==s.length?this.parse(s):(this.parse("<figure>"),this.append(t)),e=this.find("pre code, pre").last()}else e=$R.dom("<pre>"),this.parse("<figure>"),this.append(e);this._initElement(e),this._initWrapper()},_initElement:function(t){t.attr({tabindex:"-1",contenteditable:!0})},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"code",tabindex:"-1",contenteditable:!1})}}),$R.add("module","form",{init:function(t){this.app=t,this.lang=t.lang,this.component=t.component,this.inspector=t.inspector},onform:{remove:function(t){this._remove(t)}},oncontextbar:function(t,e){var i=this.inspector.parse(t.target);if(i.isComponentType("form")){var s=i.getComponent(),a={remove:{title:this.lang.get("delete"),api:"module.form.remove",args:s}};e.set(t,s,a,"top")}},_remove:function(t){this.component.remove(t)}}),$R.add("class","form.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,this.utils=t.utils,e&&void 0!==e.cmnt?e:this._init(e)},_init:function(t){if("undefined"!=typeof t){var e=$R.dom(t),i=e.closest("form");if(0!==i.length){var s=this.utils.replaceToTag(t,"figure");this.parse(s)}else this.parse("<figure>"),this.append(t)}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"form",tabindex:"-1",contenteditable:!1})}}),$R.add("module","image",{modals:{image:'<div class="redactor-modal-tab" data-title="## upload ##"><form action="">                 <input type="file" name="file" accept="image/*">             </form></div>',imageedit:'<div class="redactor-modal-group">                 <div id="redactor-modal-image-preview" class="redactor-modal-side"></div>                 <form action="" class="redactor-modal-area">                     <div class="form-item">                         <label for="modal-image-title"> ## title ##</label>                         <input type="text" id="modal-image-title" name="title" />                     </div>                     <div class="form-item form-item-caption">                         <label for="modal-image-caption">## caption ##</label>                         <input type="text" id="modal-image-caption" name="caption" aria-label="## caption ##" />                     </div>                     <div class="form-item form-item-align">                         <label>## image-position ##</label>                         <select name="align" aria-label="## image-position ##">                             <option value="none">## none ##</option>                             <option value="left">## left ##</option>                             <option value="center">## center ##</option>                             <option value="right">## right ##</option>                         </select>                     </div>                     <div class="form-item form-item-link">                         <label for="modal-image-url">## link ##</label>                         <input type="text" id="modal-image-url" name="url" aria-label="## link ##" />                     </div>                     <div class="form-item form-item-link">                         <label class="checkbox"><input type="checkbox" name="target" aria-label="## link-in-new-tab ##"> ## link-in-new-tab ##</label>                     </div>                 </form>             </div>'},init:function(t){this.app=t,this.opts=t.opts,this.lang=t.lang,this.caret=t.caret,this.utils=t.utils,this.editor=t.editor,this.storage=t.storage,this.component=t.component,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection,this.justResized=!1},oninsert:function(){this._observeImages()},onstarted:function(){this.storage.observeImages(),this.opts.imageResizable&&(this.resizer=$R.create("image.resize",this.app)),this._observeImages()},ondropimage:function(t,e,i){if(this.opts.imageUpload){var s={url:this.opts.imageUpload,event:!i&&t,files:e,name:"imagedrop",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",s)}},onstop:function(){this.resizer&&this.resizer.stop()},onbottomclick:function(){this.insertion.insertToEnd(this.editor.getLastNode(),"image")},onimageresizer:{stop:function(){this.resizer&&this.resizer.hide()}},onsource:{open:function(){this.resizer&&this.resizer.hide()},closed:function(){this._observeImages(),this.resizer&&this.resizer.rebuild()}},onupload:{complete:function(){this._observeImages()},image:{complete:function(t){this._insert(t)},error:function(t){this._uploadError(t)}},imageedit:{complete:function(t){this._change(t)},error:function(t){this._uploadError(t)}},imagedrop:{complete:function(t,e){this._insert(t,e)},error:function(t){this._uploadError(t)}},imagereplace:{complete:function(t){this._change(t,!1)},error:function(t){this._uploadError(t)}}},onmodal:{image:{open:function(t,e){this._setUpload(e)}},imageedit:{open:function(t,e){this._setFormData(t,e)},opened:function(t,e){this._setFormFocus(e)},remove:function(){this._remove(this.$image)},save:function(t,e){this._save(t,e)}}},onimage:{observe:function(){this._observeImages()},resized:function(){this.justResized=!0}},oncontextbar:function(t,e){if(this.justResized)this.justResized=!1;else{var i=this.selection.getCurrent(),s=this.inspector.parse(i);if(!s.isFigcaption()&&s.isComponentType("image")){var a=s.getComponent(),n={edit:{title:this.lang.get("edit"),api:"module.image.open"},remove:{title:this.lang.get("delete"),api:"module.image.remove",args:a}};e.set(t,a,n)}}},open:function(){this.$image=this._getCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(t){this._insert(t)},remove:function(t){this._remove(t)},_getModalData:function(){return this._isImage()&&this.opts.imageEditable?{name:"imageedit",width:"800px",title:this.lang.get("edit"),handle:"save",commands:{save:{title:this.lang.get("save")},remove:{title:this.lang.get("delete"),type:"danger"},cancel:{title:this.lang.get("cancel")}}}:{name:"image",title:this.lang.get("image")}},_isImage:function(){return this.$image},_getCurrent:function(){var t=this.selection.getCurrent(),e=this.inspector.parse(t);return!(!e.isComponentType("image")||!e.isComponentActive())&&this.component.create("image",e.getComponent())},_insert:function(t,e){if(this.app.api("module.modal.close"),C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(t)){for(var i={},s=0;s<t.length;s++)i=$R.extend(i,t[s]);t=i}else"string"==typeof t&&(t={file:{url:t}});if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)){var a=0;for(var n in t)"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t[n])&&a++;a>1?this._insertMultiple(t,e):this._insertSingle(t,e)}},_insertSingle:function(t,e){for(var i in t)if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t[i])){var s=this._createImageAndStore(t[i]),a=e?this.insertion.insertToPoint(e,s):this.insertion.insertHtml(s);this._removeSpaceBeforeFigure(a[0]),this.component.setActive(a[0]),this.app.broadcast("image.uploaded",a[0],t)}},_insertMultiple:function(t,e){var i,s=0,a=[];for(var n in t)if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t[n])){s++;var r=this._createImageAndStore(t[n]);if(1===s)a=e?this.insertion.insertToPoint(e,r):this.insertion.insertHtml(r);else{var o=$R.dom(a[0]);o.after(r),a=[r.get()],this.app.broadcast("image.inserted",r)}i=a[0],this._removeSpaceBeforeFigure(a[0]),this.app.broadcast("image.uploaded",a[0],t)}this.component.setActive(i)},_createImageAndStore:function(t){var e=this.component.create("image");return e.addClass("redactor-uploaded-figure"),e.setData({src:t.url,id:t.id?t.id:this.utils.getRandomId()}),this.storage.add("image",e.getElement()),e},_removeSpaceBeforeFigure:function(t){if(t){var e=t.previousSibling;e&&(this._removeInvisibleSpace(e),this._removeInvisibleSpace(e.previousSibling))}},_removeInvisibleSpace:function(t){t&&3===t.nodeType&&-1!==this.utils.searchInvisibleChars(t.textContent)&&t.parentNode.removeChild(t)},_save:function(t,e){var i=e.getData(),s={title:i.title};this.opts.imageLink&&(s.link={url:i.url,target:i.target}),this.opts.imageCaption&&(s.caption=i.caption),this.opts.imagePosition&&(s.align=i.align),this.$image.setData(s),this.resizer&&this.resizer.rebuild(),this.app.broadcast("image.changed",this.$image),this.app.api("module.modal.close")},_change:function(t,e){if("string"==typeof t&&(t={file:{url:t}}),"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)){var i;for(var s in t)if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t[s])){i=$R.dom("<img>"),i.attr("src",t[s].url),this.$image.changeImage(t[s]),this.app.broadcast("image.changed",this.$image,t),this.app.broadcast("image.uploaded",this.$image,t),this.app.broadcast("hardsync");break}!1!==e&&i.on("load",function(){this.$previewBox.html(i)}.bind(this))}},_uploadError:function(t){this.app.broadcast("image.uploadError",t)},_remove:function(t){this.app.api("module.modal.close"),this.component.remove(t)},_observeImages:function(){var t=this.editor.getElement(),e=this;t.find("img").each(function(t){var i=$R.dom(t);i.off(".drop-to-replace"),i.on("dragover.drop-to-replace dragenter.drop-to-replace",function(t){t.preventDefault()}),i.on("drop.drop-to-replace",function(t){return e.app.isDragComponentInside()?void 0:e._setReplaceUpload(t,i)})})},_setFormData:function(t,e){this._buildPreview(),this._buildPreviewUpload();var i=this.$image.getData(),s={title:i.title};this.opts.imageCaption?s.caption=i.caption:t.find(".form-item-caption").hide(),this.opts.imagePosition?s.align=i.align:t.find(".form-item-align").hide(),this.opts.imageLink?i.link&&(s.url=i.link.url,i.link.target&&(s.target=!0)):t.find(".form-item-link").hide(),e.setData(s)},_setFormFocus:function(t){t.getField("title").focus()},_setReplaceUpload:function(t,e){if(t=t.originalEvent||t,t.stopPropagation(),t.preventDefault(),this.opts.imageUpload){this.$image=this.component.create("image",e);var i={url:this.opts.imageUpload,files:t.dataTransfer.files,name:"imagereplace",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",i)}},_setUpload:function(t){var e={url:this.opts.imageUpload,element:t.getField("file"),name:"image",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",e)},_buildPreview:function(){this.$preview=$R.dom("#redactor-modal-image-preview");var t=this.$image.getData(),e=$R.dom("<img>");e.attr("src",t.src),this.$previewBox=$R.dom("<div>"),this.$previewBox.append(e),this.$preview.html(""),this.$preview.append(this.$previewBox)},_buildPreviewUpload:function(){if(this.opts.imageUpload){var t=$R.dom('<div class="desc">');t.html(this.lang.get("upload-change-label")),this.$preview.append(t);var e={url:this.opts.imageUpload,element:this.$previewBox,name:"imageedit",paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",e)}}}),$R.add("class","image.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,this.opts=t.opts,this.selection=t.selection,e&&void 0!==e.cmnt?e:this._init(e)},setData:function(t){for(var e in t)this._set(e,t[e])},getData:function(){for(var t=["src","title","caption","align","link","id"],e={},i=0;i<t.length;i++)e[t[i]]=this._get(t[i]);return e},getElement:function(){return this.$element},changeImage:function(t){this.$element.attr("src",t.url)},_init:function(t){var e=$R.dom(t),i=e.closest("figure");void 0===t?(this.$element=$R.dom("<img>"),this.parse("<figure>"),this.append(this.$element)):0===i.length?(this.parse("<figure>"),this.$element=e,this.$element.wrap(this)):(this.parse(i),this.$element=this.find("img")),this._initWrapper()},_set:function(t,e){this["_set_"+t](e)},_get:function(t){return this["_get_"+t]()},_set_src:function(t){this.$element.attr("src",t)},_set_id:function(t){this.$element.attr("data-image",t)},_set_title:function(t){t=t.trim().replace(/(<([^>]+)>)/gi,""),""===t?(this.$element.removeAttr("alt"),this.$element.removeAttr("title")):(this.$element.attr("alt",t),this.$element.attr("title",t))},_set_caption:function(t){var e=this.find("figcaption");return 0===e.length&&(e=$R.dom("<figcaption>"),e.attr("contenteditable","true"),this.append(e)),""===t?e.remove():e.html(t),e},_set_align:function(t){var e="",i="",s="",a=this,n=this.find("figcaption");if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts.imagePosition)){var r=this.opts.imagePosition;for(var o in r)a.removeClass(r[o]);var l="undefined"!=typeof r[t]&&r[t];l&&a.addClass(l)}else{switch(t){case"left":e="left",i="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":e="right",i="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":s="center"}a.css({float:e,margin:i,"text-align":s}),a.attr("rel",a.attr("style")),"center"===t?n.css("text-align","center"):n.css("text-align","")}},_set_link:function(t){var e=this._findLink();return""===t.url?void(e&&e.unwrap()):(e||(e=$R.dom("<a>"),this.$element.wrap(e)),e.attr("href",t.url),t.target?e.attr("target",!0===t.target?"_blank":t.target):e.removeAttr("target"),e)},_get_src:function(){return this.$element.attr("src")},_get_id:function(){return this.$element.attr("data-image")},_get_title:function(){var t=this.$element.attr("alt"),e=this.$element.attr("title");return t||(e||"")},_get_caption:function(){var t=this.find("figcaption");return 0===t.length?"":t.html()},_get_align:function(){var t="";if("object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts.imagePosition)){t="none";var e=this.opts.imagePosition;for(var i in e)if(this.hasClass(e[i])){t=i;break}}else t="center"===this.css("text-align")?"center":this.css("float");return t},_get_link:function(){var t=this._findLink();if(t){var e=!!t.attr("target");return{url:t.attr("href"),target:e}}},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"image",tabindex:"-1",contenteditable:!1})},_findLink:function(){var t=this.find("a").filter(function(t){return 0===$R.dom(t).closest("figcaption").length});return 0!==t.length&&t}}),$R.add("class","image.resize",{init:function(t){this.app=t,this.$doc=t.$doc,this.$win=t.$win,this.$body=t.$body,this.editor=t.editor,this.toolbar=t.toolbar,this.inspector=t.inspector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body,this._init()},rebuild:function(){this._setResizerPosition()},hide:function(){this.$target.find("#redactor-image-resizer").remove()},stop:function(){var t=this.editor.getElement();t.off(".redactor.image-resize"),this.$doc.off(".redactor.image-resize"),this.$win.off("resize.redactor.image-resize"),this.hide()},_init:function(){var t=this.editor.getElement();t.on("click.redactor.image-resize",this._build.bind(this)),this.$win.on("resize.redactor.image-resize",this._setResizerPosition.bind(this))},_build:function(t){this.$target.find("#redactor-image-resizer").remove();var e=this.inspector.parse(t.target),i=this.editor.getElement();e.isComponentType("image")&&(this.$resizableBox=i,this.$resizableImage=$R.dom(e.getImageElement()),this.$resizer=$R.dom("<span>"),this.$resizer.attr("id","redactor-image-resizer"),this.$target.append(this.$resizer),this._setResizerPosition(),this.$resizer.on("mousedown touchstart",this._set.bind(this)))},_setResizerPosition:function(){if(this.$resizer){var t=this.toolbar.isTarget(),e=this.$target.offset(),i=7,s=t?i-e.top+this.$target.scrollTop():i,a=t?i-e.left:i,n=this.$resizableImage.offset(),r=this.$resizableImage.width(),o=this.$resizableImage.height(),l=this.$resizer.width(),d=this.$resizer.height();this.$resizer.css({top:n.top+o-d+s+"px",left:n.left+r-l+a+"px"})}},_set:function(t){t.preventDefault(),this.resizeHandle={x:t.pageX,y:t.pageY,el:this.$resizableImage,ratio:this.$resizableImage.width()/this.$resizableImage.height(),h:this.$resizableImage.height()},t=t.originalEvent||t,t.targetTouches&&(this.resizeHandle.x=t.targetTouches[0].pageX,this.resizeHandle.y=t.targetTouches[0].pageY),this.app.broadcast("contextbar.close"),this.app.broadcast("image.resize",this.$resizableImage),this._start()},_start:function(){this.$doc.on("mousemove.redactor.image-resize touchmove.redactor.image-resize",this._move.bind(this)),this.$doc.on("mouseup.redactor.image-resize touchend.redactor.image-resize",this._stop.bind(this))},_stop:function(){this.$doc.off(".redactor.image-resize"),this.app.broadcast("image.resized",this.$resizableImage)},_move:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.resizeHandle.h;e+=t.targetTouches?t.targetTouches[0].pageY-this.resizeHandle.y:t.pageY-this.resizeHandle.y;var i=e*this.resizeHandle.ratio;20>e||100>i||this._getResizableBoxWidth()<=i||(this.resizeHandle.el.attr({width:i,height:e}),this.resizeHandle.el.width(i),this.resizeHandle.el.height(e),this._setResizerPosition())},_getResizableBoxWidth:function(){var t=this.$resizableBox.width();return t-C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(this.$resizableBox.css("padding-left"))-C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(this.$resizableBox.css("padding-right"))}}),$R.add("module","file",{modals:{file:'<div class="redactor-modal-tab" data-title="## upload ##"><form action="">                 <div class="form-item form-item-title">                     <label for="modal-file-title"> ## filename ## <span class="desc">(## optional ##)</span></label>                     <input type="text" id="modal-file-title" name="title" />                 </div>                 <input type="file" name="file">             </form></div>'},init:function(t){this.app=t,this.opts=t.opts,this.lang=t.lang,this.caret=t.caret,this.utils=t.utils,this.storage=t.storage,this.component=t.component,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection},onstarted:function(){this.storage.observeFiles()},ondropfile:function(t,e,i){if(this.opts.fileUpload){var s={url:this.opts.fileUpload,event:!i&&t,files:e,name:"filedrop",data:this.opts.fileData};this.app.api("module.upload.send",s)}},onmodal:{file:{open:function(t,e){this._setFormData(t,e),this._setUpload(e)},opened:function(t,e){this._setFormFocus(e),this.$form=e}}},onupload:{file:{complete:function(t){this._insert(t)},error:function(t){this._uploadError(t)}},filedrop:{complete:function(t,e){this._insert(t,e)},error:function(t){this._uploadError(t)}}},oncontextbar:function(t,e){var i=this.selection.getCurrent(),s=this.inspector.parse(i);if(s.isFile()){var a=s.getFile(),n={remove:{title:this.lang.get("delete"),api:"module.file.remove",args:a}};e.set(t,a,n,"bottom")}},open:function(){this._open()},insert:function(t){this._insert(t)},remove:function(t){this._remove(t)},_open:function(){this.app.api("module.modal.build",this._getModalData())},_getModalData:function(){var t={name:"file",title:this.lang.get("file")};return t},_insert:function(t,e){if(this.app.api("module.modal.close"),"object"==Object(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t)){if(C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(t)){for(var i={},s=0;s<t.length;s++)i=$R.extend(i,t[s]);t=i}var a=C_Users_CBO_Staff_Desktop_platformOS_insites_admin_modular_insites_database_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(t).length>1;a?this._insertMultiple(t,e):this._insertSingle(t,e),this.$form=!1}},_insertSingle:function(t,e){var i=[];for(var s in t){var a=this._createFileAndStore(t[s]);i=this.opts.fileAttachment?this._insertAsAttachment(a):e?this.insertion.insertToPoint(e,a):this.insertion.insertRaw(a),this.app.broadcast("file.uploaded",i[0],t)}},_insertMultiple:function(t,e){var i,s=0,a=[];for(var n in t){s++;var r=this._createFileAndStore(t[n]);if(this.opts.fileAttachment)a=this._insertAsAttachment(r,t);else if(1===s)a=e?this.insertion.insertToPoint(e,r):this.insertion.insertRaw(r);else{var o=$R.dom(a[0]);o.after(r).after(" "),a=[r.get()],this.app.broadcast("file.inserted",r)}i=r,this.app.broadcast("file.uploaded",a[0],t)}this.opts.fileAttachment||this.caret.setAfter(i)},_insertAsAttachment:function(t,e){var i=$R.dom(this.opts.fileAttachment),s=t.wrapAttachment();i.append(s);var a=[s.get()];return this.app.broadcast("file.appended",a[0],e),a},_createFileAndStore:function(t){var e=!!this.$form&&this.$form.getData(),i=t.name?t.name:t.url,s=!this.opts.fileAttachment&&e&&""!==e.title?e.title:this._truncateUrl(i),a=this.component.create("file");return a.attr("href",t.url),a.attr("data-file",t.id?t.id:this.utils.getRandomId()),a.attr("data-name",t.name),a.html(s),this.storage.add("file",a),a},_remove:function(t){this.selection.save();var e=this.component.create("file",t),i=this.app.broadcast("file.delete",e);!1!==i?(e.unwrap(),this.selection.restore(),this.app.broadcast("file.deleted",e)):this.selection.restore()},_truncateUrl:function(t){return-1!==t.search(/^http/)&&t.length>20?t.substring(0,20)+"...":t},_setUpload:function(t){var e={url:this.opts.fileUpload,element:t.getField("file"),name:"file",data:this.opts.fileData,paramName:this.opts.fileUploadParam};this.app.api("module.upload.build",e)},_setFormData:function(t,e){this.opts.fileAttachment?t.find(".form-item-title").hide():e.setData({title:this.selection.getText()})},_setFormFocus:function(t){t.getField("title").focus()},_uploadError:function(t){this.app.broadcast("file.uploadError",t)}}),$R.add("class","file.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,this.opts=t.opts,e&&void 0!==e.cmnt?e:this._init(e)},wrapAttachment:function(){return this.$wrapper=$R.dom('<span class="redactor-file-item">'),this.$remover=$R.dom('<span class="redactor-file-remover">'),this.$remover.html("&times;"),this.$remover.on("click",this.removeAttachment.bind(this)),this.$wrapper.append(this),this.$wrapper.append(this.$remover),this.$wrapper},removeAttachment:function(t){t.preventDefault();var e=this.app.broadcast("file.delete",this,this.$wrapper);!1!==e&&(this.$wrapper.remove(),this.app.broadcast("file.deleted",this),this.app.broadcast("file.removeAttachment",this))},_init:function(t){if(void 0===t)this.parse("<a>");else{var e=$R.dom(t).closest("a");this.parse(e)}}}),$R.add("module","buffer",{init:function(t){this.app=t,this.opts=t.opts,this.editor=t.editor,this.offset=t.offset,this.keycodes=t.keycodes,this.selection=t.selection,this.state=!1,this.passed=!1,this.keyPressed=!1,this.savedHtml=!1,this.savedOffset=!1,this.undoStorage=[],this.redoStorage=[]},onkeydown:function(t){this._listen(t)},onsyncing:function(){this.keyPressed||this.trigger(),this.keyPressed=!1},onbuffer:{trigger:function(){this.trigger()}},onstate:function(t,e,i){t&&(t.ctrlKey||t.metaKey)||t&&(this._isUndo(t)||this._isRedo(t))||(this.passed=!1,this._saveState(e,i))},onenable:function(){this.clear()},clear:function(){this.state=!1,this.undoStorage=[],this.redoStorage=[]},undo:function(){this._getUndo()},redo:function(){this._getRedo()},trigger:function(){this.state&&!1===this.passed&&this._setUndo()},_saveState:function(t,e){var i=this.editor.getElement();this.state={html:t||i.html(),offset:e||this.offset.get()}},_listen:function(t){var e=t.which,i=t.ctrlKey||t.metaKey,s=i||t.shiftKey||t.altKey,a=[this.keycodes.SPACE,this.keycodes.ENTER,this.keycodes.BACKSPACE,this.keycodes.DELETE,this.keycodes.TAB,this.keycodes.LEFT,this.keycodes.RIGHT,this.keycodes.UP,this.keycodes.DOWN];return this._isUndo(t)?(t.preventDefault(),void this.undo()):this._isRedo(t)?(t.preventDefault(),void this.redo()):((i||-1===a.indexOf(e))&&(!i||88!==e&&67!==e)||(s=!0,this.trigger()),s||this._hasUndo()||this.trigger(),void(this.keyPressed=!0))},_isUndo:function(t){var e=t.which,i=t.ctrlKey||t.metaKey;return i&&90===e&&!t.shiftKey&&!t.altKey},_isRedo:function(t){var e=t.which,i=t.ctrlKey||t.metaKey;return i&&(90===e&&t.shiftKey||89===e&&!t.shiftKey)&&!t.altKey},_setUndo:function(){var t=this.undoStorage[this.undoStorage.length-1];"undefined"!=typeof t&&t[0]===this.state.html||(this.undoStorage.push([this.state.html,this.state.offset]),this._removeOverStorage())},_setRedo:function(){var t=this.editor.getElement(),e=this.offset.get(),i=t.html();this.redoStorage.push([i,e]),this.redoStorage=this.redoStorage.slice(0,this.opts.bufferLimit)},_getUndo:function(){if(this._hasUndo()){this.passed=!0;var t=this.editor.getElement(),e=this.undoStorage.pop();this._setRedo(),t.html(e[0]),this.offset.set(e[1]),this.selection.restore(),this.app.broadcast("undo",e[0],e[1])}},_getRedo:function(){if(this._hasRedo()){this.passed=!0;var t=this.editor.getElement(),e=this.redoStorage.pop();this._setUndo(),t.html(e[0]),this.offset.set(e[1]),this.app.broadcast("redo",e[0],e[1])}},_removeOverStorage:function(){this.undoStorage.length>this.opts.bufferLimit&&(this.undoStorage=this.undoStorage.slice(0,this.undoStorage.length-this.opts.bufferLimit))},_hasUndo:function(){return 0!==this.undoStorage.length},_hasRedo:function(){return 0!==this.redoStorage.length}}),$R.add("module","list",{init:function(t){this.app=t,this.opts=t.opts,this.utils=t.utils,this.block=t.block,this.toolbar=t.toolbar,this.inspector=t.inspector,this.selection=t.selection},onbutton:{list:{observe:function(t){this._observeButton(t)}}},ondropdown:{list:{observe:function(t){this._observeDropdown(t)}}},toggle:function(t){var e=this._getBlocks(),i=this.selection.getBlock(),s=$R.dom(i).parents("ul, ol",".redactor-in").last();return 0===e.length&&0!==s.length&&(e=[s.get()]),!i||"TD"!==i.tagName&&"TH"!==i.tagName||(e=this.block.format("div")),this.selection.saveMarkers(),e=0!==e.length&&this._isUnformat(t,e)?this._unformat(t,e):this._format(t,e),this.selection.restoreMarkers(),e},indent:function(){var t=this.selection.isCollapsed(),e=this.selection.getCurrent(),i=this.inspector.parse(e),s=!!i.isList()&&i.getListItem(),a=$R.dom(s),n=a.prevElement(),r=n.get(),o=t&&s&&r&&"LI"===r.tagName;if(o){this.selection.saveMarkers(),n=$R.dom(r);var l=n.children("ul, ol"),d=a.closest("ul, ol");if(0!==l.length)l.append(a);else{var c=d.get().tagName.toLowerCase(),h=$R.dom("<"+c+">");h.append(a),n.append(h)}this.selection.restoreMarkers()}},outdent:function(){var t=this.selection.isCollapsed(),e=this.selection.getCurrent(),i=this.inspector.parse(e),s=!!i.isList()&&i.getListItem(),a=$R.dom(s);if(t&&s){var n,r,o,l,d=a.parent(),c=d.closest("li",".redactor-in"),h=a.prevElement(),u=a.nextElement(),p=h.get(),m=u.get(),f=!1===p,_=!1!==p&&!1!==m,g=!f&&!1===m;if(this.selection.saveMarkers(),0!==c.length)if(_){n=this._getAllNext(a.get()),o=$R.dom("<"+d.get().tagName.toLowerCase()+">");for(var b=0;b<n.length;b++)o.append(n[b]);c.after(a),a.append(o)}else c.after(a),0===d.children().length?d.remove():f&&a.append(d);else{var v=this._createUnformatContainer(a),y=v.find("ul, ol").first();if(f)d.before(v);else if(g)d.after(v);else if(_){o=$R.dom("<"+d.get().tagName.toLowerCase()+">"),n=this._getAllNext(a.get());for(b=0;b<n.length;b++)o.append(n[b]);d.after(v),v.after(o)}0!==y.length&&(l=v.nextElement(),r=l.get(),r&&r.tagName===d.get().tagName?($R.dom(r).prepend(y),y.unwrap()):v.after(y)),a.remove()}this.selection.restoreMarkers()}},_getAllNext:function(t){for(var e=[];t;){var i=$R.dom(t).nextElement();if(t=i.get(),!t)return e;e.push(t)}return e},_isUnformat:function(t,e){for(var i=0,s=0;s<e.length;s++)if(3!==e[s].nodeType){var a=e[s].tagName.toLowerCase();a!==t&&"figure"!==a||i++}return i===e.length},_format:function(t,e){var i=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6","ul","ol"],s=this._uniteBlocks(e,i),a=[];for(var n in s){for(var r=s[n],o=this._createList(t,s[n]),l=0;l<r.length;l++){var d;if(3===r[l].nodeType||"UL"!==r[l].tagName&&"OL"!==r[l].tagName)d=this._createListItem(r[l]),this.utils.normalizeTextNodes(d),o.append(d);else{var c=$R.dom(r[l]);d=c.contents(),o.append(d),this.utils.isEmpty(c)&&c.remove()}}a.push(o.get())}return a},_uniteBlocks:function(t,e){for(var i=0,s={0:[]},a=!1,n=0;n<t.length;n++){var r=$R.dom(t[n]),o=r.closest("th, td");0!==o.length?(o.get()!==a&&(i++,s[i]=[]),this._isUniteBlock(t[n],e)&&s[i].push(t[n])):this._isUniteBlock(t[n],e)?s[i].push(t[n]):(i++,s[i]=[]),a=o.get()}return s},_isUniteBlock:function(t,e){return 3===t.nodeType||-1!==e.indexOf(t.tagName.toLowerCase())},_createList:function(t,e){var i=e[e.length-1],s=$R.dom(i),a=$R.dom("<"+t+">");return s.after(a),a},_createListItem:function(t){var e=$R.dom("<li>");if(3===t.nodeType)e.append(t);else{var i=$R.dom(t);e.append(i.contents()),i.remove()}return e},_unformat:function(t,e){if(1===e.length){var i=$R.dom(e[0]),s=i.find("li"),a=this.selection.getNodes({tags:["li"]}),n=this.selection.getBlock(),r=$R.dom(n).closest("li");if(0===a.length&&0!==r.length&&(a=[r.get()]),a.length===s.length)return this._unformatEntire(e[0]);var o=this._getItemsPosition(s,a);if("Top"===o)return this._unformatAtSide("before",a,i);if("Bottom"===o)return a.reverse(),this._unformatAtSide("after",a,i);if("Middle"===o){var l=$R.dom(a[a.length-1]),d=!1,c=!1,h=$R.dom("<"+i.get().tagName.toLowerCase()+">");s.each(function(t){if(d){var e=$R.dom(t);0!==e.closest(".redactor-split-item").length||!1!==c&&0!==e.closest(c).length||e.addClass("redactor-split-item"),c=e}t===l.get()&&(d=!0)}),s.filter(".redactor-split-item").each(function(t){var e=$R.dom(t);e.removeClass("redactor-split-item"),h.append(t)}),i.after(h),a.reverse();for(var u=0;u<a.length;u++){var p=$R.dom(a[u]),m=this._createUnformatContainer(p);i.after(m),m.find("ul, ol").remove(),p.remove()}return}}else for(u=0;u<e.length;u++)3!==e[u].nodeType&&e[u].tagName.toLowerCase()===t&&this._unformatEntire(e[u])},_unformatEntire:function(t){var e=$R.dom(t),i=e.find("li");i.each(function(t){var i=$R.dom(t),s=this._createUnformatContainer(i);i.remove(),e.before(s)}.bind(this)),e.remove()},_unformatAtSide:function(t,e,i){for(var s=0;s<e.length;s++){var a=$R.dom(e[s]),n=this._createUnformatContainer(a);i[t](n);var r=n.find("ul, ol").first();a.append(r),r.each(function(t){var i=$R.dom(t),a=i.closest("li");a.get()===e[s]&&(i.unwrap(),a.addClass("r-unwrapped"))}),this.utils.isEmptyHtml(a.html())&&a.remove()}i.find(".r-unwrapped").each(function(t){var e=$R.dom(t);""===e.html().trim()?e.remove():e.removeClass("r-unwrapped")})},_getItemsPosition:function(t,e){var i="Middle",s=e[0],a=e[e.length-1],n=t.first().get(),r=t.last().get();return n===s&&r!==a?i="Top":n!==s&&r===a&&(i="Bottom"),i},_createUnformatContainer:function(t){var e=$R.dom("<"+this.opts.markup+">");return this.opts.breakline&&e.attr("data-redactor-tag","br"),e.append(t.contents()),e},_getBlocks:function(){return this.selection.getBlocks({first:!0})},_observeButton:function(){var t=this.selection.getCurrent(),e=this.inspector.parse(t),i=e.isPre()||e.isCode()||e.isFigcaption();this._observeButtonsList(i,["lists","ul","ol","outdent","indent"]);var s=this.toolbar.getButton("outdent"),a=this.toolbar.getButton("indent");this._observeIndent(a,s)},_observeDropdown:function(t){var e=t.getItem("outdent"),i=t.getItem("indent");this._observeIndent(i,e)},_observeIndent:function(t,e){var i=this.selection.isCollapsed(),s=this.selection.getCurrent(),a=this.inspector.parse(s),n=!!a.isList()&&a.getListItem(),r=$R.dom(n),o=r.prevElement(),l=o.get(),d=i&&n&&l&&"LI"===l.tagName;e&&(n&&i?e.enable():e.disable()),t&&(n&&d?t.enable():t.disable())},_observeButtonsList:function(t,e){for(var i=0;i<e.length;i++){var s=this.toolbar.getButton(e[i]);s&&(t?s.disable():s.enable())}}}),$R.add("class","video.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,e&&void 0!==e.cmnt?e:this._init(e)},_init:function(t){if("undefined"!=typeof t){var e=$R.dom(t),i=e.closest("figure");0!==i.length?this.parse(i):(this.parse("<figure>"),this.append(t))}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"video",tabindex:"-1",contenteditable:!1})}}),window.Redactor=window.$R=$R,window.addEventListener("load",function(){$R("[data-redactor]")})}()},9602:function(t,e,i){},9816:function(t,e,i){"use strict";var s=i("f194"),a=i.n(s);a.a},"9d14":function(t,e,i){"use strict";var s=i("18fa"),a=i.n(s);a.a},"9f94":function(t,e,i){"use strict";i.r(e);i("7514");!function(t){t.add("plugin","table",{translations:{en:{table:"Table","insert-table":"Insert table","insert-row-above":"Insert row above","insert-row-below":"Insert row below","insert-column-left":"Insert column left","insert-column-right":"Insert column right","add-head":"Add head","delete-head":"Delete head","delete-column":"Delete column","delete-row":"Delete row","delete-table":"Delete table"}},init:function(t){this.app=t,this.lang=t.lang,this.opts=t.opts,this.caret=t.caret,this.editor=t.editor,this.toolbar=t.toolbar,this.component=t.component,this.inspector=t.inspector,this.insertion=t.insertion,this.selection=t.selection},ondropdown:{table:{observe:function(t){this._observeDropdown(t)}}},onbottomclick:function(){this.insertion.insertToEnd(this.editor.getLastNode(),"table")},start:function(){var t={observe:"table","insert-table":{title:this.lang.get("insert-table"),api:"plugin.table.insert"},"insert-row-above":{title:this.lang.get("insert-row-above"),classname:"redactor-table-item-observable",api:"plugin.table.addRowAbove"},"insert-row-below":{title:this.lang.get("insert-row-below"),classname:"redactor-table-item-observable",api:"plugin.table.addRowBelow"},"insert-column-left":{title:this.lang.get("insert-column-left"),classname:"redactor-table-item-observable",api:"plugin.table.addColumnLeft"},"insert-column-right":{title:this.lang.get("insert-column-right"),classname:"redactor-table-item-observable",api:"plugin.table.addColumnRight"},"add-head":{title:this.lang.get("add-head"),classname:"redactor-table-item-observable",api:"plugin.table.addHead"},"delete-head":{title:this.lang.get("delete-head"),classname:"redactor-table-item-observable",api:"plugin.table.deleteHead"},"delete-column":{title:this.lang.get("delete-column"),classname:"redactor-table-item-observable",api:"plugin.table.deleteColumn"},"delete-row":{title:this.lang.get("delete-row"),classname:"redactor-table-item-observable",api:"plugin.table.deleteRow"},"delete-table":{title:this.lang.get("delete-table"),classname:"redactor-table-item-observable",api:"plugin.table.deleteTable"}},e={title:this.lang.get("table")},i=this.toolbar.addButtonBefore("link","table",e);i.setIcon('<i class="re-icon-table"></i>'),i.setDropdown(t)},insert:function(){for(var t=this.component.create("table"),e=0;e<2;e++)t.addRow(3);t=this.insertion.insertHtml(t),this.caret.setStart(t)},addRowAbove:function(){var t=this._getComponent();if(t){var e=this.selection.getCurrent(),i=t.addRowTo(e,"before");this.caret.setStart(i)}},addRowBelow:function(){var t=this._getComponent();if(t){var e=this.selection.getCurrent(),i=t.addRowTo(e,"after");this.caret.setStart(i)}},addColumnLeft:function(){var t=this._getComponent();if(t){var e=this.selection.getCurrent();this.selection.save(),t.addColumnTo(e,"left"),this.selection.restore()}},addColumnRight:function(){var t=this._getComponent();if(t){var e=this.selection.getCurrent();this.selection.save(),t.addColumnTo(e,"right"),this.selection.restore()}},addHead:function(){var t=this._getComponent();t&&(this.selection.save(),t.addHead(),this.selection.restore())},deleteHead:function(){var e=this._getComponent();if(e){var i=this.selection.getCurrent();0!==t.dom(i).closest("thead").length?(e.removeHead(),this.caret.setStart(e)):(this.selection.save(),e.removeHead(),this.selection.restore())}},deleteColumn:function(){var e=this._getComponent();if(e){var i=this.selection.getCurrent(),s=t.dom(i).closest("td, th"),a=s.nextElement().get(),n=s.prevElement().get();e.removeColumn(i),a?this.caret.setStart(a):n?this.caret.setEnd(n):this.deleteTable()}},deleteRow:function(){var e=this._getComponent();if(e){var i=this.selection.getCurrent(),s=t.dom(i).closest("tr"),a=s.nextElement().get(),n=s.prevElement().get();e.removeRow(i),a?this.caret.setStart(a):n?this.caret.setEnd(n):this.deleteTable()}},deleteTable:function(){var t=this._getTable();t&&this.component.remove(t)},_getTable:function(){var t=this.selection.getCurrent(),e=this.inspector.parse(t);if(e.isTable())return e.getTable()},_getComponent:function(){var t=this.selection.getCurrent(),e=this.inspector.parse(t);if(e.isTable()){var i=e.getTable();return this.component.create("table",i)}},_observeDropdown:function(t){var e=this._getTable(),i=t.getItemsByClass("redactor-table-item-observable"),s=t.getItem("insert-table");e?(this._observeItems(i,"enable"),s.disable()):(this._observeItems(i,"disable"),s.enable())},_observeItems:function(t,e){for(var i=0;i<t.length;i++)t[i][e]()}})}(Redactor),function(t){t.add("class","table.component",{mixins:["dom","component"],init:function(t,e){return this.app=t,e&&void 0!==e.cmnt?e:this._init(e)},addHead:function(){this.removeHead();var e=this.$element.find("tr").first().children("td, th").length,i=t.dom("<thead>"),s=this._buildRow(e,"<th>");i.append(s),this.$element.prepend(i)},addRow:function(t){var e=this._buildRow(t);return this.$element.append(e),e},addRowTo:function(t,e){return this._addRowTo(t,e)},addColumnTo:function(e,i){var s=t.dom(e),a=s.closest("tr"),n=s.closest("td, th"),r=0;a.find("td, th").each(function(t,e){t===n.get()&&(r=e)}),this.$element.find("tr").each(function(e){var s=t.dom(e).find("td, th").get(r),a=t.dom(s),n=a.clone();n.html(""),"right"===i?a.after(n):a.before(n)})},removeHead:function(){var t=this.$element.find("thead");0!==t.length&&t.remove()},removeRow:function(e){t.dom(e).closest("tr").remove()},removeColumn:function(e){var i=t.dom(e),s=i.closest("tr"),a=i.closest("td, th"),n=0;s.find("td, th").each(function(t,e){t===a.get()&&(n=e)}),this.$element.find("tr").each(function(e){var i=t.dom(e).find("td, th").get(n);t.dom(i).remove()})},_init:function(e){var i,s;if(void 0!==e){var a=t.dom(e),n=a.get(),r=a.closest("figure");0!==r.length?(i=r,s=r.find("table").get()):"TABLE"===n.tagName&&(s=n)}this._buildWrapper(i),this._buildElement(s),this._initWrapper()},_addRowTo:function(e,i){var s=t.dom(e).closest("tr");if(0!==s.length){var a=s.children("td, th").length,n=this._buildRow(a);return s[i](n),n}},_buildRow:function(e,i){i=i||"<td>";for(var s=t.dom("<tr>"),a=0;a<e;a++){var n=t.dom(i);n.attr("contenteditable",!0),s.append(n)}return s},_buildElement:function(e){e?this.$element=t.dom(e):(this.$element=t.dom("<table>"),this.append(this.$element))},_buildWrapper:function(t){t=t||"<figure>",this.parse(t)},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"table",tabindex:"-1",contenteditable:!1})}})}(Redactor)},c3dc:function(t,e,i){"use strict";var s=i("42b4"),a=i.n(s);a.a},d650:function(t,e){Redactor.add("plugin","alignment",{translations:{en:{align:"Align","align-left":"Align Left","align-center":"Align Center","align-right":"Align Right","align-justify":"Align Justify"}},init:function(t){this.app=t,this.opts=t.opts,this.lang=t.lang,this.block=t.block,this.toolbar=t.toolbar},start:function(){var t={};t.left={title:this.lang.get("align-left"),api:"plugin.alignment.set",args:"left"},t.center={title:this.lang.get("align-center"),api:"plugin.alignment.set",args:"center"},t.right={title:this.lang.get("align-right"),api:"plugin.alignment.set",args:"right"},t.justify={title:this.lang.get("align-justify"),api:"plugin.alignment.set",args:"justify"};var e=this.toolbar.addButton("alignment",{title:this.lang.get("align")});e.setIcon('<i class="re-icon-alignment"></i>'),e.setDropdown(t)},set:function(t){if("left"===t&&"ltr"===this.opts.direction)return this._remove();var e={style:{"text-align":t}};this.block.toggle(e)},_remove:function(){this.block.remove({style:"text-align"})}})},e0e1:function(t,e,i){},e14f:function(t,e,i){"use strict";i.r(e);var s=i("f499"),a=i.n(s),n=i("7618");!function(t){t.add("plugin","imagemanager",{translations:{en:{choose:"Choose"}},init:function(t){this.app=t,this.lang=t.lang,this.opts=t.opts},onmodal:{image:{open:function(t,e){this.opts.imageManagerJson&&this._load(t)}}},_load:function(e){var i=e.getBody();this.$box=t.dom("<div>"),this.$box.attr("data-title",this.lang.get("choose")),this.$box.addClass("redactor-modal-tab"),this.$box.hide(),this.$box.css({overflow:"auto",height:"300px","line-height":1}),i.append(this.$box),t.ajax.get({url:this.opts.imageManagerJson,success:this._parse.bind(this)})},_parse:function(e){for(var i in e){var s=e[i];if("object"==Object(n["a"])(s)){var r=t.dom("<img>"),o=s.thumb?s.thumb:s.url;r.attr("src",o),r.attr("data-params",encodeURI(a()(s))),r.css({width:"96px",height:"72px",margin:"0 4px 2px 0",cursor:"pointer"}),r.on("click",this._insert.bind(this)),this.$box.append(r)}}},_insert:function(e){e.preventDefault();var i=t.dom(e.target),s=JSON.parse(decodeURI(i.attr("data-params")));this.app.api("module.image.insert",{image:s})}})}(Redactor)},eb5e:function(t,e,i){"use strict";var s=i("e0e1"),a=i.n(s);a.a},f194:function(t,e,i){},f5a2:function(t,e,i){"use strict";var s=i("589e"),a=i.n(s);a.a},ff8a:function(t,e,i){"use strict";var s=i("6c4e"),a=i.n(s);a.a}});
//# sourceMappingURL=app.b016a1df.js.map
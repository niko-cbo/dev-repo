(function(e){function t(t){for(var i,n,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)n=o[u],a[n]&&h.push(a[n][0]),a[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},a={app:0},r=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0146":function(e,t,s){},"0bd3":function(e,t,s){},"12f9":function(e,t,s){},"14d6":function(e,t,s){},"1b99":function(e,t,s){"use strict";var i=s("dcdb"),a=s.n(i);a.a},2318:function(e,t,s){},2704:function(e,t,s){},"2b71":function(e,t,s){"use strict";var i=s("b6bd"),a=s.n(i);a.a},"3a10":function(e,t,s){"use strict";var i=s("0146"),a=s.n(i);a.a},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=r(e);return s(t)}function r(e){var t=i[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="4678"},4717:function(e,t,s){"use strict";var i=s("14d6"),a=s.n(i);a.a},5002:function(e,t,s){},"52a8":function(e,t,s){"use strict";var i=s("5002"),a=s.n(i);a.a},5453:function(e,t,s){"use strict";var i=s("8580"),a=s.n(i);a.a},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("75fc"),a=(s("cadf"),s("551c"),s("f751"),s("097d"),s("2b0e")),r=s("8c4f"),n=s("bc3a"),o=s.n(n),l=s("a7fe"),c=s.n(l),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"insites-site-manager"}},[s("router-view")],1)},u=[],h=(s("96cf"),s("3b8d")),p=(s("a481"),s("28a5"),{data:function(){return{insRendererEl:void 0}},methods:{toastInvalidIDNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";toastIt("warning","Invalid ".concat(e,", no data found."),InsitesUtil.ops())},apiHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.getElementsByName("csrf-token")[0].content,t={"X-CSRF-Token":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"};return"localhost"!==window.location.hostname&&(t["X-CSRF-Token"]=e),t},checkValue:function(e,t){return e&&"undefined"!==e?"".concat(t?"+":"").concat(e):""},checkURLParamsID:function(){return this.$route.params.id},setURLParameter:function(e,t){this.$router.push({path:"".concat(e,"/").concat(t)})},capitalize:function(e){return this.checkValue(e).split("_").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},validateInput:function(e){return e=e.target?e.target:e,e.value?(InsitesUtil.validFieldNotif(e),0):(InsitesUtil.invalidFieldNotif(e),1)},convertToPhysicalPath:function(e){return e=e.split("/"),e.shift(),e=e.join("/"),e},removeArrLastIndex:function(e){return e=e.split("/"),e.pop(),e=e.join("/"),e},convertToFolder:function(e){return e.replace(/\//g,"|")},returnFormattedDate:function(e){return InsitesUtil.formatLocalisation(e)},localhostAssetManagerGetFileData:function(e,t){for(var s=[],i=0;i<t.results.items.results.length;i++){var a=t.results.items.results[i];if(a.physical_path===e){s=t.results.items.results[i];break}}return s}}}),m=s("bc3a"),f="/insites/api/",_=p.methods.apiHeader();function g(){return v.apply(this,arguments)}function v(){return v=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="".concat(f,"get-current-user-data.json"),e.next=3,C(t,"get").then(function(e){return{state:!0,results:e.data}}).catch(function(e){return console.warn("No user data found. Session is invalid or expired."),{state:!1,results:e}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),v.apply(this,arguments)}function b(e,t){return y.apply(this,arguments)}function y(){return y=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=r.length>2&&void 0!==r[2]?r[2]:{},a=r.length>3&&void 0!==r[3]?r[3]:_,e.next=4,C(t,s,i,a).then(function(e){return{state:!0,results:e.data}}).catch(function(e){return{state:!1,results:e}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),y.apply(this,arguments)}function C(e,t){return k.apply(this,arguments)}function k(){return k=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:{},a=n.length>3&&void 0!==n[3]?n[3]:_,r="".concat(t),e.next=5,m({method:s,url:r,data:i,headers:a});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),k.apply(this,arguments)}s("913c"),s("e14f"),s("d650"),s("9f94");var w={name:"app",methods:{},mounted:function(){this.$store.dispatch("initializeVcl")}},T=w,x=(s("9d14"),s("2877")),D=Object(x["a"])(T,d,u,!1,null,null,null),E=D.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gss-form"},[s("ins-card",{attrs:{steady:"","no-padding":""}},[s("div",{staticClass:"grid-container-full"},[e.fetchingGssData?s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("div",{staticClass:"gss-form-loader-wrap"},[s("ins-loader",{ref:"gssLoader"})],1)])]):e._e(),!e.fetchingGssData&&e.checkedData?s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("ins-heading",{attrs:{slot:"header",label:"Company Details"},slot:"header"}),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Company Name","liquid-tag":"company_name"},model:{value:e.gssData.company_name,callback:function(t){e.$set(e.gssData,"company_name",t)},expression:"gssData.company_name"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Company ID","liquid-tag":"company_id"},model:{value:e.gssData.company_id,callback:function(t){e.$set(e.gssData,"company_id",t)},expression:"gssData.company_id"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Company Slogan","liquid-tag":"company_slogan"},model:{value:e.gssData.company_slogan,callback:function(t){e.$set(e.gssData,"company_slogan",t)},expression:"gssData.company_slogan"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Company URL","liquid-tag":"company_url",placeholder:"https://insites.io/",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.company_url,callback:function(t){e.$set(e.gssData,"company_url",t)},expression:"gssData.company_url"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("label",{staticClass:"custom-label"},[e._v("Company Logo")]),s("InsImagePickerWrap",{attrs:{label:"Add Logo",type:"logo","button-color":"blue",placeholder:"Drag and drop the file or click to add an image","upload-img-container":"rectangle","upload-img-rec-width":"360","upload-img-rec-file-size":"200"},on:{fileNameChanged:e.getLogoName},model:{value:e.s3LogoImage,callback:function(t){e.s3LogoImage=t},expression:"s3LogoImage"}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_logo "),s("span",{pre:!0},[e._v("}}")])]),s("p",{staticClass:"custom-info"},[e._v("JPG, JPEG or PNG Files only")]),s("p",{staticClass:"custom-info"},[e._v("Less than 200KB")])])])]),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("label",{staticClass:"custom-label"},[e._v("Company Icon")]),s("InsImagePickerWrap",{attrs:{label:"Add Icon",type:"logo","button-color":"blue",placeholder:"Drag and drop the file or click to add an image","upload-img-container":"square","upload-img-rec-width":"360","upload-img-rec-file-size":"200"},on:{fileNameChanged:e.getIconName},model:{value:e.s3IconImage,callback:function(t){e.s3IconImage=t},expression:"s3IconImage"}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_icon "),s("span",{pre:!0},[e._v("}}")])]),s("p",{staticClass:"custom-info"},[e._v("JPG, JPEG or PNG Files only")]),s("p",{staticClass:"custom-info"},[e._v("Recommended: 120px by 120px")]),s("p",{staticClass:"custom-info"},[e._v("Less than 200KB")])])])])])],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:"Social Media"},slot:"header"}),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Facebook","liquid-tag":"facebook_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.facebook_link,callback:function(t){e.$set(e.gssData,"facebook_link",t)},expression:"gssData.facebook_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Twitter","liquid-tag":"twitter_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.twitter_link,callback:function(t){e.$set(e.gssData,"twitter_link",t)},expression:"gssData.twitter_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"LinkedIn","liquid-tag":"linkedin_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.linkedin_link,callback:function(t){e.$set(e.gssData,"linkedin_link",t)},expression:"gssData.linkedin_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Instagram","liquid-tag":"instagram_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.instagram_link,callback:function(t){e.$set(e.gssData,"instagram_link",t)},expression:"gssData.instagram_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Pinterest","liquid-tag":"pinterest_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.pinterest_link,callback:function(t){e.$set(e.gssData,"pinterest_link",t)},expression:"gssData.pinterest_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"YouTube","liquid-tag":"youtube_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.youtube_link,callback:function(t){e.$set(e.gssData,"youtube_link",t)},expression:"gssData.youtube_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Other 1","liquid-tag":"other_1_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.other_1_link,callback:function(t){e.$set(e.gssData,"other_1_link",t)},expression:"gssData.other_1_link"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Other 2","liquid-tag":"other_2_link",field:"url"},on:{fieldError:e.gssFormInvalidHandler},model:{value:e.gssData.other_2_link,callback:function(t){e.$set(e.gssData,"other_2_link",t)},expression:"gssData.other_2_link"}})],1)])],1)],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:e.gssData.loc_1_name},slot:"header"}),s("GssForm",{attrs:{"key-place":"loc_1"},model:{value:e.gssData,callback:function(t){e.gssData=t},expression:"gssData"}})],1)],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:e.gssData.loc_2_name},slot:"header"}),s("GssForm",{attrs:{"key-place":"loc_2"},model:{value:e.gssData,callback:function(t){e.gssData=t},expression:"gssData"}})],1)],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:e.gssData.loc_3_name},slot:"header"}),s("GssForm",{attrs:{"key-place":"loc_3"},model:{value:e.gssData,callback:function(t){e.gssData=t},expression:"gssData"}})],1)],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:"PO Box 1"},slot:"header"}),s("GssPoBoxForm",{attrs:{"key-area":"po_1"},model:{value:e.gssData,callback:function(t){e.gssData=t},expression:"gssData"}})],1)],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:"PO Box 2"},slot:"header"}),s("GssPoBoxForm",{attrs:{"key-area":"po_2"},model:{value:e.gssData,callback:function(t){e.gssData=t},expression:"gssData"}})],1)],1)]):e._e()])]),s("div",{staticClass:"text-right gss-form-button"},[s("ins-button",{attrs:{solid:"",label:"UPDATE",disabled:e.submittingForm||e.hasInvalidField},on:{onClickInsButton:e.updateGssFormHandler}})],1)],1)},R=[],S=s("bd86"),I=(s("34ef"),s("2ef0")),A=s("2f62"),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ins-image-picker",{attrs:{"img-type":e.imgType,label:e.label,"button-color":e.buttonColor,value:e.value,"upload-img-container":e.uploadImgContainer,"upload-img-rec-width":e.uploadImgRecWidth,"upload-img-rec-height":e.uploadImgRecHeight,"upload-img-rec-file-size":e.uploadImgRecFileSize},on:{valueChange:e.onValueChange}})},M=[],B={name:"InsImagePickerWrap",props:{imgType:String,buttonColor:String,value:String,label:String,uploadImgContainer:String,uploadImgRecWidth:"",uploadImgRecHeight:"",uploadImgRecFileSize:""},methods:{onValueChange:function(e){var t=this;t.$emit("input",e.detail.base64),t.$emit("fileNameChanged",e.detail.filename)}}},O=B,N=Object(x["a"])(O,P,M,!1,null,null,null),L=N.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"accordion-wrap"},[s("div",{staticClass:"accordion-header"},[s("span",{ref:"toggler",staticClass:"icon-caret-right",on:{click:e.toggleBody}}),s("div",{on:{click:e.toggleBody}},[e._t("header")],2)]),s("div",{staticClass:"accordion-body"},[e._t("default")],2)])},U=[],H={name:"Accordion",props:{opened:Boolean},methods:{toggleBody:function(e){var t=$(e.target).closest(".accordion-header");t.next(".accordion-body").slideToggle(),t.toggleClass("opened")}},mounted:function(){if(this.opened){var e={target:this.$refs.toggler};this.toggleBody(e)}}},V=H,z=(s("f266"),Object(x["a"])(V,j,U,!1,null,null,null)),W=z.exports,q=(s("7514"),{data:function(){return{s3Data:"",s3FormData:"",parsedS3FormData:"",s3Image:"",s3UploadURL:"",s3AssetURL:"",s3FileName:"",s3Type:"image"}},methods:{setS3FormData:function(e){var t={key:e.key,success_action_status:e.success_action_status,acl:e.acl,policy:e.policy,"x-amz-credential":e["x-amz-credential"],"x-amz-algorithm":e["x-amz-algorithm"],"x-amz-date":e["x-amz-date"],"x-amz-signature":e["x-amz-signature"],"x-amz-meta-versions":"{}"};return e["Content-Disposition"]&&(t["Content-Disposition"]=e["Content-Disposition"]),t},getS3Credentials:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$.ajax({type:"get",url:t}).done(function(e){return e}).error(function(e){return console.error("Error getting POS S3 credentials.",e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getS3AssetURL:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s,i,a,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.s3Image=i,this.s3FileName=a,this.s3Type=r||"image",e.next=5,this.getS3Credentials(t);case 5:return this.s3Data=e.sent,e.next=8,this.buildS3FormData(s);case 8:return e.abrupt("return",this.s3AssetURL);case 9:case"end":return e.stop()}},e,this)}));function t(t,s,i,a,r){return e.apply(this,arguments)}return t}(),buildS3FormData:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this.s3Data[t][this.s3Type].s3_upload.form_data,this.s3UploadURL=this.s3Data[t][this.s3Type].s3_upload.direct_upload_url,e.next=4,this.getImage(s);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getImage:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this.s3Image?this.s3Image:"",this.s3FormData=this.setS3FormData(t),this.parsedS3FormData=this.parseToFormData(this.s3FormData),this.appendImagetoS3FormData(s),e.next=6,this.s3SubmitForm(this.parsedS3FormData);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),appendImagetoS3FormData:function(e){if(""!==e||void 0!==e){var t=e.split(",")[1],s=e.split(";")[0].split("/");if(s){var i=this.base64ToBlob(t,"image/"+s[1]);this.parsedS3FormData.append("file",i,this.s3FileName)}}},base64ToBlob:function(e,t){t=t||"";for(var s=1024,i=window.atob(e),a=[],r=0,n=i.length;r<n;r+=s){for(var o=i.slice(r,r+s),l=new Array(o.length),c=0;c<o.length;c++)l[c]=o.charCodeAt(c);var d=new Uint8Array(l);a.push(d)}return new Blob(a,{type:t})},parseToFormData:function(e){var t=new FormData;return Object(I["each"])(e,function(e,s){t.append(s,e)}),t},s3SubmitForm:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this,e.next=3,$.ajax({type:"post",url:s.s3UploadURL,contentType:!1,processData:!1,data:t}).done(function(e){var t=$(e),i=t.find("Location").text();s.s3AssetURL=i}).error(function(e){console.error("Error uploading file to S3.",e)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}}),K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Location Name","liquid-tag":e.keyPlace+"_name"},model:{value:e.value[e.keyPlace+"_name"],callback:function(t){e.$set(e.value,e.keyPlace+"_name",t)},expression:"value[`${keyPlace}_name`]"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssSelectField",{attrs:{label:"Timezone",options:e.timezoneOptions,"liquid-tag":e.keyPlace+"_timezone"},model:{value:e.value[e.keyPlace+"_timezone"],callback:function(t){e.$set(e.value,e.keyPlace+"_timezone",t)},expression:"value[`${keyPlace}_timezone`]"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Contact Person","liquid-tag":e.keyPlace+"_contact_person"},model:{value:e.value[e.keyPlace+"_contact_person"],callback:function(t){e.$set(e.value,e.keyPlace+"_contact_person",t)},expression:"value[`${keyPlace}_contact_person`]"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Email",field:"email","liquid-tag":e.keyPlace+"_email"},on:{fieldError:e.fieldErrorHandler},model:{value:e.value[e.keyPlace+"_email"],callback:function(t){e.$set(e.value,e.keyPlace+"_email",t)},expression:"value[`${keyPlace}_email`]"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("ins-input-tel",{ref:e.keyPlace+"_phone",attrs:{label:"Phone","phonenum-value":e.value[e.keyPlace+"_phone_number"],"areacode-value":e.value[e.keyPlace+"_phone_area_code"],"country-code":e.value[e.keyPlace+"_phone_country_code"]},on:{insInputTelChange:e.locPhoneHandler}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" "+e._s(e.keyPlace+"_phone")+" "),s("span",{pre:!0},[e._v("}}")])])])])]),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("ins-input-tel",{ref:e.keyPlace+"_fax",attrs:{label:"Fax","phonenum-value":e.value[e.keyPlace+"_fax_number"],"areacode-value":e.value[e.keyPlace+"_fax_area_code"],"country-code":e.value[e.keyPlace+"_fax_country_code"]},on:{insInputTelChange:e.locFaxHandler}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" "+e._s(e.keyPlace+"_fax")+" "),s("span",{pre:!0},[e._v("}}")])])])])]),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("div",{staticClass:"spacer"}),s("ins-heading",{attrs:{label:"Address"}})],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("InsInputWrap",{ref:"searchAddressField",attrs:{name:"searchAddress",label:"Search Address",field:"text",autocomplete:"off",placeholder:""!==e.googleMapsApiKey?"Search Address":"No Google API Key",disabled:""!==!e.googleMapsApiKey},model:{value:e.searchAddress,callback:function(t){e.searchAddress=t},expression:"searchAddress"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Address Line 1","liquid-tag":e.keyPlace+"_address.address"},model:{value:e.value[e.keyPlace+"_address"].address,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"address",t)},expression:"value[`${keyPlace}_address`].address"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Address Line 2","liquid-tag":e.keyPlace+"_address.address2"},model:{value:e.value[e.keyPlace+"_address"].address2,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"address2",t)},expression:"value[`${keyPlace}_address`].address2"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"City","liquid-tag":e.keyPlace+"_address.city"},model:{value:e.value[e.keyPlace+"_address"].city,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"city",t)},expression:"value[`${keyPlace}_address`].city"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"State","liquid-tag":e.keyPlace+"_address.state"},model:{value:e.value[e.keyPlace+"_address"].state,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"state",t)},expression:"value[`${keyPlace}_address`].state"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Post Code","liquid-tag":e.keyPlace+"_address.postcode"},model:{value:e.value[e.keyPlace+"_address"].postcode,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"postcode",t)},expression:"value[`${keyPlace}_address`].postcode"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Country","liquid-tag":e.keyPlace+"_address.country"},model:{value:e.value[e.keyPlace+"_address"].country,callback:function(t){e.$set(e.value[e.keyPlace+"_address"],"country",t)},expression:"value[`${keyPlace}_address`].country"}})],1),s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("div",{staticClass:"spacer"}),s("ins-heading",{attrs:{label:"Opening Hours"}})],1),e._m(0),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssHoursField",{attrs:{label:"Monday","key-day":"mon","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("GssHoursField",{attrs:{label:"Tuesday","key-day":"tue","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("GssHoursField",{attrs:{label:"Wednesday","key-day":"wed","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("GssHoursField",{attrs:{label:"Thursday","key-day":"thu","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("GssHoursField",{attrs:{label:"Friday","key-day":"fri","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssHoursField",{attrs:{label:"Saturday","key-day":"sat","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("GssHoursField",{attrs:{label:"Sunday","key-day":"sun","liquid-tag":e.keyPlace},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("div",{staticClass:"spacer"}),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-offset-2 large-2 medium-offset-4 medium-4 hide-for-small-only"},[s("div",{staticClass:"header text-center"},[e._v("Open Time")])]),s("div",{staticClass:"cell large-2 medium-4 hide-for-small-only"},[s("div",{staticClass:"header text-center"},[e._v("Close Time")])]),s("div",{staticClass:"cell large-offset-2 large-2 medium-offset-2 medium-2 hide-for-small-only hide-for-medium-only"},[s("div",{staticClass:"header text-center"},[e._v("Open Time")])]),s("div",{staticClass:"cell large-2 medium-2 hide-for-small-only hide-for-medium-only"},[s("div",{staticClass:"header text-center"},[e._v("Close Time")])])])])}],J=(s("ac6a"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ins-input",{ref:"insInputEl",attrs:{label:e.label,value:e.value,placeholder:e.placeholder,name:e.name,field:e.field,"field-id":e.fieldId,icon:e.icon,disabled:e.disabled,readonly:e.readonly,required:e.required,maxlength:e.maxlength,"error-message":e.errorMessage,"has-error":e.hasError},on:{valueChange:e.onValueChange}})}),Y=[],X=s("6b58"),Q={methods:{validateEmail:function(e){var t={from:{email:!0}},s={from:e};return Object(X["validate"])(s,t)},validateURL:function(e){var t={website:{url:!0}},s={website:e};return Object(X["validate"])(s,t)}}},Z={name:"InsInputWrap",mixins:[Q,p],props:{label:String,value:String,placeholder:String,name:String,field:String,fieldId:String,secondary:String,icon:String,errorMessage:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String,maxlength:String,validate:Boolean},methods:{onValueChange:function(e){var t=e.detail;"url"===this.field&&(t=InsitesUtil.checkURLinput(t,this.secondary),this.$refs.insInputEl.value=t),this.validate&&this.checkInput(t),this.$emit("input",t)},checkInput:function(e){if("true"===this.required&&!e)return this.toggleError(!0,"".concat(this.label," is required."));if(e){var t,s;switch(this.field){case"email":t=this.validateEmail(e),s=t?"Invalid email address.":"";break;case"url":"text"!==this.secondary&&(t=this.validateURL(e),s=t?"Invalid url.":"");break}this.toggleError(t,s)}else this.toggleError(!1,"")},toggleError:function(e,t){this.$refs.insInputEl.hasError=!!e,this.$refs.insInputEl.errorMessage=t,this.$emit("fieldError",{error:!!e,target:this})}}},ee=Z,te=Object(x["a"])(ee,J,Y,!1,null,null,null),se=te.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("InsInputWrap",{attrs:{label:e.label,value:e.value,field:e.field,placeholder:e.placeholder,"has-error":e.hasError,"error-message":e.errorMessage},on:{input:e.onValueChange}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" "+e._s(e.liquidTag)+" "),s("span",{pre:!0},[e._v("}}")])])])])},ae=[],re={name:"GssInputField",props:{label:String,liquidTag:String,placeholder:String,value:String,field:String,required:Boolean},mixins:[Q],components:{InsInputWrap:se},data:function(){return{hasError:!1,errorMessage:""}},methods:{onValueChange:function(e){this.$emit("input",e),this.checkInput(e)},checkInput:function(e){if(this.required&&!e)return this.toggleError(!0,"".concat(this.label," is required."));if(e){var t,s;switch(this.field){case"email":t=this.validateEmail(e),s=t?"Invalid email address.":"";break;case"url":t=this.validateURL(e),s=t?"Invalid url.":"";break}this.toggleError(t,s)}else this.toggleError(!1,"")},toggleError:function(e,t){this.hasError=!!e,this.errorMessage=t,this.$emit("fieldError",this.hasError)}}},ne=re,oe=(s("e415"),Object(x["a"])(ne,ie,ae,!1,null,null,null)),le=oe.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:"grid-x grid-padding-x "+(e.full?"full":"")},[s("div",{class:"cell medium-12 small-12 "+(e.full?"large-12":"large-7")},[s("InsSelectWrap",{attrs:{searchable:"",placeholder:"- Select -",label:e.label,value:e.value,disabled:e.disabled},on:{input:e.onValueChange}},e._l(e.options,function(e,t,i){return s("ins-select-option",{key:i,attrs:{label:e.label,value:e.value}})}),1)],1),s("div",{class:"cell medium-12 small-12 "+(e.full?"large-12":"large-5")},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" "+e._s(e.liquidTag)+" "),s("span",{pre:!0},[e._v("}}")])])])])},de=[],ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ins-select",{ref:"insSelectEl",attrs:{label:e.label,value:e.value,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,button:e.button,small:e.small,searchable:e.searchable,multiple:e.multiple,"has-error":e.hasError,"error-message":e.errorMessage,"with-dynamic-option":e.withDynamicOption,"dynamic-placeholder":e.dynamicPlaceholder},on:{onSubmitOption:e.onSubmitOptionHandler,valueChange:e.onValueChange}},[e._t("default")],2)},he=[],pe={name:"InsSelectWrap",props:{label:String,value:String,placeholder:String,dynamicPlaceholder:String,disabled:Boolean,readonly:Boolean,button:Boolean,small:Boolean,searchable:Boolean,multiple:Boolean,withDynamicOption:Boolean,hasError:Boolean,errorMessage:String,required:Boolean},methods:{onValueChange:function(e){var t=this;t.$emit("input",e.detail),this.checkInput(e.detail)},onSubmitOptionHandler:function(e){this.$emit("onSubmitOption",e.detail)},checkInput:function(e){if(this.required&&!e)return this.toggleError(!0,"".concat(this.label," is required."));this.toggleError(!1,"")},toggleError:function(e,t){this.$refs.insSelectEl.hasError=!!e,this.$refs.insSelectEl.errorMessage=t,this.$emit("fieldError",{error:!!e,target:this})}}},me=pe,fe=Object(x["a"])(me,ue,he,!1,null,null,null),_e=fe.exports,ge={name:"GssSelectField",props:{label:String,value:String,options:Array,liquidTag:String,disabled:Boolean,full:Boolean},components:{InsSelectWrap:_e},data:function(){return{}},methods:{onValueChange:function(e){this.$emit("input",e)}},created:function(){}},ve=ge,be=(s("7309"),Object(x["a"])(ve,ce,de,!1,null,null,null)),ye=be.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-x grid-padding-x gss-hours-field-wrap"},[s("div",{staticClass:"cell large-4 medium-4 small-12"},[s("ins-toggle-switch",{attrs:{label:e.label,checked:e.value[this.liquidTag+"_"+this.keyDay+"_enable"]},on:{onCheckInsToggleSwitch:e.toggleHandler}})],1),e._m(0),s("div",{staticClass:"cell large-4 medium-4 small-12"},[s("GssSelectField",{attrs:{options:e.timeOptions,"liquid-tag":e.liquidTag+"_"+e.keyDay+"_open",disabled:e.disabled,full:!0},model:{value:e.value[e.liquidTag+"_"+e.keyDay+"_open"],callback:function(t){e.$set(e.value,e.liquidTag+"_"+e.keyDay+"_open",t)},expression:"value[`${liquidTag}_${keyDay}_open`]"}})],1),e._m(1),s("div",{staticClass:"cell large-4 medium-4 small-12"},[s("GssSelectField",{attrs:{options:e.timeOptions,"liquid-tag":e.liquidTag+"_"+e.keyDay+"_close",disabled:e.disabled,full:!0},model:{value:e.value[e.liquidTag+"_"+e.keyDay+"_close"],callback:function(t){e.$set(e.value,e.liquidTag+"_"+e.keyDay+"_close",t)},expression:"value[`${liquidTag}_${keyDay}_close`]"}})],1)])},ke=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell small-12 show-for-small-only"},[s("div",{staticClass:"header"},[e._v("Open Time")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell small-12 show-for-small-only"},[s("div",{staticClass:"header"},[e._v("Close Time")])])}],we=[{label:"00:30",value:"00:30"},{label:"01:00",value:"01:00"},{label:"01:30",value:"01:30"},{label:"02:00",value:"02:00"},{label:"02:30",value:"02:30"},{label:"03:00",value:"03:00"},{label:"03:30",value:"03:30"},{label:"04:00",value:"04:00"},{label:"04:30",value:"04:30"},{label:"05:00",value:"05:00"},{label:"05:30",value:"05:30"},{label:"06:00",value:"06:00"},{label:"06:30",value:"06:30"},{label:"07:00",value:"07:00"},{label:"07:30",value:"07:30"},{label:"08:00",value:"08:00"},{label:"08:30",value:"08:30"},{label:"09:00",value:"09:00"},{label:"09:30",value:"09:30"},{label:"10:00",value:"10:00"},{label:"10:30",value:"10:30"},{label:"11:00",value:"11:00"},{label:"11:30",value:"11:30"},{label:"12:00",value:"12:00"},{label:"12:30",value:"12:30"},{label:"13:00",value:"13:00"},{label:"13:30",value:"13:30"},{label:"14:00",value:"14:00"},{label:"14:30",value:"14:30"},{label:"15:00",value:"15:00"},{label:"15:30",value:"15:30"},{label:"16:00",value:"16:00"},{label:"16:30",value:"16:30"},{label:"17:00",value:"17:00"},{label:"17:30",value:"17:30"},{label:"18:00",value:"18:00"},{label:"18:30",value:"18:30"},{label:"19:00",value:"19:00"},{label:"19:30",value:"19:30"},{label:"20:00",value:"20:00"},{label:"20:30",value:"20:30"},{label:"21:00",value:"21:00"},{label:"21:30",value:"21:30"},{label:"22:00",value:"22:00"},{label:"22:30",value:"22:30"},{label:"23:00",value:"23:00"},{label:"23:30",value:"23:30"},{label:"24:00",value:"24:00"}],Te={name:"GssInputField",props:{label:String,liquidTag:String,value:Object,keyDay:String},components:{GssSelectField:ye},data:function(){return{timeOptions:we,disabled:!0}},methods:{toggleHandler:function(e){this.disabled=!e.detail.checked,this.value["".concat(this.liquidTag,"_").concat(this.keyDay,"_enable")]=e.detail.checked}},created:function(){var e=this.value["".concat(this.liquidTag,"_").concat(this.keyDay,"_enable")];this.value["".concat(this.liquidTag,"_").concat(this.keyDay,"_enable")]=!(!e&&"true"!==e),this.disabled=!this.value["".concat(this.liquidTag,"_").concat(this.keyDay,"_enable")]}},xe=Te,De=(s("58b0"),Object(x["a"])(xe,Ce,ke,!1,null,null,null)),$e=De.exports,Ee={name:"GssForm",components:{GssInputField:le,GssSelectField:ye,GssHoursField:$e,InsInputWrap:se},props:{keyPlace:String,value:Object},data:function(){return{searchAddress:"",timezoneOptions:[],googleMapsApiKey:""}},computed:Object(A["b"])({}),methods:{fieldErrorHandler:function(e){this.$emit("gssFormInvalid",e)},onValueChange:function(e){this.$emit("input",e)},insInputTelChangeHandler:function(e,t){switch(e.detail.field){case"country_code":this.value["".concat(this.keyPlace,"_").concat(t,"_country_code")]=e.detail.value.dialCode;break;case"area_code":this.value["".concat(this.keyPlace,"_").concat(t,"_area_code")]=e.detail.value;break;case"phone_number":this.value["".concat(this.keyPlace,"_").concat(t,"_number")]=e.detail.value;break}this.concatFields(t)},concatFields:function(e){this.value["".concat(this.keyPlace,"_").concat(e)]=this.value["".concat(this.keyPlace,"_").concat(e,"_country_code")]?"".concat(this.value["".concat(this.keyPlace,"_").concat(e,"_country_code")]," "):"",this.value["".concat(this.keyPlace,"_").concat(e)]+=this.value["".concat(this.keyPlace,"_").concat(e,"_area_code")]?"".concat(this.value["".concat(this.keyPlace,"_").concat(e,"_area_code")]):"",this.value["".concat(this.keyPlace,"_").concat(e)]+=this.value["".concat(this.keyPlace,"_").concat(e,"_number")]?"".concat(this.value["".concat(this.keyPlace,"_").concat(e,"_number")]," "):"",this.value["".concat(this.keyPlace,"_").concat(e)]=this.value["".concat(this.keyPlace,"_").concat(e)].trim()},locPhoneHandler:function(e){this.insInputTelChangeHandler(e,"phone")},locFaxHandler:function(e){this.insInputTelChangeHandler(e,"fax")},initGoogleMap:function(){var e=this;setTimeout(function(){if(e.googleMapsApiKey){var t=e.$refs.searchAddressField.$el.querySelector("input");t?(e.searchAddressField=new google.maps.places.Autocomplete(t),e.searchAddressField.addListener("place_changed",e.fillAddress)):e.initGoogleMap()}},1e3)},fillAddress:function(){var e=this,t=this.searchAddressField.getPlace();t.address_components&&(this.searchAddress=t.formatted_address,this.clearAddressFields(),t.address_components.forEach(function(t){var s=t.types[0];switch(s){case"street_number":e.value["".concat(e.keyPlace,"_address")].address2="".concat(t["short_name"]," ");break;case"route":e.value["".concat(e.keyPlace,"_address")].address2+=t["long_name"];break;case"locality":e.value["".concat(e.keyPlace,"_address")].city=t["long_name"];break;case"colloquial_area":e.value["".concat(e.keyPlace,"_address")].city=t["long_name"];break;case"administrative_area_level_1":e.value["".concat(e.keyPlace,"_address")].state=t["short_name"];break;case"country":e.value["".concat(e.keyPlace,"_address")].country=t["long_name"];break;case"postal_code":e.value["".concat(e.keyPlace,"_address")].postcode=t["short_name"];break}}))},clearAddressFields:function(){this.value["".concat(this.keyPlace,"_address")].address="",this.value["".concat(this.keyPlace,"_address")].address2="",this.value["".concat(this.keyPlace,"_address")].city="",this.value["".concat(this.keyPlace,"_address")].state="",this.value["".concat(this.keyPlace,"_address")].country="",this.value["".concat(this.keyPlace,"_address")].postcode=""},setData:function(){var e=localStorage.getItem("settingsData")?JSON.parse(localStorage.getItem("settingsData")):"";this.timezoneOptions=""!==e?e.time_zone:[],this.googleMapsApiKey=localStorage.getItem("google_maps_api_key")?localStorage.getItem("google_maps_api_key"):""}},mounted:function(){this.initGoogleMap(),this.setData()}},Fe=Ee,Re=(s("4717"),Object(x["a"])(Fe,K,G,!1,null,null,null)),Se=Re.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"PO Box No","liquid-tag":e.keyArea+"_num"},model:{value:e.value[e.keyArea+"_num"],callback:function(t){e.$set(e.value,e.keyArea+"_num",t)},expression:"value[`${keyArea}_num`]"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Address","liquid-tag":e.keyArea+"_address.address"},model:{value:e.value[e.keyArea+"_address"].address,callback:function(t){e.$set(e.value[e.keyArea+"_address"],"address",t)},expression:"value[`${keyArea}_address`].address"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"City","liquid-tag":e.keyArea+"_address.city"},model:{value:e.value[e.keyArea+"_address"].city,callback:function(t){e.$set(e.value[e.keyArea+"_address"],"city",t)},expression:"value[`${keyArea}_address`].city"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"State","liquid-tag":e.keyArea+"_address.state"},model:{value:e.value[e.keyArea+"_address"].state,callback:function(t){e.$set(e.value[e.keyArea+"_address"],"state",t)},expression:"value[`${keyArea}_address`].state"}})],1),s("div",{staticClass:"cell large-6 medium-12 small-12"},[s("GssInputField",{attrs:{label:"Post Code","liquid-tag":e.keyArea+"_address.postcode"},model:{value:e.value[e.keyArea+"_address"].postcode,callback:function(t){e.$set(e.value[e.keyArea+"_address"],"postcode",t)},expression:"value[`${keyArea}_address`].postcode"}})],1)])},Ae=[],Pe={name:"GssPoBoxForm",components:{GssInputField:le},props:{value:Object,keyArea:String},data:function(){return{}},methods:{onValueChange:function(e){this.$emit("input",e)}},created:function(){}},Me=Pe,Be=Object(x["a"])(Me,Ie,Ae,!1,null,null,null),Oe=Be.exports,Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"gss-instructions"}},[s("div",{staticClass:"grid-container-full"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12 medium-12 small-12"},[s("h4",{staticClass:"ins-card-heading"},[e._v("Description")]),s("p",{staticClass:"small"},[e._v("Admin users can easily update their company information global content and have those changes instantly reflected on the website.")]),s("Accordion",{attrs:{opened:!0}},[s("ins-heading",{attrs:{slot:"header",label:"How to use"},slot:"header"}),s("p",[e._v("To access Global Content data, please follow these steps:")]),s("div",{staticClass:"instructions-steps",attrs:{id:"gss-instructions-option-1"}},[s("ol",[s("li",[e._v("Execute graphQL query "),s("span",{staticClass:"instruction-label"},[e._v("'insites_get_global_content'")]),e._v(" as you would normally do.")]),s("li",[e._v("Then apply the liquid variables to your content.")])]),s("div",{pre:!0,attrs:{class:"opacity-trigger"}},[s("script",{pre:!0,attrs:{type:"text/plain",class:"language-markup"}},[e._v('\n<body>\n...\n{% execute_query "modules/insites_core/insites_get_global_content", result_name: "global" %}\n{% assign global = global.items.results[0] %} \n<div>\n<h4>{{ global.loc_1_name }} </h4>\n<p>Email: {{ global.loc_1_email }}</p>\n<p>Call us: {{ global.loc_1_phone }}</p>\n</div>\n...\n</body>\n\n')])])])],1),s("Accordion",[s("ins-heading",{attrs:{slot:"header",label:"Data Fields"},slot:"header"}),s("p",[e._v("Below are the list of data fields:")]),s("div",{attrs:{id:"gss-data-fields"}},[s("div",{staticClass:"margin-bottom-30",attrs:{id:"gss-company-details"}},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12"},[s("h5",[e._v("Company Details")])]),s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Dashboard ID")]),e._v(" - Your website's ID used for API integrations")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" dashboard_id "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Company Name")]),e._v(" - Business name")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_name "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Company Slogan")]),e._v(" - A short phrase that represents the business")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_slogan "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Company Domain")]),e._v(" - Website's URL ")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_url "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Company Logo")]),e._v(" - Website's main logo")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_logo "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Company Icon")]),e._v(" - Website's icon")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" company_icon "),s("span",{pre:!0},[e._v("}}")])])])])]),s("div",{staticClass:"margin-bottom-30",attrs:{id:"gss-location"}},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12"},[s("h5",[e._v("Social Media")])]),s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Facebook")]),e._v(" - Facebook profile link")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" facebook_link "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Twitter")]),e._v(" - Twitter profile link")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" twitter_link "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("LinkedIn")]),e._v(" - LinkedIn profile link")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" linkedin_link "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Pinterest")]),e._v(" - Pinterest profile link")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" pinterest_link "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("YouTube")]),e._v(" - YouTube channel link")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" twitter_link "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Other")]),e._v(" - Other type of online profile "),s("br"),s("small",[s("i",[e._v("ie. Flickr, Google+, Vimeo, etc..")])])])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" other_link "),s("span",{pre:!0},[e._v("}}")])])])])]),s("div",{staticClass:"margin-bottom-30",attrs:{id:"gss-location"}},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12"},[s("h5",[e._v("Address")]),s("p",[s("small",[s("i",[e._v("(Location 1, 2 and 3)")])])])]),s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Location Name")]),e._v(" - Location diplay name or store name")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_name "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Address Line 1")]),e._v(" - Location address field 1")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.address "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Address Line 2")]),e._v(" - Location address field 2")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.address2 "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("City")]),e._v(" - Location city address")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.city "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("State")]),e._v(" - Location state / region")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.state "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Post Code")]),e._v(" - Location postal code / zip code / area code ")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.postcode "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Country")]),e._v(" - Location country address")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_address.country "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Phone")]),e._v(" - Location phone number")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_phone "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Fax")]),e._v(" - Location fax number")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_fax "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Email")]),e._v(" - Location email address")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_email "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Contact Person")]),e._v(" - Location assigned contact person")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_contact_person "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("Timezone")]),e._v(" - Location timezone "),s("br"),s("small",[s("i",[e._v("Developer Note:")]),e._v(" this does not reflect on any data in the system")])])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" loc_1_timezone "),s("span",{pre:!0},[e._v("}}")])])])])]),s("div",{attrs:{id:"gss-po"}},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-12"},[s("h5",[e._v("Postal Address")]),s("p",[s("small",[s("i",[e._v("(PO address 1 and 2)")])])])]),s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("PO Box No")]),e._v(" - Post office box number associated to the post office")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" po_1_num "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("PO Address")]),e._v(" - Post office address field")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" po_1_address.address "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("PO City")]),e._v(" - Post office city address")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" po_1_address.city "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("PO State")]),e._v(" - Post office state / region")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" po_1_address.state "),s("span",{pre:!0},[e._v("}}")])])])]),s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"cell large-6 medium-8 small-12"},[s("p",[s("span",{staticClass:"instruction-label"},[e._v("PO Post Code")]),e._v(" - Post office postal code / zip code / area code")])]),s("div",{staticClass:"cell large-3 medium-4 small-12"},[s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{")]),e._v(" po_1_address.postcode "),s("span",{pre:!0},[e._v("}}")])])])])])])],1)],1)])])])},Le=[],je={name:"GssInstructions",components:{Accordion:W},data:function(){return{}},methods:{}},Ue=je,He=(s("973c"),Object(x["a"])(Ue,Ne,Le,!1,null,null,null)),Ve=He.exports,ze={dashboard_id:"",company_name:"",company_slogan:"",company_url:"",facebook_link:"",youtube_link:"",twitter_link:"",linkedin_link:"",instagram_link:"",pinterest_link:"",other_link:"",loc_1_name:"Location 1",loc_1_email:"",loc_1_contact_person:"",loc_1_timezone:"",loc_1_schedule_format:"",loc_1_mon_enable:!1,loc_1_mon_open:"",loc_1_mon_close:"",loc_1_tue_enable:!1,loc_1_tue_open:"",loc_1_tue_close:"",loc_1_wed_enable:!1,loc_1_wed_open:"",loc_1_wed_close:"",loc_1_thu_enable:!1,loc_1_thu_open:"",loc_1_thu_close:"",loc_1_fri_enable:!1,loc_1_fri_open:"",loc_1_fri_close:"",loc_1_sat_enable:!1,loc_1_sat_open:"",loc_1_sat_close:"",loc_1_sun_enable:!1,loc_1_sun_open:"",loc_1_sun_close:"",loc_1_phone:"",loc_1_phone_country_code:"61",loc_1_phone_area_code:"",loc_1_phone_number:"",loc_1_fax:"",loc_1_fax_country_code:"61",loc_1_fax_area_code:"",loc_1_fax_number:"",loc_1_address:{street_number:"",address:"",address2:"",street:"",city:"",state:"",country:"",postcode:"",iso_country_code:"",lat:"",lng:""},loc_2_name:"Location 2",loc_2_email:"",loc_2_contact_person:"",loc_2_timezone:"",loc_2_schedule_format:"",loc_2_mon_enable:!1,loc_2_mon_open:"",loc_2_mon_close:"",loc_2_tue_enable:!1,loc_2_tue_open:"",loc_2_tue_close:"",loc_2_wed_enable:!1,loc_2_wed_open:"",loc_2_wed_close:"",loc_2_thu_enable:!1,loc_2_thu_open:"",loc_2_thu_close:"",loc_2_fri_enable:!1,loc_2_fri_open:"",loc_2_fri_close:"",loc_2_sat_enable:!1,loc_2_sat_open:"",loc_2_sat_close:"",loc_2_sun_enable:!1,loc_2_sun_open:"",loc_2_sun_close:"",loc_2_phone:"",loc_2_phone_country_code:"61",loc_2_phone_area_code:"",loc_2_phone_number:"",loc_2_fax:"",loc_2_fax_country_code:"61",loc_2_fax_area_code:"",loc_2_fax_number:"",loc_2_address:{street_number:"",address:"",address2:"",street:"",city:"",state:"",country:"",postcode:"",iso_country_code:"",lat:"",lng:""},loc_3_name:"Location 3",loc_3_email:"",loc_3_contact_person:"",loc_3_timezone:"",loc_3_schedule_format:"",loc_3_mon_enable:!1,loc_3_mon_open:"",loc_3_mon_close:"",loc_3_tue_enable:!1,loc_3_tue_open:"",loc_3_tue_close:"",loc_3_wed_enable:!1,loc_3_wed_open:"",loc_3_wed_close:"",loc_3_thu_enable:!1,loc_3_thu_open:"",loc_3_thu_close:"",loc_3_fri_enable:!1,loc_3_fri_open:"",loc_3_fri_close:"",loc_3_sat_enable:!1,loc_3_sat_open:"",loc_3_sat_close:"",loc_3_sun_enable:!1,loc_3_sun_open:"",loc_3_sun_close:"",loc_3_phone:"",loc_3_phone_country_code:"61",loc_3_phone_area_code:"",loc_3_phone_number:"",loc_3_fax:"",loc_3_fax_country_code:"61",loc_3_fax_area_code:"",loc_3_fax_number:"",loc_3_address:{street_number:"",address:"",address2:"",street:"",city:"",state:"",country:"",postcode:"",iso_country_code:"",lat:"",lng:""},po_1_num:"",po_1_address:{street_number:"",address:"",address2:"",street:"",city:"",state:"",country:"",postcode:"",iso_country_code:"",lat:"",lng:""},po_2_num:"",po_2_address:{street_number:"",address:"",address2:"",street:"",city:"",state:"",country:"",postcode:"",iso_country_code:"",lat:"",lng:""},company_logo:{original:""},company_icon:{original:""}},We={name:"GlobalSiteSettings",mixins:[p,q],components:{GssForm:Se,GssPoBoxForm:Oe,GssInputField:le,GssInstructions:Ve,InsImagePickerWrap:L,Accordion:W},computed:Object(A["b"])({gssData:function(e){return e.GssStore.gssData},fetchingGssData:function(e){return e.GssStore.fetchingGssData},formMethod:function(e){return e.GssStore.formMethod},formID:function(e){return e.GssStore.formID},failedToLoadGssData:function(e){return e.GssStore.failedToLoadGssData}}),watch:{fetchingGssData:function(e,t){e||(this.checkData(),this.checkLocNames())}},data:function(){return{submittingForm:!1,hasInvalidField:!1,checkedData:!1,headers:{},authToken:"",companyLogoFileName:"",companyIconFileName:"",formData:{},parsedFormData:{},s3FormCredentialURL:"/insites/api/s3-global-content-form.json",s3IconChange:!1,s3LogoChange:!1,s3IconImage:"",s3IconURL:"",s3LogoImage:"",s3LogoURL:"",parsedS3FormData:""}},methods:{gssFormInvalidHandler:function(e){this.hasInvalidField=e},getIconName:function(e){this.IconName=e,this.s3IconChange=!0},getLogoName:function(e){this.LogoName=e,this.s3LogoChange=!0},checkValue:function(e){return e&&"undefined"!==e&&null!==e?"".concat(e):""},appendToFormData:function(e){var t=new FormData;return Object(I["each"])(e,function(e,s){t.append(s,e)}),t},base64ToBlob:function(e,t){t=t||"";for(var s=1024,i=window.atob(e),a=[],r=0,n=i.length;r<n;r+=s){for(var o=i.slice(r,r+s),l=new Array(o.length),c=0;c<o.length;c++)l[c]=o.charCodeAt(c);var d=new Uint8Array(l);a.push(d)}return new Blob(a,{type:t})},buildFormData:function(){var e;this.formData=(e={authenticity_token:this.authToken,contentType:!1,processData:!1,form_configuration_name:"modules/insites_site_manager/insites_global_content",parent_resource_id:"modules/insites_site_manager/insites_global_content","form[properties_attributes][company_id]":this.checkValue(this.gssData.company_id),"form[properties_attributes][company_name]":this.checkValue(this.gssData.company_name),"form[properties_attributes][company_slogan]":this.checkValue(this.gssData.company_slogan),"form[properties_attributes][company_url]":this.checkValue(this.gssData.company_url),"form[properties_attributes][facebook_link]":this.checkValue(this.gssData.facebook_link),"form[properties_attributes][twitter_link]":this.checkValue(this.gssData.twitter_link),"form[properties_attributes][instagram_link]":this.checkValue(this.gssData.instagram_link),"form[properties_attributes][youtube_link]":this.checkValue(this.gssData.youtube_link),"form[properties_attributes][linkedin_link]":this.checkValue(this.gssData.linkedin_link),"form[properties_attributes][pinterest_link]":this.checkValue(this.gssData.pinterest_link),"form[properties_attributes][other_1_link]":this.checkValue(this.gssData.other_1_link),"form[properties_attributes][other_2_link]":this.checkValue(this.gssData.other_2_link),"form[properties_attributes][loc_1_name]":this.checkValue(this.gssData.loc_1_name),"form[properties_attributes][loc_1_email]":this.checkValue(this.gssData.loc_1_email),"form[properties_attributes][loc_1_contact_person]":this.checkValue(this.gssData.loc_1_contact_person),"form[properties_attributes][loc_1_timezone]":this.checkValue(this.gssData.loc_1_timezone),"form[properties_attributes][loc_1_schedule_format]":this.checkValue(this.gssData.loc_1_schedule_format),"form[properties_attributes][loc_1_mon_enable]":this.checkValue(this.gssData.loc_1_mon_enable),"form[properties_attributes][loc_1_mon_open]":this.checkValue(this.gssData.loc_1_mon_open),"form[properties_attributes][loc_1_mon_close]":this.checkValue(this.gssData.loc_1_mon_close),"form[properties_attributes][loc_1_tue_enable]":this.checkValue(this.gssData.loc_1_tue_enable),"form[properties_attributes][loc_1_tue_open]":this.checkValue(this.gssData.loc_1_tue_open),"form[properties_attributes][loc_1_tue_close]":this.checkValue(this.gssData.loc_1_tue_close),"form[properties_attributes][loc_1_wed_enable]":this.checkValue(this.gssData.loc_1_wed_enable),"form[properties_attributes][loc_1_wed_open]":this.checkValue(this.gssData.loc_1_wed_open),"form[properties_attributes][loc_1_wed_close]":this.checkValue(this.gssData.loc_1_wed_close),"form[properties_attributes][loc_1_thu_enable]":this.checkValue(this.gssData.loc_1_thu_enable),"form[properties_attributes][loc_1_thu_open]":this.checkValue(this.gssData.loc_1_thu_open),"form[properties_attributes][loc_1_thu_close]":this.checkValue(this.gssData.loc_1_thu_close),"form[properties_attributes][loc_1_fri_enable]":this.checkValue(this.gssData.loc_1_fri_enable),"form[properties_attributes][loc_1_fri_open]":this.checkValue(this.gssData.loc_1_fri_open),"form[properties_attributes][loc_1_fri_close]":this.checkValue(this.gssData.loc_1_fri_close),"form[properties_attributes][loc_1_sat_enable]":this.checkValue(this.gssData.loc_1_sat_enable),"form[properties_attributes][loc_1_sat_open]":this.checkValue(this.gssData.loc_1_sat_open),"form[properties_attributes][loc_1_sat_close]":this.checkValue(this.gssData.loc_1_sat_close),"form[properties_attributes][loc_1_sun_enable]":this.checkValue(this.gssData.loc_1_sun_enable),"form[properties_attributes][loc_1_sun_open]":this.checkValue(this.gssData.loc_1_sun_open),"form[properties_attributes][loc_1_sun_close]":this.checkValue(this.gssData.loc_1_sun_close),"form[properties_attributes][loc_1_phone]":this.checkValue(this.gssData.loc_1_phone),"form[properties_attributes][loc_1_phone_country_code]":this.checkValue(this.gssData.loc_1_phone_country_code),"form[properties_attributes][loc_1_phone_area_code]":this.checkValue(this.gssData.loc_1_phone_area_code),"form[properties_attributes][loc_1_phone_number]":this.checkValue(this.gssData.loc_1_phone_number),"form[properties_attributes][loc_1_fax]":this.checkValue(this.gssData.loc_1_fax),"form[properties_attributes][loc_1_fax_country_code]":this.checkValue(this.gssData.loc_1_fax_country_code),"form[properties_attributes][loc_1_fax_area_code]":this.checkValue(this.gssData.loc_1_fax_area_code),"form[properties_attributes][loc_1_fax_number]":this.checkValue(this.gssData.loc_1_fax_number),"form[custom_addresses_attributes][loc_1_address_attributes][address]":this.checkValue(this.gssData.loc_1_address.address),"form[custom_addresses_attributes][loc_1_address_attributes][address2]":this.checkValue(this.gssData.loc_1_address.address2),"form[custom_addresses_attributes][loc_1_address_attributes][city]":this.checkValue(this.gssData.loc_1_address.city),"form[custom_addresses_attributes][loc_1_address_attributes][state]":this.checkValue(this.gssData.loc_1_address.state),"form[custom_addresses_attributes][loc_1_address_attributes][country]":this.checkValue(this.gssData.loc_1_address.country),"form[custom_addresses_attributes][loc_1_address_attributes][postcode]":this.checkValue(this.gssData.loc_1_address.postcode),"form[properties_attributes][loc_2_name]":this.checkValue(this.gssData.loc_2_name),"form[properties_attributes][loc_2_email]":this.checkValue(this.gssData.loc_2_email),"form[properties_attributes][loc_2_contact_person]":this.checkValue(this.gssData.loc_2_contact_person),"form[properties_attributes][loc_2_timezone]":this.checkValue(this.gssData.loc_2_timezone),"form[properties_attributes][loc_2_schedule_format]":this.checkValue(this.gssData.loc_2_schedule_format),"form[properties_attributes][loc_2_mon_enable]":this.checkValue(this.gssData.loc_2_mon_enable),"form[properties_attributes][loc_2_mon_open]":this.checkValue(this.gssData.loc_2_mon_open),"form[properties_attributes][loc_2_mon_close]":this.checkValue(this.gssData.loc_2_mon_close),"form[properties_attributes][loc_2_tue_enable]":this.checkValue(this.gssData.loc_2_tue_enable),"form[properties_attributes][loc_2_tue_open]":this.checkValue(this.gssData.loc_2_tue_open),"form[properties_attributes][loc_2_tue_close]":this.checkValue(this.gssData.loc_2_tue_close),"form[properties_attributes][loc_2_wed_enable]":this.checkValue(this.gssData.loc_2_wed_enable),"form[properties_attributes][loc_2_wed_open]":this.checkValue(this.gssData.loc_2_wed_open),"form[properties_attributes][loc_2_wed_close]":this.checkValue(this.gssData.loc_2_wed_close),"form[properties_attributes][loc_2_thu_enable]":this.checkValue(this.gssData.loc_2_thu_enable),"form[properties_attributes][loc_2_thu_open]":this.checkValue(this.gssData.loc_2_thu_open),"form[properties_attributes][loc_2_thu_close]":this.checkValue(this.gssData.loc_2_thu_close),"form[properties_attributes][loc_2_fri_enable]":this.checkValue(this.gssData.loc_2_fri_enable),"form[properties_attributes][loc_2_fri_open]":this.checkValue(this.gssData.loc_2_fri_open),"form[properties_attributes][loc_2_fri_close]":this.checkValue(this.gssData.loc_2_fri_close),"form[properties_attributes][loc_2_sat_enable]":this.checkValue(this.gssData.loc_2_sat_enable),"form[properties_attributes][loc_2_sat_open]":this.checkValue(this.gssData.loc_2_sat_open),"form[properties_attributes][loc_2_sat_close]":this.checkValue(this.gssData.loc_2_sat_close),"form[properties_attributes][loc_2_sun_enable]":this.checkValue(this.gssData.loc_2_sun_enable),"form[properties_attributes][loc_2_sun_open]":this.checkValue(this.gssData.loc_2_sun_open),"form[properties_attributes][loc_2_sun_close]":this.checkValue(this.gssData.loc_2_sun_close),"form[properties_attributes][loc_2_phone]":this.checkValue(this.gssData.loc_2_phone),"form[properties_attributes][loc_2_phone_country_code]":this.checkValue(this.gssData.loc_2_phone_country_code),"form[properties_attributes][loc_2_phone_area_code]":this.checkValue(this.gssData.loc_2_phone_area_code),"form[properties_attributes][loc_2_phone_number]":this.checkValue(this.gssData.loc_2_phone_number),"form[properties_attributes][loc_2_fax]":this.checkValue(this.gssData.loc_2_fax),"form[properties_attributes][loc_2_fax_country_code]":this.checkValue(this.gssData.loc_2_fax_country_code),"form[properties_attributes][loc_2_fax_area_code]":this.checkValue(this.gssData.loc_2_fax_area_code),"form[properties_attributes][loc_2_fax_number]":this.checkValue(this.gssData.loc_2_fax_number),"form[custom_addresses_attributes][loc_2_address_attributes][address]":this.checkValue(this.gssData.loc_2_address.address),"form[custom_addresses_attributes][loc_2_address_attributes][address2]":this.checkValue(this.gssData.loc_2_address.address2),"form[custom_addresses_attributes][loc_2_address_attributes][city]":this.checkValue(this.gssData.loc_2_address.city),"form[custom_addresses_attributes][loc_2_address_attributes][state]":this.checkValue(this.gssData.loc_2_address.state),"form[custom_addresses_attributes][loc_2_address_attributes][country]":this.checkValue(this.gssData.loc_2_address.country),"form[custom_addresses_attributes][loc_2_address_attributes][postcode]":this.checkValue(this.gssData.loc_2_address.postcode),"form[properties_attributes][loc_3_name]":this.checkValue(this.gssData.loc_3_name),"form[properties_attributes][loc_3_email]":this.checkValue(this.gssData.loc_3_email),"form[properties_attributes][loc_3_contact_person]":this.checkValue(this.gssData.loc_3_contact_person),"form[properties_attributes][loc_3_timezone]":this.checkValue(this.gssData.loc_3_timezone),"form[properties_attributes][loc_3_schedule_format]":this.checkValue(this.gssData.loc_3_schedule_format),"form[properties_attributes][loc_3_mon_enable]":this.checkValue(this.gssData.loc_3_mon_enable),"form[properties_attributes][loc_3_mon_open]":this.checkValue(this.gssData.loc_3_mon_open),"form[properties_attributes][loc_3_mon_close]":this.checkValue(this.gssData.loc_3_mon_close),"form[properties_attributes][loc_3_tue_enable]":this.checkValue(this.gssData.loc_3_tue_enable),"form[properties_attributes][loc_3_tue_open]":this.checkValue(this.gssData.loc_3_tue_open),"form[properties_attributes][loc_3_tue_close]":this.checkValue(this.gssData.loc_3_tue_close),"form[properties_attributes][loc_3_wed_enable]":this.checkValue(this.gssData.loc_3_wed_enable),"form[properties_attributes][loc_3_wed_open]":this.checkValue(this.gssData.loc_3_wed_open),"form[properties_attributes][loc_3_wed_close]":this.checkValue(this.gssData.loc_3_wed_close),"form[properties_attributes][loc_3_thu_enable]":this.checkValue(this.gssData.loc_3_thu_enable),"form[properties_attributes][loc_3_thu_open]":this.checkValue(this.gssData.loc_3_thu_open),"form[properties_attributes][loc_3_thu_close]":this.checkValue(this.gssData.loc_3_thu_close),"form[properties_attributes][loc_3_fri_enable]":this.checkValue(this.gssData.loc_3_fri_enable),"form[properties_attributes][loc_3_fri_open]":this.checkValue(this.gssData.loc_3_fri_open),"form[properties_attributes][loc_3_fri_close]":this.checkValue(this.gssData.loc_3_fri_close),"form[properties_attributes][loc_3_sat_enable]":this.checkValue(this.gssData.loc_3_sat_enable),"form[properties_attributes][loc_3_sat_open]":this.checkValue(this.gssData.loc_3_sat_open),"form[properties_attributes][loc_3_sat_close]":this.checkValue(this.gssData.loc_3_sat_close),"form[properties_attributes][loc_3_sun_enable]":this.checkValue(this.gssData.loc_3_sun_enable),"form[properties_attributes][loc_3_sun_open]":this.checkValue(this.gssData.loc_3_sun_open),"form[properties_attributes][loc_3_sun_close]":this.checkValue(this.gssData.loc_3_sun_close)},Object(S["a"])(e,"form[properties_attributes][loc_1_phone]",this.checkValue(this.gssData.loc_1_phone)),Object(S["a"])(e,"form[properties_attributes][loc_3_phone_country_code]",this.checkValue(this.gssData.loc_3_phone_country_code)),Object(S["a"])(e,"form[properties_attributes][loc_3_phone_area_code]",this.checkValue(this.gssData.loc_3_phone_area_code)),Object(S["a"])(e,"form[properties_attributes][loc_3_phone_number]",this.checkValue(this.gssData.loc_3_phone_number)),Object(S["a"])(e,"form[properties_attributes][loc_3_fax]",this.checkValue(this.gssData.loc_3_fax)),Object(S["a"])(e,"form[properties_attributes][loc_3_fax_country_code]",this.checkValue(this.gssData.loc_3_fax_country_code)),Object(S["a"])(e,"form[properties_attributes][loc_3_fax_area_code]",this.checkValue(this.gssData.loc_3_fax_area_code)),Object(S["a"])(e,"form[properties_attributes][loc_3_fax_number]",this.checkValue(this.gssData.loc_3_fax_number)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][address]",this.checkValue(this.gssData.loc_3_address.address)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][address2]",this.checkValue(this.gssData.loc_3_address.address2)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][city]",this.checkValue(this.gssData.loc_3_address.city)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][state]",this.checkValue(this.gssData.loc_3_address.state)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][country]",this.checkValue(this.gssData.loc_3_address.country)),Object(S["a"])(e,"form[custom_addresses_attributes][loc_3_address_attributes][postcode]",this.checkValue(this.gssData.loc_3_address.postcode)),Object(S["a"])(e,"form[properties_attributes][po_1_num]",this.checkValue(this.gssData.po_1_num)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][address]",this.checkValue(this.gssData.po_1_address.address)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][address2]",this.checkValue(this.gssData.po_1_address.address2)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][city]",this.checkValue(this.gssData.po_1_address.city)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][state]",this.checkValue(this.gssData.po_1_address.state)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][country]",this.checkValue(this.gssData.po_1_address.country)),Object(S["a"])(e,"form[custom_addresses_attributes][po_1_address_attributes][postcode]",this.checkValue(this.gssData.po_1_address.postcode)),Object(S["a"])(e,"form[properties_attributes][po_2_num]",this.checkValue(this.gssData.po_2_num)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][address]",this.checkValue(this.gssData.po_2_address.address)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][address2]",this.checkValue(this.gssData.po_2_address.address2)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][city]",this.checkValue(this.gssData.po_2_address.city)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][state]",this.checkValue(this.gssData.po_2_address.state)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][country]",this.checkValue(this.gssData.po_2_address.country)),Object(S["a"])(e,"form[custom_addresses_attributes][po_2_address_attributes][postcode]",this.checkValue(this.gssData.po_2_address.postcode)),e),this.parsedFormData=this.appendToFormData(this.formData)},updateGssFormHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.submittingForm=!0,this.buildFormData(),!this.s3IconChange){e.next=8;break}return e.next=5,this.getS3AssetURL(this.s3FormCredentialURL,"company_icon",this.s3IconImage,this.IconName);case 5:this.s3IconImage=e.sent,this.parsedFormData.append("form[custom_images_attributes][company_icon_attributes][image]",this.s3IconImage),this.s3IconChange=!1;case 8:if(!this.s3LogoChange){e.next=14;break}return e.next=11,this.getS3AssetURL(this.s3FormCredentialURL,"company_logo",this.s3LogoImage,this.LogoName);case 11:this.s3LogoImage=e.sent,this.parsedFormData.append("form[custom_images_attributes][company_logo_attributes][image]",this.s3LogoImage),this.s3LogoChange=!1;case 14:this.submitForm();case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this,t="/api/customizations".concat("POST"===this.formMethod?"":"/".concat(this.formID)),s="POST"===this.formMethod?"post":"put";this.$http[s](t,this.parsedFormData,{headers:this.headers}).then(function(t){e.submittingForm=!1,parent.toastIt("success","Global Content has been updated. Please refresh the page to see the changes.",InsitesUtil.ops())}).then(function(){e.$store.state.GssStore.gssData["company_logo"].original=e.s3LogoImage,e.$store.state.GssStore.gssData["company_icon"].original=e.s3IconImage}).catch(function(t){e.submittingForm=!1,console.error("error",t),parent.toastIt("error","Failed to update settings.",InsitesUtil.ops())})},getGss:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("setFetchingGssData",!0),e.next=3,this.$http.get("/insites/api/get-global-content-data.json").then(this.bindData).catch(function(e){console.error(e);var s="Failed to get Global Site Settings. Please try again";t.$store.commit("setFetchingGssData",!0),t.setGssLoader("",s,"error")});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindData:function(e){e.data.items.results.length?(this.$store.commit("setGssData",e.data.items.results[0]),this.checkData(),this.checkLocNames()):this.$store.commit("setGssFormMethod","POST"),this.$store.commit("setFetchingGssData",!1)},checkData:function(){this.gssData.company_logo||(this.gssData.company_logo={},this.gssData.company_logo.original=""),this.gssData.company_icon||(this.gssData.company_icon={},this.gssData.company_icon.original=""),this.checkedData=!0,this.setImages()},checkLocNames:function(){this.$store.commit("setFetchingGssData",!0);for(var e=1;e<=3;e++)this.gssData["loc_".concat(e,"_name")]=this.gssData["loc_".concat(e,"_name")]?this.gssData["loc_".concat(e,"_name")]:"Location ".concat(e);this.$store.commit("setFetchingGssData",!1)},setGssLoader:function(e,t,s){this.$refs.gssLoader.stateTitle=e,this.$refs.gssLoader.stateMessage=t,this.$refs.gssLoader.stateIcon=s},setImages:function(){this.s3IconImage=this.$store.state.GssStore.gssData["company_icon"].original,this.s3LogoImage=this.$store.state.GssStore.gssData["company_logo"].original}},created:function(){this.headers=this.apiHeader(),this.authToken=this.headers["X-CSRF-Token"],this.failedToLoadGssData&&this.getGss()},mounted:function(){this.fetchingGssData?this.setGssLoader("Just a moment","we're fetching and processing your data.","processing"):(this.checkData(),this.checkLocNames())}},qe=We,Ke=(s("5958"),Object(x["a"])(qe,F,R,!1,null,null,null)),Ge=Ke.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full pages"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 cell content-blocks-container"},[s("div",{staticClass:"page-view-filter"},[s("span",{staticClass:"filter-label"},[e._v("Filter:")]),s("InsSelectWrap",{attrs:{label:"Status",button:""},on:{input:e.filterHandler},model:{value:e.pageStatus,callback:function(t){e.pageStatus=t},expression:"pageStatus"}},[s("ins-select-option",{attrs:{label:"Published",value:"published",default:""}}),s("ins-select-option",{attrs:{label:"Archived",value:"archived"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasData,expression:"!hasData"}]},[s("ins-card",{attrs:{steady:""}},[s("h2",{staticClass:"title-page h2desc"},[e._v("Welcome to Pages")]),s("p",{staticClass:"pdesc"},[e._v("Pages display your site's content online. Each page has an assigned template, so you\n            don't have to re-insert the header, footer or other common elements each time you create\n            new content.")])]),s("div",{staticClass:"pages-bottom"},[s("h2",{staticClass:"pages-title-secondary h2desc"},[e._v("You don't have any pages yet.")]),s("p",{staticClass:"pdesc"},[e._v("Would you like to create your first page?")]),s("ins-button",{attrs:{label:"ADD NEW PAGE",solid:""},on:{onClickInsButton:e.goToAddNewPage}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"header-buttons"},[s("ins-button",{attrs:{label:"ADD NEW PAGE",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:e.goToAddNewPage}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"ins-table-container"},[s("ins-base-table",{ref:"insBaseTable",attrs:{"searchbar-placeholder":"Search by Page Content"},on:{onPaginationChange:e.tablePaginationHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler,onTableSearch:e.tableSearchHandler}}),s("div",{staticClass:"spacer large"})],1)])])])},Ye=[],Xe=(s("6762"),s("2fdb"),s("f499")),Qe=s.n(Xe),Ze={data:function(){return{gitMessage:"",gitOverwrite:!1}},computed:Object(A["b"])({currentUser:function(e){return e.VclStore.currentUser},vclMasterData:function(e){return e.VclStore.vclMasterData},vclInitialized:function(e){return e.VclStore.vclInitialized}}),watch:{vclInitialized:function(e,t){e&&this.checkCurrentUserVCL()}},methods:{constructVclPayload:function(e){return{file:e,git:{overwrite:this.gitOverwrite,message:this.gitMessage,repo:this.vclMasterData.info.git_url},cred:this.currentUser.insites_vcl_user_profile.properties}},vclPromptCommitMessage:function(){return this.vclPrompt("Please enter your commit message.","Publish","textarea")},vclPrompt:function(e,t,s){return swal({text:e,confirmButtonText:t,input:s,html:'\n                <ins-loader\n                    state-icon="warning"\n                    icon-color="warning"\n                    state-message="'.concat(e,'">\n                </ins-loader>'),width:330,showCancelButton:!0}).then(function(e){return e})},vclInvalidPrompt:function(e){return swal({text:e,html:'\n                <ins-loader\n                    state-icon="warning"\n                    icon-color="warning"\n                    state-message="'.concat(e,'">\n                </ins-loader>'),width:330}).then(function(){InsitesUtil.goBack()})},resetVclData:function(){this.gitMessage="",this.gitOverwrite=!1},checkCurrentUserVCL:function(){this.currentUser.insites_vcl_user_profile&&"deleted"!==this.currentUser.insites_vcl_user_profile.properties.insites_key||this.vclInvalidPrompt("Your Version Control is enabled but your account is not yet configured.")}},mounted:function(){this.vclInitialized&&this.checkCurrentUserVCL()}},et="/insites/api/";function tt(){return st.apply(this,arguments)}function st(){return st=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",s=n.length>1&&void 0!==n[1]?n[1]:"published",i=n.length>2&&void 0!==n[2]?n[2]:1,a=n.length>3&&void 0!==n[3]?n[3]:10,r="".concat(et,"get-all-pages-data.json?keyword=").concat(t,"&status=").concat(s,"&page=").concat(i,"&size=").concat(a),e.next=7,b(r,"get");case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})),st.apply(this,arguments)}function it(e){return at.apply(this,arguments)}function at(){return at=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:10,a="".concat(et,"get-all-pages-data.json?id=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=5,b(a,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),at.apply(this,arguments)}function rt(){return nt.apply(this,arguments)}function nt(){return nt=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,s=a.length>1&&void 0!==a[1]?a[1]:10,i="".concat(et,"get-all-layouts-data.json?&page=").concat(t,"&size=").concat(s),e.next=5,b(i,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),nt.apply(this,arguments)}function ot(e){return lt.apply(this,arguments)}function lt(){return lt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:10,a="".concat(et,"get-all-layouts-data.json?id=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=5,b(a,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),lt.apply(this,arguments)}function ct(){return dt.apply(this,arguments)}function dt(){return dt=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:10,a="".concat(et,"get-all-partials-data.json?keyword=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=6,b(a,"get");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),dt.apply(this,arguments)}function ut(e){return ht.apply(this,arguments)}function ht(){return ht=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:10,a="".concat(et,"get-all-partials-data.json?id=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=5,b(a,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),ht.apply(this,arguments)}function pt(){return mt.apply(this,arguments)}function mt(){return mt=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:1e3,a="".concat(et,"get-assets-data.json?page=").concat(s,"&size=").concat(i).concat(t?"&keyword=".concat(t):""),e.next=6,b(a,"get");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),mt.apply(this,arguments)}function ft(e,t){return _t.apply(this,arguments)}function _t(){return _t=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:1,a=n.length>3&&void 0!==n[3]?n[3]:1e3,r="".concat(et,"get-all-assets-customization-data.json?filter_by=").concat(t,"&keyword=").concat(s,"&page=").concat(i,"&size=").concat(a),e.next=5,b(r,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),_t.apply(this,arguments)}function gt(e){return vt.apply(this,arguments)}function vt(){return vt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:1e3,a="".concat(et,"get-deleted-assets-by-folder-data.json?keyword=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=5,b(a,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),vt.apply(this,arguments)}function bt(){return yt.apply(this,arguments)}function yt(){return yt=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,s=a.length>1&&void 0!==a[1]?a[1]:1e3,i="".concat(et,"get-deleted-assets-by-folder-data.json?page=").concat(t,"&size=").concat(s),e.next=5,b(i,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),yt.apply(this,arguments)}function Ct(e,t){return kt.apply(this,arguments)}function kt(){return kt=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:1,a=n.length>3&&void 0!==n[3]?n[3]:1e3,r="".concat(et,"get-deleted-assets-data.json?filter_by=").concat(t,"&keyword=").concat(s,"&page=").concat(i,"&size=").concat(a),e.next=5,b(r,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),kt.apply(this,arguments)}function wt(e){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,i=r.length>2&&void 0!==r[2]?r[2]:1e3,a="".concat(et,"get-assets-by-tags-data.json?mytags=").concat(t,"&page=").concat(s,"&size=").concat(i),e.next=5,b(a,"get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),Tt.apply(this,arguments)}var xt="/insites/api/",Dt="https://h9764sbehb.execute-api.us-east-1.amazonaws.com/dev/",$t={"Content-Type":"application/json"};function Et(){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"get-instance-url.json"),"get");case 2:return t=e.sent,e.abrupt("return",t.results.SERVER_NAME);case 4:case"end":return e.stop()}},e,this)})),Ft.apply(this,arguments)}function Rt(){return St.apply(this,arguments)}function St(){return St=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"get-all-administrator-data.json?size=10000&page=1&sortBy=&orderBy=asc"),"get");case 2:return t=e.sent,e.abrupt("return",t.results.items);case 4:case"end":return e.stop()}},e,this)})),St.apply(this,arguments)}function It(){return At.apply(this,arguments)}function At(){return At=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i,a,r,n,o,l,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,s=c.length>1&&void 0!==c[1]?c[1]:10,i=c.length>2?c[2]:void 0,a=c.length>3?c[3]:void 0,r=c.length>4?c[4]:void 0,n=c.length>5?c[5]:void 0,o="get-vcl-users-profile.json",o+="?size=".concat(s),o+="&page=".concat(t),o+="&sortBy=".concat(i),o+="&orderBy=".concat(a),o+="&keyword=".concat(r),o+="&is_enabled=".concat("all"===n?"":n),e.next=15,b("".concat(xt).concat(o),"get");case 15:return l=e.sent,e.abrupt("return",l);case 17:case"end":return e.stop()}},e,this)})),At.apply(this,arguments)}function Pt(){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"get-vcl-master.json"),"get");case 2:if(t=e.sent,!t.results.items.results.length){e.next=5;break}return e.abrupt("return",t.results.items.results[0]);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,this)})),Mt.apply(this,arguments)}function Bt(e){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"mutate-vcl-user-profile.json"),"post",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Ot.apply(this,arguments)}function Nt(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"create-vcl-master.json"),"post",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Lt.apply(this,arguments)}function jt(e){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(xt,"update-vcl-master.json"),"post",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Ut.apply(this,arguments)}function Ht(e,t){return Vt.apply(this,arguments)}function Vt(){return Vt=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"get-user-cred?instance_url=").concat(t,"&insites_key=").concat(s),"get",{},$t);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)})),Vt.apply(this,arguments)}function zt(e){return Wt.apply(this,arguments)}function Wt(){return Wt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"create-user-cred"),"post",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Wt.apply(this,arguments)}function qt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"update-user-info"),"put",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Kt.apply(this,arguments)}function Gt(e){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"delete-user-cred"),"delete",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Jt.apply(this,arguments)}function Yt(e){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"add"),"post",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Xt.apply(this,arguments)}function Qt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"update"),"put",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),Zt.apply(this,arguments)}function es(e){return ts.apply(this,arguments)}function ts(){return ts=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"rename"),"put",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),ts.apply(this,arguments)}function ss(e){return is.apply(this,arguments)}function is(){return is=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(Dt,"delete"),"delete",t,$t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)})),is.apply(this,arguments)}var as={name:"ListPages",mixins:[p,Ze],components:{InsSelectWrap:_e},data:function(){return{hasData:!0,source:"/insites/api/get-all-pages-data.json",location:"",insBaseTable:"",tableHeaders:[],pageNumber:1,pageSize:10,pageStatus:"published",lastModified:"",searchKeyword:"",sortedKeyword:"",sortedBy:"asc",headers:{},continueDeletion:!1}},methods:{goToAddNewPage:function(){this.$store.commit("setPageFormData",{data:{},action:"New"}),this.$router.push({name:"ManagePage"})},goToManagePage:function(e,t){InsitesUtil.renderPage("".concat(t," Page"),"#/edit-page/".concat(e.id)),this.$store.commit("setPageFormData",{data:e,action:t}),this.$router.push("/edit-page/".concat(e.id))},filterHandler:function(e){e.detail||(this.pageStatus=e,"archived"===this.pageStatus?(this.$refs.insBaseTable.rowActions=["View"],this.$refs.insBaseTable.bulkActions=[]):(this.$refs.insBaseTable.rowActions=["Preview","Edit","Archive"],this.$refs.insBaseTable.bulkActions=["Archive"])),this.fetchDataFromSrc()},tablePaginationHandler:function(e){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableSearchHandler:function(e){(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword)&&(this.searchKeyword=e.detail.value,this.pageNumber=1,this.$refs.insBaseTable.pageNumber=1,this.fetchDataFromSrc())},tableBulkActionHandler:function(e){switch(e.detail.action){case"Archive":this.archiveSelection(e.detail.selections);break}},tableRowActionHandler:function(e){var t=e.detail.data,s=e.detail.action;switch(e.detail.action){case"Archive":this.archiveItem(e.detail.data);break;case"Edit":case"View":this.goToManagePage(t,s);break;case"Preview":var i=e.detail.data.URL;"/"===i[0]&&window.open(i),window.open("/".concat(i));break}},archiveItem:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive this page?">\n          </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Archive"}).then(function(s){s.value&&t.deleteItem(e.rawData,"Page has")})},archiveSelection:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive these pages?">\n          </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Archive"}).then(function(e){if(e.value){var i=0;s.continueDeletion=!0,t.forEach(function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!s.continueDeletion){e.next=5;break}return i++,t.length===i&&(s.continueDeletion=!1),e.next=5,s.deleteItem(a.rawData,"The selected pages have");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r,n,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={payload:JSON.parse(Qe()(t))},a=+new Date,r=i.payload.physical_file_path,i.payload.redirect_to="404",i.payload.slug=this.constructSlug(i.payload.slug,"archived",a),i.payload.physical_file_path=this.constructPath(i.payload.physical_file_path,"archived",a),i.payload.metadata.search_engine_visibility=!1,i.payload.metadata.status="archived",n=this.constructVclPayload(i.payload),n.git.rename_file=r,e.next=12,es(n);case 12:o=e.sent,o.state?(l=Qe()(i),this.submitForm(l,s)):o.results.response.data.message.includes("File does not exist")?this.deleteErrHandler("".concat(r," does not exist in repository.")):this.deleteErrHandler(o.results.response.data.message);case 14:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),constructSlug:function(e,t,s){var i=e.lastIndexOf("."),a="archived"===t?"".concat(t,"_").concat(s):t;return".html"===e.substring(i)?"".concat(e.slice(0,i),"_").concat(a).concat(e.slice(i)):"".concat(e,"_").concat(a)},constructPath:function(e,t,s){var i="archived"===t?"".concat(t,"_").concat(s):t;return e.replace(".html.liquid","_".concat(i,".html.liquid"))},submitForm:function(e,t){var s=this,i="/insites/api/update-page.json";this.$http.post(i,e,{headers:this.headers}).then(function(e){return s.deleteResHandler(e,t)}).catch(this.deleteErrHandler)},deleteResHandler:function(e,t){this.continueDeletion||(e.data.includes?(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&this.deleteErrHandler("500 POS Server Error"):(toastIt("success","".concat(t," been archived."),InsitesUtil.ops()),this.fetchDataFromSrc()))},deleteErrHandler:function(e){console.error(e),this.continueDeletion=!1;var t="Failed to archive page. Please try again.";"string"===typeof e&&(t=e),toastIt("error",t,InsitesUtil.ops())},fetchDataFromSrc:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.setInsBaseTableLoader("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),e.next=4,tt(t.searchKeyword,t.pageStatus,t.pageNumber,t.pageSize);case 4:s=e.sent,s.state?t.resHandler(s.results):t.errorHandler(s.results);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),errorHandler:function(e){console.error(e);var t=this.continueDeletion?"archive":"load",s="Failed to ".concat(t," data. Please try again.");this.continueDeletion=!1,this.setInsBaseTableLoader("",s,"error")},resHandler:function(e){var t=e.admin_pages;if(t.results.length)this.$refs.insBaseTable.totalCount=t.total_entries,this.bindTableData(t.results);else if(this.searchKeyword){var s='No results for "'.concat(this.searchKeyword,'"');this.setInsBaseTableLoader("",s,"no-data")}else this.hasData=!1},bindTableData:function(e){this.$refs.insBaseTable.tableData=e.map(this.constructTableData),this.hasData=!0,this.$refs.insBaseTable.loadingScreen=!1},setInsBaseTableLoader:function(e,t,s){this.$refs.insBaseTable.loadingScreen=!0,this.$refs.insBaseTable.loaderTitle=e,this.$refs.insBaseTable.loaderMessage=t,this.$refs.insBaseTable.loaderIcon=s},setupInsBaseTable:function(){this.$refs.insBaseTable.bulkActions=["Archive"],this.$refs.insBaseTable.rowActions=["Preview","Edit","Archive"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("Page Title"),this.constructTableHeader("URL"),this.constructTableHeader("Template"),this.constructTableHeader("Status","string",!1,!0)]},constructTableHeader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0;return{label:e,type:t,sortable:s,hasTag:i,hasLink:a,hasColumnAction:r,hasImage:n}},constructTableData:function(e){var t="";return e.metadata.page_title?t=e.metadata.page_title:(t=this.getSlugName(e.slug),e.metadata.page_title=t),{rawData:e,id:e.id,"Page Title":t,URL:e.slug,Template:e.layout,Status:e.metadata.status}},getSlugName:function(e){var t=e.lastIndexOf("/")+1;return"".concat(e.substr(t,e.length),".html")}},created:function(){this.$store.dispatch("fetchSiteTemplates")},mounted:function(){this.setupInsBaseTable(),this.fetchDataFromSrc(),this.headers=this.apiHeader()}},rs=as,ns=(s("d3f0"),Object(x["a"])(rs,Je,Ye,!1,null,null,null)),os=ns.exports,ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.pageFormDataChecked&&e.vclInitialized?s("div",{staticClass:"grid-container-full page-addnew"},[s("div",{staticClass:"grid-x grid-margin-x"},[s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("ins-card",{attrs:{steady:""}},[s("div",{staticClass:"page-addnew-top"},[s("h2",{staticClass:"h2desc"},[e._v("Page Details")]),s("span",{staticClass:"copy-template-btn-holder"},[s("span",{class:"status-wrap "+e.pageFormData.metadata.status},[e._v("\n                "+e._s(e.pageFormData.metadata.status?e.pageFormData.metadata.status:"Draft")+"\n              ")])])]),s("InsInputWrap",{attrs:{label:"Page Title*",placeholder:"Please enter page title",required:"true",maxlength:"60",readonly:"View"===e.pageFormType,"has-error":!!e.errors.page_title,"error-message":e.errors.page_title,validate:!0,disabled:"archived"===e.pageFormData.metadata.status||e.disableForm},on:{fieldError:e.fieldErrorHandler},model:{value:e.pageFormData.metadata.page_title,callback:function(t){e.$set(e.pageFormData.metadata,"page_title",t)},expression:"pageFormData.metadata.page_title"}}),s("div",{staticClass:"with-preview-wrap"},[s("InsInputWrap",{attrs:{label:"Page URL*",placeholder:"Please enter page url",required:"true",maxlength:"60",field:"url",secondary:"text",readonly:"View"===e.pageFormType,"has-error":!!e.errors.slug,"error-message":e.errors.slug,validate:!0,disabled:"archived"===e.pageFormData.metadata.status||e.disableForm},on:{fieldError:e.fieldErrorHandler},model:{value:e.pageFormData.slug,callback:function(t){e.$set(e.pageFormData,"slug",t)},expression:"pageFormData.slug"}}),s("a",{staticClass:"url-preview",attrs:{href:""+e.siteDomain+e.pageFormData.slug,target:"_blank"}},[e._v("\n              "+e._s(e.siteDomain+e.pageFormData.slug)+"\n            ")])],1),s("div",{staticClass:"with-preview-wrap"},[s("InsInputWrap",{attrs:{label:"Physical File Path*",placeholder:"Please enter physical file path",required:"true",maxlength:"60",field:"text",secondary:"text",readonly:"View"===e.pageFormType,"has-error":!!e.errors.slug,"error-message":e.errors.slug,disabled:e.disableForm,validate:!0},on:{fieldError:e.fieldErrorHandler},model:{value:e.tempFilePath,callback:function(t){e.tempFilePath=t},expression:"tempFilePath"}}),e.disableForm?s("span",{staticClass:"path-preview"},[e._v("\n              "+e._s(e.pageFormData.physical_file_path)+"\n            ")]):s("span",{staticClass:"path-preview"},[e._v("\n              "+e._s("modules/ins_site_manager/public/views/pages/"+e.tempFilePath+".html.liquid")+"\n            ")])],1),e.siteTemplateHasData?s("InsSelectWrap",{attrs:{label:"Template",searchable:!!e.siteTemplateOptions.length,disabled:!e.siteTemplateOptions.length&&"View"!==e.pageFormType||"archived"===e.pageFormData.metadata.status||e.disableForm,readonly:"View"===e.pageFormType},model:{value:e.pageFormData.layout,callback:function(t){e.$set(e.pageFormData,"layout",t)},expression:"pageFormData.layout"}},[e.siteTemplateOptions.length?e._e():s("ins-select-option",{attrs:{label:"No available templates",value:"",default:"",disabled:"",placeholder:"- Select -"}}),e._l(e.siteTemplateOptions,function(t,i,a){return s("ins-select-option",{key:a,attrs:{label:t.path.replace("layouts/",""),value:t.path.replace("layouts/","")},model:{value:e.pageFormData.layout,callback:function(t){e.$set(e.pageFormData,"layout",t)},expression:"pageFormData.layout"}})})],2):e._e(),s("InsSelectWrap",{attrs:{label:"Secure Zone",placeholder:"- Select -",disabled:"View"!==e.pageFormType||e.disableForm,readonly:"View"===e.pageFormType}},[s("ins-select-option",{attrs:{label:"Please subscribe to enable Secure Zone",value:"",default:"",disabled:""}})],1),s("Redactor",{ref:"myRedactor",attrs:{label:"Content","source-code":e.pageFormData.content,readonly:"View"===e.pageFormType||"archived"===e.pageFormData.metadata.status||e.disableForm},on:{getRedactorData:e.getRedactorData}})],1),s("div",{staticClass:"spacer"})],1),"archived"!==e.pageFormData.metadata.status?s("div",{staticClass:"large-4 medium-4 small-12 cell small-order-2 medium-order-1 footer-btn-container"},["Edit"===e.pageFormType?s("ins-button",{attrs:{label:"ARCHIVE",color:"information-1",size:"normal",disabled:e.publishingPage,loading:e.archivingPage},on:{onClickInsButton:e.archivePageHandler}}):e._e()],1):e._e(),"archived"!==e.pageFormData.metadata.status?s("div",{staticClass:"large-8 medium-8 small-12 cell small-order-1 medium-order-2 text-right footer-btn-container"},[s("ins-button",{attrs:{label:"CANCEL",outlined:"",disabled:e.publishingPage||e.archivingPage},on:{onClickInsButton:e.cancelManagePageHandler}}),"View"!==e.pageFormType?s("ins-button",{attrs:{label:"PUBLISH",solid:"",options:this.vclMasterData.info.is_enabled?"Publish with commit message, Copy Page":"Copy Page",disabled:e.publishingPage||e.archivingPage,loading:e.publishingPage},on:{onClickInsButton:e.publishHandler,onClickInsButtonOption:e.runPrompt}}):e._e()],1):e._e(),"archived"===e.pageFormData.metadata.status?s("div",{staticClass:"large-6 medium-6 small-6 cell small-order-2 medium-order-1 footer-btn-container"},[s("ins-button",{attrs:{label:"This page is archived",color:"information-1",size:"normal",disabled:""}})],1):e._e(),"archived"===e.pageFormData.metadata.status?s("div",{staticClass:"large-6 medium-6 small-6 cell small-order-2 text-right medium-order-1 footer-btn-container"},[s("ins-button",{attrs:{label:"CANCEL",outlined:""},on:{onClickInsButton:e.cancelManagePageHandler}})],1):e._e()])]):e._e()},cs=[],ds=s("795b"),us=s.n(ds),hs=(s("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ins-textarea",{ref:"insTextareaEl",attrs:{label:e.label,value:e.value,placeholder:e.placeholder,name:e.name,disabled:e.disabled,readonly:e.readonly,required:e.required,maxlength:e.maxlength,"error-message":e.errorMessage,"has-error":e.hasError},on:{valueChange:e.onValueChange}})}),ps=[],ms={name:"InsTextareaWrap",props:{label:String,value:String,placeholder:String,name:String,errorMessage:String,maxlength:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String},methods:{onValueChange:function(e){this.$emit("input",e.detail),this.checkInput(e.detail)},checkInput:function(e){if(this.required&&!e)return this.toggleError(!0,"".concat(this.label," is required."));this.toggleError(!1,"")},toggleError:function(e,t){this.$refs.insTextareaEl.hasError=!!e,this.$refs.insTextareaEl.errorMessage=t,this.$emit("fieldError",{error:!!e,target:this})}}},fs=ms,_s=Object(x["a"])(fs,hs,ps,!1,null,null,null),gs=_s.exports,vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"redactor"},[s("label",{staticClass:"redactor-label"},[e._v(e._s(e.label))]),s("textarea",{ref:"redactorEl",staticClass:"redactor-wrap language-css language-js language-html",attrs:{id:"content",placeholder:e.placeholder,name:e.name,disabled:e.disabled,readonly:e.readonly,required:e.required,maxlength:e.maxlength},domProps:{value:e.value},on:{valueChange:e.onValueChange}}),s("textarea",{attrs:{id:"temp-content"}}),e.errorMessage?s("div",{staticClass:"ins-form-error"},[e._v(e._s(e.errorMessage))]):e._e()])},bs=[],ys=(s("3b2b"),s("6b54"),{mixins:[p],methods:{setPhysicalPath:function(e,t){var s=t.trim().replace(/[ -]/g,"_").replace(/[^a-zA-Z0-9_]/g,"").toLowerCase();return""!==s?"modules/ins_site_manager/public/views/".concat(e,"/").concat(s,".liquid"):""},setModuleName:function(e){e=InsitesUtil.removeWhitespace(e);var t=e.replace(/[^\/a-zA-Z0-9]/g,"_").toLowerCase();return""!==t?t:""},capitalize:function(e){return this.checkValue(e).replace(/_/g," ").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},setFileCustomizationData:function(e,t,s){var i={form_configuration_name:"modules/insites_site_manager/insites_assets",parent_resource_id:"modules/insites_site_manager/insites_assets",form:{properties:{physical_path:this.convertToPhysicalPath("".concat(s,"/").concat(t.name)),direct_link:t.direct_link,file_name:t.name,folder:this.convertToFolder(s),tags:t.tags,is_enabled:"delete"===e?"false":"true"}}};return Qe()(i)},managePOSCustomization:function(e,t,s,i){return i="upload"===i?"post":"put",this.$http[i](e,t,{headers:s})},normalizeName:function(e){var t=e.replace(/_/g," ").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ");return""!==t?t:""},escapeContent:function(e){return e.replace(/['"]/g,"\\$&").toString()}}}),Cs=(s("c5f6"),s("e814")),ks=s.n(Cs),ws=(s("55dd"),s("c1df")),Ts=s.n(ws),xs={name:"SelectedFilesManager",mixins:[p],methods:{getFileType:function(e){if(e){var t=["png","jpg","jpeg","gif","svg","tiff","bmp"],s=e.split(".").slice(-1)[0].toLowerCase();return 1===s.length?"folder":t.indexOf(s)>=0?"image":"notepad"}return!1},downloadOrPreview:function(e){if(e){var t=["png","jpg","jpeg","gif","svg","tiff","bmp","js","css","scss","sass","liquid","json","html","docs","doc","pdf","map"],s=e.split(".").slice(-1)[0].toLowerCase();return t.indexOf(s)>=0?"Preview":"Download"}return"Download"},transformMKPSelectedFilesResponse:function(e,t){var s=t.split("/").length+1,i=[];for(var a in e)t?a.split("/").length===s&&0===a.indexOf(t)&&e[a]&&i.push(this.setFileProperties(t,e,a,s)):1===a.split("/").length&&0===a.indexOf(t)&&e[a]&&i.push(this.setFileProperties(t,e,a,1));return i},setFileProperties:function(e,t,s,i){var a=e?"".concat(this.root_folder,"/").concat(e):"".concat(this.root_folder);return{file_name:s.split("/")[i-1],folder:this.convertToFolder(a),direct_link:t[s],asset_url_date:t[s].split("?updated=")[1],physical_path:this.convertToPhysicalPath("".concat(a,"/").concat(s.split("/")[i-1])),date_added:InsitesUtil.formatLocalisation(Ts.a.unix(t[s].split("?updated=")[1]).toISOString())}},transformLocalSelectedFilesToResult:function(e,t){var s={data:{items:{total_entries:Number,total_pages:0,current_page:0,per_page:1e3,page:0,results:[]}}};for(var i in t=this.convertToFolder(t),e)e[i].folder===t&&s.data.items.results.push(e[i]);return s.data.items.total_entries=s.data.items.results.length,s.data.items.total_pages=s.data.items.results.length?1:0,s.data.items.current_page=s.data.items.results.length?1:0,s.data.items.page=s.data.items.results.length?1:0,s}}},Ds={name:"SelectedFolderManager",data:function(){return{root_folder:"assets"}},mixins:[xs,p],methods:{transformMKPAssetFolderResponse:function(e,t){var s=this,i=[];return t=t&&1===t.split("/").length?"":t,Object(I["keys"])(e).sort().forEach(function(e){var a=e.replace(t||"","").split("/");if(a.length>1){var r=s.transformParentFoldersToDataStructure(a,t);r&&i.push(r)}}),s.transformDataStructure(i)},transformParentFoldersToDataStructure:function(e,t){var s=[],i={name:String,has_children:e.length>2};if("undefined"===typeof t)return i.name=e[0],i;for(var a in e)ks()(a)<t.split("/").length&&s.push(e[a]);return i.name=s.join("/"),e.length>s.length?(i.has_children=e.length>1+t.split("/").length,i):void 0},initializeUniqueDataStructure:function(e){for(var t=this,s=[],i=0;i<e.length;i++)Object(I["filter"])(s,function(t){return t.name===e[i].name}).length?e[i].has_children&&(s=t.processUniqueDataStructure(e[i],s)):s.push(e[i]);return s},processUniqueDataStructure:function(e,t){for(var s=0;s<t.length;s++)t[s].name===e.name&&(t[s].has_children=e.has_children);return t},transformDataStructure:function(e){var t=this,s=this.initialDataStructureSetup();return this.initializeUniqueDataStructure(e).forEach(function(e,i){var a=e.name;s.children.push({details:{id:"".concat(t.root_folder,"/").concat(e.name),is_open:!1,is_loading:!1,counter:i+1,has_children:e.has_children,total_entries:Number,file_name:a.split("/")[a.split("/").length-1],file_type:"folder",file_content:"",actions:{},meta_data:e},children:[]})}),s},updateMKPSelectedAssetFolder:function(e,t,s){e.details.is_open=!e.details.is_open;var i=this.getChildenOfSelectedAssetFolderFromRawData(e,s);for(var a in e.children=[],i.children)e.children.push(i.children[a]);return e.children},getChildenOfSelectedAssetFolderFromRawData:function(e,t){var s=[];for(var i in t)if(-1!==t[i].indexOf(e.details.id)&&(s[i]=t[i]),!t[i]){var a=this.convertToPhysicalPath(e.details.id);0===i.indexOf(a)&&(s[i]="")}return this.transformMKPAssetFolderResponse(s,e.details.id)},initialDataStructureSetup:function(){var e={details:{id:this.root_folder,is_open:!0,is_loading:!1,counter:1,has_children:!0,file_name:this.root_folder,file_type:"folder",file_content:"",actions:{},meta_data:{}},children:[]};return e},setFolders:function(e){var t=[];for(var s in e)s=s.split("/"),s.pop(),s="".concat(this.root_folder,"/").concat(s.join("/")),t.includes(s)||t.push(s);return t.sort()}}},$s={data:function(){return{filter_by:"physical_path",direct_link:""}},name:"ComponentManager",computed:Object(A["b"])({selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},archivedFiles:function(e){return e.FileManagerStore.archived_files}}),mixins:[p,Ds,xs],methods:{refreshNodeTree:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:t=e.sent,this.$store.dispatch("resetFMToolbar"),t.state?(s={assets_url:t,data_structure:this.transformMKPAssetFolderResponse(t.results.items.results),folders:this.setFolders(t.results.items.results),files:this.updateFilesOfSelectedFolder(t.results.items.results,{details:{id:this.root_folder}})},this.$store.dispatch("updateRefreshNodeTree",s)):console.log("error",t.results);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateNodeTreeSelectedFolder:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.convertToPhysicalPath(t.details.id),t.details.id!==this.root_folder){e.next=5;break}this.refreshNodeTree(),e.next=10;break;case 5:if("undefined"!==typeof s){e.next=9;break}return e.next=8,pt(i);case 8:s=e.sent;case 9:return e.abrupt("return",new us.a(function(e){s.state?(a.updateFilesOfSelectedFolder(s.results.items.results,t),a.updateChildrenOfSelectedAssetFolder(s.results.items.results,t),a.$store.commit("updateFileManagerAssetURL",s),t.details.is_loading=!1,t.details.is_open=!0,e({state:!0})):(t.details.is_loading=!1,console.log("error",s.results),e({state:!1}))}));case 10:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),compareFilesOfSelectedFolderToCustomization:function(e,t){var s=Object(I["map"])(e,"physical_path"),i=Object(I["map"])(t,"physical_path"),a=[],r=s.concat(i),n=r.filter(function(e,t,s){return s.indexOf(e)!==t});return e.forEach(function(e){n.includes(e.physical_path)||a.push(e)}),a},updateFilesOfSelectedFolder:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this.transformMKPSelectedFilesResponse(t,this.convertToPhysicalPath(s.details.id)),a=this.convertToFolder(this.convertToPhysicalPath(s.details.id)),e.next=4,gt(this.root_folder+(a?"|":"")+a);case 4:r=e.sent,r.state?(i=this.compareFilesOfSelectedFolderToCustomization(i,r.results.items.results),this.$store.commit("updateFileManagerFiles",i),this.$store.commit("updateFileManagerArchivedFiles",r.results.items.results)):(s.details.is_loading=!1,console.log("error",r.results));case 6:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),updateChildrenOfSelectedAssetFolder:function(e,t){var s=this.updateMKPSelectedAssetFolder(t,this.folders,e);t.children=s,this.$store.commit("updateFileManagerSelectedFolderData",t)},goToParentFolder:function(){var e=this.selectedFolderData.details.id;e.split("/").length>1&&(e=this.removeArrLastIndex(e).replace(/\//g,"-")),document.querySelector("#".concat(e)).click(),this.$store.commit("resetFileManagerSelectedFile")},updateImagePreview:function(e){var t=document.getElementById("imagePreview");this.direct_link=e.direct_link,"image"===this.getFileType(e.file_name)&&(t.innerHTML='<img src="'.concat(e.direct_link,'}" />'))}}},Es={computed:Object(A["b"])({selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},filesToUpload:function(e){return e.FileManagerStore.files_to_upload},vclInitialized:function(e){return e.VclStore.vclInitialized},vclMasterData:function(e){return e.VclStore.vclMasterData}}),mixins:[ys,p,$s],methods:{initializeUploadFiles:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s,i){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,i=i||0,!(i<s.length)){e.next=16;break}if("localhost"!==window.location.hostname){e.next=8;break}return e.next=6,a.testLocalhostUpload(t,s[i]);case 6:e.next=10;break;case 8:return e.next=10,a.uploadFile(t,s[i]);case 10:a.filesToUpload[i].state="success",i++,a.$store.commit("successStateFilesToUpload",a.filesToUpload),a.initializeUploadFiles(t,s,i),e.next=17;break;case 16:setTimeout(Object(h["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return document.querySelector(".close-modal span").click(),e.next=3,a.updateNodeTreeSelectedFolder(a.selectedFolderData);case 3:toastIt("success","".concat(s.length," file(s) successfully uploaded."),a.ops);case 4:case"end":return e.stop()}},e,this)})),1e3);case 17:case"end":return e.stop()}},e,this)}));function t(t,s,i){return e.apply(this,arguments)}return t}(),getUploadFileMKPSyncHeaders:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(t=e.sent,!t.state){e.next=7;break}return e.abrupt("return",new us.a(function(e){e({Authorization:"Token ".concat(s.vclMasterData.info.marketplace_kit_token),From:t.results.current_user.email})}));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),convertFileToBase64:function(e){return new us.a(function(t,s){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return s(e)}})},getUploadFileMKPSyncBody:function(e,t){var s=this;return new us.a(function(){var i=Object(h["a"])(regeneratorRuntime.mark(function i(a){var r;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,i.next=3,s.convertFileToBase64(t).then(function(e){r.append("marketplace_builder_file_body",InsitesUtil.getBase64Blob(e))});case 3:r.append("path","".concat(e,"/").concat(t.name)),a(r);case 5:case"end":return i.stop()}},i,this)}));return function(e){return i.apply(this,arguments)}}())},testLocalhostUpload:function(){return new us.a(function(e){setTimeout(function(){e()},1500)})},uploadDone:function(e){return new us.a(function(t){t({state:!0,type:"success",results:"".concat(e.length," file(s) successfully uploaded.")})})},uploadFile:function(e,t){var s=this;return new us.a(function(){var i=Object(h["a"])(regeneratorRuntime.mark(function i(a){var r,n,o,l,c,d,u;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.uploadFileMKPSync(e,t);case 2:if(r=i.sent,n=s.convertToPhysicalPath("".concat(e,"/").concat(t.name)),o=s.convertToFolder(e),!r.state){i.next=19;break}return i.next=8,pt();case 8:return l=i.sent,i.next=11,ft("physical_path",n);case 11:return c=i.sent,d=s.setFileData(o,t.name,l.results.items.results[n],e),u=s.getCustomizationID(c),i.next=16,s.updateAssetsCustomization(d,u);case 16:a({state:!0}),i.next=20;break;case 19:a({state:!1});case 20:case"end":return i.stop()}},i,this)}));return function(e){return i.apply(this,arguments)}}())},updateAssetsCustomization:function(e,t){var s=this,i=s.apiHeader(),a=t?"update":"upload",r="update"===a?"/api/customizations/".concat(t):"/api/customizations";return new us.a(function(t){s.managePOSCustomization(r,e,i,a).then(function(e){t({state:!0,results:e})}).catch(function(e){t({state:!1,results:e})})})},uploadFileMKPSync:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this,a="/api/marketplace_builder/marketplace_releases/sync",e.next=4,i.getUploadFileMKPSyncHeaders();case 4:return r=e.sent,e.next=7,i.getUploadFileMKPSyncBody(t,s);case 7:return n=e.sent,e.next=10,b(a,"put",n,r);case 10:return o=e.sent,e.abrupt("return",new us.a(function(e){e({state:o.state,results:o.results})}));case 12:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),getCustomizationID:function(e){return e.results.items.total_entries?e.results.items.results[0].id:""},setFileData:function(e,t,s,i){var a={};return a.name=t,a.direct_link=s,a.tags=[],a.folder=e,a.is_enabled=!0,this.setFileCustomizationData("upload",a,i)}}},Fs={name:"RedactorHolder",mixins:[q,Es],props:{id:String,label:String,value:String,placeholder:String,name:String,maxlength:String,disabled:Boolean,readonly:Boolean,required:String,errorMessage:String,sourceCode:String},computed:Object(A["b"])({redactorDoctypeHTML:function(e){return e.RedactorStore.redactor_doctype_html},redactorHTML:function(e){return e.RedactorStore.redactor_html},redactorBody:function(e){return e.RedactorStore.redactor_body},redactorBodyTag:function(e){return e.RedactorStore.redactor_body_tag},redactorStyle:function(e){return e.RedactorStore.redactor_style},redactorHead:function(e){return e.RedactorStore.redactor_head}}),data:function(){return{defaultContent:this.prDefaultContent,currentContent:"",s3FormDataURL:"/insites/api/s3-file-upload.json",sourceView:!1,hasInsComponent:!1,firstLoadRedactor:!0,tempEditor:{},editor:{}}},mounted:function(){var e=this,t=this;t.tempEditor=t.initCodeMirror("temp-content",""),t.editor=t.initCodeMirror("content",""),t.checkIfHTMLHasInsComponent(this.sourceCode);var s=!1;this.hasInsComponent&&(s=!0,this.sourceView=!0),t.redactorEl=$R("#content",{showSource:s,pastePlainText:!0,imageFigure:!1,plugins:["imagemanager","alignment","table"],focus:!0,multipleUpload:!1,callbacks:{started:function(){e.firstLoadRedactor=!0},source:{opened:function(){t.toggleRedactor(!0)},closed:function(){t.toggleRedactor(!1)}}},imageUpload:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(s,i,a,r){var n,o,l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,o="assets/uploads",!(i.length>1)){t.next=7;break}r.complete({error:!0,message:"Please one image at a time."}),toastIt("error","Please one image at a time.",InsitesUtil.ops()),t.next=16;break;case 7:if(l=n.checkFileType(i[0].name),"image"===l){t.next=12;break}return r.complete({error:!0,message:"Only image file types are accepted."}),toastIt("error","Only image file types are accepted.",InsitesUtil.ops()),t.abrupt("return",!1);case 12:return t.next=14,n.uploadFile(o,i[0]);case 14:c=t.sent,c.state?r.complete({file:{url:"{{ '".concat(c.results.physical_path,"' | asset_url }}"),id:c.results.physical_path}}):(r.complete({error:!0,message:"Failed to upload image. Please try again."}),toastIt("error","Failed to upload image. Please try again.",InsitesUtil.ops()));case 16:case"end":return t.stop()}},t,this)}));function s(e,s,i,a){return t.apply(this,arguments)}return s}(),imageManagerJson:"/insites/api/get-all-redactor-images.json"}),t.$store.commit("updateRedactorDoctypeHTML",this.searchFromCode(this.editor.getValue(),"<!doctype html>")),t.setValueCodeMirror(t.sourceCode,t.editor),t.toggleRedactor(!1),t.readonly&&t.enableReadOnlyRedactor()},methods:{enableReadOnlyRedactor:function(){this.redactorEl.enableReadOnly(),this.destroyCodeMirror(this.editor)},initCodeMirror:function(e,t){var s=this,i=this,a=CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,lineWrapping:!0,mode:"htmlmixed",extraKeys:{"Alt-F":"findPersistent"},readOnly:this.readonly});return a.on("change",function(){i.checkIfHTMLHasInsComponent(s.editor.getValue()),i.hasInsComponent?document.querySelector(".redactor-toolbar .re-html").className+=" redactor-button-disabled":document.querySelector(".redactor-toolbar .re-html").className=document.querySelector(".redactor-toolbar .re-html").className.replace(" redactor-button-disabled","")}),CodeMirror.commands["selectAll"](a),i.setValueCodeMirror(t,a),a.setOption("theme","monokai"),a},readOnlyRedactor:function(){document.querySelector(".redactor-styles").setAttribute("contenteditable","false");for(var e=document.querySelectorAll(".redactor-toolbar .re-button"),t=0;t<e.length;t++)-1===e[t].className.indexOf("re-html")&&(e[t].className+=" redactor-button-disabled")},editableRedactor:function(){document.querySelector(".redactor-styles").setAttribute("contenteditable","true");for(var e=document.querySelectorAll(".redactor-toolbar .re-button"),t=0;t<e.length;t++)e[t].className.replace(" redactor-button-disabled","")},checkFileType:function(e){if(e){var t=["png","jpg","jpeg","gif","svg","tiff","bmp"],s=e.split(".").slice(-1)[0].toLowerCase();return 1===s.length?"folder":t.indexOf(s)>=0?"image":s}},setValueCodeMirror:function(e,t){e=e||"",t.setValue(e)},autoFormatCodeMirror:function(e,t){e.autoFormatRange({line:0,ch:0},{line:t,ch:0}),e.setSelection({line:1,ch:0})},destroyCodeMirror:function(e){e.CodeMirror.toTextArea(),document.getElementById("content").style.display="none"},onValueChange:function(e){this.$emit("input",e.detail)},getBase64:function(e){return new us.a(function(t,s){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=s,i.readAsDataURL(e)})},clearCode:function(){this.redactorEl.source.setCode("")},uncommentOriginalStyles:function(e){return e.replace(new RegExp("\x3c!--([\\s\\S]+?)","gi"),"<style").replace(new RegExp("\\([\\s\\S]+?)--\x3e","gi"),"style>")},removeRedactorStyles:function(e){return e.replace(new RegExp("<style data-redactor-style([\\s\\S]+?)</style>","gi"),"")},removeGeneratedFigure:function(e){return e.replace(new RegExp('<figure class="redactor-component redactor-component-active"([\\s\\S]+?)</span>',"gi"),"").replace(new RegExp('<figure class="redactor-component([\\s\\S]+?)>',"gi"),"").replace(new RegExp("<figure([\\s\\S]+?)>","gi"),"").replace(/<\/figure>/g,"")},setValueRedactorCodeMirror:function(e){this.setValueCodeMirror(e,this.editor)},sourceViewRedactor:function(){this.editor.focus();var e=this.uncommentOriginalStyles(document.querySelector(".redactor-styles").innerHTML);e=this.removeRedactorStyles(e),e=this.removeGeneratedFigure(e);var t=(-1!==this.redactorDoctypeHTML?"<!DOCTYPE html>":"")+"\n"+(this.redactorHTML?"<html>":"")+"\n"+(this.redactorHead?"<head>":"")+"\n"+this.redactorHead+"\n"+(this.redactorHead?"</head>":"")+"\n"+(this.redactorBodyTag?"<body>":"")+"\n"+e+(this.redactorBodyTag?"</body>":"")+"\n"+(this.redactorHTML?"</html>":"");return t.replace(/^\s*[\r\n]/gm,"")},checkIfHTMLHasInsComponent:function(e){-1!==this.searchFromCode(e,"<ins-")?this.hasInsComponent=!0:this.hasInsComponent=!1},searchFromCode:function(e,t){var s=-1;return e&&(s=e.toLowerCase().indexOf(t)),s},getRedactorValue:function(){if(this.sourceView||document.querySelector(".redactor-source-view"))this.setValueRedactorCodeMirror(this.editor.getValue());else{var e=this.sourceViewRedactor();this.setValueRedactorCodeMirror(e)}return this.editor.getValue()},getEditorValue:function(){var e=this.editor.getValue();return this.sourceView||document.querySelector(".redactor-source-view")||(e=document.querySelector(".redactor-styles").innerHTML),e},visualEditorRedactor:function(){var e=this.editor.getValue(),t="",s=this;if(e&&"\n"!==e){var i=s.convertValues("html",e),a=s.convertValues("style",e),r=s.convertValues("head",a.body);e=s.toggleRedactorUpdateEditorValue(e,r.tags);var n=s.convertValues("body",a.body);e=s.toggleRedactorUpdateEditorValue(e,n.tags),e=s.removeTag("html",e),s.$store.commit("updateRedactorDoctypeHTML",s.searchFromCode(s.editor.getValue(),"<!doctype html>")),s.$store.commit("updateRedactorHTML",s.removeTag("html",i.original)),s.$store.commit("updateRedactorBodyTag",s.removeTag("body",n.original)),s.$store.commit("updateRedactorStyle",a.tags),s.$store.commit("updateRedactorHead",s.removeTag("head",s.uncommentOriginalStyles(r.original))),s.$store.commit("updateRedactorBody",s.removeTag("body",e+s.uncommentOriginalStyles(n.original))),t="".concat(s.removeTag("style",a.converted)?"<style data-redactor-style>".concat(s.removeTag("style",a.converted),"</style>"):"").concat(s.formatTags("style",e).value).concat(s.removeTag("body",n.original))}else t="<p></p>";return t},toggleRedactor:function(e){this.sourceView=e,e?"<,>\ufeff</,>"===document.querySelector(".redactor-styles").innerHTML.split("p").join()?(this.setValueCodeMirror("",this.editor),this.setValueCodeMirror("",this.tempEditor)):this.setValueRedactorCodeMirror(this.sourceViewRedactor()):document.querySelector(".redactor-styles").innerHTML=this.visualEditorRedactor(),this.hasInsComponent&&this.firstLoadRedactor&&(document.querySelector(".redactor-styles").innerHTML="",setTimeout(function(){document.querySelector(".re-button.re-html").className+=" redactor-button-disabled"},100)),this.firstLoadRedactor=!1},toggleRedactorUpdateEditorValue:function(e,t){for(var s=0;s<t.length;s++)e=e.replace("<"+t[s].tag+t[s].attribute+">"+this.uncommentOriginalStyles(t[s].original)+"</"+t[s].tag+">","");return e},generateStyleTags:function(e){for(var t="",s=0;s<e.length;s++)t+="<style".concat(e[s].attribute,">").concat(e[s].original,"</style>\n");return t},convertValues:function(e,t){t=this.removeHTMLMarkers(t);var s=this.formatTags(e,t),i="",a="",r=[];if(s.index.length){var n=this.getTagChildren(e,s,t);i=n.converted,a=n.original,r=n.tags}return{original:a,converted:i,tags:r,body:s.value}},getTagChildren:function(e,t,s){for(var i="<".concat(e,">"),a="<".concat(e,">"),r=[],n=0;n<t.index.length;n++){var o=s.substr(t.index[n].start,t.index[n].end-t.index[n].start),l=this.removeTag(e,o);r.push({tag:e,attribute:this.getTagAttributes(e,o),original:l,converted:"style"===e?this.convertStyles(l):l}),a+=l,i+=this.convertStyles(l)}return i+="</".concat(e,">"),a+="</".concat(e,">"),{name:e,original:a,converted:i,tags:r}},removeHTMLMarkers:function(e){return e.replace('<span id="selection-marker-start" class="redactor-selection-marker"></span>',"").replace('<span id="selection-marker-end" class="redactor-selection-marker">\ufeff</span>',"").replace('</span><span id="selection-marker-end" class="redactor-selection-marker">\ufeff</span>',"").replace('<span id="selection-marker-start" class="redactor-selection-marker">\ufeff</span>',"").replace(new RegExp(' data-redactor-style-cache="([\\s\\S]+?)"',"gi"),"")},convertString:function(e,t){for(var s="",i=0;i<e.length;i++)s+=t;return s},convertStyles:function(e){e=e.replace(/\{/g," { ").replace(/\}/g," } ").replace(/\s+/g," ").trim().split(" } ");for(var t=0;t<e.length;t++)e[t]=".redactor-styles "+e[t],0===e[t].indexOf(".redactor-styles body ")&&(e[t]=e[t].replace(".redactor-styles body ",".redactor-styles ")),e[t]=e[t].replace(/,/g,", .redactor-styles "),e[t]=e[t].replace(/,\s\.redactor-styles\sbody\s/g,", .redactor-styles "),e[t]=e[t].replace(/,\s\.redactor-styles\sbody,/g,", .redactor-styles,"),e[t]=e[t].replace(/\.redactor-styles\sbody,/g,".redactor-styles,");return e.join(" } ")},getTagAttributes:function(e,t){var s=t.indexOf("<")+1,i=t.indexOf(">")-1;return t.substr(s,i).replace(e,"")},removeTag:function(e,t){var s=t;return t=t.indexOf("<".concat(e,">"))>-1?t.replace("</".concat(e,">"),"").replace(new RegExp("<".concat(e,">"),"gi"),""):t.replace("</".concat(e,">"),"").replace(new RegExp("<".concat(e,"([\\s\\S]+?)>"),"gi"),""),t.trim()||(t=s.replace("<".concat(e,">"),"").replace("</".concat(e,">"),"")),t},formatTags:function(e,t){var s=[],i=0,a=t,r=t;do{var n=0,o=0;if(n=t.indexOf("<".concat(e)),o=t.indexOf("</".concat(e,">"))+"</".concat(e,">").length,n<0)i=-1;else if(t.indexOf("</".concat(e,">"))<0){var l="".concat(t.substr(0,n),"*").concat(t.substr(n+1));o=l.indexOf("<".concat(e,">"))+"<".concat(e,">").length;var c=t.substr(n,o-n);a=a.replace(c,this.convertString(c,"")),t=t.replace(c,this.convertString(c,"-")),s.push({start:n,end:o})}else{var d=t.substr(n,o-n);a=a.replace(d,this.convertString(d,"")),t=t.replace(d,this.convertString(d,"-")),s.push({start:n,end:o})}o<n&&(i=-1)}while(i>-1);if("style"===e){a=r;for(var u=0;u<s.length;u++){var h=String.fromCharCode(u);a=a.substr(0,s[u].start)+"\x3c!--".concat(h,"")+a.substr(s[u].start+"\x3c!--".concat(h,"").length-1),a=a.substr(0,s[u].end-"".concat(h,"--\x3e").length)+"".concat(h,"--\x3e")+a.substr(s[u].end-"".concat(h,"--\x3e").length+"</".concat(e).length-1)}}return{index:s,value:a}}}},Rs=Fs,Ss=(s("c42e"),Object(x["a"])(Rs,vs,bs,!1,null,null,null)),Is=Ss.exports,As={link:"",app:!1,withSubmenu:!0,label:"Site Manager",formattedRoute:"#/site-manager"},Ps={link:"#/pages",app:!1,withSubmenu:!1,label:"Pages"},Ms={link:"#/manage-page",app:!1,withSubmenu:!1,label:"Add Page"},Bs={link:"#/templates",app:!1,withSubmenu:!1,label:"Templates"},Os={link:"#/manage-template",app:!1,withSubmenu:!1,label:"Add Template"},Ns={link:"#/content-blocks",app:!1,withSubmenu:!1,label:"Content Blocks"},Ls={link:"#/manage-content-block",app:!1,withSubmenu:!1,label:"Add Content Block"},js={name:"ManagePages",mixins:[p,Ze],components:{Redactor:Is,InsInputWrap:se,InsSelectWrap:_e,InsTextareaWrap:gs},computed:Object(A["b"])({pageFormType:function(e){return e.PagesStore.pageFormType},pageFormData:function(e){return e.PagesStore.pageFormData},siteTemplateOptions:function(e){return e.PagesStore.siteTemplateOptions}}),data:function(){return{rdefault:"default content",rContent:"",siteDomain:"",tempFilePath:"",tempWholePath:"",seoToggleLabel:"This page is visible to search engines.",disableForm:!1,publishingPage:!1,archivingPage:!1,pageFormDataChecked:!1,siteTemplateHasData:!1,formHasError:!1,errors:{page_title:"",slug:""},headers:{}}},methods:{addNewPageHandler:function(){InsitesUtil.renderPage("New Page","#page-addnew"),this.$router.push("/page-addnew")},archivePageHandler:function(){var e=this,t="Are you sure you want to archive this page?";swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(t,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Archive"}).then(function(t){t.value&&(e.archivingPage=!0,e.archivePage())})},validateTemplateExist:function(){var e="/insites/api/get-all-layouts-data.json?page=1&size=1000&path=".concat(this.pageFormData.layout),t=this;this.$http.get(e).then(function(e){e.data.admin_liquid_layouts.results.length<=0&&(t.pageFormData.layout="")})},archivePage:function(){var e=+new Date,t=JSON.parse(Qe()(this.pageFormData));t.redirect_to="404",t.slug=this.constructSlug(t.slug,"archived",e),t.physical_file_path=this.constructPath("archived",e),t.metadata.search_engine_visibility=!1,t.metadata.status="archived";var s=Qe()(t);this.submitForm(s,"archived")},copyPageHandler:function(){var e=this;if(!this.validateForm()){var t="Are you sure you want to copy this page? This will copy the contents to a New Page.";swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="'.concat(t,'">\n            </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Copy"}).then(function(t){t.value&&e.duplicatePage()})}},duplicatePage:function(){this.pageFormData.content=this.$refs.myRedactor.getRedactorValue(),this.pageFormData.slug=this.constructSlug(this.pageFormData.slug,"copy"),this.pageFormData.physical_file_path=this.constructPath("copy"),this.pageFormData.metadata.status="",this.pageFormData.metadata.page_title="".concat(this.pageFormData.metadata.page_title," Copy"),this.$store.commit("setPageFormType","New");var e="Page has been copied.";toastIt("success",e,InsitesUtil.ops())},constructSlug:function(e,t,s){var i=e.lastIndexOf("."),a="archived"===t?"".concat(t,"_").concat(s):t;return".html"===e.substring(i)?"".concat(e.slice(0,i),"_").concat(a).concat(e.slice(i)):"".concat(e,"_").concat(a)},constructPath:function(e,t){var s="modules/ins_site_manager/public/views/pages/",i="archived"===e?"".concat(e,"_").concat(t):e;return"".concat(s).concat(this.tempFilePath).concat(e?"_".concat(i):"",".html.liquid")},constructPageContent:function(e){var t=JSON.parse(Qe()(e)),s=["---"];for(var i in s.push("slug: ".concat(t.slug)),s.push("layout_name: ".concat(t.layout)),s.push("searchable: ".concat(t.searchable)),s.push("metadata: {"),t.metadata)s.push("    ".concat(i,': "').concat(t.metadata[i],'",'));s.push("}"),s.push("--- "),s.push("");var a=t.content.split("\n");return t.content=s.concat(a).join("\n"),t},fieldErrorHandler:function(e){var t=e.target.$el.label,s=t.length-1,i=t[s];"*"===i&&(t=t.substring(0,s)),e.target.$el.hasError=e.error,e.target.$el.errorMessage="".concat(e.target.$el.label," is required.").replace("*","")},checkWhiteSpace:function(e){this.pageFormData.slug=InsitesUtil.checkURLinput(e)},publishHandler:function(e){if(this.publishingPage=!0,this.validateForm())this.publishingPage=!1;else{this.pageFormData.content=this.$refs.myRedactor.getRedactorValue(),this.pageFormData.physical_file_path=this.constructPath();var t=Qe()(this.pageFormData),s="Edit"===this.pageFormType?"updated":"added";this.submitForm(t,s)}},submitForm:function(e,t){var s={payload:this.checkData(e)};this.vclMasterData.info.is_enabled?this.runVcl(s,t):this.runMutation(s,t)},runVcl:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.constructPageContent(t.payload),a=this.constructVclPayload(i),"archived"!==s){e.next=9;break}return a.git.rename_file=this.tempWholePath,e.next=6,es(a);case 6:r=e.sent,e.next=19;break;case 9:if("Edit"!==this.pageFormType){e.next=16;break}return this.tempWholePath!==a.file.physical_file_path&&(a.git.rename_file=this.tempWholePath),e.next=13,Qt(a);case 13:r=e.sent,e.next=19;break;case 16:return e.next=18,Yt(a);case 18:r=e.sent;case 19:if(!r.state){e.next=28;break}if(!r.results.message.includes("File already exist")){e.next=25;break}return this.overwriteHandler(t,s),e.abrupt("return");case 25:if(!r.results.message.includes("Successfully")){e.next=28;break}return this.runMutation(t,s),e.abrupt("return");case 28:this.errorHandler(r.results.response.data.message);case 29:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),overwriteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPrompt("File already exist. would you like to overwrite?","Overwrite");case 2:i=e.sent,i.value?(this.gitOverwrite=!0,this.runVcl(t,s)):(this.publishingPage=!1,this.resetVclData());case 4:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),runPrompt:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPromptCommitMessage();case 2:t=e.sent,t.value&&(this.gitMessage=t.value,this.publishHandler());case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),runMutation:function(e,t){var s=this,i="New"===this.pageFormType?"create":"update",a="/insites/api/".concat(i,"-page.json");this.$http.post(a,e,{headers:this.headers}).then(function(i){return s.resHandler(i,t,e.payload)}).catch(this.errorHandler)},resHandler:function(e,t,s){if(e.data.includes)(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&this.errorHandler("500 POS Server Error");else{var i="Page has been ".concat(t," and published.");"archived"===t?(InsitesUtil.goBack(),i="Page has been ".concat(t,".")):"added"===t&&(this.pageFormData.id=e.data.admin_page_create.id,this.pageFormData.metadata.status="published",this.$store.commit("setPageFormType","Edit")),this.tempWholePath=this.pageFormData.physical_file_path,toastIt("success",i,InsitesUtil.ops())}this.resetVclData(),this.archivingPage=!1,this.publishingPage=!1},errorHandler:function(e){console.error(e),"New"===this.pageFormType&&(this.pageFormData.metadata.status=""),this.resetVclData(),this.archivingPage=!1,this.publishingPage=!1,toastIt("error",e,InsitesUtil.ops())},checkData:function(e){var t=JSON.parse(e);return t.content=t.content.replace(/&nbsp;/g," "),"archived"!==t.metadata.status&&(t.metadata.status="published"),t},validateForm:function(){var e=0;return""===this.pageFormData.metadata.page_title?(this.errors.page_title="Page Title is required.",e++):this.errors.page_title="",""===this.pageFormData.slug?(this.errors.slug="Page URL is required.",e++):this.errors.slug="",e},cancelManagePageHandler:function(){InsitesUtil.goBack()},getRedactorData:function(e){this.pageFormData.content=e},getSiteDomain:function(){var e=window.location.protocol,t=window.location.hostname;this.siteDomain="".concat(e,"//").concat(t,"/")},seoToggleHandler:function(e){this.pageFormData.metadata.search_engine_visibility=e.detail.checked;var t=e.detail.checked?"visible to":"hidden from";this.seoToggleLabel="This page is ".concat(t," search engines.")},checkMetadata:function(){this.pageFormData.metadata||(this.pageFormData.metadata={}),void 0===this.pageFormData.metadata.page_title&&(this.pageFormData.metadata.page_title=""),void 0===this.pageFormData.metadata.meta_title&&(this.pageFormData.metadata.meta_title=""),void 0===this.pageFormData.metadata.description&&(this.pageFormData.metadata.description=""),void 0===this.pageFormData.metadata.canonical_url&&(this.pageFormData.metadata.canonical_url=""),void 0===this.pageFormData.metadata.status&&(this.pageFormData.metadata.status="published"),void 0===this.pageFormData.metadata.search_engine_visibility?this.pageFormData.metadata.search_engine_visibility=!0:this.pageFormData.metadata.search_engine_visibility||(this.seoToggleLabel="This page is hidden from search engines."),this.pageFormDataChecked=!0},errorPages:function(){var e=this;setTimeout(function(){e.$router.push({name:"ListPages"})},1300),e.toastInvalidIDNotification("page")},deconstructPath:function(e){var t=e.replace("modules/ins_site_manager/public/views/pages/",""),s=t.replace(".html.liquid","");return s},setEditPageFormData:function(e){var t={data:{rawData:e},action:"Edit"};this.tempFilePath=this.deconstructPath(e.physical_file_path),this.$store.commit("setPageFormData",t)},setBreadCrumbs:function(){var e=[];e=[As,Ps],"EditPage"===this.$route.name?e.push({link:"#/edit-page/".concat(this.checkURLParamsID()),app:!1,withSubmenu:!1,label:"Edit Page"}):"ManagePage"===this.$route.name&&e.push(Ms),InsitesUtil.setBreadCrumbs(e)},editPage:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,it(t.checkURLParamsID());case 3:return s=e.sent,e.abrupt("return",new us.a(function(e){s.results.admin_pages.total_entries?(t.setEditPageFormData(s.results.admin_pages.results[0]),e({state:!0})):e({state:!1})}));case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setSiteTemplates:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,rt();case 3:if(s=e.sent,!s.state){e.next=6;break}return e.abrupt("return",new us.a(function(e){t.$store.commit("setSiteTemplatesOptions",s.results.admin_liquid_layouts.results),t.validateTemplateExist(),e()}));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,s={},t.siteTemplateHasData=!1,e.next=5,t.setSiteTemplates();case 5:if(t.siteTemplateHasData=!0,"EditPage"!==t.$route.name){e.next=18;break}if(!t.pageFormData.metadata){e.next=11;break}s.state=!0,e.next=15;break;case 11:if(!t.checkURLParamsID()){e.next=15;break}return e.next=14,t.editPage();case 14:s=e.sent;case 15:0!==t.pageFormData.physical_file_path.indexOf("modules/")&&(this.disableForm=!0),e.next=19;break;case 18:"ManagePage"===t.$route.name&&(this.$store.commit("setPageFormData",{data:{},action:"New"}),s.state=!0);case 19:s.state?(t.tempWholePath=t.pageFormData.physical_file_path,t.tempFilePath=t.deconstructPath(t.pageFormData.physical_file_path),t.getSiteDomain(),t.checkMetadata(),t.setBreadCrumbs(),t.headers=t.apiHeader()):t.errorPages();case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Us=js,Hs=(s("b3f3"),Object(x["a"])(Us,ls,cs,!1,null,null,null)),Vs=Hs.exports,zs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full pages"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 cell content-blocks-container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasData,expression:"!hasData"}]},[s("ins-card",{attrs:{steady:""}},[s("h2",{staticClass:"title-page h2desc"},[e._v("Welcome to Templates")]),s("p",{staticClass:"pdesc"},[e._v("Templates help you save time by re-using common site elements (for example, your header and footer) instead of having them individually inserted in each page.")])]),s("div",{staticClass:"pages-bottom"},[s("h2",{staticClass:"pages-title-secondary h2desc"},[e._v("You don't have any templates yet.")]),s("p",{staticClass:"pdesc"},[e._v("Would you like to create your first template?")]),s("ins-button",{attrs:{label:"ADD NEW TEMPLATE",solid:""},on:{onClickInsButton:e.goToAddNewTemplate}})],1)],1),s("div",{staticClass:"header-buttons no-search"},[s("ins-button",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],attrs:{label:"ADD NEW TEMPLATE",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:e.goToAddNewTemplate}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"ins-table-container"},[s("ins-base-table",{ref:"insBaseTable",attrs:{"without-search":""},on:{onPaginationChange:e.tablePaginationHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}})],1),s("div",{staticClass:"spacer"}),s("div",{staticClass:"spacer"})])])])},Ws=[],qs={name:"ListTemplates",mixins:[p,Ze],data:function(){return{hasData:!0,insBaseTable:"",tableHeaders:[],pageNumber:1,pageSize:10,headers:{},continueDeletion:!1}},methods:{goToAddNewTemplate:function(){this.$store.commit("setTemplateFormData",{data:{},action:"New"}),this.$router.push({name:"ManageTemplate"})},goToManageTemplate:function(e,t){InsitesUtil.renderPage("".concat(t," Template"),"#/edit-template/".concat(e.id)),this.$store.commit("setTemplateFormData",{data:e,action:t}),this.$router.push("/edit-template/".concat(e.id))},tablePaginationHandler:function(e){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableBulkActionHandler:function(e){switch(e.detail.action){case"Delete":this.archiveSelection(e.detail.selections);break}},tableRowActionHandler:function(e){var t=e.detail.data,s=e.detail.action;switch(e.detail.action){case"Delete":this.archiveItem(e.detail.data);break;case"Edit":this.goToManageTemplate(t,s);break}},archiveItem:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to permanently delete this template? Pages that use this template will be affected.">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(s){s.value&&t.deleteHandler(e)})},deleteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this.constructVclPayload(t.rawData),e.next=3,ss(s);case 3:if(i=e.sent,!i.state){e.next=8;break}if(!i.results.message.includes("Successfully")){e.next=8;break}return this.deleteItem(t.id),e.abrupt("return");case 8:toastIt("error","Failed to delete template. File may already have been deleted.",InsitesUtil.ops());case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),archiveSelection:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to permanently delete these templates? Pages that use these templates will be affected.">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(s){if(s.value){var i=0;t.continueDeletion=!0,e.forEach(function(s){t.continueDeletion&&(t.deleteHandler(s),i++,e.length===i&&(t.continueDeletion=!1))})}})},deleteItem:function(e){var t="/insites/api/delete-layout.json",s={};s.payload={id:e},this.$http.post(t,s,{headers:this.headers}).then(this.deleteResHandler).catch(this.deleteErrHandler)},deleteResHandler:function(e){this.continueDeletion||(e.data.includes?(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&this.deleteErrHandler("500 POS Server Error"):(toastIt("success","Template has been deleted.",InsitesUtil.ops()),this.$store.dispatch("fetchSiteTemplates",this.$store),this.fetchDataFromSrc()))},deleteErrHandler:function(e){console.error(e),toastIt("error","Failed to delete template. Please try again.",InsitesUtil.ops())},fetchDataFromSrc:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.setInsBaseTableLoader("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),e.next=4,rt(t.pageNumber,t.pageSize);case 4:s=e.sent,s.state?t.resHandler(s.results):t.errorHandler(s.results);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),errorHandler:function(e){console.error(e);var t=this.continueDeletion?"archive":"load",s="Failed to ".concat(t," data. Please try again.");this.continueDeletion=!1,this.setInsBaseTableLoader("",s,"error")},resHandler:function(e){var t=e.admin_liquid_layouts;t.results.length?(this.$refs.insBaseTable.totalCount=t.total_entries,this.bindTableData(t.results)):this.hasData=!1},bindTableData:function(e){this.$refs.insBaseTable.tableData=e.map(this.constructTableData),this.hasData=!0,this.$refs.insBaseTable.loadingScreen=!1},setInsBaseTableLoader:function(e,t,s){this.$refs.insBaseTable.loadingScreen=!0,this.$refs.insBaseTable.loaderTitle=e,this.$refs.insBaseTable.loaderMessage=t,this.$refs.insBaseTable.loaderIcon=s},setupInsBaseTable:function(){this.$refs.insBaseTable.bulkActions=["Delete"],this.$refs.insBaseTable.rowActions=["Edit","Delete"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("Path"),this.constructTableHeader("Status","string",!1,!0)]},constructTableHeader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0;return{label:e,type:t,sortable:s,hasTag:i,hasLink:a,hasColumnAction:r,hasImage:n}},constructTableData:function(e){return{rawData:e,id:e.id,Path:e.path,Status:"enabled"}}},mounted:function(){this.setupInsBaseTable(),this.fetchDataFromSrc(),this.headers=this.apiHeader()}},Ks=qs,Gs=(s("b652"),Object(x["a"])(Ks,zs,Ws,!1,null,null,null)),Js=Gs.exports,Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.templateFormDataChecked&&e.vclInitialized?s("div",{staticClass:"grid-container-full template-new"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 medium-12 small-12 cell content-blocks-container"},[s("ins-card",{attrs:{steady:""}},[s("h2",{},[e._v("Template Details")]),s("div",{staticClass:"grid-x grid-margin-x"},[s("div",{staticClass:"large-7 medium-12 small 12 cell"},[s("div",{staticClass:"with-preview-wrap"},[s("InsInputWrap",{attrs:{label:"Template Path*",placeholder:"Please enter template path",maxlength:"50",required:"true",validate:!0,disabled:e.disableForm||"Edit"===e.templateFormType,"error-message":"Template path is required."},on:{fieldError:e.fieldErrorHandler},nativeOn:{keyup:function(t){return e.validateInput(t)}},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}}),"New"===e.templateFormType?s("span",{staticClass:"path-preview"},[e._v("\n                "+e._s("modules/ins_site_manager/public/views/layouts/"+e.displayName+".html.liquid")+"\n              ")]):"Edit"===e.templateFormType?s("span",{staticClass:"path-preview"},[e._v("\n                "+e._s(e.templateFormData.physical_file_path)+"\n              ")]):e._e()],1)]),s("div",{staticClass:"cell large-5 medium-12 small-12 content-blocks-container"},[s("label",{staticClass:"liquid-label"},[e._v("Body Content:")]),s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{{ ")]),e._v("content_for_layout"),s("span",{pre:!0},[e._v(" }}")])]),s("small",[s("i",[e._v("NOTE: Use liquid tag to append body content to template.")])])])]),s("Redactor",{ref:"myRedactor",attrs:{label:"Content","source-code":e.templateFormData.content,readonly:e.disableForm},on:{getRedactorData:e.getRedactorData}})],1),s("div",{staticClass:"spacer"}),s("div",{staticClass:"grid-x grid-margin-x"},[s("div",{staticClass:"large-4 medium-3 small-12 cell"},["New"===e.templateFormType||e.disableForm?e._e():s("ins-button",{attrs:{label:"Delete",color:"information-1",size:"normal"},on:{onClickInsButton:e.removeTemplateHandler}}),s("div",{staticClass:"spacer"})],1),s("div",{staticClass:"large-8 medium-9 small-12 cell text-right"},[s("ins-button",{attrs:{label:"CANCEL",outlined:""},on:{onClickInsButton:e.cancelManageTemplateHandler}}),"Edit"===e.templateFormType?s("ins-button",{attrs:{label:"COPY TEMPLATE",outlined:""},on:{onClickInsButton:e.copyTemplateHandler}}):e._e(),"View"===e.templateFormType||e.disableForm?e._e():s("ins-button",{attrs:{solid:"",color:"primary",size:"normal",label:"Edit"===e.templateFormType?"UPDATE":"SAVE",options:this.vclMasterData.info.is_enabled?"Save with commit message":"",disabled:e.savingTemplate,loading:e.savingTemplate},on:{onClickInsButton:e.publishHandler,onClickInsButtonOption:e.runPrompt}}),s("div",{staticClass:"spacer"})],1)])],1)])]):e._e()},Xs=[],Qs=s("774e"),Zs=s.n(Qs),ei={name:"ManageTemplates",mixins:[p,Ze],components:{Redactor:Is,InsInputWrap:se},data:function(){return{savingTemplate:!1,filePath:"modules/ins_site_manager/public/views/",errors:{path:""},displayName:"",tempWholePath:"",disableForm:!1,copyTemplate:!1,submittingForm:!1,hasInvalidField:!1,templateFormDataChecked:!1,headers:{},missing_fields:0}},computed:Object(A["b"])({templateFormType:function(e){return e.TemplatesStore.templateFormType},templateFormData:function(e){return e.TemplatesStore.templateFormData}}),methods:{cancelManageTemplateHandler:function(){InsitesUtil.goBack()},removeTemplateHandler:function(){var e=this,t="Are you sure you want to permanently delete this template? Pages that use this template will be affected.";swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(t,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(t){t.value&&e.deleteHandler()})},deleteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.constructVclPayload(this.templateFormData),e.next=3,ss(t);case 3:if(s=e.sent,!s.state){e.next=8;break}if(!s.results.message.includes("Successfully")){e.next=8;break}return this.removeTemplate(),e.abrupt("return");case 8:toastIt("error","Failed to delete template. File may already have been deleted.",InsitesUtil.ops());case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),removeTemplate:function(){var e="/insites/api/delete-layout.json",t={};t.payload={id:this.templateFormData.id},this.$http.post(e,t,{headers:this.headers}).then(this.deleteResHandler).catch(this.deleteErrHandler)},deleteResHandler:function(e){this.continueDeletion||(e.data.includes?(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&this.deleteErrHandler("500 POS Server Error"):(InsitesUtil.goBack(),toastIt("success","Template has been removed.",InsitesUtil.ops()),this.$store.dispatch("fetchSiteTemplates",this.$store),this.$router.push("/templates")))},deleteErrHandler:function(e){console.error(e),toastIt("error","Failed to remove template. Please try again.",InsitesUtil.ops())},validateForm:function(){var e=0;return""===this.templateFormData.path?(this.errors.path="Path is required.",e++):this.errors.path="",e},formValidate:function(){return!!InsitesUtil.formValidate(Zs()($(".ins-form-field, .ins-select-value-input, .ins-textarea-field")))},submitForm:function(e,t){var s={payload:JSON.parse(e)};this.vclMasterData.info.is_enabled?this.runVcl(s,t):this.runMutation(s,t)},runVcl:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.constructVclPayload(t.payload),console.log("templateFormType",this.templateFormType),"Edit"!==this.templateFormType){e.next=9;break}return this.tempWholePath!==i.file.physical_file_path&&(i.git.rename_file=this.tempWholePath),e.next=6,Qt(i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,Yt(i);case 11:a=e.sent;case 12:if(!a.state){e.next=21;break}if(!a.results.message.includes("File already exist")){e.next=18;break}return this.overwriteHandler(t,s),e.abrupt("return");case 18:if(!a.results.message.includes("Successfully")){e.next=21;break}return this.runMutation(t,s),e.abrupt("return");case 21:this.errorHandler(a.results.response.data.message);case 22:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),overwriteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPrompt("File already exist. would you like to overwrite?","Overwrite");case 2:i=e.sent,i.value&&(this.gitOverwrite=!0,this.runVcl(t,s)),this.resetFormStatus();case 5:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),setFilePaths:function(){this.templateFormData.path="".concat(this.displayName),this.templateFormData.path=this.constructPath(this.templateFormData.path),this.templateFormData.physical_file_path=this.constructPhysicalPath("layouts/".concat(this.displayName))},publishHandler:function(e){if(this.submittingForm=!0,this.savingTemplate=!0,this.formValidate()){"New"===this.templateFormType?this.setFilePaths():(this.templateFormData.path=this.templateFormData.path,this.templateFormData.physical_file_path=this.templateFormData.physical_file_path),this.templateFormData.content=this.$refs.myRedactor.getRedactorValue();var t=Qe()(this.templateFormData),s="Edit"===this.templateFormType?"updated":"added";this.submitForm(t,s)}else this.resetFormStatus()},runPrompt:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPromptCommitMessage();case 2:t=e.sent,t.value&&(this.gitMessage=t.value,this.publishHandler());case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clearData:function(){this.tempName="",this.$refs.redactorEl.clearCode(),this.templateFormData.path="",this.templateFormData.content="",this.templateFormData.physical_file_path="",this.resetFormStatus()},resetFormStatus:function(){this.savingTemplate=!1,this.submittingForm=!1},runMutation:function(e,t){var s=this,i="New"===this.templateFormType?"create":"update",a="/insites/api/".concat(i,"-layout.json");console.log("pageData",e),this.$http.post(a,e,{headers:this.headers}).then(function(i){return s.resHandler(i,t,e.payload)}).catch(this.errorHandler)},fieldErrorHandler:function(e){var t=e.target.$el.label,s=t.length-1,i=t[s];"*"===i&&(t=t.substring(0,s)),e.target.$el.hasError=e.error,e.target.$el.errorMessage="".concat(e.target.$el.label," is required.").replace("*","")},errorHandler:function(e){console.error(e),"New"===this.templateFormType&&(this.templateFormData.metadata.status=""),this.resetVclData(),this.resetFormStatus(),toastIt("error","Failed to save template. Please try again.",InsitesUtil.ops())},resHandler:function(e,t,s){if(e.data.includes)(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&(this.errorHandler("500 POS Server Error"),toastIt("error","Failed to ".concat(t," template. Please try again."),InsitesUtil.ops()));else{"saved"===t&&(this.templateFormData.id=e.data["admin_liquid_layout_".concat(s)].id,this.$store.commit("setTemplateFormType","Edit"));var i="Template has been ".concat(t,".");toastIt("success",i,InsitesUtil.ops()),this.$store.dispatch("fetchSiteTemplates",this.$store),this.$router.push("/templates")}this.resetFormStatus()},getRedactorData:function(e){this.templateFormData.content=e},constructPath:function(e){var t="/"===e[0]?e.substring(1):e;return this.copyTemplate&&(t="".concat(t,"_copy"),this.displayName="".concat(this.displayName,"_copy"),this.copyTemplate=!1,this.$store.commit("setTemplateFormType","New")),"modules/ins_site_manager/".concat(t)},constructPhysicalPath:function(e){var t=e.lastIndexOf(".");return".liquid"===e.substring(t)?"".concat(this.filePath).concat(e):"".concat(this.filePath).concat(e,".html.liquid")},copyTemplateHandler:function(){var e=this;if(!this.validateForm()){var t="Are you sure you want to copy this template? This will copy the contents to a New Template.";swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="'.concat(t,'">\n            </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Copy"}).then(function(t){t.value&&e.duplicateTemplate()})}},duplicateTemplate:function(){this.copyTemplate=!0,this.templateFormData.path=this.constructPath(this.displayName),this.templateFormData.content=this.$refs.myRedactor.getRedactorValue(),this.templateFormData.physical_file_path=this.constructPhysicalPath("layouts/".concat(this.displayName));var e="Template has been copied.";console.log("duplicate template data",this.templateFormData),toastIt("success",e,InsitesUtil.ops())},errorTemplates:function(){var e=this;setTimeout(function(){e.$router.push({name:"ListTemplates"})},1300),e.toastInvalidIDNotification("template")},setEditTemplateFormData:function(e){var t={data:{rawData:e},action:"Edit"};this.$store.commit("setTemplateFormData",t)},editTemplate:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,ot(t.checkURLParamsID());case 3:return s=e.sent,e.abrupt("return",new us.a(function(e){s.results.admin_liquid_layouts.total_entries?(t.setEditTemplateFormData(s.results.admin_liquid_layouts.results[0]),e({state:!0})):e({state:!1})}));case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setBreadCrumbs:function(){var e=[];e=[As,Bs],"EditTemplate"===this.$route.name?e.push({link:"#/edit-template/".concat(this.checkURLParamsID()),app:!1,withSubmenu:!1,label:"Edit Template"}):"ManageTemplate"===this.$route.name&&e.push(Os),InsitesUtil.setBreadCrumbs(e)}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,s={},"EditTemplate"!==t.$route.name){e.next=15;break}if(this.$store.commit("setTemplateFormType","Edit"),!t.templateFormData.id){e.next=8;break}s.state=!0,e.next=12;break;case 8:if(!t.checkURLParamsID()){e.next=12;break}return e.next=11,t.editTemplate();case 11:s=e.sent;case 12:0!==this.templateFormData.physical_file_path.indexOf("modules/")&&(this.disableForm=!0),e.next=16;break;case 15:"ManageTemplate"===t.$route.name&&(this.$store.commit("setTemplateFormData",{data:{},action:"New"}),s.state=!0,t.displayName="");case 16:s.state?(t.tempWholePath=t.templateFormData.physical_file_path,console.log("tempWholePath",t.tempWholePath),t.displayName=t.templateFormData.path.replace("layouts/",""),t.templateFormDataChecked=!0,t.headers=t.apiHeader(),t.setBreadCrumbs(),"Edit"===t.templateFormType&&(t.displayName=t.templateFormData.path.replace("layouts/",""))):t.errorTemplates();case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},ti=ei,si=(s("52a8"),Object(x["a"])(ti,Ys,Xs,!1,null,null,null)),ii=si.exports,ai=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full sm-content-block"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 cell content-blocks-container"},[e.hasData?e._e():s("div",[s("ins-card",{attrs:{steady:""}},[s("h2",{staticClass:"title-page"},[e._v("Welcome to Content Blocks")]),s("p",[e._v("Content Blocks help you save time by allowing you to re-use common snippets of code or content across multiple pages. One content blocks can be inserted on multiple pages and any change will be reflected across all pages when you make them.")])]),s("div",{staticClass:"pages-bottom"},[s("h2",{staticClass:"pages-title-secondary"},[e._v("You don't have any content blocks yet.")]),s("p",[e._v("Would you like to create your first content block?")]),s("ins-button",{attrs:{size:"normal",label:"ADD CONTENT BLOCK",solid:"",color:"blue"},on:{onClickInsButton:e.addContentBlockHandler}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"ins-table-container"},[s("div",{staticClass:"header-buttons"},[s("ins-button",{attrs:{id:"addContentBlockBtn",label:"ADD CONTENT BLOCK",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:e.addContentBlockHandler}})],1),s("div",{staticClass:"ins-table-container"},[s("ins-base-table",{ref:"insBaseTable",attrs:{id:"insBaseTable","searchbar-placeholder":"Search by Name..."},on:{onPaginationChange:e.tablePaginationHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}}),s("div",{staticClass:"spacer large"})],1)])])])])},ri=[],ni=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ins-base-table",{attrs:{id:e.prTableId,heading:"tableHeading1","searchbar-placeholder":"ins_table_searchbar_placeholder"}})],1)},oi=[],li=s("a4bb"),ci=s.n(li),di={name:"TableComponent",mixins:[p],props:{prTableId:"",prTableData:""},data:function(){return{}},mounted:function(){this.initializeTable()},methods:{initializeTable:function(){var e=this.prTableData,t=document.getElementById(this.prTableId),s=[],i=[],a=[],r=1,n=10,o="",l="";function c(e){t.loadingScreen=!0,n=e.detail.pageSize,r=e.detail.pageNumber,m()}function d(e){t.loadingScreen=!0,o=e.detail.value,o?(i=[],s.forEach(function(e){ci()(e).forEach(function(t){if("Default Column"===t){var s=e[t];s.toLowerCase().includes(o.toLowerCase())&&i.push(e)}})}),l&&i.length>1&&i.sort(_(l)),t.pageNumber=1,m(),i.length||(t.loadingScreen=!0,t.loaderTitle="",t.loaderMessage='No result found for "'+o+'"',t.loaderIcon="")):m()}function u(e){l="asc"===e.detail.order?e.detail.keyword:"-".concat(e.detail.keyword),o?i.sort(_(l)):s.sort(_(l)),m()}function h(e){"Archive"===e.detail.action&&archiveSelection(e.detail.selections)}function p(e){"Archive"===e.detail.action&&archiveItem(e.detail.data)}function m(){var e=r*n,l=e-n+1;a=[],o?(i.forEach(function(t,s){s>=l&&s<=e?a.push(t):i.length<n&&a.push(t)}),t.totalCount=i.length):(s.forEach(function(t,s){s>=l&&s<=e&&a.push(t)}),t.totalCount=s.length),t.tableData=a,t.loadingScreen=!1}function f(){t.loadingScreen=!0,t.loaderTitle="Processing Your Data",t.loaderMessage="Just a moment, we're fetching and processing your data.",t.loaderIcon="processing";var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);s=e.list.map(function(e){return e["Default Column_Img"]="",e}),t.totalCount=e.count,t.tableHeaders=[{label:"Default Column",type:"string",sortable:!0,hasLink:!0,hasImage:!0},{label:"Date Column",type:"string",sortable:!0,hasColumnAction:!0},{label:"Number Column",type:"number",sortable:!0},{label:"Currency Column",type:"currency",sortable:!0}],m()}},i.open("GET",e,!0),i.send()}function _(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(s,i){var a=s[e]<i[e]?-1:s[e]>i[e]?1:0;return a*t}}t.loadingScreen=!0,t.bulkActions=["Archive"],t.rowActions=["Archive"],t.addEventListener("onPaginationChange",function(e){c(e)}),t.addEventListener("onTableSearch",function(e){d(e)}),t.addEventListener("onTableSort",function(e){u(e)}),t.addEventListener("onTableBulkAction",function(e){h(e)}),t.addEventListener("onTableRowAction",function(e){p(e)}),f()}}},ui=di,hi=Object(x["a"])(ui,ni,oi,!1,null,null,null),pi=hi.exports,mi={name:"ContentBlocks",mixins:[p,ys,Ze],components:{InsTable:pi},data:function(){return{hasData:!0,source:"/insites/api/get-all-partials-data.json",deleteURL:"/insites/api/delete-partial.json?id=",updateURL:"/insites/api/update-partial.json?id=",location:"",rawData:[],filteredData:[],displayedData:[],tableHeaders:[],totalCount:0,pageNumber:1,pageSize:10,searchKeyword:"",sortedKeyword:"",sortedBy:"asc",continueDeletion:!1}},methods:{addContentBlockHandler:function(){InsitesUtil.renderPage("Add Content Block","#manage-content-block"),this.$store.commit("pushFormType","add"),this.$router.push({name:"ManageContentBlock"})},extractFileName:function(e){return e.substring(e.lastIndexOf("/")+1)},tablePaginationHandler:function(e){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableSearchHandler:function(e){(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword)&&(this.searchKeyword=e.detail.value,this.pageNumber=1,this.$refs.insBaseTable.pageNumber=1,this.fetchDataFromSrc())},tableSortHandler:function(e){this.sortedKeyword=e.detail.keyword,this.sortedBy=e.detail.order,this.fetchDataFromSrc()},tableBulkActionHandler:function(e){"Delete"===e.detail.action&&this.archiveSelection(e.detail.selections)},tableRowActionHandler:function(e){"Delete"===e.detail.action?this.archiveItem(e.detail.data):"Edit"===e.detail.action?(this.$store.commit("pushPartialData",e.detail.data),this.$store.commit("pushFormType","edit"),InsitesUtil.renderPage("Edit Content Block","#/edit-content-block/".concat(e.detail.data.id)),this.$router.push("/edit-content-block/".concat(e.detail.data.id))):"View"===e.detail.action&&(this.$store.commit("pushPartialData",e.detail.data),this.$store.commit("pushFormType","view"),this.$router.push("/view-content-block/".concat(e.detail.data.id)),InsitesUtil.renderPage("View Content Block","#/edit-content-block/".concat(e.detail.data.id)))},viewItem:function(){router.push("/manage-admin-user")},archiveItem:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to delete this content block?">\n          </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(s){s.value&&t.deleteHandler(e,"Content Block has")})},deleteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this.constructVclPayload(t.Data),e.next=3,ss(i);case 3:if(a=e.sent,!a.state){e.next=8;break}if(!a.results.message.includes("Successfully")){e.next=8;break}return this.deleteItem(t,s),e.abrupt("return");case 8:toastIt("error","Failed to delete content block. File may already have been deleted.",InsitesUtil.ops());case 9:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),archiveSelection:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to delete these content blocks?">\n          </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(s){if(s.value){var i=0;t.continueDeletion=!0,e.forEach(function(s){t.continueDeletion&&(t.deleteHandler(s,"The selected content blocks have"),i++,e.length===i&&(t.continueDeletion=!1,t.$refs.insBaseTable.resetSelections()))})}})},deleteItem:function(e,t){var s=this,i="".concat(this.deleteURL).concat(e.id);this.$http.get(i).then(function(e){s.continueDeletion||(toastIt("success","".concat(t," been deleted."),InsitesUtil.ops()),s.fetchDataFromSrc())}).catch(function(e){s.continueDeletion=!1,s.fetchDataFromSrc(),toastIt("error","Failed to delete content block. Please try again.",InsitesUtil.ops())})},processTableData:function(){this.$refs.insBaseTable.tableData=this.rawData,this.$refs.insBaseTable.loadingScreen=!1},dynamicKeySort:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(s,i){var a=s[e]<i[e]?-1:s[e]>i[e]?1:0;return a*t}},fetchDataFromSrc:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.$refs.insBaseTable.loadingScreen=!0,t.$refs.insBaseTable.loaderTitle="Processing Your Data",t.$refs.insBaseTable.loaderMessage="Just a moment, we're fetching and processing your data.",t.$refs.insBaseTable.loaderIcon="processing",t.searchKeyword&&t.setModuleName(t.searchKeyword),e.next=8,ct(t.searchKeyword,t.pageNumber,t.pageSize);case 8:s=e.sent,s.state?(i=s.results?s.results.admin_liquid_partials.results:"",s.results.admin_liquid_partials.results.length?(t.setModuleName(t.searchKeyword),t.$refs.insBaseTable.totalCount=s.results.admin_liquid_partials.total_entries,t.hasData=!0,t.bindTableData(i)):(t.$refs.insBaseTable.loaderTitle="",t.hasData=!1,t.searchKeyword?t.$refs.insBaseTable.loaderMessage='No results for "'.concat(t.searchKeyword,'"'):t.$refs.insBaseTable.loaderMessage="There are no Content Blocks yet.",t.$refs.insBaseTable.loaderIcon="no-data")):(console.error("Error: "+error),t.errorHandler());case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),errorHandler:function(){this.$refs.insBaseTable.loaderTitle=void 0,this.$refs.insBaseTable.loaderMessage="Failed to load Data. Please try again.",this.$refs.insBaseTable.loaderIcon="error"},bindTableData:function(e){var t=this,s=[];e.forEach(function(i){var a={id:i.id,Path:i.path,"Last Modified":"-",Status:"enabled",Data:i};s.push(a),t.rawData=s,e.length===s.length&&t.processTableData()})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Content Blocks"):setTimeout(function(){e.setInsRendererLabel()},300)},setupInsBaseTable:function(){this.$refs.insBaseTable.bulkActions=["Delete"],this.$refs.insBaseTable.rowActions=["Edit","Delete"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("Path"),this.constructTableHeader("Status","string",!1,!0)]},constructTableHeader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0;return{label:e,type:t,sortable:s,hasTag:i,hasLink:a,hasColumnAction:r,hasImage:n}}},mounted:function(){this.setInsRendererLabel(),this.setupInsBaseTable(),this.searchKeyword="",this.sortedKeyword="",this.$store.commit("pushPartialData",null),this.fetchDataFromSrc()}},fi=mi,_i=Object(x["a"])(fi,ai,ri,!1,null,null,null),gi=_i.exports,vi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.contentBlockFormDataChecked&&e.vclInitialized?s("div",{staticClass:"grid-container-full sm-list-content-block-form sm-content-block"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 medium-12 small-12 cell content-blocks-container"},[e.resetingData?e._e():s("ins-card",{attrs:{steady:""}},[s("h2",[e._v("Content Block Details")]),s("FMInputWrap",{attrs:{id:"contentBlockName",maxlength:"50",label:"Content Block Path*","liquid-tag":e.contentBlockData.path,readonly:"view"===e.formType||"edit"===e.formType,disabled:"edit"===e.formType,errorMessage:e.errorMsg,field:"text",required:"true"},on:{input:e.onValueChange,fieldError:e.FMFormInvalidHandler},nativeOn:{keyup:function(t){return e.validateInput(t)}},model:{value:e.tempName,callback:function(t){e.tempName=t},expression:"tempName"}}),s("Redactor",{ref:"redactorEl",attrs:{label:"Content*","source-code":e.contentBlockData.content,readonly:"view"===e.formType,errorMessage:e.redactorErrorMsg,field:"text",required:"true"},on:{fieldError:e.FMFormInvalidHandler},nativeOn:{keyup:function(t){return e.valdidateRedactorInput(t)}}})],1),s("div",{staticClass:"spacer"}),s("div",{staticClass:"grid-x grid-margin-x"},["edit"===e.formType?s("div",{staticClass:"large-6 medium-4 small-12 small-order-2 medium-order-1 cell footer-btn-container"},["edit"===e.formType?s("ins-button",{attrs:{label:"DELETE",color:"information-1",size:"normal",loading:e.deletingItem,disabled:e.saveLoading||e.deletingItem},on:{onClickInsButton:e.archiveItem}}):e._e()],1):e._e(),s("div",{class:("add"===e.formType?"large-12 medium-12":"large-6 medium-8")+" small-12 small-order-1 medium-order-2 cell text-right footer-btn-container"},[s("ins-button",{attrs:{label:"CANCEL",color:"primary",outlined:"",size:"normal",disabled:e.saveLoading||e.deletingItem},on:{onClickInsButton:e.cancelContentBlockHandler}}),"edit"===e.formType||"add"===e.formType?s("ins-button",{attrs:{solid:"",color:"primary",size:"normal",label:"edit"===e.formType?"UPDATE":"SAVE",options:this.vclMasterData.info.is_enabled?"Save with commit message":"",disabled:e.saveLoading||e.deletingItem,loading:e.saveLoading},on:{onClickInsButton:e.publishHandler,onClickInsButtonOption:e.runPrompt}}):e._e()],1)])],1)])]):e._e()},bi=[],yi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-x grid-margin-x"},[s("div",{staticClass:"cell large-7 medium-12 small-12"},[s("InsInputWrap",{attrs:{label:e.label,value:e.value,field:e.field,"has-error":e.hasError,readonly:e.readonly,errorMessage:e.errorMessage,required:e.required},on:{input:e.onValueChange}})],1),s("div",{staticClass:"cell large-5 medium-12 small-12"},[s("label",{staticClass:"liquid-label"},[e._v("Liquid Tag")]),s("pre",{staticClass:"liquid-wrap"},[s("span",{pre:!0},[e._v("{%- include '")]),e._v(e._s(e.liquidTag?e.liquidTag:e.setModuleName("modules/ins_site_manager/"+e.label))),s("span",{pre:!0},[e._v("' -%}")])])])])},Ci=[],ki={name:"FMInputWrap",props:{label:String,liquidTag:{default:"modules/ins_site_manager/component_name",type:String},value:String,field:String,required:String,readonly:Boolean,errorMessage:String},mixins:[Q,ys],components:{InsInputWrap:se},data:function(){return{hasError:!1}},methods:{onValueChange:function(e){this.$emit("input",e),this.checkInput(e)},checkInput:function(e){if(this.required&&!e)return this.toggleError(!0,"".concat(this.label," is required."));if(e){var t,s;switch(this.field){case"email":t=this.validateEmail(e),s=t?"Invalid email address.":"";break;case"url":t=this.validateURL(e),s=t?"Invalid url.":"";break}this.toggleError(t,s)}else this.toggleError(!1,"")},toggleError:function(e){this.hasError=!!e,this.$emit("fieldError",this.hasError)}}},wi=ki,Ti=(s("1b99"),Object(x["a"])(wi,yi,Ci,!1,null,null,null)),xi=Ti.exports,Di={name:"NewContentBlock",mixins:[ys,p,Ze],components:{Redactor:Is,InsInputWrap:se,FMInputWrap:xi},data:function(){return{tempName:"",errorMsg:"Content block name is required.",redactorErrorMsg:"Content is required.",postURL:"/insites/api/create-partial.json",deleteURL:"/insites/api/delete-partial.json?id=",contentBlockFormDataChecked:!1,submittingForm:!1,deletingItem:!1,hasInvalidField:!1,saveAndCreateAnother:!1,saveLoading:!1,saveAndCreateAnotherLoading:!1,resetingData:!1,headers:{},missing_fields:0,tempWholePath:""}},computed:Object(A["b"])({contentBlockData:function(e){return e.ContentBlockStore.contentBlockData},formType:function(e){return e.ContentBlockStore.formType}}),methods:{valdidateRedactorInput:function(){return this.$refs.redactorEl.getEditorValue()&&"<p>\ufeff</p>\n"!==this.$refs.redactorEl.getEditorValue()&&"<p>\ufeff</p>"!==this.$refs.redactorEl.getEditorValue()?($("#content").closest(".redactor").attr("has-error",!1),this.missing_fields+=0,!this.missing_fields&&this.FMFormInvalidHandler(!1),0):($("#content").closest(".redactor").attr("has-error",!0),this.FMFormInvalidHandler(!0),1)},FMFormInvalidHandler:function(e){this.hasInvalidField=e},onValueChange:function(e){this.$emit("input",InsitesUtil.removeWhitespace(e)),"add"===this.formType?(this.contentBlockData.path=this.setModuleName("modules/ins_site_manager/".concat(InsitesUtil.removeWhitespace(this.tempName))),this.contentBlockData.physical_file_path=this.setPhysicalPath("partials",this.setModuleName(this.tempName))):(this.contentBlockData.path=this.contentBlockData.path,this.contentBlockData.physical_file_path=this.contentBlockData.physical_file_path)},saveAndCreateAnotherHandler:function(){this.saveAndCreateAnother=!0,this.formValidate()},formValidate:function(){this.missing_fields=0;return this.contentBlockData.content=this.$refs.redactorEl.getRedactorValue(),!!InsitesUtil.formValidate(Zs()($(".ins-form-field, .ins-select-value-input, .ins-textarea-field")))&&(this.FMFormInvalidHandler(!1),!0)},submitForm:function(e,t){this.submittingForm=!0,this.saveLoading=!0;var s={payload:JSON.parse(e)};this.vclMasterData.info.is_enabled?this.runVcl(s,t):this.runMutation(s,t)},runVcl:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.constructVclPayload(t.payload),"edit"!==this.formType){e.next=8;break}return this.tempWholePath!==i.file.physical_file_path&&(i.git.rename_file=this.tempWholePath),e.next=5,Qt(i);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,Yt(i);case 10:a=e.sent;case 11:if(!a.state){e.next=20;break}if(!a.results.message.includes("File already exist")){e.next=17;break}return this.overwriteHandler(t,s),e.abrupt("return");case 17:if(!a.results.message.includes("Successfully")){e.next=20;break}return this.runMutation(t,s),e.abrupt("return");case 20:this.errorHandler(a.results.response.data.message);case 21:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),overwriteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPrompt("File already exist. would you like to overwrite?","Overwrite");case 2:i=e.sent,i.value&&(this.gitOverwrite=!0,this.runVcl(t,s)),this.resetFormStatus();case 5:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),publishHandler:function(e){if(this.submittingForm=!0,this.saveLoading=!0,this.formValidate()){var t=Qe()(this.contentBlockData),s="edit"===this.formType?"updated":"added";this.submitForm(t,s)}else this.submittingForm=!1,this.saveLoading=!1},runPrompt:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.vclPromptCommitMessage();case 2:t=e.sent,t.value&&(this.gitMessage=t.value,this.publishHandler());case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clearData:function(){this.tempName="",this.$refs.redactorEl.clearCode(),this.contentBlockData.path="",this.contentBlockData.content="",this.contentBlockData.physical_file_path="",this.resetFormStatus()},resetFormStatus:function(){this.submittingForm=!1,this.deletingItem=!1,this.saveAndCreateAnother=!1,this.saveAndCreateAnotherLoading=!1,this.saveLoading=!1},runMutation:function(e,t){var s=this,i="add"===this.formType?"create":"update",a="/insites/api/".concat(i,"-partial.json");this.$http.post(a,e,{headers:this.headers}).then(function(i){return s.resHandler(i,t,e.payload)}).catch(this.errorHandler)},resHandler:function(e,t,s){if(e.data.includes)(e.data.includes("500 - Server Error")||e.data.includes("parse_json failed"))&&this.errorHandler("500 POS Server Error");else{this.clearData();var i="Content Block has been ".concat(t,".");"added"===t&&(this.contentBlockData.id=e.data.admin_liquid_partial_create.id,this.$store.commit("pushFormType","edit")),toastIt("success",i,InsitesUtil.ops())}this.resetVclData(),this.submittingForm=!1,this.saveLoading=!1},errorHandler:function(e){console.error(e),this.resetVclData(),this.resetFormStatus(),toastIt("error","Failed to save content block. Please try again.",InsitesUtil.ops())},cancelContentBlockHandler:function(){InsitesUtil.renderPage("ContentBlocks","#content-blocks"),this.$router.push("/content-blocks")},getRedactorData:function(e){this.contentBlockData.content=e},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t?"add"===this.formType||""===this.formType?(t.updateRouteLabel("Add Content Block"),this.$store.commit("pushFormType","add")):"edit"===this.formType?(t.updateRouteLabel("Edit Content Block"),this.$store.commit("pushFormType","edit")):"view"===this.formType&&(t.updateRouteLabel("View Content Block"),this.$store.commit("pushFormType","view")):setTimeout(function(){e.setInsRendererLabel()},300),this.setFormType()},setFormType:function(){"add"===this.formType?this.postURL="/insites/api/create-partial.json":"edit"===this.formType?this.postURL="/insites/api/update-partial.json":"view"===this.formType&&(this.postURL="")},archiveItem:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to delete this content block?">\n          </ins-loader>',type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Delete"}).then(function(e){e.value&&t.deleteHandler(t.contentBlockData)})},deleteHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.deletingItem=!0,s=this.constructVclPayload(t),e.next=4,ss(s);case 4:if(i=e.sent,!i.state){e.next=9;break}if(!i.results.message.includes("Successfully")){e.next=9;break}return this.deleteItem(t),e.abrupt("return");case 9:toastIt("error","Failed to delete content block. File may already have been deleted.",InsitesUtil.ops());case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteItem:function(e){var t=this,s="".concat(this.deleteURL);this.$http.post(s,e.id).then(function(e){t.continueDeletion||(toastIt("success","Content Block has been deleted.",InsitesUtil.ops()),t.$router.push("/content-blocks"),t.deletingItem=!1)}).catch(function(e){t.continueDeletion=!1,toastIt("error","Failed to delete content block. Please try again.",InsitesUtil.ops()),t.deletingItem=!1})},errorContentBlock:function(){var e=this;e.$router.push({name:"ListContentBlocks"}),e.toastInvalidIDNotification("content block")},setEditContentBlockFormData:function(e){var t={Data:e,"Last Modified":null,Name:this.capitalize(e.path.substring(e.path.lastIndexOf("/")+1)),Status:"enabled",id:e.id};this.$store.commit("pushPartialData",t),this.tempName=this.contentBlockData.path},editContentBlock:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,ut(t.checkURLParamsID());case 3:return s=e.sent,e.abrupt("return",new us.a(function(e){s.results.admin_liquid_partials.total_entries?(t.setEditContentBlockFormData(s.results.admin_liquid_partials.results[0]),e({state:!0})):e({state:!1})}));case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setBreadCrumbs:function(){var e=[];e=[As,Ns],"EditContentBlock"===this.$route.name?(this.$store.commit("pushFormType","edit"),e.push({link:"#/edit-content-block/".concat(this.checkURLParamsID()),app:!1,withSubmenu:!1,label:"Edit Content Block"})):"ManageContentBlock"===this.$route.name&&(this.$store.commit("pushFormType","add"),e.push(Ls)),InsitesUtil.setBreadCrumbs(e)}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,s={},"EditContentBlock"!==t.$route.name){e.next=15;break}if(this.$store.commit("pushFormType","edit"),!t.contentBlockData.id){e.next=9;break}t.tempName=t.contentBlockData.path,s.state=!0,e.next=13;break;case 9:if(!t.checkURLParamsID()){e.next=13;break}return e.next=12,t.editContentBlock();case 12:s=e.sent;case 13:e.next=16;break;case 15:"ManageContentBlock"===t.$route.name&&(this.$store.commit("pushFormType","add"),s.state=!0);case 16:s.state?(t.tempWholePath=t.contentBlockData.physical_file_path,t.headers=t.apiHeader(),t.setBreadCrumbs(),t.contentBlockFormDataChecked=!0):t.errorContentBlock();case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},$i=Di,Ei=(s("f688"),Object(x["a"])($i,vi,bi,!1,null,null,null)),Fi=Ei.exports,Ri=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full"},[s("div",{staticClass:"grid-x sm-file-manager"},[s("div",{staticClass:"medium-12 cell content-blocks-container"},[s("FMSelectSearch"),s("FMContainer",{on:{openModal:e.openModalHandler,openFolderModal:e.openFolderModalHandler,openTagModal:e.editTagHandler}})],1)]),s("div",{staticClass:"fm-modals"},[s("InsModal",{attrs:{showModal:e.showModal,headerLabel:"Upload File(s)",successButton:"Proceed",isLoadingSuccess:e.isLoadingSuccess,isDisabledCancel:e.isDisabledCancel,isDisabledSuccess:e.checkFilesToUpload()},on:{closeModal:e.closeModalHandler,successModal:e.successModalHandler}},[s("div",{staticClass:"grid-x footer-btn-container"},[s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("p",{staticClass:"folder-path"},[e._v("Current Folder: "+e._s(e.selectedFolder))]),s("input",{ref:"modalFiles",staticClass:"hide",attrs:{type:"file",multiple:"",fileCount:"$event.target.files.length"},on:{input:function(t){return e.setFiles(t.target.files)}}})]),s("div",{staticClass:"large-12 medium-12 small-12 cell"},[e.isDisabledCancel?e._e():s("p",{staticClass:"select-button",on:{click:e.selectFile}},[s("span",[e._v("+ CHOOSE FILE(S)")])]),e.filesToUpload.length?s("ul",{staticClass:"files-list"},e._l(e.filesToUpload,function(t,i,a){return"new"===t.status?s("li",{key:a},[s("i",{class:"icon-"+e.getFileType(t.name)+" file-icon"}),s("div",{staticClass:"file-name"},[e._v(e._s(t.name))]),"pending"===t.state?s("span",{staticClass:"remove-file icon-close",on:{click:function(s){return e.removeFile(t)}}}):"loading"===t.state?s("span",{staticClass:"spinner-uploading file-icon"},[s("i",{staticClass:"spinner"},[e._v("")])]):s("span",{staticClass:"uploading-file icon-check-2 file-icon"})]):e._e()}),0):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.filesToBeReplaced.length,expression:"filesToBeReplaced.length"}],staticClass:"existing-files"},[s("p",[e._v("Uploading will overwrite the following. Would you like to continue?")]),e.filesToUpload.length?s("ul",{staticClass:"files-list"},e._l(e.filesToUpload,function(t,i,a){return"existing"===t.status?s("li",{key:a},[s("i",{class:"icon-"+e.getFileType(t.name)+" file-icon"}),s("div",{staticClass:"file-name"},[e._v(e._s(t.name))]),"pending"===t.state?s("span",{staticClass:"remove-file icon-close",on:{click:function(s){return e.removeFile(t)}}}):"loading"===t.state?s("span",{staticClass:"spinner-uploading file-icon"},[s("i",{staticClass:"spinner"},[e._v("")])]):s("span",{staticClass:"uploading-file icon-check-2 file-icon"})]):e._e()}),0):e._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.filesToBeRestored.length,expression:"filesToBeRestored.length"}],staticClass:"archived-files"},[s("p",[e._v(e._s(e.filesToBeRestored.length>1?"These files have":"This file has")+" been archived, uploading will restore & overwrite the following.")]),e.filesToUpload.length?s("ul",{staticClass:"files-list"},e._l(e.filesToUpload,function(t,i,a){return"archived"===t.status?s("li",{key:a},[s("i",{class:"icon-"+e.getFileType(t.name)+" file-icon"}),s("div",{staticClass:"file-name"},[e._v(e._s(t.name))]),"pending"===t.state?s("span",{staticClass:"remove-file icon-close",on:{click:function(s){return e.removeFile(t)}}}):"loading"===t.state?s("span",{staticClass:"spinner-uploading file-icon"},[s("i",{staticClass:"spinner"},[e._v("")])]):s("span",{staticClass:"uploading-file icon-check-2 file-icon"})]):e._e()}),0):e._e()])])])]),s("InsModal",{attrs:{showModal:e.newFolderModal,isLoadingSuccess:e.newFolderLoadingSuccess,isDisabledCancel:e.newFolderDisabledCancel,headerLabel:"Create Folder",successButton:"Create"},on:{closeModal:e.closeFolderModalHandler,successModal:e.createFolderHandler}},[s("div",{staticClass:"grid-x footer-btn-container"},[s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("p",{staticClass:"folder-path"},[e._v("Folder Path: "+e._s(e.newFolderName))]),e.newFolderModal?s("InsInputWrap",{ref:"newFolder",attrs:{maxlength:"30",name:"form[properties_attributes][physical_path]",label:"Folder Name",placeholder:"Folder Name",errorMessage:"Folder Name is required.",field:"text",hasError:e.invalidFolderName,validate:!0,required:"true","has-error":!e.isValidFolder,disabled:e.newFolderLoadingSuccess},on:{input:e.setNewFolder},model:{value:e.inputFolderName,callback:function(t){e.inputFolderName=t},expression:"inputFolderName"}}):e._e(),s("span",{staticClass:"input-sublabel"},[e._v("The following characters are not allowed: \\/:*?|")])],1)])])],1),s("InsModal",{attrs:{showModal:e.tagModal,data:e.selectedFileData,headerLabel:"File Tag(s)",successButton:"Update Tags",successColor:"green"},on:{closeModal:e.closeTagsModalHandler,successModal:e.applyTags}},[s("form",{staticClass:"grid-x footer-btn-container",attrs:{onsubmit:"event.preventDefault()"}},[s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("p",[e._v("File Name: "+e._s(e.selectedFileData.file_name))])]),s("div",{staticClass:"large-8 medium-7 small-12 cell"},[s("InsInputWrap",{ref:"fileTags",attrs:{maxlength:"50",name:"form[properties_attributes][tags]",label:"Tags",placeholder:"Tags",field:"text"},model:{value:e.listTags,callback:function(t){e.listTags=t},expression:"listTags"}}),s("span",{staticClass:"input-sublabel"},[e._v("Separate tags by comma ( , )")])],1),s("div",{staticClass:"large-4 medium-5 small-12 cell text-right"},[s("ins-button",{staticClass:"add-tags-btn",attrs:{type:"submit",solid:"",label:"Add Tags"},on:{onClickInsButton:e.filterTags}})],1),e.selectedFileData?s("div",{staticClass:"large-12 medium-12 small-12 cell"},[s("p",[e._v("Applied Tags:")]),s("ul",{staticClass:"applied-tags-list"},e._l(e.tempTags,function(t,i,a){return s("li",{key:a,staticClass:"tagged"},[s("span",{staticClass:"ins-tags",on:{click:function(s){return e.removeTag(t)}}},[e._v(e._s(t))])])}),0)]):e._e()])])],1)},Si=[],Ii=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ins-modal-wrap",class:{show:e.showModal},on:{openModal:e.openModalHandler}},[s("ins-backdrop"),s("ins-card",{attrs:{steady:""}},[s("div",{staticClass:"ins-modal-header-wrap"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"small-10 item"},[e.headerLabel?s("h5",[e._v(e._s(this.headerLabel))]):e._e()]),s("div",{staticClass:"small-2 item text-right"},[s("button",{staticClass:"close-modal",attrs:{"data-close":"",type:"button"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isDisabledCancel,expression:"!isDisabledCancel"}],attrs:{"aria-hidden":"true"},on:{click:e.closeModalHandler}},[e._v("")])])])])]),s("div",{staticClass:"ins-modal-body-wrap"},[e._t("default")],2),s("div",{staticClass:"ins-modal-button-wrap"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"footer-btn-container large-12 medium-12 small-12 cell text-right"},[s("ins-button",{staticClass:"small-order-1",attrs:{label:"CANCEL",disabled:e.isDisabledCancel,outlined:"true"},on:{onClickInsButton:e.closeModalHandler}}),e.enableSubmit?e._e():s("ins-button",{staticClass:"small-order-2",attrs:{label:e.successButton,color:e.successColor,solid:"",disabled:e.isDisabledSuccess,loading:e.isLoadingSuccess},on:{onClickInsButton:e.successButtonHandler}})],1)])])])],1)},Ai=[],Pi={name:"InsModal",props:{showModal:Boolean,enableSubmit:Boolean,headerLabel:String,successButton:String,successColor:String,isLoadingSuccess:Boolean,isDisabledSuccess:Boolean,isDisabledCancel:Boolean,data:{}},data:function(){return{state_showModal:this.showModal}},methods:{openModalHandler:function(e,t){this.state_showModal=!0,this.data=t},closeModalHandler:function(e){this.state_showModal=!1,this.$emit("closeModal")},successButtonHandler:function(e){this.$emit("successModal")}}},Mi=Pi,Bi=(s("5453"),Object(x["a"])(Mi,Ii,Ai,!1,null,null,null)),Oi=Bi.exports,Ni=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full fm-container"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"panel small-12 cell"},[s("FMToolbar",{on:{openModal:e.openModalHandler,createFolder:e.createFolderHandler,editTag:e.editTagHandler,deleteFile:e.deleteFileHandler}})],1)]),s("div",{staticClass:"grid-x fm-body-wrap"},[s("div",{staticClass:"panel medium-4 cell",attrs:{id:"fm-panel-tree"}},[s("div",[e.loader.is_loading?s("ins-loader",{attrs:{"state-title":"Loading","state-message":"","state-icon":"processing"}}):e._e(),e.isMarketPlaceBuilderEmpty?s("ins-loader",{attrs:{"state-title":"","state-message":"","state-icon":""}}):e._e()],1),e.isMarketPlaceBuilderEmpty?e._e():s("div",[s("FMTree")],1)]),s("div",{staticClass:"panel medium-4 cell",attrs:{id:"fm-panel-list"}},[s("FMList")],1),s("div",{staticClass:"panel medium-4 cell",attrs:{id:"fm-panel-preview"}},[s("FMPreview",{on:{editTag:e.editTagHandler,deleteFile:e.deleteFileHandler,restoreFile:e.restoreFileHandler}})],1)])])},Li=[],ji=s("1970"),Ui={name:"ArchiveFileManager",mixins:[ys,$s,p],data:function(){return{formData:{form_configuration_name:"modules/insites_site_manager/insites_assets",parent_resource_id:"modules/insites_site_manager/insites_assets",form:{properties:{is_enabled:"false"}}},actionUrl:"/api/customizations",headers:""}},computed:Object(A["b"])({selectedFolder:function(e){return e.FileManagerStore.selected_folder},selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},selectedFile:function(e){return e.FileManagerStore.selected_file},listArchive:function(e){return e.FileManageStore.listArchive}}),methods:{deleteFileCustomizationData:function(){var e=this,t=e.selectedFile.id?"patch":"post",s="".concat(e.actionUrl).concat("undefined"===typeof e.selectedFile.id?"":"/".concat(e.selectedFile.id));e.formData.form.properties.is_enabled="false","post"===t&&(e.formData.form.properties.file_name=e.selectedFile.file_name,e.formData.form.properties.direct_link=e.selectedFile.direct_link,e.formData.form.properties.folder=e.selectedFile.folder,e.formData.form.properties.physical_path=e.selectedFile.physical_path,e.formData.form.properties.tags=[]),e.$http[t](s,e.formData,{headers:e.headers}).then(function(){toastIt("success","".concat(e.selectedFile.file_name," has been archived"),e.ops),e.updateNodeTreeSelectedFolder(e.selectedFolderData),e.$store.commit("resetFileManagerSelectedFile")}).catch(function(t){console.error("Error: File was not archived. Please try again.",t),toastIt("error","File was not archived. Please try again.",e.ops)})},showArchiveList:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bt();case 2:t=e.sent,this.$store.commit("updateFileManagerSearchResults",t.results.items.results),this.$store.commit("updateSearchKeyword",""),this.$store.commit("updateListArchiveFiles",!0);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),restoreCustomizationData:function(){var e=this,t="".concat(this.actionUrl,"/").concat(this.selectedFile.id);this.formData.form.properties.is_enabled="true",this.$http.patch(t,this.formData,{headers:e.headers}).then(function(t){toastIt("success","".concat(e.selectedFile.file_name," has been restored"),e.ops),e.updateNodeTreeSelectedFolder(e.selectedFolderData),e.$store.commit("resetFileManagerSelectedFile")}).catch(function(e){console.error("Error: File was not restored. Please try again.",e),toastIt("error","File was not restored. Please try again.",InsitesUtil.ops())})},checkArchivedFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this,e.next=3,Ct("physical_path",s);case 3:return a=e.sent,e.abrupt("return",new us.a(function(e){if(!a.state)return console.log("ERROR: failed to get archived data.",a.results),!1;if("localhost"===window.location.hostname){var s=i.localhostAssetManagerGetFileData(i.convertToPhysicalPath("".concat(i.selectedFolder,"/").concat(t.name)),a);s.id?e({state:!0,results:[s]}):e({state:!0,results:s})}e({state:!0,results:a.results.items.results})}));case 5:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}()},mounted:function(){this.headers=this.apiHeader()}},Hi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full sm-file-manager"},[s("div",{staticClass:"grid-x grid-padding-x"},[s("div",{staticClass:"content-blocks-container"},[s("div",{staticClass:"tree"},[s("ul",{staticClass:"tree-list"},[s("FMNodeTree",{attrs:{nodes:e.treeContent}})],1)]),s("div",{staticClass:"archive-btn",on:{click:e.showArchiveList}},[s("span",[e._v("View Archive")])])])])])},Vi=[],zi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"fm-node-tree"},[s("div",{class:(e.folders.selected_folder===e.nodes.details.id?"fm-node-tree--selected ":" ")+"fm-node-tree--container",style:"padding-left: "+16*e.nodes.details.id.split("/").length+"px"},[e.nodes.details.is_loading?s("span",{staticClass:"spinner-node-tree"},[s("i",{staticClass:"spinner"})]):e.nodes.details.id===e.root_folder?s("span",{staticClass:"root-node-tree"},[s("i",{staticClass:"icon-site-manager"})]):e.nodes.details.has_children?s("span",{staticClass:"has-child-node-tree",on:{click:function(t){return e.toggleSelectedArrow(t,e.nodes)}}},[s("i",{class:e.nodes.details.is_open?"icon-caret-down":"icon-caret-right"})]):s("span",{staticClass:"no-child-node-tree"},[s("i",[e._v("")])]),s("p",{attrs:{id:""+e.nodes.details.id.replace(/\//g,"-")},on:{click:function(t){return e.toggleSelected(t,e.nodes)}}},[s("i",{staticClass:"icon-folder"}),e._v(" "+e._s(e.nodes.details.file_name))])]),e.nodes.details.is_open?s("ul",e._l(e.nodes.children,function(e,t){return s("child-node",{key:t,attrs:{nodes:e}})}),1):e._e()])},Wi=[],qi={name:"child-node",mixins:[p,Ds,xs,$s],props:{nodes:Object},data:function(){return{toggled_parent:!1,filter_by:"physical_path",selected:"",items:{}}},computed:Object(A["b"])({folders:function(e){return e.FileManagerStore},selectedFolder:function(e){return e.FileManagerStore.selected_folder},selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},searchKeyword:function(e){return e.FileManagerStore.searchKeyword},assetsURL:function(e){return e.FileManagerStore.assets_url}}),methods:{addNewPageHandler:function(){},toggleParentNode:function(){this.toggled_parent=!this.toggled_parent},toggleSelected:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(document.querySelector(".ins-form-field").value="",this.$store.commit("updateSearchKeyword",""),this.$store.commit("updateFileManagerSearchResults",[]),s.details.id!==this.root_folder){e.next=7;break}this.updateFilesOfSelectedFolder(this.assetsURL.results.items.results,s),e.next=19;break;case 7:if(!s.details.is_open){e.next=12;break}this.selectedFolder===s.details.id?s.details.is_open=!1:this.$store.commit("resetFileManagerSelectedFile"),this.updateFilesOfSelectedFolder(this.assetsURL.results.items.results,s),e.next=19;break;case 12:if(this.selectedFolder===s.details.id&&s.details.is_open){e.next=18;break}return this.$store.dispatch("resetFMList"),e.next=16,this.updateNodeTreeSelectedFolder(s,this.assetsURL);case 16:e.next=19;break;case 18:s.details.is_open=s.details.id===this.root_folder;case 19:this.$store.dispatch("updateSelectedFolder",s);case 20:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),toggleSelectedArrow:function(e,t){var s=!t.details.is_open;this.toggleFolder(t,s)},toggleFolder:function(e,t){e.children.length||this.updateChildrenOfSelectedAssetFolder(this.assetsURL.results.items.results,e),e.details.is_open=t}},mounted:function(){var e=this;e.toggleParentNode()}},Ki=qi,Gi=(s("f361"),Object(x["a"])(Ki,zi,Wi,!1,null,null,null)),Ji=Gi.exports,Yi={name:"FMTree",mixins:[p,Ui],components:{FMNodeTree:Ji},data:function(){return{tree:{label:"Folder",children:[{label:"SubFolder",children:[{label:"sub-sub-folder 1"},{label:"sub-sub-folder 2",children:[{label:"sub-sub-sub-folder 1"},{label:"sub-sub-sub-folder 2"}]}]},{label:"SubFolder2"}]}}},computed:{treeContent:function(){var e=this;return e.$store.getters.getFileManagerDataStructure}},created:function(){},mounted:function(){}},Xi=Yi,Qi=Object(x["a"])(Xi,Hi,Vi,!1,null,null,null),Zi=Qi.exports,ea=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full fm-toolbar"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"medium-12 cell content-blocks-container"},[s("div",{staticClass:"button-holder"},[s("span",{staticClass:"tooltip--bottom1 spacer",attrs:{"tooltip-content":"Up One Folder"},on:{click:e.parentFolderHandler}},[s("i",{staticClass:"icon-arrow-up"})]),s("span",{staticClass:"tooltip--bottom1 spacer",attrs:{"tooltip-content":"Refresh"},on:{click:e.refreshFMContainerHandler}},[s("i",{staticClass:"icon-ongoing-check"})]),s("span",{staticClass:"tooltip--bottom1",attrs:{"tooltip-content":"Upload"},on:{click:e.openUploadModal}},[s("i",{staticClass:"icon-file-upload"})]),e.selectedFile.file_name?s("span",{staticClass:"tooltip--bottom1 spacer",attrs:{"tooltip-content":"Download"},on:{click:e.downloadFileHandler}},[s("i",{staticClass:"icon-file-download"})]):e._e(),s("span",{staticClass:"tooltip--bottom1",attrs:{"tooltip-content":"New Folder"},on:{click:e.createFolderHandler}},[s("i",{staticClass:"icon-create-new-folder"})]),e.selectedFile.file_name?s("span",{staticClass:"tooltip--bottom1",attrs:{"tooltip-content":"Edit Tags"},on:{click:e.editTagHandler}},[s("i",{staticClass:"icon-label"})]):e._e(),e.selectedFile.file_name?s("span",{staticClass:"tooltip--bottom1 spacer",attrs:{"tooltip-content":"Archive"},on:{click:e.deleteFileHandler}},[s("i",{staticClass:"icon-delete"})]):e._e(),s("span",{staticClass:"tooltip--bottom1",class:{active:"list"===e.toggleView},attrs:{"tooltip-content":"List View"},on:{click:e.toggleListViewHandler}},[s("i",{staticClass:"icon-view-headline"})]),s("span",{staticClass:"tooltip--bottom1",class:{active:"grid"===e.toggleView},attrs:{"tooltip-content":"Grid View"},on:{click:e.toggleGridViewHandler}},[s("i",{staticClass:"icon-view-module"})])])])])])},ta=[],sa={name:"FMToolbar",mixins:[p,Ds,$s,Ui],data:function(){return{myData:"test"}},computed:Object(A["b"])({toggleView:function(e){return e.FileManagerStore.toggleView},selectedFile:function(e){return e.FileManagerStore.selected_file},selectedFolder:function(e){return e.FileManagerStore.selected_folder}}),methods:{downloadFileHandler:function(){window.open(this.selectedFile.direct_link,"_blank")},deleteFileHandler:function(){this.$emit("deleteFile")},openUploadModal:function(){this.$emit("openModal")},createFolderHandler:function(){this.$emit("createFolder")},editTagHandler:function(){this.$emit("editTag")},refreshFMContainerHandler:function(){this.refreshNodeTree()},parentFolderHandler:function(){this.goToParentFolder(this.selectedFolder)},toggleGridViewHandler:function(){this.$store.commit("updateToggleView","grid")},toggleListViewHandler:function(){this.$store.commit("updateToggleView","list")}}},ia=sa,aa=(s("a0f9"),Object(x["a"])(ia,ea,ta,!1,null,null,null)),ra=aa.exports,na=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full fm-list"},[s("div",{staticClass:"medium-12 cell content-blocks-container fm-list-display"},[""===e.currentItemList?s("div",[s("ins-loader",{attrs:{"state-title":"List","state-message":"Please click a folder on the left"}})],1):s("div",[e.loading?s("div",[s("ins-loader",{attrs:{"state-title":"Processing","state-message":e.preloaderMessage,"state-icon":"processing"}})],1):s("div",[""!==e.searchKeyword?s("p",{staticClass:"search-result-notif"},[s("strong",[e._v("Search results for:")]),s("i",[e._v(" "+e._s(e.searchKeyword))])]):e._e(),e.listArchive?s("p",{staticClass:"search-result-notif"},[s("strong",[e._v("Archived Files:")])]):e._e(),e.showList()&&e.fileList.length>0?s("div",{staticClass:"grid-x fm-list-header hide-for-small-only"},[e._m(0),"list"===e.toggleView&&""!==e.searchKeyword||e.listArchive?s("div",{staticClass:"cell medium-auto"},[s("p",[e._v("Path")])]):e._e(),e._m(1),"list"===e.toggleView&&""!==e.searchKeyword&&"tags"===e.searchBy?s("div",{staticClass:"cell medium-auto"},[s("p",[e._v("Tags")])]):e._e()]):e._e(),""!==e.searchKeyword||e.listArchive?s("ul",{staticClass:"fm-list-main",class:[e.toggleView,{"grid-x":"grid"===e.toggleView}]},[e._l(e.searchList,function(t,i){return s("li",{key:i,staticClass:"file-details",class:[{"grid-x":"list"===e.toggleView},e.selectedFile.physical_path===t.physical_path?" selected":""],on:{click:function(s){return e.updateSelectedFile(t,s)}}},[s("div",{staticClass:"cell medium-auto"},["image"===e.getFileType(t.file_name)&&"grid"===e.toggleView?s("img",{staticClass:"img-thumbnail",attrs:{src:t.direct_link}}):e._e(),s("p",["image"!==e.getFileType(t.file_name)||"list"===e.toggleView?s("span",[s("i",{class:"icon-"+e.getFileType(t.file_name)})]):e._e(),e._v("\n                    "+e._s(t.file_name)+"\n                  ")])]),"list"!==e.toggleView||""===e.searchKeyword&&!e.listArchive?e._e():s("div",{staticClass:"cell medium-auto"},[s("p",[e._v(e._s(t.physical_path))])]),"list"===e.toggleView?s("div",{staticClass:"cell medium-auto"},[s("p",[e._v(e._s(t.date_added))])]):e._e(),"list"===e.toggleView&&""!==e.searchKeyword&&"tags"===e.searchBy?s("div",{staticClass:"cell medium-auto"},[s("p",[e._l(t.tags,function(s,i){return[e._v("\n                      "+e._s(s)),i+1<t.tags.length?[e._v(", ")]:e._e()]})],2)]):e._e()])}),e.searchList.length<=0?s("li",{staticClass:"file-details"},[e.listArchive?s("p",{staticClass:"text-center"},[e._v("Archive is empty")]):s("p",{staticClass:"text-center"},[e._v("No results found.")])]):e._e()],2):s("ul",{staticClass:"fm-list-main",class:[e.toggleView,{"grid-x":"grid"===e.toggleView}]},[e.checkIfRootFolder()?e._e():s("li",{staticClass:"file-details up-folder",on:{click:function(t){return e.fileParentFolderHandler()}}},[e._m(2)]),e._l(e.fileList,function(t){return s("li",{key:t.id,staticClass:"file-details",class:[{"grid-x":"list"===e.toggleView},e.selectedFile.physical_path===t.physical_path?" selected":""],on:{click:function(s){return e.updateSelectedFile(t,s)}}},[s("div",{staticClass:"cell medium-auto"},["image"===e.getFileType(t.file_name)&&"grid"===e.toggleView?s("img",{staticClass:"img-thumbnail",attrs:{src:t.direct_link}}):e._e(),s("p",["image"!==e.getFileType(t.file_name)||"list"===e.toggleView?s("span",[s("i",{class:"icon-"+e.getFileType(t.file_name)})]):e._e(),e._v("\n                    "+e._s(t.file_name)+"\n                  ")])]),"list"===e.toggleView?s("div",{staticClass:"cell medium-auto"},[s("p",[e._v(e._s(t.date_added))])]):e._e()])}),e.fileList.length<=0?s("li",{staticClass:"file-details no-files"},[s("p",{staticClass:"text-center"},[e._v("No files in directory.")])]):e._e()],2)])])])])},oa=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell medium-auto"},[s("p",[e._v("File Name")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell medium-auto"},[s("p",[e._v("Date Added")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("span",{staticClass:"icon-arrow-up"}),e._v("...")])}],la={name:"PreviewSelectedFileManager",mixins:[p],methods:{setFileCustomization:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this,e.next=3,ft("physical_path",t.physical_path);case 3:return i=e.sent,e.abrupt("return",new us.a(function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i.state?i.results.items.results.length?("localhost"===window.location.hostname?(r=s.localhostAssetManagerGetFileData(t.physical_path,i),s.appendCustomizationData(t,r.id?r:{})):s.appendCustomizationData(t,i.results.items.results[0]),a({state:!0,results:i.results.items.results[0]})):(s.$store.commit("updateFileManagerSelectedFile",t),a({state:!0,results:t})):console.log("error",i.results);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),appendCustomizationData:function(e,t){for(var s in t)e[s]=t[s];t.id&&(e.customization_date=+new Date(e.updated_at)/1e3,e.updated_at=InsitesUtil.formatLocalisation(e.updated_at)),this.$store.commit("updateFileManagerSelectedFile",e)}}},ca={mixins:[xs,la,p,$s],data:function(){return{sortAsc:!1,currentItemList:"as",loading:null,preloaderMessage:""}},computed:Object(A["b"])({fileList:function(e){return e.FileManagerStore.files},toggleView:function(e){return e.FileManagerStore.toggleView},searchKeyword:function(e){return e.FileManagerStore.searchKeyword},selectedFile:function(e){return e.FileManagerStore.selected_file},selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},searchList:function(e){return e.FileManagerStore.search_files},searchBy:function(e){return e.FileManagerStore.searchBy},listArchive:function(e){return e.FileManagerStore.listArchive}}),methods:{checkIfRootFolder:function(){if(this.selectedFolderData.details)return this.selectedFolderData.details.id===this.root_folder},toggleSort:function(){this.sortAsc=!this.sortAsc},fileParentFolderHandler:function(){this.goToParentFolder()},loadItemList:function(){var e=this;setTimeout(function(){e.loading=!1},1e3)},updateSelectedFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setFileCustomization(t);case 2:this.updateImagePreview(t);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),showList:function(){return"list"===this.toggleView&&(this.listArchive?this.searchList.length:""===this.searchKeyword||!!this.searchList.length)}}},da=ca,ua=(s("dd93"),Object(x["a"])(da,na,oa,!1,null,null,null)),ha=ua.exports,pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full fm-preview"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedFile.file_name,expression:"selectedFile.file_name"}],staticClass:"grid-x medium-12 cell content-blocks-container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"image"===e.getFileType(e.selectedFile.file_name),expression:"getFileType(selectedFile.file_name) === 'image'"}],staticClass:"grid-x fm-preview-header"},[e._m(0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"image"===e.getFileType(e.selectedFile.file_name),expression:"getFileType(selectedFile.file_name) === 'image'"}],staticClass:"preview-holder",attrs:{id:"imagePreview"}}),s("p",{staticClass:"text-center fm-file-icon small-12"},["image"!==e.getFileType(e.selectedFile.file_name)?s("i",{staticClass:"icon-notepad"}):e._e()]),s("ul",{staticClass:"preview-info"},[s("li",{staticClass:"grid-x"},[e._m(1),s("div",{staticClass:"small-12 medium-auto info-details"},[s("p",[e._v(e._s(e.selectedFile.file_name))])])]),s("li",{staticClass:"grid-x"},[e._m(2),s("div",{staticClass:"small-12 medium-auto info-details"},[s("div",{staticClass:"path-link-holder"},[s("a",{attrs:{href:e.selectedFile.direct_link,target:"_blank"}},[e._v(e._s(e.selectedFile.physical_path))])])])]),s("li",{staticClass:"grid-x"},[s("div",{staticClass:"medium-4 small-12 info-name"},[s("p",[e._v(e._s(e.customizationDate(e.selectedFile.customization_date,e.selectedFile.asset_url_date)?"Last Modified:":"Date Added:"))])]),s("div",{staticClass:"small-12 medium-auto info-details"},[s("p",[e._v(e._s(e.customizationDate(e.selectedFile.customization_date,e.selectedFile.asset_url_date)?e.convertPreviewDate(e.selectedFile.customization_date):e.convertPreviewDate(e.selectedFile.asset_url_date)))])])]),s("li",{staticClass:"grid-x"},[e._m(3),s("div",{staticClass:"small-12 medium-auto info-details"},[s("p",[e._v(e._s(e.customizationDate(e.selectedFile.customization_date,e.selectedFile.asset_url_date)?e.selectedFile.userData.first_name+" "+e.selectedFile.userData.last_name:"Marketplace Kit CLI"))])])]),e.selectedFile.tags.length>0?s("li",{staticClass:"grid-x"},[e._m(4),s("div",{staticClass:"small-12 medium-auto info-details"},[e._l(e.selectedFile.tags,function(t,s){return[e._v("\n            "+e._s(t)),s+1<e.selectedFile.tags.length?[e._v(", ")]:e._e()]})],2)]):e._e()]),s("div",{staticClass:"grid-x preview-btns"},[s("div",{staticClass:"small-12"},[s("span",{staticClass:"btn-holder"},[s("ins-button",{attrs:{label:e.downloadOrPreview(e.selectedFile.file_name),icon:"Preview"===e.downloadOrPreview(e.selectedFile.file_name)?"icon-external-link":"icon-file-download",solid:"",color:"blue",size:"normal"},on:{click:function(t){return e.downloadFile(e.selectedFile.direct_link)}}})],1),s("span",{staticClass:"btn-holder"},[s("ins-button",{attrs:{label:"TAGS",icon:"icon-label",solid:"",color:"blue",size:"normal"},on:{click:e.editTagHandler}})],1),s("span",{staticClass:"btn-holder"},[s("ins-button",{attrs:{label:"Liquid Tag",icon:"icon-content_copy",solid:"",color:"blue",size:"normal"},on:{click:e.liquidTagHandler}})],1),s("span",{staticClass:"btn-holder"},[e.archiveLabel(e.selectedFile.is_enabled)?s("ins-button",{attrs:{label:"Archive",icon:"icon-delete",solid:"",color:"negative",size:"normal"},on:{click:e.deleteFileHandler}}):s("ins-button",{attrs:{label:"Restore",icon:"icon-rotate",solid:"",color:"green",size:"normal"},on:{click:e.restoreFileHandler}})],1),s("div",{staticClass:"liquid-tag-container"},[s("input",{attrs:{type:"text",id:"liquid-tag-clipboard"},domProps:{value:"{{ '"+e.selectedFile.physical_path+"' | asset_url }}"}})])])])])])},ma=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell medium-auto"},[s("p",[e._v("Preview")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"medium-4 small-12 info-name"},[s("p",[e._v("File Name:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"medium-4 small-12 info-name"},[s("p",[e._v("Path:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"medium-4 small-12 info-name"},[s("p",[e._v("Modified By:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"medium-4 small-12 info-name"},[s("p",[e._v("Tags:")])])}],fa={data:function(){return{fileDimensions:""}},mixins:[xs,p],computed:Object(A["b"])({selectedFile:function(e){return e.FileManagerStore.selected_file}}),methods:{convertPreviewDate:function(e){return InsitesUtil.formatLocalisation(Ts.a.unix(e).toISOString())},customizationDate:function(e,t){return e>ks()(t)?1:0},downloadFile:function(e){window.open(e,"_blank")},editTagHandler:function(){this.$emit("editTag")},deleteFileHandler:function(){this.$emit("deleteFile")},restoreFileHandler:function(){this.$emit("restoreFile")},archiveLabel:function(e){return"true"===e||!e},liquidTagHandler:function(){var e=document.getElementById("liquid-tag-clipboard");e.select(),document.execCommand("copy"),toastIt("success","Copied to clipboard.",InsitesUtil.ops())}}},_a=fa,ga=(s("2b71"),Object(x["a"])(_a,pa,ma,!1,null,null,null)),va=ga.exports,ba={name:"FMParent",mixins:[p,Ui],components:{FMTree:Zi,FMToolbar:ra,FMList:ha,FMPreview:va},data:function(){return{loader:{is_loading:!0}}},computed:Object(A["b"])({toggleView:function(e){return e.FileManagerStore.toggleView},selectedFile:function(e){return e.FileManagerStore.selected_file},selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},isMarketPlaceBuilderEmpty:function(){var e=this,t=e.$store.getters.getFileManagerDataStructure;return 0===t.children.length?(e.loader.is_loading=!1,!0):(e.loader.is_loading=!1,!1)}}),methods:{openModalHandler:function(){this.$emit("openModal")},createFolderHandler:function(){this.$emit("openFolderModal")},editTagHandler:function(){this.$emit("openTagModal")},restoreFileHandler:function(){var e=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="green"\n            state-message="Are you sure you want to restore '.concat(this.selectedFile.file_name,'?">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonClass:"green",confirmButtonText:"Restore"}).then(function(t){t.value&&e.restoreCustomizationData()})},deleteFileHandler:function(){this.confirmDeleteFile()},confirmDeleteFile:function(){var e=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive '.concat(this.selectedFile.file_name,'?">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:"Archive"}).then(function(t){t.value&&e.deleteFileCustomizationData()})}},mounted:function(){var e=this;Object(ji["a"])(["#fm-panel-tree","#fm-panel-list","#fm-panel-preview"],{sizes:[15,65,20],minSize:280}),e.$store.dispatch("resetFMContainer")}},ya=ba,Ca=(s("f5ad"),Object(x["a"])(ya,Ni,Li,!1,null,null,null)),ka=Ca.exports,wa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full fm-selectsearch"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"medium-5 small-12 cell"}),s("div",{staticClass:"medium-offset-2 medium-5 small-12 cell"},[s("div",{staticClass:"fm-search-container grid-x"},[s("div",{staticClass:"large-4 medium-12 small-12 cell"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.setSearchParameter(t)}}},[s("InsSelectWrap",{ref:"searchBy",attrs:{label:"Search By",disabled:!1,searchable:""},on:{input:e.checkSearchBy}},[s("ins-select-option",{attrs:{label:"File Name",value:"file_name",default:""}}),s("ins-select-option",{attrs:{label:"Tags",value:"tags"}})],1)],1)]),s("div",{staticClass:"large-8 medium-12 small-12 cell fm-search-field"},[s("ins-searchbar",{ref:"keyword",staticClass:"large-8 small-12 cell",attrs:{placeholder:"Enter keyword",value:e.searchKeyword},on:{keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setSearchParameter(t)},input:e.checkSearchField}})],1)])])])])},Ta=[],xa={name:"FMSelectSearch",mixins:[p,$s],components:{InsSelectWrap:_e},computed:Object(A["b"])({selectedFolder:function(e){return e.FileManagerStore.selected_folder},folders:function(e){return e.FileManagerStore.folders},searchBy:function(e){return e.FileManagerStore.searchBy},searchKeyword:function(e){return e.FileManagerStore.searchKeyword},assets_url:function(e){return e.FileManagerStore.assets_url.results.items.results}}),methods:{searchFilesByName:function(e){var t=[],s=this;ci()(s.assets_url).forEach(function(i){var a=i.split("/").pop();if(""!=s.assets_url[i]&&a.indexOf(e)>-1){var r={file_name:i.split("/").pop(),physical_path:i};t.push(r)}}),s.removeDeletedFilesOnList(t)},removeDeletedFilesOnList:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,gt();case 2:s=e.sent,i=this.compareFilesOfSelectedFolderToCustomization(t,s.results.items.results),this.$store.commit("updateFileManagerSearchResults",i);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),searchFilesByTags:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this,e.next=3,wt(t);case 3:i=e.sent,i.state?s.$store.commit("updateFileManagerSearchResults",i.results.items.results):toastIt("error","Failed to search file. Please try again.",InsitesUtil.ops());case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),checkSearchField:function(e){""===e.target.value&&this.$store.commit("updateSearchKeyword","")},checkSearchBy:function(e){this.$store.commit("updateSearchBy",e),this.$store.commit("updateSearchKeyword","")},setSearchParameter:function(e){var t=e.target.value;this.$store.commit("updateSearchKeyword",t),this.$store.commit("updateFileManagerSelectedFile",{}),""!==t.trim()&&("tags"===this.searchBy?this.searchFilesByTags(t):this.searchFilesByName(t))}}},Da=xa,$a=Object(x["a"])(Da,wa,Ta,!1,null,null,null),Ea=$a.exports,Fa={name:"NewFolderManager",data:function(){return{selectFolderData:{},newFolderName:"",formData:{form_configuration_name:"modules/insites_site_manager/insites_assets",parent_resource_id:"modules/insites_site_manager/insites_assets",form:{properties:{file_name:"",folder:"",is_enabled:"true"}}},headers:"",method:"post",actionUrl:"/api/customizations"}},computed:Object(A["b"])({selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data}}),mixins:[$s,p],methods:{getFolderDataMethod:function(e){return"create"===e?"post":"put"},getFolderActionURL:function(e){return e?this.actionUrl="".concat(this.actionUrl,"/").concat(e):this.actionUrl},buildFolderData:function(e,t){return this.formData.form.properties.physical_path=this.convertToPhysicalPath(e),this.formData.form.properties.folder=this.convertToFolder(e),this.formData.form.properties.is_enabled="delete"===t?"false":"true",Qe()(this.formData)},createAssetFolder:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s,i,a){var r,n,o,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this,e.next=3,this.checkIfFolderNameExist(i);case 3:return n=e.sent,o=this.getFolderDataMethod(s),e.abrupt("return",new us.a(function(e){n?e({state:!1,results:{},type:"error",message:"Folder name already exist."}):r.$http[o](r.getFolderActionURL(a),r.buildFolderData(i,o),{headers:t}).then(function(t){var i=l.selectedFolderData;i.details.has_children=!0,r.$store.commit("updateFileManagerSelectedFolderData",i),e({state:!0,results:t,type:"success",message:"Folder has been ".concat(s,"d.")})}).catch(function(t){e({state:!1,results:t,type:"error",message:"Error ".concat(s," folder. Please try again.")})})}));case 6:case"end":return e.stop()}},e,this)}));function t(t,s,i,a){return e.apply(this,arguments)}return t}(),checkIfFolderNameExist:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:if(s=e.sent,i="",!s.state){e.next=9;break}for(a in s.results.items.results)0===a.indexOf(this.convertToPhysicalPath(t))&&(i=a);return e.abrupt("return",i);case 9:return console.error("error: ",s.error.messsage),e.abrupt("return");case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},Ra={name:"NewTagManager",mixins:[$s,la],data:function(){return{tagsList:[],tagData:{form_configuration_name:"modules/insites_site_manager/insites_assets",parent_resource_id:"modules/insites_site_manager/insites_assets",form:{properties:{tags:[],is_enabled:"true"}}},fileData:{},headers:"",method:"post",actionUrl:"/api/customizations"}},computed:Object(A["b"])({selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},selectedFile:function(e){return e.FileManagerStore.selected_file}}),methods:{setNewTagData:function(e,t,s,i,a){this.fileData=e,this.headers=t,this.tagsList=i,this.actionUrl="/api/customizations","create"===s?this.method="post":(this.method="put",a&&(this.actionUrl="".concat(this.actionUrl,"/").concat(a))),this.buildTagData()},buildTagData:function(){this.tagData.form.properties.physical_path=this.fileData.physical_path,this.tagData.form.properties.direct_link=this.fileData.direct_link,this.tagData.form.properties.file_name=this.fileData.file_name,this.tagData.form.properties.folder=this.fileData.physical_path.split("/").join("|"),this.tagData.form.properties.tags=this.tagsList,this.tagData.form.properties.is_enabled="delete"===this.method?"false":"true";var e=Qe()(this.tagData);this.submitTagData(e)},submitTagData:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=this,e.next=3,this.$http[this.method](this.actionUrl,t,{headers:this.headers}).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i.$store.commit("updateTags",i.tagsList),a="post"===i.method?"created":"updated",a="delete"===i.method?"deleted":a,toastIt("success","Tags has been ".concat(a),InsitesUtil.ops()),e.next=6,s.updateNodeTreeSelectedFolder(s.selectedFolderData);case 6:return e.next=8,s.setFileCustomization(s.selectedFile);case 8:return s.updateImagePreview(s.selectedFile),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){var t="post"===i.method?"creating":"updating";return t="delete"===i.method?"deleting":t,toastIt("error","Error ".concat(t," tags. Please try again."),InsitesUtil.ops()),!1});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},Sa={data:function(){return{data:Object,showModal:!1,fileCount:0,headers:"",formData:{form:{properties:{physical_path:"",direct_link:"",file_name:"",folder:"",tags:[],is_enabled:"true"}}},url:"",uploadPath:"",invalidFolderName:!1,newFolderModal:!1,newFolderName:"",inputFolderName:"",tagModal:!1,listTags:"",tempTags:[],duplicateFiles:!1,filesToBeReplaced:[],filesToBeRestored:[],existingFileNames:[],isDisabledSuccess:!0,isLoadingSuccess:!1,isDisabledCancel:!1,newFolderLoadingSuccess:!1,newFolderDisabledCancel:!1,isValidFolder:!0}},mixins:[ys,Es,Fa,Ra,Ds,$s,Ui],props:{},components:{FMSelectSearch:Ea,FMContainer:ka,InsModal:Oi,InsInputWrap:se},computed:Object(A["b"])({options:function(e){return e.FileManagerStore.folders},selectedFolder:function(e){return e.FileManagerStore.selected_folder},selectedFolderData:function(e){return e.FileManagerStore.selected_folder_data},selectedFiles:function(e){return e.FileManagerStore.files},archivedFiles:function(e){return e.FileManagerStore.archived_files},selectedFileData:function(e){return e.FileManagerStore.selected_file},filesToUpload:function(e){return e.FileManagerStore.files_to_upload},assetsURL:function(e){return e.FileManagerStore.assets_url}}),methods:{checkFilesToUpload:function(){return this.filesToUpload.length<1},checkFileExist:function(){var e=this;for(var t in e.existingFileNames=[],e.filesToBeReplaced=[],e.filesToBeRestored=[],e.selectedFiles.forEach(function(t){e.existingFileNames.push(t.file_name)}),e.filesToUpload){e.existingFileNames.includes(e.filesToUpload[t].name)&&e.filesToBeReplaced.push(e.filesToUpload[t].name);var s=e.checkStoredArchivedFile("".concat(e.convertToPhysicalPath("".concat(e.selectedFolder,"/").concat(e.filesToUpload[t].name))));s&&e.filesToBeRestored.push(s)}for(var i=this.filesToUpload,a=0;a<i.length;a++)e.filesToBeReplaced.includes(i[a].name)?i[a].status="existing":e.filesToBeRestored.includes(i[a].name)&&(i[a].status="archived");this.$store.commit("updateFilesToUpload",i)},checkStoredArchivedFile:function(e){for(var t=this,s="",i=0;i<t.archivedFiles.length;i++)if(t.archivedFiles[i].physical_path===e){s=t.archivedFiles[i].file_name;break}return s},removeFile:function(e){var t=this.filesToUpload.indexOf(e),s=this.filesToUpload;-1!=t&&s.splice(t,1),this.$store.commit("updateFilesToUpload",s),this.checkFileExist()},setFiles:function(e){var t=this,s=new FormData,i=t.filesToUpload,a=Object(I["map"])(i,"name");e.length&&(Zs()(Array(e.length).keys()).map(function(t){a.includes(e[t].name)||(s.append(e[t],e[t].name),e[t].status="new",e[t].name&&i.push(e[t]))}),t.$store.commit("updateFilesToUpload",i),t.checkFileExist())},selectFile:function(){this.$refs.modalFiles.click()},listAssetFolders:function(){this.refreshNodeTree()},openModalHandler:function(){this.isLoadingSuccess=!1,this.isDisabledCancel=!1,this.showModal=!0},closeModalHandler:function(){this.showModal=!1,this.$refs.modalFiles.value="",this.$store.commit("resetFilesToUpload"),this.existingFileNames=[],this.filesToBeReplaced=[],this.filesToBeRestored=[]},setPOSField:function(e,t){this.formData.form.properties[e]=t},editTagHandler:function(){this.tagModal=!0,this.type="edit",this.tempTags=this.selectedFileData.tags?JSON.parse(Qe()(this.selectedFileData.tags)):[]},successModalHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(s in this.type="upload",this.isLoadingSuccess=!0,this.isDisabledCancel=!0,t=[],this.filesToUpload)this.filesToUpload[s].state="loading",t.push(this.filesToUpload[s]);return this.$store.commit("loadingStateFilesToUpload",t),e.next=8,this.initializeUploadFiles(this.selectedFolder,this.filesToUpload);case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openFolderModalHandler:function(){this.$store.commit("resetFilesToUpload"),this.newFolderDisabledCancel=!1,this.newFolderLoadingSuccess=!1,this.newFolderModal=!0,this.newFolderName="".concat(this.selectedFolder,"/"),this.inputFolderName=""},closeFolderModalHandler:function(){this.newFolderDisabledCancel=!1,this.newFolderLoadingSuccess=!1,this.newFolderModal=!1,this.invalidFolderName=!1,this.isValidFolder=!0},createFolderHandler:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.newFolderDisabledCancel=!0,this.newFolderLoadingSuccess=!0,Object(I["isEmpty"])(this.newFolderName)||this.newFolderName==="".concat(this.selectedFolder,"/")){e.next=16;break}return e.next=5,this.createAssetFolder(this.headers,"create",this.newFolderName);case 5:if(t=e.sent,toastIt(t.type,t.message,InsitesUtil.ops()),!t.state){e.next=12;break}return e.next=10,this.updateNodeTreeSelectedFolder(this.selectedFolderData);case 10:e.next=13;break;case 12:this.invalidFolderName=!0;case 13:this.closeFolderModalHandler(),e.next=19;break;case 16:this.isValidFolder=!1,this.newFolderDisabledCancel=!1,this.newFolderLoadingSuccess=!1;case 19:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setNewFolder:function(e){this.inputFolderName=e.replace(/[ \/\\\:\"\*\?\|]/g,"-"),this.newFolderName=this.inputFolderName?"".concat(this.selectedFolder,"/").concat(this.inputFolderName,"/"):"".concat(this.selectedFolder,"/"),this.isValidFolder=!0},closeTagsModalHandler:function(){this.tagModal=!1},filterTags:function(){var e=this,t=this;this.listTags&&(this.listTags.split(",").filter(function(s){e.tempTags||(e.tempTags=[]),""!==s.trim()&&!(t.tempTags.indexOf(s)>=0)&&t.tempTags.push(s)}),this.listTags="")},removeTag:function(e){var t=this.tempTags.indexOf(e);-1!=t&&this.tempTags.splice(t,1)},applyTags:function(){var e=this.selectedFileData.id,t=e?"update":"create";this.setNewTagData(this.selectedFileData,this.headers,t,this.tempTags,e)}},mounted:function(){this.listAssetFolders(),this.uploadPath=this.selectedFolder,this.$store.commit("resetFilesToUpload")},destroyed:function(){}},Ia=Sa,Aa=(s("d75d"),Object(x["a"])(Ia,Ri,Si,!1,null,null,null)),Pa=Aa.exports,Ma=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full pages vcl-wrap"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-12 cell"},[s("div",{staticClass:"spacer small"}),e.hasData&&e.vclMasterData?s("div",{staticClass:"page-view-filter"},[s("span",{staticClass:"filter-label"},[e._v("Filter:")]),s("InsSelectWrap",{attrs:{label:"Status",button:""},on:{input:e.tableFilterHandler},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[s("ins-select-option",{attrs:{label:"Active",value:"true",default:""}}),s("ins-select-option",{attrs:{label:"Archived",value:"false"}})],1)],1):e._e(),e.hasData&&e.vclMasterData?e._e():s("div",[s("div",{staticClass:"spacer small"}),s("ins-card",{attrs:{steady:""}},[s("h2",{staticClass:"title-page h2desc"},[e._v("Welcome to Version Control")]),s("p",{staticClass:"pdesc"},[e._v("Version Control allows you to keep track of your files in your repository. Currently supported repositories are "),s("strong",[e._v("'GitHub and AWS Code Commit'")])])]),e.vclMasterData?e._e():s("div",{staticClass:"pages-bottom"},[s("h2",{staticClass:"pages-title-secondary h2desc"},[e._v("Version Control has not been setup yet.")]),s("div",{staticClass:"spacer small"}),s("ins-button",{attrs:{label:"CONFIGURE REPOSITORY",solid:""},on:{onClickInsButton:e.goToSetupVcl}})],1),!e.vclUsers.results.length&&e.vclMasterData?s("div",{staticClass:"pages-bottom"},[s("h2",{staticClass:"pages-title-secondary h2desc"},[e._v("Version Control has no users yet.")]),s("div",{staticClass:"spacer small"}),s("ins-button",{attrs:{label:"CONFIGURE A USER",solid:"",disabled:!e.adminUsersNoProfile.length},on:{onClickInsButton:e.goToVclNewUser}}),s("ins-button",{attrs:{label:"CONFIGURE REPOSITORY",solid:""},on:{onClickInsButton:e.goToSetupVcl}})],1):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData&&e.vclMasterData,expression:"hasData && vclMasterData"}],staticClass:"header-buttons"},[e.vclInitialized?s("ins-button",{attrs:{label:"CONFIGURE REPOSITORY",solid:"",color:"primary",size:"normal"},on:{onClickInsButton:e.goToSetupVcl}}):e._e(),e.vclInitialized?s("ins-button",{attrs:{label:"CONFIGURE A USER",solid:"",color:"primary",size:"normal",disabled:!e.adminUsersNoProfile.length},on:{onClickInsButton:e.goToVclNewUser}}):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData&&e.vclMasterData,expression:"hasData && vclMasterData"}],staticClass:"ins-table-container"},[s("ins-base-table",{ref:"insBaseTable",attrs:{"searchbar-placeholder":"Search by Name or Email..."},on:{onPaginationChange:e.tablePaginationHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler}}),s("div",{staticClass:"spacer large"})],1)])])])},Ba=[],Oa={data:function(){return{insRendererEl:void 0}},methods:{getAuthToken:function(){return"localhost"!==window.location.hostname?JSON.parse(document.getElementById("formConfig").innerHTML):""},goBack:function(){var e=JSON.parse(window.localStorage.getItem("ins_breadcrumbs"));e.pop();var t=parent.document.querySelector("ins-renderer");t.updateRoute(e)},renderPage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={label:e,link:t,withSubmenu:s,app:i},r=JSON.parse(window.localStorage.getItem("ins_breadcrumbs")),n=parent.document.querySelector("ins-renderer");r.push(a),n.updateRoute(r)},capitalize:function(e){return this.checkValue(e).split("_").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},validateInput:function(e){return e=e.target?e.target:e,e.value?(this.validFieldNotif(e),0):(this.invalidFieldNotif(e),1)},invalidFieldNotif:function(e){e.closest("ins-input").setAttribute("has-error",!0)},validFieldNotif:function(e){e.closest("ins-input").removeAttribute("has-error")},checkURLinput:function(e,t){var s=e.split(" ").join("-").toLowerCase();return"text"===t?s.replace(/[^a-z0-9-\/]/g,""):s},convertToPhysicalPath:function(e){return e=e.split("/"),e.shift(),e=e.join("/"),e},removeArrLastIndex:function(e){return e=e.split("/"),e.pop(),e=e.join("/"),e},convertToFolder:function(e){return e.replace(/\//g,"|")},returnFormattedDate:function(e){return InsitesUtil.formatLocalisation(e)},localhostAssetManagerGetFileData:function(e,t){for(var s=[],i=0;i<t.results.data.items.results.length;i++){var a=t.results.data.items.results[i];if(a.physical_path===e){s=t.results.data.items.results[i];break}}return s}}},Na={link:"",app:!1,withSubmenu:!0,label:"Site Manager",formattedRoute:"#/version-control"},La={link:"#/version-control",app:!1,withSubmenu:!1,label:"Version Control"},ja={label:"Configure A User",link:"#/version-control/add-user",withSubmenu:!1,app:!1},Ua={label:"Configure Repository",link:"#/version-control/setup",withSubmenu:!1,app:!1},Ha={label:"Update User Configuration",link:"#/version-control/update-user",withSubmenu:!1,app:!1},Va={name:"ListVcl",mixins:[Oa],components:{InsSelectWrap:_e},data:function(){return{hasData:!0,searchKeyword:"",sortedKeyword:"",sortedBy:"asc",pageNumber:1,pageSize:10,vclUsers:{results:[]},continueDeletion:!1,filter:"true"}},computed:Object(A["b"])({vclInitialized:function(e){return e.VclStore.vclInitialized},vclMasterData:function(e){return e.VclStore.vclMasterData},adminUsersNoProfile:function(e){return e.VclStore.adminUsersNoProfile}}),methods:{tableFilterHandler:function(){this.fetchDataFromSrc(),"true"===this.filter?(this.$refs.insBaseTable.bulkActions=["Archive","Delete"],this.$refs.insBaseTable.rowActions=["Update","Archive","Delete"]):"false"===this.filter&&(this.$refs.insBaseTable.bulkActions=["Restore"],this.$refs.insBaseTable.rowActions=["Restore"])},tablePaginationHandler:function(e){this.$refs.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableSearchHandler:function(e){(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword)&&(this.searchKeyword=e.detail.value,this.pageNumber=1,this.$refs.insBaseTable.pageNumber=1,this.fetchDataFromSrc())},tableSortHandler:function(e){switch(e.detail.keyword){case"Name":this.sortedKeyword="first_name";break;case"Last Updated":this.sortedKeyword="updated_at";break;default:this.sortedKeyword=e.detail.keyword}this.sortedBy=e.detail.order,this.fetchDataFromSrc()},tableBulkActionHandler:function(e){switch(e.detail.action){case"Archive":case"Restore":this.archiveRestoreSelection(e.detail.selections);break}},tableRowActionHandler:function(e){var t=e.detail.data;e.detail.action;switch(e.detail.action){case"Archive":case"Restore":this.archiveRestoreItem(e.detail.data);break;case"Update":this.goToVclUpdateUser(t);break;case"Delete":this.archiveRestoreItem(e.detail.data,!0);break}},constructSwalWords:function(e){return e?{word:"delete",buttonText:"Delete",buttonClass:"negative"}:{word:"true"===this.filter?"archive":"restore",buttonText:"true"===this.filter?"Archive":"Restore",buttonClass:"true"===this.filter?"negative":"positive"}},archiveRestoreItem:function(e,t){var s=this,i=this.constructSwalWords(t);this.$store.getters.getCurrentUserId===e.rawData.id?swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="Are you sure you want to '.concat(i.word,' this user?">\n            </ins-loader>'),type:"",width:330,showCancelButton:!0,confirmButtonClass:i.buttonClass,confirmButtonText:i.buttonText}).then(function(a){a.value&&s.updateItem(e.rawData,"User has",i.word,t)}):this.notAllowed(i.word)},archiveRestoreSelection:function(e,t){var s=this,i=this.constructSwalWords();swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="Are you sure you want to '.concat(i.word,' this users?">\n            </ins-loader>'),type:"",width:330,showCancelButton:!0,confirmButtonClass:i.buttonClass,confirmButtonText:i.buttonText}).then(function(a){if(a.value){var r=0;s.continueDeletion=!0,e.forEach(function(){var a=Object(h["a"])(regeneratorRuntime.mark(function a(n){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(!s.continueDeletion){a.next=5;break}return a.next=3,s.updateItem(n.rawData,"The selected users have",i.word,t);case 3:r++,e.length===r&&(s.continueDeletion=!1,s.deleteSuccessHandler("The selected users have",i.word,t));case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())}})},notAllowed:function(e){this.deletingUser=!1,this.sendingForm=!1,swal({html:'\n          <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="You can only '.concat(e,' your own profile.">\n          </ins-loader>'),width:330})},updateItem:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s,i,a){var r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.constructPayload(t),n={state:!0},!a){e.next=6;break}return e.next=5,Gt(r);case 5:n=e.sent;case 6:if(!n.state){e.next=14;break}return a&&(r.cred.insites_key="deleted"),e.next=10,Bt(r);case 10:if(o=e.sent,!o.state){e.next=14;break}return this.continueDeletion||(a&&this.$store.commit("addAdminUsersNoProfile",t),this.deleteSuccessHandler(s,i)),e.abrupt("return");case 14:this.deleteErrHandler(i);case 15:case"end":return e.stop()}},e,this)}));function t(t,s,i,a){return e.apply(this,arguments)}return t}(),deleteSuccessHandler:function(e,t){toastIt("success","".concat(e," been ").concat(t,"d."),InsitesUtil.ops()),this.fetchDataFromSrc()},deleteErrHandler:function(e){toastIt("error","Failed to ".concat(e," user. Please try again."),InsitesUtil.ops()),this.continueDeletion=!1,this.fetchDataFromSrc()},errorHandler:function(){var e="Failed to load users. Please try again.";this.setInsBaseTableLoader("",e,"error")},bindTableData:function(e){var t=this;this.$refs.insBaseTable.tableData=e.map(this.constructTableData),this.hasData=!0,this.$refs.insBaseTable.loadingScreen=!1,setTimeout(function(){t.$refs.insBaseTable.totalCount=t.vclUsers.total_entries},100)},setInsBaseTableLoader:function(e,t,s){this.$refs.insBaseTable.loadingScreen=!0,this.$refs.insBaseTable.loaderTitle=e,this.$refs.insBaseTable.loaderMessage=t,this.$refs.insBaseTable.loaderIcon=s},setupInsBaseTable:function(){this.$refs.insBaseTable.bulkActions=["Archive","Delete"],this.$refs.insBaseTable.rowActions=["Update","Archive","Delete"],this.$refs.insBaseTable.tableHeaders=[this.constructTableHeader("Name","string",!0),this.constructTableHeader("Email","string",!0),this.constructTableHeader("Last Updated","string",!0),this.constructTableHeader("Status","string",!1,!0)]},constructTableHeader:function(e,t,s,i,a,r,n){return{label:e,type:t,sortable:s,hasTag:i,hasLink:a,hasColumnAction:r,hasImage:n}},constructTableData:function(e){var t="".concat(e.first_name," ").concat(e.last_name);return{rawData:e,id:e.id,Name:t,Email:e.email,"Last Updated":InsitesUtil.formatLocalisation(e.updated_at),Status:e.insites_vcl_user_profile.properties.is_enabled?"active":"archived"}},constructPayload:function(e){var t=e.insites_vcl_user_profile.properties;return{cred:{instance_url:t.instance_url,insites_key:t.insites_key,info:{admin_user_id:e.id,last_update_by:this.$store.getters.getCurrentUserId,is_enabled:"true"===this.filter?"false":"true"}}}},fetchDataFromSrc:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setInsBaseTableLoader("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),e.next=3,It(this.pageNumber,this.pageSize,this.sortedKeyword,this.sortedBy,this.searchKeyword,this.filter);case 3:if(t=e.sent,!t.state){e.next=7;break}return this.processTableData(t),e.abrupt("return");case 7:this.errorHandler();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),processTableData:function(e){if(e.state)if(this.vclUsers=e.results.items,this.vclUsers.results.length)this.$refs.insBaseTable.totalCount=this.vclUsers.total_entries,this.bindTableData(this.vclUsers.results);else if(this.searchKeyword){var t='No results for "'.concat(this.searchKeyword,'"');this.setInsBaseTableLoader("",t,"no-data")}else if("false"===this.filter){var s="No archived users yet.";this.setInsBaseTableLoader("",s,"no-data")}else this.hasData=!1;else this.hasData=!0,this.setInsBaseTableLoader(void 0,"Failed to get VCL Users","error")},activateRoutes:function(){var e=[Na,La];InsitesUtil.setBreadCrumbs(e)},goToSetupVcl:function(){this.renderPage("Configure Repository","#/version-control/setup"),this.vclMasterData?this.$store.commit("setVclFormType","update-setup"):this.$store.commit("setVclFormType","setup"),this.$router.push("/version-control/setup")},goToVclNewUser:function(){this.renderPage("Configure A User","#/version-control/add-user"),this.$store.commit("setVclFormType","new"),this.$router.push("/version-control/add-user")},goToVclUpdateUser:function(e){var t="/version-control/update-user/".concat(e.id);this.$store.commit("setVclFormType","update"),this.$store.commit("setSelectedAdminUser",e.rawData),this.$router.push(t),this.renderPage("Update User Configuration","#".concat(t))}},mounted:function(){this.setupInsBaseTable(),this.fetchDataFromSrc()}},za=Va,Wa=(s("7bd1"),Object(x["a"])(za,Ma,Ba,!1,null,"02e5b4b8",null)),qa=Wa.exports,Ka=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full mvc-wrap"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-8 medium-12 small-12 cell"},[e.vclInitialized?e._e():s("ins-card",{attrs:{steady:""}},[s("div",{staticClass:"spacer large"}),s("ins-loader",{attrs:{"state-title":"Processing Your Data","state-message":"Just a moment, we're fetching and processing your data.","state-icon":"processing"}}),s("div",{staticClass:"spacer large"})],1),e.vclInitialized?s("div",{staticClass:"custom-ins-card"},["new"===e.vclFormType&&e.adminUsersNoProfile.length?s("InsSelectWrap",{attrs:{label:"Admin User*",searchable:"",placeholder:"Please select an Admin User","has-error":!!e.errors.admin_user_id,"error-message":e.errors.admin_user_id,readonly:"update"===e.vclFormType},on:{fieldError:e.fieldErrorHandler},model:{value:e.tempAdminUserId,callback:function(t){e.tempAdminUserId=t},expression:"tempAdminUserId"}},e._l(e.adminUsersNoProfile,function(e){return s("ins-select-option",{key:e.id,attrs:{label:e.first_name+" "+e.last_name,value:e.id}})}),1):e._e(),"update"===e.vclFormType?s("InsInputWrap",{attrs:{label:"Admin User*",readonly:"",placeholder:"Please enter an Admin User",maxlength:"120"},model:{value:e.selectedUserName,callback:function(t){e.selectedUserName=t},expression:"selectedUserName"}}):e._e(),e.vclMasterData.info.git_url.includes("codecommit")?s("InsInputWrap",{attrs:{label:"Access Key*",placeholder:"Please enter an Access Key",required:"true",maxlength:"120",validate:!0,"has-error":!!e.errors.access_key,"error-message":e.errors.access_key},on:{fieldError:e.fieldErrorHandler},model:{value:e.tempAccessKey,callback:function(t){e.tempAccessKey=t},expression:"tempAccessKey"}}):e._e(),s("InsTextareaWrap",{attrs:{label:"Private Key*",placeholder:"Please enter the Private Key","has-error":!!e.errors.id_rsa,"error-message":e.errors.id_rsa},model:{value:e.tempIdRsa,callback:function(t){e.tempIdRsa=t},expression:"tempIdRsa"}}),s("div",{staticClass:"ins-note-wrap"},[s("em",[e._v("Please note that the Private Key "+e._s(e.vclMasterData.info.git_url.includes("codecommit")?"and Access Key ":"")+"will be stored securely on our Insites Data Storage and will not be displayed here for security reasons.")])])],1):e._e()],1)]),s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-4 medium-6 small-12 cell"},[s("div",{staticClass:"spacer small"}),"update"===e.vclFormType?s("ins-button",{attrs:{label:"ARCHIVE",color:"information-1",size:"normal",options:"DELETE"},on:{onClickInsButton:e.archiveUser,onClickInsButtonOption:e.deleteUser}}):e._e()],1),s("div",{staticClass:"large-4 medium-6 small-12 cell text-right"},[s("div",{staticClass:"spacer small"}),s("ins-button",{attrs:{label:"CANCEL",outlined:""},on:{onClickInsButton:e.goBackToListView}}),e.vclInitialized?s("ins-button",{attrs:{solid:"",label:"TEST AND "+e.buttonLabel,disabled:e.sendingForm},on:{onClickInsButton:e.validateData}}):e._e()],1)])])},Ga=[],Ja={name:"ManageVcl",mixins:[Oa],components:{InsInputWrap:se,InsSelectWrap:_e,InsTextareaWrap:gs},computed:Object(A["b"])({instanceUrl:function(e){return e.VclStore.instanceUrl},adminUsersNoProfile:function(e){return e.VclStore.adminUsersNoProfile},selectedAdminUser:function(e){return e.VclStore.selectedAdminUser},vclFormType:function(e){return e.VclStore.vclFormType},vclMasterData:function(e){return e.VclStore.vclMasterData},vclInitialized:function(e){return e.VclStore.vclInitialized}}),data:function(){return{buttonLabel:"ADD",errors:{admin_user_id:"",accessKey:"",id_rsa:""},sendingForm:!1,tempAdminUserId:"",tempIdRsa:"",tempAccessKey:"",selectedUserName:"",deletingUser:!1}},methods:{fieldErrorHandler:function(e){e.target.$el.hasError=e.error,e.target.$el.errorMessage="".concat(e.target.$el.label," is required.").replace("*","")},gitErrorHandler:function(e){var t=e.target.$el.value;e.target.$el.hasError=e.error,e.target.$el.errorMessage="".concat(e.target.$el.label," is required.").replace("*",""),t&&(this.isGitUrl(t)?this.isGitUrlSupported(t)||(e.target.$el.hasError=!0,e.target.$el.errorMessage="Repository not yet supported."):(e.target.$el.hasError=!0,e.target.$el.errorMessage="Not a valid Repository URL"))},hasRequiredValues:function(){var e=0;return""===this.tempAdminUserId?(this.errors.admin_user_id="Admin User is required.",e++):this.errors.admin_user_id="",this.vclMasterData.info.git_url.includes("codecommit")&&(""===this.tempAccessKey?(this.errors.access_key="Access Key is required.",e++):this.errors.access_key=""),""===this.tempIdRsa?(this.errors.id_rsa="Private Key is required.",e++):this.errors.id_rsa="",!e},validateData:function(){this.sendingForm=!0,this.$store.getters.getCurrentUserId===this.selectedAdminUser.id||"new"===this.vclFormType?this.hasRequiredValues()?this.sendData():this.sendingForm=!1:this.notAllowed("configure")},checkAccessKey:function(){var e="deleted";return this.vclMasterData.info.git_url.includes("codecommit")&&(e=this.tempAccessKey),e},constructPayload:function(){var e=this.$store.getters.getAdminUserById(this.tempAdminUserId),t=this.checkAccessKey();return{cred:{instance_url:this.instanceUrl,insites_key:this.selectedAdminUser.insites_vcl_user_profile.properties.insites_key,info:{access_key:t,master_key:!1,email:e.email,id_rsa:this.tempIdRsa,admin_user_id:this.tempAdminUserId,git_url:this.vclMasterData.info.git_url,last_update_by:this.$store.getters.getCurrentUserId}}}},constructUpdatePayload:function(){var e=this.checkAccessKey();return{cred:{instance_url:this.instanceUrl,insites_key:this.selectedAdminUser.insites_vcl_user_profile.properties.insites_key,info:{access_key:e,id_rsa:this.tempIdRsa,admin_user_id:this.tempAdminUserId,last_update_by:this.$store.getters.getCurrentUserId,git_url:this.vclMasterData.info.git_url}}}},sendData:function(){switch(this.sendingForm=!0,this.vclFormType){case"new":this.createUser();break;case"update":this.updateUser();break}},createUser:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.constructPayload(),e.next=3,zt(t);case 3:if(s=e.sent,!s.state||!s.results.insites_key){e.next=10;break}return t.cred.insites_key=s.results.insites_key,t.cred.info.is_enabled="true",e.next=9,this.runMutation(t,"configure");case 9:return e.abrupt("return",e.sent);case 10:if(!s.results.response.data.message){e.next=12;break}return e.abrupt("return",this.showPermissionError());case 12:this.showError("create");case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.constructUpdatePayload(),e.next=3,qt(t);case 3:if(s=e.sent,!s.state){e.next=9;break}return t.cred.info.is_enabled="true",e.next=8,this.runMutation(t,"configure");case 8:return e.abrupt("return",e.sent);case 9:if(!s.results.response.data.message){e.next=11;break}return e.abrupt("return",this.showPermissionError());case 11:this.showError("update");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteUser:function(){this.deletingUser=!0,this.alertUser("delete","Delete")},archiveUser:function(){this.alertUser("archive","Archive")},alertUser:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.getters.getCurrentUserId===this.selectedAdminUser.id?swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="Are you sure you want to '.concat(t,' this user?">\n            </ins-loader>'),type:"",width:330,showCancelButton:!0,confirmButtonClass:"negative",confirmButtonText:s}).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(s){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!s.value){e.next=19;break}if(i.sendingForm=!0,a=i.constructUpdatePayload(),a.cred.info.is_enabled="false",delete a.cred.info.access_key,delete a.cred.info.id_rsa,!i.deletingUser){e.next=12;break}return e.next=9,Gt(a);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={state:!0};case 13:if(r=e.t0,!r.state){e.next=18;break}return e.next=17,i.runMutation(a,t);case 17:return e.abrupt("return",e.sent);case 18:i.showError(t);case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):this.notAllowed(t);case 1:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),notAllowed:function(e){this.deletingUser=!1,this.sendingForm=!1,swal({html:'\n          <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="You can only '.concat(e,' your own profile.">\n          </ins-loader>'),width:330})},runMutation:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.deletingUser&&(t.cred.insites_key="deleted"),e.next=3,Bt(t);case 3:if(i=e.sent,!i.state){e.next=10;break}return toastIt("success","Successfully ".concat(s,"d vcl user."),InsitesUtil.ops()),"new"===this.vclFormType?this.$store.commit("updateAdminUsersNoProfile",this.tempAdminUserId):this.deletingUser&&this.$store.commit("addAdminUsersNoProfile",this.selectedAdminUser),this.sendingForm=!1,this.deletingUser=!1,e.abrupt("return",this.goBackToListView());case 10:this.showError(s);case 11:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),showPermissionError:function(){this.sendingForm=!1,toastIt("error","Permission denied. Please check your credentials and try again.",InsitesUtil.ops())},showError:function(e){this.deletingUser=!1,this.sendingForm=!1,toastIt("error","Failed to ".concat(e," user. Please try again."),InsitesUtil.ops())},goBackToListView:function(){this.$router.push("/version-control"),InsitesUtil.goBack()},initialisePage:function(){var e=[Na,La];if("update"===this.vclFormType)this.tempAdminUserId=this.selectedAdminUser.id,this.selectedUserName="".concat(this.selectedAdminUser.first_name," ").concat(this.selectedAdminUser.last_name),this.buttonLabel="UPDATE",Ha.link="#".concat(this.$route.path),e.push(Ha);else{if("new"!==this.vclFormType&&"VclNewUser"!==this.$router.currentRoute.name)return void this.goBackToListView();this.$store.commit("setVclFormType","new"),e.push(ja)}InsitesUtil.setBreadCrumbs(e)}},mounted:function(){this.initialisePage()},destroyed:function(){this.$store.commit("setVclFormType",""),this.$store.commit("resetSelectedAdminUser")}},Ya=Ja,Xa=(s("920e"),Object(x["a"])(Ya,Ka,Ga,!1,null,null,null)),Qa=Xa.exports,Za=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-container-full mvc-wrap"},[s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-8 medium-12 small-12 cell"},[e.vclInitialized?e._e():s("ins-card",{attrs:{steady:""}},[s("div",{staticClass:"spacer large"}),s("ins-loader",{attrs:{"state-title":"Processing Your Data","state-message":"Just a moment, we're fetching and processing your data.","state-icon":"processing"}}),s("div",{staticClass:"spacer large"})],1),e.vclInitialized?s("div",{staticClass:"custom-ins-card"},[s("div",{staticClass:"toggleFieldFormWrap"},[s("InsToggleWrap",{attrs:{label:"Enable Version Control",checked:e.tempEnabled},model:{value:e.tempEnabled,callback:function(t){e.tempEnabled=t},expression:"tempEnabled"}})],1),s("InsInputWrap",{attrs:{label:"Instance URL*",placeholder:"Please enter the Instance URL",maxlength:"120",required:"true",readonly:!0,validate:!0,"has-error":!!e.errors.instance_url,"error-message":e.errors.instance_url},on:{fieldError:e.fieldErrorHandler},model:{value:e.instanceUrl,callback:function(t){e.instanceUrl=t},expression:"instanceUrl"}}),s("InsInputWrap",{attrs:{label:"Repository SSH URL*",maxlength:"120",placeholder:"Please enter the Repository SSH URL",required:"setup"===e.vclFormType?"true":"false",validate:!0,"has-error":!!e.errors.git_url,"error-message":e.errors.git_url},on:{fieldError:e.gitErrorHandler},model:{value:e.tempGitURL,callback:function(t){e.tempGitURL=t},expression:"tempGitURL"}}),s("InsInputWrap",{attrs:{label:"Marketplace Kit Token*",maxlength:"120",placeholder:e.MPKPlaceholder,required:"setup"===e.vclFormType?"true":"false",validate:!0,"has-error":!!e.errors.marketplace_kit_token,"error-message":e.errors.marketplace_kit_token},on:{fieldError:e.fieldErrorHandler},model:{value:e.tempMpkToken,callback:function(t){e.tempMpkToken=t},expression:"tempMpkToken"}}),e._m(0)],1):e._e()],1)]),s("div",{staticClass:"grid-x"},[s("div",{staticClass:"large-8 medium-12 small-12 cell text-right"},[s("div",{staticClass:"spacer small"}),s("ins-button",{attrs:{label:"Cancel",outlined:""},on:{onClickInsButton:e.goBackToListView}}),e.vclInitialized?s("ins-button",{attrs:{solid:"",label:"SAVE",disabled:e.sendingForm},on:{onClickInsButton:e.validateData}}):e._e()],1)])])},er=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ins-note-wrap"},[s("em",[e._v("Please note that Marketplace Kit Token will be stored securely on our Insites Data Storage and will not be displayed here for security reasons.")])])}],tr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ins-toggle-switch",{ref:"insToggleEl",attrs:{label:e.label,value:e.value,disabled:e.disabled,checked:e.value||"true"===e.value},on:{onCheckInsToggleSwitch:e.onValueChange}})},sr=[],ir={name:"InsToggleWrap",props:{label:String,disabled:Boolean,checked:Boolean,value:Boolean},methods:{onValueChange:function(e){this.$emit("input",e.detail.checked)}}},ar=ir,rr=(s("3a10"),Object(x["a"])(ar,tr,sr,!1,null,null,null)),nr=rr.exports,or={name:"ManageVclSetup",mixins:[Oa],components:{InsInputWrap:se,InsSelectWrap:_e,InsToggleWrap:nr},watch:{vclInitialized:function(){this.checkData()}},computed:Object(A["b"])({instanceUrl:function(e){return e.VclStore.instanceUrl},customisationMasterData:function(e){return e.VclStore.customisationMasterData},vclMasterData:function(e){return e.VclStore.vclMasterData},vclInitialized:function(e){return e.VclStore.vclInitialized},vclFormType:function(e){return e.VclStore.vclFormType}}),data:function(){return{MPKPlaceholder:"Please enter the Masterplace Kit Token",MPKTokenEdit:!1,buttonLabel:"ADD",errors:{instance_url:"",git_url:"",marketplace_kit_token:""},sendingForm:!1,tempEnabled:!1,tempMpkToken:"",tempGitURL:""}},methods:{mpkEdited:function(){this.MPKTokenEdit=!0,this.MPKPlaceholder="Please enter the Masterplace Kit Token"},checkData:function(){this.vclFormType||(this.vclMasterData?(this.$store.commit("setVclFormType","update-setup"),this.tempEnabled=this.vclMasterData.info.is_enabled,this.tempGitURL=this.vclMasterData.info.git_url):this.$store.commit("setVclFormType","setup"))},fieldErrorHandler:function(e){e.target.$el.hasError=e.error,e.target.$el.errorMessage="".concat(e.target.$el.label," is required.").replace("*","")},gitErrorHandler:function(e){this.fieldErrorHandler(e);var t=e.target.$el.value;t&&(this.isGitUrl(t)?this.isGitUrlSupported(t)||(e.target.$el.hasError=!0,e.target.$el.errorMessage="Repository not yet supported."):(e.target.$el.hasError=!0,e.target.$el.errorMessage="Not a valid Repository URL"))},hasRequiredValues:function(){var e=0;return""===this.instanceUrl?(this.errors.instance_url="Instance URL is required.",e++):this.errors.instance_url="",""===this.tempMpkToken&&"setup"===this.vclFormType?(this.errors.marketplace_kit_token="Marketplace Kit Token is required.",e++):this.errors.marketplace_kit_token="",""===this.tempGitURL&&"setup"===this.vclFormType?(this.errors.git_url="Repository SSH URL is required.",e++):this.errors.git_url="",!e},validateData:function(){this.sendingForm=!0,this.hasRequiredValues()?this.sendData():this.sendingForm=!1},sendData:function(){var e=this.constructPayload();switch(this.vclFormType){case"setup":this.createData(e);break;case"update-setup":this.updateData(e);break}},createData:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zt(t);case 2:if(s=e.sent,!s.state||!s.results.insites_key){e.next=11;break}return t.cred.insites_key=s.results.insites_key,e.next=7,Nt(t);case 7:if(i=e.sent,!i.state){e.next=11;break}return this.updateStore(t,i.results.customization_create),e.abrupt("return");case 11:this.showError();case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),updateData:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt(t);case 2:if(s=e.sent,!s.state||!s.results.Attributes){e.next=10;break}return e.next=6,jt(t);case 6:if(i=e.sent,!i.state){e.next=10;break}return this.updateStore(t,i.results.customization_update),e.abrupt("return");case 10:this.showError();case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),updateStore:function(e,t){this.$store.commit("setCustomisationMaster",t),this.$store.commit("setVclMaster",e.cred),toastIt("success","Successfully configured version control.",InsitesUtil.ops()),this.goBackToListView()},constructPayload:function(){var e={cred:{id:this.customisationMasterData.id,instance_url:this.instanceUrl,insites_key:this.customisationMasterData.properties.insites_key,info:{master_key:!0,created_on:"Insites Site Manager",marketplace_kit_token:this.tempMpkToken,git_url:this.tempGitURL,is_enabled:this.tempEnabled,last_update_by:this.$store.getters.getCurrentUserId}}};return""===this.tempMpkToken&&delete e.cred.info.marketplace_kit_token,""===this.tempGitURL&&delete e.cred.info.git_url,e},showError:function(){this.sendingForm=!1,toastIt("error","Failed to setup version control. Please try again.",InsitesUtil.ops())},goBackToListView:function(){InsitesUtil.goBack()},activateRoute:function(){var e=[Na,La,Ua];InsitesUtil.setBreadCrumbs(e)},isGitUrl:function(e){var t=e.includes("codecommit")?/(?:git|ssh|https?|git@[-\w.]+)(\/\/)?(.*?)(\/?|\#[-\d\w._]+?)$/:/(?:git|ssh|https?|git@[-\w.]+):(\/\/)?(.*?)(\.git)(\/?|\#[-\d\w._]+?)$/;return t.test(e)},isGitUrlSupported:function(e){return e.includes("github")||e.includes("codecommit")}},mounted:function(){this.vclMasterData&&(this.tempEnabled=this.vclMasterData.info.is_enabled,this.tempGitURL=this.vclMasterData.info.git_url),this.activateRoute()}},lr=or,cr=(s("7b0f"),Object(x["a"])(lr,Za,er,!1,null,null,null)),dr=cr.exports;a["a"].use(r["a"]);var ur=new r["a"]({routes:[{path:"/global-content",name:"GlobalSiteSettings",component:Ge},{path:"/pages",name:"ListPages",component:os},{path:"/manage-page",name:"ManagePage",component:Vs},{path:"/edit-page/:id?",name:"EditPage",component:Vs},{path:"/templates",name:"ListTemplates",component:Js},{path:"/manage-template",name:"ManageTemplate",component:ii},{path:"/edit-template/:id?",name:"EditTemplate",component:ii},{path:"/content-blocks",name:"ListContentBlocks",component:gi},{path:"/manage-content-block",name:"ManageContentBlock",component:Fi},{path:"/edit-content-block/:id?",name:"EditContentBlock",component:Fi},{path:"/asset-manager",name:"FileManagerPage",component:Pa},{path:"/version-control",name:"ListVcl",component:qa},{path:"/version-control/add-user",name:"VclNewUser",component:Qa},{path:"/version-control/update-user/:id?",name:"VclUpdateUser",component:Qa},{path:"/version-control/setup",name:"VclSetupMaster",component:dr},{path:"/version-control/setup",name:"VclUpdateMaster",component:dr}]}),hr={id:null,path:"",body:"",fortmat:"html",physical_file_path:""},pr={state:{contentBlockData:{},formType:"add"},mutations:{pushPartialData:function(e,t){e.contentBlockData={},e.contentBlockData=t?t.Data:JSON.parse(Qe()(hr)),e.contentBlockData.body=t?unescape(t.Data.body):""},resetPartialData:function(e){e.contentBlockData=JSON.parse(Qe()(hr))},pushFormType:function(e,t){e.formType=t}}},mr=pr,fr=s("7618"),_r={state:{selected_folder:String,selected_folder_data:{},folders:[],selected_file:{tags:[]},files:[],archived_files:[],search_files:[],toggleView:"list",searchBy:"file_name",searchKeyword:"",listArchive:!1,details:{},children:[],assets_url:{},files_to_upload:[]},getters:{getFileManagerDataStructure:function(e){return e}},mutations:{updateFileManagerAssetURL:function(e,t){e.assets_url={},e.assets_url=t},updateFileManagerDataStructureSuccessMutation:function(e,t){e.children=t.children,e.details=t.details,e.selected_folder=t.details.id,e.selected_folder_data.details=t.details,e.selected_folder_data.children=t.children},updateFileManagerDataStructureErrorMutation:function(e,t){e.children=t.children,e.details=t.details,e.selected_folder=t.details.id},updateFileManagerSelectedFolder:function(e,t){e.selected_folder=t},updateFileManagerSelectedFolderData:function(e,t){e.selected_folder_data={},e.selected_folder_data=t},updateFileManagerFolders:function(e,t){e.folders=t},updateFileManagerFiles:function(e,t){e.listArchive=!1,e.files=t},updateFileManagerArchivedFiles:function(e,t){e.archived_files=t},updateFileManagerSearchResults:function(e,t){for(var s in e.search_files=t,e.search_files)e.search_files[s].tags?e.search_files[s].tags=JSON.parse(e.search_files[s].tags):e.search_files[s].tags=[]},updateFileManagerSelectedFile:function(e,t){e.selected_file={},e.selected_file=t,e.selected_file.tags?e.selected_file.tags="object"===Object(fr["a"])(e.selected_file.tags)?e.selected_file.tags:JSON.parse(e.selected_file.tags):e.selected_file.tags=[]},updateToggleView:function(e,t){e.toggleView=t},updateSearchKeyword:function(e,t){e.listArchive=!1,e.searchKeyword=t},updateSearchBy:function(e,t){e.searchBy=t},updateTags:function(e,t){e.selected_file.tags=t},updateFilesToUpload:function(e,t){for(var s in e.files_to_upload=[],e.files_to_upload=t,e.files_to_upload)e.files_to_upload[s].state="pending"},loadingStateFilesToUpload:function(e,t){for(var s in e.files_to_upload=t,e.files_to_upload)e.files_to_upload[s].state="loading"},successStateFilesToUpload:function(e,t){e.files_to_upload={},e.files_to_upload=t},resetFileManagerDetails:function(e){e.details={}},resetFileManagerChildren:function(e){e.children=[]},resetFileManagerSelectedFolder:function(e){e.selected_folder="assets"},resetFileManagerFolders:function(e){e.folders=[]},resetFileManagerSelectedFile:function(e){e.selected_file={tags:[]}},resetFileManagerFiles:function(e){e.listArchive=!1,e.files=[]},resetFileManagerArchivedFiles:function(e){e.archived_files=[]},resetFileManagerToggleView:function(e){e.toggleView="list"},resetFilesToUpload:function(e){e.files_to_upload=[]},updateListArchiveFiles:function(e,t){e.listArchive=t}},actions:{resetFMContainer:function(e){e.commit("resetFileManagerDetails"),e.commit("resetFileManagerChildren"),e.commit("resetFileManagerSelectedFolder"),e.commit("resetFileManagerFolders"),e.commit("resetFileManagerSelectedFile"),e.commit("resetFileManagerFiles"),e.commit("resetFileManagerToggleView")},resetFMToolbar:function(e){e.commit("resetFileManagerDetails"),e.commit("resetFileManagerChildren"),e.commit("resetFileManagerSelectedFolder"),e.commit("resetFileManagerFolders"),e.commit("resetFileManagerSelectedFile"),e.commit("resetFileManagerFiles")},resetFMNodeTree:function(e){e.commit("resetFileManagerSelectedFolder"),e.commit("resetFileManagerSelectedFile"),e.commit("resetFileManagerFiles")},resetFMList:function(e){e.commit("resetFileManagerSelectedFile"),e.commit("resetFileManagerFiles")},updateSelectedFolder:function(e,t){e.commit("updateFileManagerSelectedFolder",t.details.id),e.commit("updateFileManagerSelectedFolderData",t)},updateRefreshNodeTree:function(e,t){e.commit("updateFileManagerDataStructureSuccessMutation",t.data_structure),e.commit("updateFileManagerFolders",t.folders),e.commit("updateFileManagerFiles",t.files),e.commit("updateFileManagerAssetURL",t.assets_url)}}},gr=_r,vr={id:"",slug:"",physical_file_path:"",content:"",layout:"",searchable:!0,metadata:{page_title:"",meta_title:"",description:"",canonical_url:"",status:"",search_engine_visibility:!0},redirect_code:"",redirect_to:"",format:"html",authorization_policies:[]},br={state:{pageFormType:"",pageFormData:{},siteTemplateOptions:[],siteAuthPoliciesOptions:[]},mutations:{setPageFormData:function(e,t){e.pageFormData={},"New"!==t.action?e.pageFormData=t.data.rawData:e.pageFormData=JSON.parse(Qe()(vr)),e.pageFormType=t.action},setPageFormType:function(e,t){e.pageFormType=t},setSiteTemplatesOptions:function(e,t){e.siteTemplateOptions=t},setSiteAuthPoliciesOptions:function(e,t){e.siteAuthPoliciesOptions=t}},actions:{fetchSiteTemplates:function(e){var t="/insites/api/get-all-layouts-data.json?page=1&size=1000";this._vm.$http.get(t).then(function(t){var s=t.data.admin_liquid_layouts.results;s.length&&e.commit("setSiteTemplatesOptions",s)}).catch(function(e){console.error("Failed to load site templates",e)})},fetchSiteAuthPolicies:function(e){var t="/insites/api/get-all-auth-policies-data.json";this._vm.$http.get(t).then(function(t){var s=t.data.items.results;s.length&&e.commit("setSiteAuthPoliciesOptions",s[0])}).catch(function(e){console.error("Failed to load auth policies",e)})}}},yr=br,Cr={id:"",format:"html",path:"",physical_file_path:"",body:""},kr={state:{templateFormType:"",templateFormData:{}},mutations:{setTemplateFormData:function(e,t){"New"!==t.action?e.templateFormData=t.data.rawData:e.templateFormData=JSON.parse(Qe()(Cr)),e.templateFormType=t.action},setTemplateFormType:function(e,t){e.templateFormType=t}}},wr=kr,Tr={state:{gssData:ze,formID:"",formMethod:"PUT",fetchingGssData:!0,failedToLoadGssData:!0},mutations:{setGssData:function(e,t){e.gssData=t,e.formID=e.gssData.id,e.fetchingGssData=!1},setGssFormMethod:function(e,t){e.formMethod=t},setFetchingGssData:function(e,t){e.fetchingGssData=t},setFailedToLoadGssData:function(e,t){e.failedToLoadGssData=t}},actions:{fetchGssData:function(e){var t="/insites/api/get-global-content-data.json";this._vm.$http.get(t).then(function(t){var s=t.data.items.results;s.length?e.commit("setGssData",s[0]):(e.commit("setGssFormMethod","POST"),e.commit("setFetchingGssData",!1))}).catch(function(t){console.error("Failed to load Global Content on background",t),e.commit("setFailedToLoadGssData",!0)})}}},xr=Tr,Dr={id:"",properties:{is_enabled:!0,insites_key:"",instance_url:"",last_update_by:""}},$r={id:"",slug:"",email:"",first_name:"",last_name:"",created_at:"",updated_at:"",insites_vcl_user_profile:{properties:{is_enabled:"",insites_key:"",instance_url:"",last_update_by:""}}},Er=s("c04c"),Fr=s.n(Er),Rr={state:{instanceUrl:"",vclInitialized:!1,customisationMasterData:JSON.parse(Qe()(Dr)),vclMasterData:!1,vclFormType:"",adminUsers:{results:[]},adminUsersNoProfile:{results:[]},selectedAdminUser:JSON.parse(Qe()($r)),currentVclUser:!1,currentUser:!1},getters:{getAdminUserById:function(e){return function(t){return e.adminUsers.find(function(e){return e.id===t})}},getCurrentUserId:function(e){return e.currentUser.id},getCurrentUserEmail:function(e){return e.currentUser.email},getCurrentUserName:function(e){return"".concat(e.currentUser.first_name," ").concat(e.currentUser.last_name)}},mutations:{setInstanceUrl:function(e,t){e.instanceUrl="https://".concat(t)},setInitializedState:function(e,t){e.vclInitialized=t},setCustomisationMaster:function(e,t){e.customisationMasterData=t},setVclMaster:function(e,t){e.vclMasterData=t},setVclFormType:function(e,t){e.vclFormType=t},updateAdminUsersNoProfile:function(e,t){Fr()(e.adminUsersNoProfile,{id:t})},addAdminUsersNoProfile:function(e,t){e.adminUsersNoProfile.push(t)},setVclAdminUsers:function(e,t){e.adminUsers=t.results,e.adminUsersNoProfile=t.results.filter(function(e){return!e.insites_vcl_user_profile||"deleted"===e.insites_vcl_user_profile.properties.insites_key})},setCurrentUser:function(e,t){e.currentUser=t},setCurrentVclUser:function(e,t){e.currentVclUser=t},setSelectedAdminUser:function(e,t){e.selectedAdminUser=t},resetSelectedAdminUser:function(e){e.selectedAdminUser=JSON.parse(Qe()($r))}},actions:{initializeVcl:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var s,i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pt();case 2:if(s=e.sent,!s){e.next=9;break}return t.commit("setCustomisationMaster",s),e.next=7,Ht(s.properties.instance_url,s.properties.insites_key);case 7:i=e.sent,i.state&&t.commit("setVclMaster",i.results.Item);case 9:return t.dispatch("getVclAdminUsers"),e.t0=t,e.next=13,Et();case 13:return e.t1=e.sent,e.t0.commit.call(e.t0,"setInstanceUrl",e.t1),e.next=17,g();case 17:a=e.sent,r=a.results.current_user,t.commit("setCurrentUser",r),t.commit("setInitializedState",!0);case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getVclAdminUsers:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,Rt();case 3:e.t1=e.sent,e.t0.commit.call(e.t0,"setVclAdminUsers",e.t1);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},Sr=Rr,Ir={submitButtonLabel:"",cancelButtonLabel:""},Ar={submitButtonLabel:"Submit",cancelButtonLabel:"Cancel"},Pr={Chinese:Ir,English:Ar},Mr={state:{languageSettings:"English"},getters:{getLanguage:function(e){return Pr[e.languageSettings]}}},Br=Mr,Or={state:{redactor_doctype_html:"",redactor_html:"",redactor_body:"",redactor_style:"",redactor_body_tag:"",redactor_head:""},mutations:{updateRedactorDoctypeHTML:function(e,t){e.redactor_doctype_html="",e.redactor_doctype_html=t},updateRedactorHTML:function(e,t){e.redactor_html="",e.redactor_html=t},updateRedactorBody:function(e,t){e.redactor_body="",e.redactor_body=t},updateRedactorStyle:function(e,t){e.redactor_style="",e.redactor_style=t},updateRedactorBodyTag:function(e,t){e.redactor_body_tag="",e.redactor_body_tag=t},updateRedactorHead:function(e,t){e.redactor_head="",e.redactor_head=t}}},Nr=Or;a["a"].use(A["a"]);var Lr=new A["a"].Store({modules:{ContentBlockStore:mr,FileManagerStore:gr,PagesStore:yr,TemplatesStore:wr,GssStore:xr,RedactorStore:Nr,VclStore:Sr,LanguageStore:Br}}),jr=["ins-card","ins-filter","ins-filter-item","ins-datepicker","ins-sparkline","ins-line-chart","ins-searchbar","ins-table","ins-tr","ins-th","ins-th-checkbox","ins-td","ins-td-checkbox","ins-action","ins-action-item","ins-loader","ins-button","ins-dropdown","ins-bar-chart","ins-radio","ins-toggle-switch","ins-input","ins-base-table","ins-base-table-row","ins-base-table-th","ins-base-table-td","ins-input-tel","ins-select","ins-select-option","ins-textarea","ins-image-picker","ins-backdrop","ins-heading"];a["a"].use(r["a"]),a["a"].use(c.a,o.a),a["a"].config.productionTip=!1,a["a"].config.ignoredElements=Object(i["a"])(jr),new a["a"]({router:ur,store:Lr,render:function(e){return e(E)}}).$mount("#insites-site-manager")},"58b0":function(e,t,s){"use strict";var i=s("ddc5"),a=s.n(i);a.a},5958:function(e,t,s){"use strict";var i=s("f4b5"),a=s.n(i);a.a},"6a29":function(e,t,s){},7177:function(e,t,s){},7309:function(e,t,s){"use strict";var i=s("f87c"),a=s.n(i);a.a},"74ac":function(e,t,s){},"7b0f":function(e,t,s){"use strict";var i=s("2704"),a=s.n(i);a.a},"7bd1":function(e,t,s){"use strict";var i=s("fe1d"),a=s.n(i);a.a},"7bdd":function(e,t,s){},"834a":function(e,t,s){},8580:function(e,t,s){},"913c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b54a"),core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_string_link__WEBPACK_IMPORTED_MODULE_0__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("795b"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e814"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4504"),core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es7_object_define_getter__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b9a1"),core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es7_object_lookup_getter__WEBPACK_IMPORTED_MODULE_5__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a745"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("386d"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_11__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("59ad"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_15__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("a4bb"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16__),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7618");!function(){var Ajax={settings:{},post:function(e){return new AjaxRequest("post",e)},get:function(e){return new AjaxRequest("get",e)}},AjaxRequest=function(e,t){var s={method:e,url:"",before:function(){},success:function(){},error:function(){},data:!1,async:!0,headers:{}};this.p=this.extend(s,t),this.p=this.extend(this.p,Ajax.settings),this.p.method=this.p.method.toUpperCase(),this.prepareData(),this.xhr=new XMLHttpRequest,this.xhr.open(this.p.method,this.p.url,this.p.async),this.setHeaders();var i="function"!=typeof this.p.before||this.p.before(this.xhr);!1!==i&&this.send()};AjaxRequest.prototype={extend:function(e,t){if(t)for(var s in t)e[s]=t[s];return e},prepareData:function(){"POST"!==this.p.method||this.isFormData()||(this.p.headers["Content-Type"]="application/x-www-form-urlencoded"),"object"!=Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.p.data)||this.isFormData()||(this.p.data=this.toParams(this.p.data)),"GET"===this.p.method&&(this.p.url=this.p.data?this.p.url+"?"+this.p.data:this.p.url)},setHeaders:function(){for(var e in this.xhr.setRequestHeader("X-Requested-With",this.p.headers["X-Requested-With"]||"XMLHttpRequest"),this.p.headers)this.xhr.setRequestHeader(e,this.p.headers[e])},isFormData:function(){return"undefined"!=typeof window.FormData&&this.p.data instanceof window.FormData},isComplete:function(){return!(this.xhr.status<200||this.xhr.status>=300&&304!==this.xhr.status)},send:function(){this.p.async?(this.xhr.onload=this.loaded.bind(this),this.xhr.send(this.p.data)):(this.xhr.send(this.p.data),this.loaded.call(this))},loaded:function(){if(this.isComplete()){var e=this.xhr.response,t=this.parseJson(e);e=t||e,"function"==typeof this.p.success&&this.p.success(e,this.xhr)}else"function"==typeof this.p.error&&this.p.error(this.xhr.statusText)},parseJson:function(e){try{var t=JSON.parse(e);if(t&&"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(t))return t}catch(s){}return!1},toParams:function(e){return _Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}};var DomCache=[0],DomExpando="data"+ +new Date,DomHClass="is-hidden",DomHMClass="is-hidden-mobile",Dom=function(e,t){return this.parse(e,t)};Dom.ready=function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},Dom.prototype={get dom(){return!0},get length(){return this.nodes.length},parse:function(e,t){var s,i=/^\s*<(\w+|!)[^>]*>/;if(e){if(e.dom)return this.nodes=e.nodes,e;s="string"!=typeof e?e.nodeType&&11===e.nodeType?e.childNodes:e.nodeType||e===window?[e]:e:i.test(e)?this.create(e):this._query(e,t)}else s=[];this.nodes=this._slice(s)},create:function(e){if(/^<(\w+)\s*\/?>(?:<\/\1>|)$/.test(e))return[document.createElement(RegExp.$1)];var t=[],s=document.createElement("div"),i=s.childNodes;s.innerHTML=e;for(var a=0,r=i.length;r>a;a++)t.push(i[a]);return t},add:function(e){this.nodes=this.nodes.concat(this._toArray(e))},get:function(e){return this.nodes[e||0]||!1},getAll:function(){return this.nodes},eq:function(e){return new Dom(this.nodes[e])},first:function(){return new Dom(this.nodes[0])},last:function(){return new Dom(this.nodes[this.nodes.length-1])},contents:function(){return this.get().childNodes},each:function(e){for(var t=this.nodes.length,s=0;t>s;s++)e.call(this,this.nodes[s].dom?this.nodes[s].get():this.nodes[s],s);return this},is:function(e){return this.filter(e).length>0},filter:function(e){var t;return void 0===e?this:(t="function"==typeof e?e:function(t){return e instanceof Node?e===t:e&&e.dom?-1!==e.nodes.indexOf(t):(t.matches=t.matches||t.msMatchesSelector||t.webkitMatchesSelector,1===t.nodeType&&t.matches(e||"*"))},new Dom(this.nodes.filter(t)))},not:function(e){return this.filter(function(t){return!new Dom(t).is(e||!0)})},find:function(e){var t=[];return this.each(function(s){for(var i=this._query(e||"*",s),a=0;a<i.length;a++)t.push(i[a])}),new Dom(t)},children:function(e){var t=[];return this.each(function(e){if(e.children)for(var s=e.children,i=0;i<s.length;i++)t.push(s[i])}),new Dom(t).filter(e)},parent:function(e){var t=[];return this.each(function(e){e.parentNode&&t.push(e.parentNode)}),new Dom(t).filter(e)},parents:function(e,t){t=this._getContext(t);var s=[];return this.each(function(i){for(var a=i.parentNode;a&&a!==t;)e?new Dom(a).is(e)&&s.push(a):s.push(a),a=a.parentNode}),new Dom(s)},closest:function(e,t){t=this._getContext(t),e=e.dom?e.get():e;var s=[],i=e&&e.nodeType;return this.each(function(a){do{if(i&&a===e||new Dom(a).is(e))return s.push(a)}while((a=a.parentNode)&&a!==t)}),new Dom(s)},next:function(e){return this._getSibling(e,"nextSibling")},nextElement:function(e){return this._getSibling(e,"nextElementSibling")},prev:function(e){return this._getSibling(e,"previousSibling")},prevElement:function(e){return this._getSibling(e,"previousElementSibling")},css:function(e,t){if(void 0===t&&"object"!=Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)){var s=this.get();return"width"===e||"height"===e?s.style?this._getHeightOrWidth(e,s,!1)+"px":void 0:s.style?getComputedStyle(s,null)[e]:void 0}return this.each(function(s){var i={};for(var a in"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)?i=e:i[e]=t,i)s.style&&(s.style[a]=i[a])})},attr:function(e,t,s){if(s=s?"data-":"",void 0===t&&"object"!=Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)){var i=this.get();return i&&3!==i.nodeType?"checked"===e?i.checked:this._getBooleanFromStr(i.getAttribute(s+e)):void 0}return this.each(function(i){var a={};for(var r in"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)?a=e:a[e]=t,a)3!==i.nodeType&&("checked"===r?i.checked=a[r]:i.setAttribute(s+r,a[r]))})},data:function(e,t){if(void 0===e){var s=/^data\-(.+)$/,i=this.get().attributes,a={},r=function(e){return e[1].toUpperCase()};for(var n in i)if(i[n]&&s.test(i[n].nodeName)){var o=i[n].nodeName.match(s)[1],l=i[n].value;o=o.replace(/-([a-z])/g,r),l=this._isObjectString(l)?this._toObject(l):this._isNumber(l)?_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(l):this._getBooleanFromStr(l),a[o]=l}return a}return this.attr(e,t,!0)},val:function(e){if(void 0===e){var t=this.get();return t.type&&"checkbox"===t.type?t.checked:t.value}return this.each(function(t){t.value=e})},removeAttr:function(e){return this.each(function(t){var s=function(e){3!==t.nodeType&&t.removeAttribute(e)};e.split(" ").forEach(s)})},removeData:function(e){return this.each(function(t){var s=function(e){3!==t.nodeType&&t.removeAttribute("data-"+e)};e.split(" ").forEach(s)})},dataset:function(e,t){return this.each(function(s){DomCache[this.dataindex(s)][e]=t})},dataget:function(e){return DomCache[this.dataindex(this.get())][e]},dataindex:function(e){var t=e[DomExpando],s=DomCache.length;return t||(t=e[DomExpando]=s,DomCache[t]={}),t},addClass:function(e){return this._eachClass(e,"add")},removeClass:function(e){return this._eachClass(e,"remove")},toggleClass:function(e){return this._eachClass(e,"toggle")},hasClass:function(e){return this.nodes.some(function(t){return!!t.classList&&t.classList.contains(e)})},empty:function(){return this.each(function(e){e.innerHTML=""})},html:function(e){return void 0===e?this.get().innerHTML||"":this.empty().append(e)},text:function(e){return void 0===e?this.get().textContent||"":this.each(function(t){t.textContent=e})},after:function(e){return this._inject(e,function(e,t){if("string"==typeof e)t.insertAdjacentHTML("afterend",e);else for(var s=e instanceof Node?[e]:this._toArray(e).reverse(),i=0;i<s.length;i++)t.parentNode.insertBefore(s[i],t.nextSibling);return t})},before:function(e){return this._inject(e,function(e,t){if("string"==typeof e)t.insertAdjacentHTML("beforebegin",e);else for(var s=e instanceof Node?[e]:this._toArray(e),i=0;i<s.length;i++)t.parentNode.insertBefore(s[i],t);return t})},append:function(e){return this._inject(e,function(e,t){if("string"==typeof e||"number"==typeof e)t.insertAdjacentHTML("beforeend",e);else for(var s=e instanceof Node?[e]:this._toArray(e),i=0;i<s.length;i++)t.appendChild(s[i]);return t})},prepend:function(e){return this._inject(e,function(e,t){if("string"==typeof e||"number"==typeof e)t.insertAdjacentHTML("afterbegin",e);else for(var s=e instanceof Node?[e]:this._toArray(e).reverse(),i=0;i<s.length;i++)t.insertBefore(s[i],t.firstChild);return t})},wrap:function(e){return this._inject(e,function(e,t){var s="string"==typeof e||"number"==typeof e?this.create(e)[0]:e instanceof Node?e:this._toArray(e)[0];return t.parentNode&&t.parentNode.insertBefore(s,t),s.appendChild(t),new Dom(s)})},unwrap:function(){return this.each(function(e){var t=new Dom(e);return t.replaceWith(t.contents())})},replaceWith:function(e){return this._inject(e,function(e,t){for(var s=document.createDocumentFragment(),i="string"==typeof e||"number"==typeof e?this.create(e):e instanceof Node?[e]:this._toArray(e),a=0;a<i.length;a++)s.appendChild(i[a]);var r=s.childNodes[0];return t.parentNode.replaceChild(s,t),r})},remove:function(){return this.each(function(e){e.parentNode&&e.parentNode.removeChild(e)})},clone:function(e){var t=[];return this.each(function(s){var i=this._clone(s);e&&(i=this._cloneEvents(s,i)),t.push(i)}),new Dom(t)},show:function(){return this.each(function(e){if(e.style&&this._hasDisplayNone(e)){var t,s=e.getAttribute("domTargetShow"),i=!!e.classList&&e.classList.contains(DomHClass),a=!!e.classList&&e.classList.contains(DomHMClass);i?(t=DomHClass,e.classList.remove(DomHClass)):a?(t=DomHMClass,e.classList.remove(DomHMClass)):e.style.display=s||"block",t&&e.setAttribute("domTargetHide",t),e.removeAttribute("domTargetShow")}}.bind(this))},hide:function(){return this.each(function(e){if(e.style&&!this._hasDisplayNone(e)){var t=e.style.display,s=e.getAttribute("domTargetHide");s===DomHClass?e.classList.add(DomHClass):s===DomHMClass?e.classList.add(DomHMClass):("block"!==t&&e.setAttribute("domTargetShow",t),e.style.display="none"),e.removeAttribute("domTargetHide")}})},scrollTop:function(e){var t=this.get(),s=t===window,i=9===t.nodeType,a=i?document.scrollingElement||document.body.parentNode||document.body||document.documentElement:t;return void 0!==e?void(s?window.scrollTo(0,e):a.scrollTop=e):i?"undefined"!=typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0:s?window.pageYOffset:a.scrollTop},offset:function(){return this._getDim("Offset")},position:function(){return this._getDim("Position")},width:function(e,t){return this._getSize("width","Width",e,t)},height:function(e,t){return this._getSize("height","Height",e,t)},outerWidth:function(){return this._getInnerOrOuter("width","outer")},outerHeight:function(){return this._getInnerOrOuter("height","outer")},innerWidth:function(){return this._getInnerOrOuter("width","inner")},innerHeight:function(){return this._getInnerOrOuter("height","inner")},click:function(){return this._triggerEvent("click")},focus:function(){return this._triggerEvent("focus")},trigger:function(e){return this.each(function(t){for(var s=e.split(" "),i=0;i<s.length;i++){var a,r={bubbles:!0,cancelable:!0};try{a=new window.CustomEvent(s[i],r)}catch(n){a=document.createEvent("CustomEvent"),a.initCustomEvent(s[i],!0,!0)}t.dispatchEvent(a)}})},on:function(e,t,s){return this.each(function(i){for(var a=e.split(" "),r=0;r<a.length;r++){var n=this._getEventName(a[r]),o=this._getEventNamespace(a[r]);t=s?this._getOneHandler(t,e):t,i.addEventListener(n,t),i._e=i._e||{},i._e[o]=i._e[o]||{},i._e[o][n]=i._e[o][n]||[],i._e[o][n].push(t)}})},one:function(e,t){return this.on(e,t,!0)},off:function(e,t){var s=function(e,t,s){return e===s},i=function(e,t,s,i){return t===i},a=function(e,t,s,i){return e===s&&t===i},r=function(){return!0};return void 0===e?this.each(function(e){this._offEvent(e,!1,!1,t,r)}):this.each(function(r){for(var n=e.split(" "),o=0;o<n.length;o++){var l=this._getEventName(n[o]),c=this._getEventNamespace(n[o]);"_events"===c?this._offEvent(r,l,c,t,s):l||"_events"===c?this._offEvent(r,l,c,t,a):this._offEvent(r,l,c,t,i)}})},serialize:function(e){for(var t={},s=this.get().elements,i=0;i<s.length;i++){var a=s[i];if((!/(checkbox|radio)/.test(a.type)||a.checked)&&a.name&&!a.disabled&&"file"!==a.type){if("select-multiple"===a.type)for(var r=0;r<a.options.length;r++){var n=a.options[r];n.selected&&(t[a.name]=n.value)}t[a.name]=this._isNumber(a.value)?_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.value):this._getBooleanFromStr(a.value)}}return e?t:this._toParams(t)},ajax:function(e,t){if("undefined"!=typeof AjaxRequest){var s=this.attr("method")||"post",i={url:this.attr("action"),data:this.serialize(),success:e,error:t};return new AjaxRequest(s,i)}},_queryContext:function(e,t){return t=this._getContext(t),3!==t.nodeType&&"function"==typeof t.querySelectorAll?t.querySelectorAll(e):[]},_query:function(e,t){if(t)return this._queryContext(e,t);if(/^[.#]?[\w-]*$/.test(e)){if("#"===e[0]){var s=document.getElementById(e.slice(1));return s?[s]:[]}return"."===e[0]?document.getElementsByClassName(e.slice(1)):document.getElementsByTagName(e)}return document.querySelectorAll(e)},_getContext:function(e){return e="string"==typeof e?document.querySelector(e):e,e&&e.dom?e.get():e||document},_inject:function(e,t){for(var s=this.nodes.length,i=[];s--;){var a="function"==typeof e?e.call(this,this.nodes[s]):e,r=0===s?a:this._clone(a),n=t.call(this,r,this.nodes[s]);n&&(n.dom?i.push(n.get()):i.push(n))}return new Dom(i)},_cloneEvents:function(e,t){var s=e._e;if(s)for(var i in t._e=s,s._events)for(var a=0;a<s._events[i].length;a++)t.addEventListener(i,s._events[i][a]);return t},_clone:function(e){return"undefined"!=typeof e?"string"==typeof e?e:e instanceof Node||e.nodeType?e.cloneNode(!0):"length"in e?[].map.call(this._toArray(e),function(e){return e.cloneNode(!0)}):void 0:void 0},_slice:function(e){return e&&0!==e.length?e.length?[].slice.call(e.nodes||e):[e]:[]},_eachClass:function(e,t){return this.each(function(s){if(e){var i=function(e){s.classList&&s.classList[t](e)};e.split(" ").forEach(i)}})},_triggerEvent:function(e){var t=this.get();return t&&3!==t.nodeType&&t[e](),this},_getOneHandler:function(e,t){var s=this;return function(){e.apply(this,arguments),s.off(t)}},_getEventNamespace:function(e){var t=e.split("."),s=t[1]?t[1]:"_events";return t[2]?s+t[2]:s},_getEventName:function(e){return e.split(".")[0]},_offEvent:function(e,t,s,i,a){for(var r in e._e)for(var n in e._e[r])if(a(n,r,t,s))for(var o=e._e[r][n],l=0;l<o.length;l++)"undefined"!=typeof i&&o[l].toString()!==i.toString()||(e.removeEventListener(n,o[l]),e._e[r][n].splice(l,1),0===e._e[r][n].length&&delete e._e[r][n],0===_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(e._e[r]).length&&delete e._e[r])},_getInnerOrOuter:function(e,t){return this[e](void 0,t)},_getDocSize:function(e,t){var s=e.body,i=e.documentElement;return Math.max(s["scroll"+t],s["offset"+t],i["client"+t],i["scroll"+t],i["offset"+t])},_getSize:function(e,t,s,i){if(void 0===s){var a=this.get();return s=3===a.nodeType?0:9===a.nodeType?this._getDocSize(a,t):a===window?window["inner"+t]:this._getHeightOrWidth(e,a,i||"normal"),Math.round(s)}return this.each(function(t){s=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(s),s+=this._adjustResultHeightOrWidth(e,t,i||"normal"),new Dom(t).css(e,s+"px")}.bind(this))},_getHeightOrWidth:function(e,t,s){if(!t)return 0;var i=e.charAt(0).toUpperCase()+e.slice(1),a=0,r=getComputedStyle(t,null),n=new Dom(t),o=n.parents().filter(function(e){return 1===e.nodeType&&"none"===getComputedStyle(e,null).display&&e});if("none"===r.display&&o.add(t),0!==o.length){var l="visibility: hidden !important; display: block !important;",c=[];o.each(function(e){var t=new Dom(e),s=t.attr("style");null!==s&&c.push(s),t.attr("style",null!==s?s+";"+l:l)}),a=n.get()["offset"+i]-this._adjustResultHeightOrWidth(e,t,s),o.each(function(e,t){var s=new Dom(e);void 0===c[t]?s.removeAttr("style"):s.attr("style",c[t])})}else a=t["offset"+i]-this._adjustResultHeightOrWidth(e,t,s);return a},_adjustResultHeightOrWidth:function(e,t,s){if(!t||!1===s)return 0;var i=0,a=getComputedStyle(t,null),r="border-box"===a.boxSizing;return"height"===e?(("inner"===s||"normal"===s&&r)&&(i+=(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderTopWidth)||0)+(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderBottomWidth)||0)),"outer"===s&&(i-=(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginTop)||0)+(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginBottom)||0))):(("inner"===s||"normal"===s&&r)&&(i+=(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderLeftWidth)||0)+(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.borderRightWidth)||0)),"outer"===s&&(i-=(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginLeft)||0)+(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(a.marginRight)||0))),i},_getDim:function(e){var t=this.get();return 3===t.nodeType?{top:0,left:0}:this["_get"+e](t)},_getPosition:function(e){return{top:e.offsetTop,left:e.offsetLeft}},_getOffset:function(e){var t=e.getBoundingClientRect(),s=e.ownerDocument,i=s.documentElement,a=s.defaultView;return{top:t.top+a.pageYOffset-i.clientTop,left:t.left+a.pageXOffset-i.clientLeft}},_getSibling:function(e,t){e=e&&e.dom?e.get():e;var s,i=e&&e.nodeType;return this.each(function(a){for(;a=a[t];)if(i&&a===e||new Dom(a).is(e))return void(s=a)}),new Dom(s)},_toArray:function(e){if(e instanceof NodeList){for(var t=[],s=0;s<e.length;s++)t[s]=e[s];return t}return void 0===e?[]:e.dom?e.nodes:e},_toParams:function(e){var t="";for(var s in e)t+="&"+this._encodeUri(s)+"="+this._encodeUri(e[s]);return t.replace(/^&/,"")},_toObject:function(e){return new Function("return "+e)()},_encodeUri:function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_isNumber:function(e){return!isNaN(e)&&!isNaN(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(e))},_isObjectString:function(e){return-1!==e.search(/^{/)},_getBooleanFromStr:function(e){return"true"===e||"false"!==e&&e},_hasDisplayNone:function(e){return"none"===e.style.display||"none"===(e.currentStyle?e.currentStyle.display:getComputedStyle(e,null).display)}};var uuid=0,$R=function(e,t){return RedactorApp(e,t,[].slice.call(arguments,2))};$R.app=[],$R.version="3.1.6",$R.options={},$R.modules={},$R.services={},$R.classes={},$R.plugins={},$R.mixins={},$R.modals={},$R.lang={},$R.dom=function(e,t){return new Dom(e,t)},$R.ajax=Ajax,$R.Dom=Dom,$R.keycodes={BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37},$R.env={plugin:"plugins",module:"modules",service:"services",class:"classes",mixin:"mixins"},"undefined"!=typeof jQuery&&function(e){e.fn.redactor=function(e){return RedactorApp(this.toArray(),e,[].slice.call(arguments,1))}}(jQuery);var RedactorApp=function(e,t,s){for(var i,a="redactor",r=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(e)?e:e&&e.nodeType?[e]:document.querySelectorAll(e),n="string"==typeof t||"function"==typeof t,o=[],l=0;l<r.length;l++){var c=r[l],d=$R.dom(c);if(i=d.dataget(a),i||n||(i=new App(c,t,uuid),d.dataset(a,i),$R.app[uuid]=i,uuid++),i&&n){var u,h="destroy"===t;t=h?"stop":t,"function"==typeof t?u=t.apply(i,s):(s.unshift(t),u=i.api.apply(i,s)),void 0!==u&&o.push(u),h&&d.dataset(a,!1)}}return 0===o.length||1===o.length?0===o.length?i:o[0]:o};$R.add=function(e,t,s){if("undefined"!=typeof $R.env[e])if(s.translations&&($R.lang=$R.extend(!0,{},$R.lang,s.translations)),s.modals&&($R.modals=$R.extend(!0,{},$R.modals,s.modals)),"mixin"===e)$R[$R.env[e]][t]=s;else{var i=function(){};if(i.prototype=s,s.mixins)for(var a=0;a<s.mixins.length;a++)$R.inherit(i,$R.mixins[s.mixins[a]]);$R[$R.env[e]][t]=i}},$R.addLang=function(e,t){"undefined"==typeof $R.lang[e]&&($R.lang[e]={}),$R.lang[e]=$R.extend($R.lang[e],t)},$R.create=function(e){var t=e.split("."),s=[].slice.call(arguments,1),i="classes";"undefined"!=typeof $R.env[t[0]]&&(i=$R.env[t[0]],e=t.slice(1).join("."));var a=new $R[i][e];if(a.init){var r=a.init.apply(a,s);return r||a}return a},$R.inherit=function(e,t){var s=function(){};s.prototype=t;var i=new s;for(var a in e.prototype)e.prototype.__lookupGetter__(a)?i.__defineGetter__(a,e.prototype.__lookupGetter__(a)):i[a]=e.prototype[a];return e.prototype=i,e.prototype["super"]=t,e},$R.error=function(e){throw e},$R.extend=function(){var e={},t=!1,s=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],s++);for(var a=function(s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t&&"[object Object]"===Object.prototype.toString.call(s[i])?e[i]=$R.extend(!0,e[i],s[i]):e[i]=s[i])};i>s;s++){var r=arguments[s];a(r)}return e},$R.opts={animation:!0,lang:"en",direction:"ltr",spellcheck:!0,structure:!1,scrollTarget:!1,styles:!0,stylesClass:"redactor-styles",placeholder:!1,source:!0,showSource:!1,inline:!1,breakline:!1,markup:"p",enterKey:!0,clickToEdit:!1,clickToSave:!1,clickToCancel:!1,focus:!1,focusEnd:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:[],callbacks:{},preClass:!1,preSpaces:4,tabindex:!1,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveData:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarContext:!0,air:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,formattingHide:!1,buttons:["html","format","bold","italic","deleted","lists","image","file","link"],buttonsTextLabeled:!1,buttonsAdd:[],buttonsAddFirst:[],buttonsAddAfter:!1,buttonsAddBefore:!1,buttonsHide:[],buttonsHideOnMobile:[],imageUpload:!0,imageUploadParam:"file",imageData:!1,imageEditable:!1,imageCaption:!1,imageLink:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",imageFigure:!1,fileUpload:!1,fileUploadParam:"file",fileData:!1,fileAttachment:!1,uploadData:!1,dragUpload:!0,multipleUpload:!0,clipboardUpload:!0,uploadBase64:!1,linkTarget:!1,linkTitle:!1,linkNewTab:!1,linkNofollow:!1,linkSize:30,linkValidation:!0,cleanOnEnter:!0,cleanInlineOnEnter:!1,paragraphize:!0,removeScript:!0,removeNewLines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},pastePlainText:!1,pasteLinkTarget:!1,pasteImages:!0,pasteLinks:!0,pasteClean:!0,pasteKeepStyle:[],pasteKeepClass:[],pasteKeepAttrs:["td","th"],pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["a","img","br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i","abbr"],activeButtons:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",u:"underline"},activeButtonsAdd:{},activeButtonsObservers:{},autoparse:!0,autoparseStart:!0,autoparsePaste:!0,autoparseLinks:!0,autoparseImages:!0,autoparseVideo:!0,shortcodes:{"p.":{format:"p"},"quote.":{format:"blockquote"},"pre.":{format:"pre"},"h1.":{format:"h1"},"h2.":{format:"h2"},"h3.":{format:"h3"},"h4.":{format:"h4"},"h5.":{format:"h5"},"h6.":{format:"h6"},"*.":{format:"ul"}},shortcodesAdd:!1,shortcuts:{"ctrl+shift+m, meta+shift+m":{api:"module.inline.clearformat"},"ctrl+b, meta+b":{api:"module.inline.format",args:"b"},"ctrl+i, meta+i":{api:"module.inline.format",args:"i"},"ctrl+u, meta+u":{api:"module.inline.format",args:"u"},"ctrl+h, meta+h":{api:"module.inline.format",args:"sup"},"ctrl+l, meta+l":{api:"module.inline.format",args:"sub"},"ctrl+k, meta+k":{api:"module.link.open"},"ctrl+alt+0, meta+alt+0":{api:"module.block.format",args:"p"},"ctrl+alt+1, meta+alt+1":{api:"module.block.format",args:"h1"},"ctrl+alt+2, meta+alt+2":{api:"module.block.format",args:"h2"},"ctrl+alt+3, meta+alt+3":{api:"module.block.format",args:"h3"},"ctrl+alt+4, meta+alt+4":{api:"module.block.format",args:"h4"},"ctrl+alt+5, meta+alt+5":{api:"module.block.format",args:"h5"},"ctrl+alt+6, meta+alt+6":{api:"module.block.format",args:"h6"},"ctrl+shift+7, meta+shift+7":{api:"module.list.toggle",args:"ol"},"ctrl+shift+8, meta+shift+8":{api:"module.list.toggle",args:"ul"}},shortcutsAdd:!1,grammarly:!0,notranslate:!1,bufferLimit:100,emptyHtml:"<p></p>",markerChar:"\ufeff",imageTypes:["image/png","image/jpeg","image/gif"],inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small","abbr"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","table","tbody","thead","tfoot","tr","th","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],regex:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/(http|https)?:\/\/(?:www.|player.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_-]+)?/gi,imageurl:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi},input:!0,zindex:!1,modes:{inline:{pastePlainText:!0,pasteImages:!1,enterKey:!1,toolbar:!1,autoparse:!1,source:!1,showSource:!1,styles:!1,air:!1},original:{styles:!1}}},$R.lang.en={format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline",superscript:"Superscript",subscript:"Subscript","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U","superscript-abbr":"Sup","subscript-abbr":"Sub",lists:"Lists","link-insert":"Insert Link","link-edit":"Edit Link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save",delete:"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line",upload:"Upload","upload-label":"Drop an image file or click to upload","accessibility-help-label":"Rich text editor",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center",undo:"Undo",redo:"Redo"},$R.buttons={html:{title:"HTML",icon:!0,api:"module.source.toggle"},undo:{title:"## undo ##",icon:!0,api:"module.buffer.undo"},redo:{title:"## redo ##",icon:!0,api:"module.buffer.redo"},format:{title:"## format ##",icon:!0,dropdown:{p:{title:"## paragraph ##",api:"module.block.format",args:{tag:"p"}},blockquote:{title:"## quote ##",api:"module.block.format",args:{tag:"blockquote"}},pre:{title:"## code ##",api:"module.block.format",args:{tag:"pre"}},h1:{title:"## heading1 ##",api:"module.block.format",args:{tag:"h1"}},h2:{title:"## heading2 ##",api:"module.block.format",args:{tag:"h2"}},h3:{title:"## heading3 ##",api:"module.block.format",args:{tag:"h3"}},h4:{title:"## heading4 ##",api:"module.block.format",args:{tag:"h4"}},h5:{title:"## heading5 ##",api:"module.block.format",args:{tag:"h5"}},h6:{title:"## heading6 ##",api:"module.block.format",args:{tag:"h6"}}}},bold:{title:"## bold-abbr ##",icon:!0,tooltip:"## bold ##",api:"module.inline.format",args:{tag:"b"}},italic:{title:"## italic-abbr ##",icon:!0,tooltip:"## italic ##",api:"module.inline.format",args:{tag:"i"}},deleted:{title:"## deleted-abbr ##",icon:!0,tooltip:"## deleted ##",api:"module.inline.format",args:{tag:"del"}},underline:{title:"## underline-abbr ##",icon:!0,tooltip:"## underline ##",api:"module.inline.format",args:{tag:"u"}},sup:{title:"## superscript-abbr ##",icon:!0,tooltip:"## superscript ##",api:"module.inline.format",args:{tag:"sup"}},sub:{title:"## subscript-abbr ##",icon:!0,tooltip:"## subscript ##",api:"module.inline.format",args:{tag:"sub"}},lists:{title:"## lists ##",icon:!0,observe:"list",dropdown:{observe:"list",unorderedlist:{title:"&bull; ## unorderedlist ##",api:"module.list.toggle",args:"ul"},orderedlist:{title:"1. ## orderedlist ##",api:"module.list.toggle",args:"ol"},outdent:{title:"< ## outdent ##",api:"module.list.outdent"},indent:{title:"> ## indent ##",api:"module.list.indent"}}},ul:{title:"&bull; ## bulletslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ul"},ol:{title:"1. ## numberslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ol"},outdent:{title:"## outdent ##",icon:!0,api:"module.list.outdent",observe:"list"},indent:{title:"## indent ##",icon:!0,api:"module.list.indent",observe:"list"},image:{title:"## image ##",icon:!0,api:"module.image.open"},file:{title:"## file ##",icon:!0,api:"module.file.open"},link:{title:"## link ##",icon:!0,observe:"link",dropdown:{observe:"link",link:{title:"## link-insert ##",api:"module.link.open"},unlink:{title:"## unlink ##",api:"module.link.unlink"}}},line:{title:"## horizontalrule ##",icon:!0,api:"module.line.insert"}};var App=function(e,t,s){this.module={},this.plugin={},this.instances={},this.started=!1,this.stopped=!1,this.uuid=s,this.rootElement=e,this.rootOpts=t,this.dragInside=!1,this.dragComponentInside=!1,this.keycodes=$R.keycodes,this.namespace="redactor",this.$win=$R.dom(window),this.$doc=$R.dom(document),this.$body=$R.dom("body"),this.editorReadOnly=!1,this.opts=$R.create("service.options",t,e),this.lang=$R.create("service.lang",this),this.buildServices(),this.buildModules(),this.buildPlugins(),this.start()};App.prototype={start:function(){this.stopped=!1,this.broadcast("start"),this.broadcast("startcode"),this.opts.clickToEdit?this.broadcast("startclicktoedit"):(this.broadcast("enable"),this.opts.showSource&&this.broadcast("startcodeshow"),this.broadcast("enablefocus")),this.broadcast("started"),this.started=!0},stop:function(){this.started=!1,this.stopped=!0,this.broadcast("stop"),this.broadcast("disable"),this.broadcast("stopped")},isStarted:function(){return this.started},isStopped:function(){return this.stopped},buildServices:function(){var e=["options","lang"],t=["uuid","keycodes","opts","lang","$win","$doc","$body"],s=[];for(var i in $R.services)-1===e.indexOf(i)&&(this[i]=$R.create("service."+i,this),s.push(i),t.push(i));for(var a=0;a<s.length;a++)for(var r=s[a],n=0;n<t.length;n++){var o=t[n];r!==o&&(this[r][o]=this[o])}},buildModules:function(){for(var e in $R.modules)this.module[e]=$R.create("module."+e,this),this.instances[e]=this.module[e]},buildPlugins:function(){for(var e=this.opts.plugins,t=0;t<e.length;t++){var s=e[t];"undefined"!=typeof $R.plugins[s]&&(this.plugin[s]=$R.create("plugin."+s,this),this.instances[s]=this.plugin[s])}},isDragInside:function(){return this.dragInside},setDragInside:function(e){this.dragInside=e},isDragComponentInside:function(){return this.dragComponentInside},setDragComponentInside:function(e){this.dragComponentInside=e},getDragComponentInside:function(){return this.dragComponentInside},isReadOnly:function(){return this.editorReadOnly},enableReadOnly:function(){this.editorReadOnly=!0,this.broadcast("enablereadonly"),this.component.clearActive(),this.toolbar.disableButtons()},disableReadOnly:function(){this.editorReadOnly=!1,this.broadcast("disablereadonly"),this.toolbar.enableButtons()},callMessageHandler:function(e,t,s){var i=t.split(".");if(1===i.length)"function"==typeof e["on"+t]&&e["on"+t].apply(e,s);else{i[0]="on"+i[0];var a=this.utils.checkProperty(e,i);"function"==typeof a&&a.apply(e,s)}},broadcast:function(e){var t=[].slice.call(arguments,1);for(var s in this.instances)this.callMessageHandler(this.instances[s],e,t);return this.callback.trigger(e,t)},on:function(e,t){this.callback.add(e,t)},off:function(e,t){this.callback.remove(e,t)},api:function(e){if((this.isStarted()||"start"===e)&&(!this.isReadOnly()||"disableReadOnly"===e)){this.broadcast("state");var t=[].slice.call(arguments,1),s=e.split("."),i=1===s.length,a="on"===s[0]||"off"===s[0],r=!a&&2===s.length,n="plugin"===s[0],o="module"===s[0];if(i){if("function"==typeof this[s[0]])return this.callInstanceMethod(this,s[0],t)}else{if(a)return"on"===s[0]?this.on(s[1],t[0]):this.off(s[1],t[0]||void 0);if(r){if(this.isInstanceExists(this,s[0]))return this.callInstanceMethod(this[s[0]],s[1],t);$R.error(new Error('Service "'+s[0]+'" not found'))}else if(n){if(this.isInstanceExists(this.plugin,s[1]))return this.callInstanceMethod(this.plugin[s[1]],s[2],t);$R.error(new Error('Plugin "'+s[1]+'" not found'))}else if(o){if(this.isInstanceExists(this.module,s[1]))return this.callInstanceMethod(this.module[s[1]],s[2],t);$R.error(new Error('Module "'+s[1]+'" not found'))}}}},isInstanceExists:function(e,t){return"undefined"!=typeof e[t]},callInstanceMethod:function(e,t,s){return"function"==typeof e[t]?e[t].apply(e,s):void 0}},$R.add("mixin","formatter",{buildArgs:function(e){this.args={class:e["class"]||!1,style:e.style||!1,attr:e.attr||!1},this.args["class"]||this.args.style||this.args.attr||(this.args=!1)},applyArgs:function(e,t){return this.args?this[this.type](this.args,!1,e,t):this._clearAll(e,t)},clearClass:function(e,t){this.selection.save();var s=t?$R.dom(t):this.getElements(e,!0);return s.removeAttr("class"),t=this._unwrapSpanWithoutAttr(s.getAll()),this.selection.restore(),t},clearStyle:function(e,t){this.selection.save();var s=t?$R.dom(t):this.getElements(e,!0);return s.removeAttr("style"),t=this._unwrapSpanWithoutAttr(s.getAll()),this.selection.restore(),t},clearAttr:function(e,t){this.selection.save();var s=t?$R.dom(t):this.getElements(e,!0);return this._removeAllAttr(s),t=this._unwrapSpanWithoutAttr(s.getAll()),this.selection.restore(),t},set:function(e,t,s,i){!1!==i&&this.selection.save();var a=s?$R.dom(s):this.getElements(t);return e["class"]&&(a.removeAttr("class"),a.addClass(e["class"])),e.style&&(a.removeAttr("style"),a.css(e.style),a.each(function(e){var t=$R.dom(e);t.attr("data-redactor-style-cache",t.attr("style"))})),e.attr&&(this._removeAllAttr(a),a.attr(e.attr)),!1!==i&&this.selection.restore(),a.getAll()},toggle:function(e,t,s,i){!1!==i&&this.selection.save();var a,r=s?$R.dom(s):this.getElements(t);return e["class"]&&(r.toggleClass(e["class"]),r.each(function(e){""===e.className&&e.removeAttribute("class")})),e.style&&(a=e.style,r.each(function(e){var t=$R.dom(e);for(var s in a){var i=a[s],r=t.css(s);r=this.utils.isRgb(r)?this.utils.rgb2hex(r):r.replace(/"/g,""),i=this.utils.isRgb(i)?this.utils.rgb2hex(i):i.replace(/"/g,""),r=this.utils.hex2long(r),i=this.utils.hex2long(i);var n="string"==typeof i?i.toLowerCase():i,o="string"==typeof r?r.toLowerCase():r;n===o?t.css(s,""):t.css(s,i)}this._convertStyleQuotes(t),this.utils.removeEmptyAttr(e,"style")?t.removeAttr("data-redactor-style-cache"):t.attr("data-redactor-style-cache",t.attr("style"))}.bind(this))),e.attr&&(a=e.attr,r.each(function(e){var t=$R.dom(e);for(var s in a)t.attr(s)?t.removeAttr(s):t.attr(s,a[s])})),!1!==i&&this.selection.restore(),r.getAll()},add:function(e,t,s,i){!1!==i&&this.selection.save();var a=s?$R.dom(s):this.getElements(t);if(e["class"]&&a.addClass(e["class"]),e.style){var r=e.style;a.each(function(e){var t=$R.dom(e);t.css(r),t.attr("data-redactor-style-cache",t.attr("style")),this._convertStyleQuotes(t)}.bind(this))}return e.attr&&a.attr(e.attr),!1!==i&&this.selection.restore(),a.getAll()},remove:function(e,t,s,i){!1!==i&&this.selection.save();var a=s?$R.dom(s):this.getElements(t);if(e["class"]&&(a.removeClass(e["class"]),a.each(function(e){""===e.className&&e.removeAttribute("class")})),e.style){var r=e.style;a.each(function(e){var t=$R.dom(e);t.css(r,""),this.utils.removeEmptyAttr(e,"style")?t.removeAttr("data-redactor-style-cache"):t.attr("data-redactor-style-cache",t.attr("style"))}.bind(this))}return e.attr&&a.removeAttr(e.attr),s=this._unwrapSpanWithoutAttr(a.getAll()),!1!==i&&this.selection.restore(),s},_removeAllAttr:function(e){e.each(function(e){for(var t=e.attributes.length;t-- >0;){var s=e.attributes[t],i=s.name;"style"!==i&&"class"!==i&&e.removeAttributeNode(s)}})},_convertStyleQuotes:function(e){var t=e.attr("style");t&&e.attr("style",t.replace(/"/g,"'"))},_clearAll:function(e,t){!1!==t&&this.selection.save();for(var s=0;s<e.length;s++)for(var i=e[s];i.attributes.length>0;)i.removeAttribute(i.attributes[0].name);return e=this._unwrapSpanWithoutAttr(e),!1!==t&&this.selection.restore(),e},_unwrapSpanWithoutAttr:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s],a=i.attributes.length;0>=a&&3!==i.nodeType&&"SPAN"===i.tagName?$R.dom(i).unwrap():t.push(i)}return t}}),$R.add("mixin","dom",$R.Dom.prototype),$R.add("mixin","component",{get cmnt(){return!0}}),$R.add("service","options",{init:function(e,t){var s=$R.dom(t),i=$R.extend({},$R.opts,t?s.data():{},$R.options);return $R.extend(!0,i,e)}}),$R.add("service","lang",{init:function(e){this.app=e,this.opts=e.opts,this.vars=this._build(this.opts.lang)},rebuild:function(e){this.opts.lang=e,this.vars=this._build(e)},extend:function(e){this.vars=$R.extend(this.vars,e)},parse:function(e){if(void 0===e)return"";var t=e.match(/## (.*?) ##/g);if(t)for(var s=0;s<t.length;s++){var i=t[s].replace(/^##\s/g,"").replace(/\s##$/g,"");e=e.replace(t[s],this.get(i))}return e},get:function(e){var t="";return"undefined"!=typeof this.vars[e]?t=this.vars[e]:"en"!==this.opts.lang&&"undefined"!=typeof $R.lang.en[e]&&(t=$R.lang.en[e]),t},_build:function(e){var t=$R.lang.en;return"en"!==e&&(t=void 0!==$R.lang[e]?$R.lang[e]:t),t}}),$R.add("service","callback",{init:function(e){this.app=e,this.opts=e.opts,this.callbacks={},this.opts.callbacks&&this._set(this.opts.callbacks,"")},stop:function(){this.callbacks={}},add:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)},remove:function(e,t){if(void 0===t)delete this.callbacks[e];else{for(var s=0;s<this.callbacks[e].length;s++)this.callbacks[e].splice(s,1);0===_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(this.callbacks[e]).length&&delete this.callbacks[e]}},trigger:function(e,t){var s=this._loop(e,t,this.callbacks);return"undefined"==typeof s&&t&&!1!==t[0]?t[0]:s},_set:function(e,t){for(var s in e){var i=""===t?s:t+"."+s;"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e[s])?this._set(e[s],i):(this.callbacks[i]=[],this.callbacks[i].push(e[s]))}},_loop:function(e,t,s){var i;for(var a in s)if(e===a)for(var r=0;r<s[a].length;r++)i=s[a][r].apply(this.app,t);return i}}),$R.add("service","animate",{init:function(e){this.animationOpt=e.opts.animation},start:function(e,t,s,i){var a={duration:!1,iterate:!1,delay:!1,timing:!1,prefix:"redactor-"};return a="function"==typeof s?a:$R.extend(a,s),i="function"==typeof s?s:i,new $R.AnimatePlay(e,t,a,i,this.animationOpt)},stop:function(e){this.$el=$R.dom(e),this.$el.removeClass("redactor-animated");var t=this.$el.attr("redactor-animate-effect");this.$el.removeClass(t),this.$el.removeAttr("redactor-animate-effect");var s=this.$el.attr("redactor-animate-hide");s&&this.$el.addClass(s).removeAttr("redactor-animate-hide"),this.$el.off("animationend webkitAnimationEnd")}}),$R.AnimatePlay=function(e,t,s,i,a){return this.hidableEffects=["fadeOut","flipOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"],this.prefixes=["","-webkit-"],this.$el=$R.dom(e),this.$body=$R.dom("body"),this.callback=i,this.animation=a?t:this.buildAnimationOff(t),this.defaults=s,"slideUp"===this.animation&&this.$el.height(this.$el.height()),this.isInanimate()?this.inanimate():this.animate()},$R.AnimatePlay.prototype={buildAnimationOff:function(e){return this.isHidable(e)?"hide":"show"},buildHideClass:function(){return"redactor-animate-hide"},isInanimate:function(){return"show"===this.animation||"hide"===this.animation},isAnimated:function(){return this.$el.hasClass("redactor-animated")},isHidable:function(e){return-1!==this.hidableEffects.indexOf(e)},inanimate:function(){var e;return this.defaults.timing="linear","show"===this.animation?(e=this.buildHideClass(),this.$el.attr("redactor-animate-hide",e),this.$el.removeClass(e)):(e=this.$el.attr("redactor-animate-hide"),this.$el.addClass(e).removeAttr("redactor-animate-hide")),"function"==typeof this.callback&&this.callback(this),this},animate:function(){var e=this.defaults.delay?this.defaults.delay:0;return setTimeout(function(){if(this.$body.addClass("no-scroll-x"),this.$el.addClass("redactor-animated"),!this.$el.attr("redactor-animate-hide")){var e=this.buildHideClass();this.$el.attr("redactor-animate-hide",e),this.$el.removeClass(e)}this.$el.addClass(this.defaults.prefix+this.animation),this.$el.attr("redactor-animate-effect",this.defaults.prefix+this.animation),this.set(this.defaults.duration+"s",this.defaults.iterate,this.defaults.timing),this.complete()}.bind(this),1e3*e),this},set:function(e,t,s){for(var i=this.prefixes.length;i--;)!1===e&&""!==e||this.$el.css(this.prefixes[i]+"animation-duration",e),!1===t&&""!==t||this.$el.css(this.prefixes[i]+"animation-iteration-count",t),!1===s&&""!==s||this.$el.css(this.prefixes[i]+"animation-timing-function",s)},clean:function(){this.$body.removeClass("no-scroll-x"),this.$el.removeClass("redactor-animated"),this.$el.removeClass(this.defaults.prefix+this.animation),this.$el.removeAttr("redactor-animate-effect"),this.set("","","")},complete:function(){this.$el.one("animationend webkitAnimationEnd",function(){if(this.$el.hasClass(this.defaults.prefix+this.animation)&&this.clean(),this.isHidable(this.animation)){var e=this.$el.attr("redactor-animate-hide");this.$el.addClass(e).removeAttr("redactor-animate-hide")}"slideUp"===this.animation&&this.$el.height(""),"function"==typeof this.callback&&this.callback(this.$el)}.bind(this))}},$R.add("service","caret",{init:function(e){this.app=e},setStart:function(e){this._setCaret("Start",e)},setEnd:function(e){this._setCaret("End",e)},setBefore:function(e){this._setCaret("Before",e)},setAfter:function(e){this._setCaret("After",e)},isStart:function(e){return this._isStartOrEnd(e,"First")},isEnd:function(e){return this._isStartOrEnd(e,"Last")},setAtEnd:function(e){var t=this.inspector.parse(e),s=t.getTag(),i=document.createRange();if(this._isInPage(e)){if("a"===s){var a=this.utils.createInvisibleChar();e.appendChild(a),i.setStartBefore(a),i.collapse(!0)}else i.selectNodeContents(e),i.collapse(!1);this.selection.setRange(i)}},setAtStart:function(e){var t=document.createRange(),s=this.inspector.parse(e);if(this._isInPage(e)){if(t.setStart(e,0),t.collapse(!0),s.isInline()||this.utils.isEmpty(e)){var i=this.utils.createInvisibleChar();t.insertNode(i),t.selectNodeContents(i),t.collapse(!1)}this.selection.setRange(t)}},setAtBefore:function(e){var t=this.inspector.parse(e),s=document.createRange();if(this._isInPage(e)){if(s.setStartBefore(e),s.collapse(!0),t.isInline()){var i=this.utils.createInvisibleChar();e.parentNode.insertBefore(i,e),s.selectNodeContents(i),s.collapse(!1)}this.selection.setRange(s)}},setAtAfter:function(e){var t=document.createRange();if(this._isInPage(e)){t.setStartAfter(e),t.collapse(!0);var s=this.utils.createInvisibleChar();t.insertNode(s),t.selectNodeContents(s),t.collapse(!1),this.selection.setRange(t)}},setAtPrev:function(e){var t=e.previousSibling;t&&(t=3===t.nodeType&&this._isEmptyTextNode(t)?t.previousElementSibling:t,t&&this.setEnd(t))},setAtNext:function(e){var t=e.nextSibling;t&&(t=3===t.nodeType&&this._isEmptyTextNode(t)?t.nextElementSibling:t,t&&this.setStart(t))},_setCaret:function(e,t){var s=this.inspector.parse(t),i=s.getNode();i&&(this.component.clearActive(),this["_set"+e](i,s,s.getTag()))},_setStart:function(e,t,s){if(t.isText())return this.editor.focus(),this.setAtStart(e);if("ul"===s||"ol"===s){e=t.findFirstNode("li");var i=this.utils.getFirstElement(e),a=this.inspector.parse(i);if(i&&a.isComponent())return this.setStart(a.getComponent())}else if("dl"===s)e=t.findFirstNode("dt");else{if("br"===s||"hr"===s)return this.setBefore(e);if("td"===s||"th"===s){var r=t.getFirstElement(e);if(r)return this.setStart(r)}else{if("table"===s||"tr"===s)return this.setStart(t.findFirstNode("th, td"));if(t.isComponentType("code")&&!t.isFigcaption()){var n=t.findLastNode("pre, code");return this.editor.focus(),this.setAtStart(n)}if("figure"===s&&t.isComponentType("table")){var o=t.getTable(),l=this.inspector.parse(o);return this.setStart(l.findFirstNode("th, td"))}if(!t.isComponentType("table")&&t.isComponent()&&!t.isFigcaption())return this.component.setActive(e)}}this.editor.focus(),this._setInline(e,"Start")||this.setAtStart(e)},_setEnd:function(e,t,s){if(t.isText())return this.editor.focus(),this.setAtEnd(e);if("ul"===s||"ol"===s){e=t.findLastNode("li");var i=this.utils.getLastElement(e),a=this.inspector.parse(i);if(i&&a.isComponent())return this.setEnd(a.getComponent())}else if("dl"===s)e=t.findLastNode("dd");else{if("br"===s||"hr"===s)return this.setAfter(e);if("td"===s||"th"===s){var r=t.getLastElement();if(r)return this.setEnd(r)}else{if("table"===s||"tr"===s)return this.setEnd(t.findLastNode("th, td"));if(t.isComponentType("code")&&!t.isFigcaption()){var n=t.findLastNode("pre, code");return this.editor.focus(),this.setAtEnd(n)}if("figure"===s&&t.isComponentType("table")){var o=t.getTable(),l=this.inspector.parse(o);return this.setEnd(l.findLastNode("th, td"))}if(!t.isComponentType("table")&&t.isComponent()&&!t.isFigcaption())return this.component.setActive(e)}}if(this.editor.focus(),!this._setInline(e,"End")){if(this.utils.isEmpty(e))return this.setStart(e);this.setAtEnd(e)}},_setBefore:function(e,t,s){return 3===e.nodeType?this.setAtBefore(e):t.isInline()?this.setAtBefore(e):t.isFirstTableCell()?this.setAtPrev(t.getComponent()):"td"===s||"th"===s?this.setAtPrev(e):t.isFirstListItem()?this.setAtPrev(t.getList()):t.isFigcaption()?this.setStart(t.getComponent()):!t.isComponentType("table")&&t.isComponent()?this.setAtPrev(t.getComponent()):t.isBlock()?this.setAtPrev(e):(this.editor.focus(),void this.setAtBefore(e))},_setAfter:function(e,t,s){return 3===e.nodeType?this.setAtAfter(e):t.isInline()?this.setAtAfter(e):t.isLastTableCell()?this.setAtNext(t.getComponent()):"td"===s||"th"===s?this.setAtNext(e):t.isFirstListItem()?this.setAtNext(t.getList()):!t.isComponentType("table")&&t.isComponent()?this.setAtNext(t.getComponent()):t.isBlock()?this.setAtNext(e):(this.editor.focus(),void this.setAtAfter(e))},_setInline:function(e,t){var s=this._hasInlineChild(e,"Start"===t?"first":"last");return s?("Start"===t?this.setStart(s):this.setEnd(s),!0):void 0},_isStartOrEnd:function(e,t){var s=this.utils.getNode(e);if(!s)return!1;var i=this.inspector.parse(s);if(s=this._getStartEndNode(s,i,t),s&&3!==s.nodeType&&"LI"!==s.tagName){var a=3===s.nodeType?s.textContent:s.innerHTML;if(a=this.utils.trimSpaces(a),""===a)return!0}if(!i.isFigcaption()&&i.isComponent()&&!i.isComponentEditable())return!0;var r=this.offset.get(s,!0);return!!r&&("First"===t?0===r.start:r.end===this.offset.size(s,!0))},_isInPage:function(e){return!(!e||!e.nodeType)&&(e!==document.body&&document.body.contains(e))},_hasInlineChild:function(e,t){var s=this.inspector.parse(e),i="first"===t?s.getFirstNode():s.getLastNode(),a=$R.dom(i);return i&&3!==i.nodeType&&this.inspector.isInlineTag(i.tagName)&&!a.hasClass("redactor-component")&&!a.hasClass("non-editable")?i:void 0},_isEmptyTextNode:function(e){var t=e.textContent.trim().replace(/\n/,"");return t=this.utils.removeInvisibleChars(t),""===t},_getStartEndNode:function(e,t,s){return t.isFigcaption()?e=t.getFigcaption():t.isTable()?e=t["find"+s+"Node"]("th, td"):t.isList()?e=t["find"+s+"Node"]("li"):t.isComponentType("code")&&(e=t.findLastNode("pre, code")),e}}),$R.add("service","selection",{init:function(e){this.app=e},is:function(){var e=this.get();if(e){var t=e.anchorNode,s=this.inspector.parse(t);return s.isInEditor()||s.isEditor()}return!1},isCollapsed:function(){var e=this.get(),t=this.getRange();return!(!e||!e.isCollapsed)||!(!t||0!==t.toString().length)},isBackwards:function(){var e=!1,t=this.get();if(t&&!t.isCollapsed){var s=document.createRange();s.setStart(t.anchorNode,t.anchorOffset),s.setEnd(t.focusNode,t.focusOffset),e=s.collapsed,s.detach()}return e},isIn:function(e){var t=$R.dom(e).get(),s=this.getCurrent();return!(!s||!t)&&t.contains(s)},isText:function(){var e=this.get();if(e){var t=e.anchorNode,s=this.getBlock(t),i=this.getBlocks();if(s&&this.inspector.isTableCellTag(s.tagName)||!1===s&&0===i.length)return!0}return!1},isAll:function(e){var t=this.utils.getNode(e);if(!t)return!1;var s=this.editor.isEditor(t),i=this.inspector.parse(t);if(!i.isFigcaption()&&this.component.isNonEditable(t)&&this.component.isActive(t))return!0;if(s){var a=this.editor.getElement(),r=a.html().replace(/<p><\/p>$/i,""),n=this.getHtml(!1).length,o=r.length;if(n!==o)return!1}if(s&&this.editor.isEmpty()||this.isCollapsed())return!1;var l=this.offset.get(t,!0),c=this.offset.size(t,!0);return!s&&i.isComponentType("code")&&(c=this.getText().trim().length),!(!l||0!==l.start||l.end!==c)},hasNonEditable:function(){var e=this.getHtml(),t=$R.dom("<div>").html(e);return!this.isCollapsed()&&0!==t.find(".non-editable").length},setRange:function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},setAll:function(e){var t=this.utils.getNode(e);if(t){var s=this.inspector.parse(t);if(this.component.clearActive(),this.editor.focus(),this.editor.saveScroll(),this.editor.disableNonEditables(),t&&"TABLE"===t.tagName){var i=s.findFirstNode("td, th"),a=s.findLastNode("td, th");$R.dom(i).prepend(this.marker.build("start")),$R.dom(a).append(this.marker.build("end")),this.restoreMarkers()}else if(!s.isFigcaption()&&this.component.isNonEditable(t))this.component.setActive(t);else{s.isComponentType("code")&&(t=s.getComponentCodeElement(),t.focus());var r=document.createRange();r.selectNodeContents(t),this.setRange(r)}this.editor.enableNonEditables(),this.editor.restoreScroll()}},get:function(){var e=window.getSelection();return e.rangeCount>0?e:null},getRange:function(){var e=this.get();return e&&e.getRangeAt(0)?e.getRangeAt(0):null},getTextBeforeCaret:function(e){e="undefined"==typeof e?1:e;var t=this.editor.getElement().get(),s=this.getRange(),i=!1;return s&&(s=s.cloneRange(),s.collapse(!0),s.setStart(t,0),i=s.toString().slice(-e)),i},getTextAfterCaret:function(e){e="undefined"==typeof e?1:e;var t=this.editor.getElement().get(),s=this.getRange(),i=!1;if(s){var a=s.cloneRange();a.selectNodeContents(t),a.setStart(s.endContainer,s.endOffset),i=a.toString().slice(0,e)}return i},getPosition:function(){var e=this.getRange(),t={top:0,left:0,width:0,height:0};if(window.getSelection&&e.getBoundingClientRect){e=e.cloneRange();var s=e.startOffset-1;e.setStart(e.startContainer,0>s?0:s);var i=e.getBoundingClientRect();t={top:i.top,left:i.left,width:i.right-i.left,height:i.bottom-i.top}}return t},getCurrent:function(){var e=!1,t=this.get(),s=this.component.getActive();if(s)e=s;else if(t&&this.is()){var i=this.inspector.parse(t.anchorNode);e=!i.isEditor()&&t.anchorNode}return e},getParent:function(){var e=!1,t=this.getCurrent();if(t){var s=t.parentNode,i=this.inspector.parse(s);e=!i.isEditor()&&s}return e},getElement:function(e){for(var t=e||this.getCurrent();t;){var s=this.inspector.parse(t);if(s.isElement()&&s.isInEditor())return t;t=t.parentNode}return!1},getInline:function(e){for(var t=e||this.getCurrent(),s=!1;t;)this._isInlineNode(t)&&(s=t),t=t.parentNode;return s},getInlineFirst:function(e){for(var t=e||this.getCurrent();t;){if(this._isInlineNode(t))return t;t=t.parentNode}return!1},getInlineAll:function(e){for(var t=e||this.getCurrent(),s=[];t;)this._isInlineNode(t)&&s.push(t),t=t.parentNode;return s},getBlock:function(e){for(var t=e||this.getCurrent();t;){var s=this.inspector.parse(t),i=this.inspector.isBlockTag(t.tagName);if(i&&s.isInEditor(t))return t;t=t.parentNode}return!1},getInlinesAllSelected:function(e){if(this.isAll())return[];var t=this.getInlines({all:!0}),s=this.getNodes({textnodes:!0,inline:!1}),i=this.getText().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),a=[];if(0!==s.length)return a;if(""===i)a=t;else if(t.length>1)for(var r=0;r<t.length;r++)this._isTextSelected(t[r],i)&&a.push(t[r]);else 1===t.length&&this._isTextSelected(t[0],i)&&(a=t);return e&&e.tags?this._filterNodesByTags(a,e.tags):a},getInlines:function(e){for(var t=this.getNodes(),s=[],i=0;i<t.length;i++){var a;if(e&&e.all)for(a=t[i];a;)this._isInlineNode(a)&&!this._isInNodesArray(s,a)&&s.push(a),a=a.parentNode;else a=this.getInline(t[i]),a&&!this._isInNodesArray(s,a)&&s.push(a)}return s=e&&e.tags?this._filterNodesByTags(s,e.tags):s,e&&e.inside?this._filterInlinesInside(s,e):s},getBlocks:function(e){var t=this.getNodes(),s=this.getBlock();t=0===t.length&&s?[s]:t;for(var i=[],a=0;a<t.length;a++){var r=this.getBlock(t[a]);r&&!this._isInNodesArray(i,r)&&i.push(r)}return i=e&&e.tags?this._filterNodesByTags(i,e.tags):i,e&&e.first?this._filterBlocksFirst(i,e):i},getElements:function(e){var t=this.getNodes({textnodes:!1}),s=this.getBlock();t=0===t.length&&s?[s]:t;for(var i=[],a=0;a<t.length;a++)this._isInNodesArray(i,t[a])||i.push(t[a]);return e&&e.tags?this._filterNodesByTags(i,e.tags):i},getNodes:function(e){var t=[],s=this.component.getActive();if(s)t=this._getNodesComponent(s);else if(this.isCollapsed()){var i=this.getCurrent();t=i?[i]:[]}else this.is()&&!s&&(t=this._getRangeSelectedNodes());return t=this._filterServicesNodes(t),t=this._filterEditor(t),t=e&&e.tags?this._filterNodesByTags(t,e.tags):t,t=e&&e.textnodes?this._filterNodesTexts(t,e):t,e&&!e.textnodes?this._filterNodesElements(t):t},getText:function(){var e=this.get();return e?this.utils.removeInvisibleChars(e.toString()):""},getHtml:function(e){var t="",s=this.get();if(s){for(var i=document.createElement("div"),a=s.rangeCount,r=0;a>r;++r)i.appendChild(s.getRangeAt(r).cloneContents());t=i.innerHTML,t=!1!==e?this.cleaner.output(t):t,t=t.replace(/<p><\/p>$/i,"")}return t},clear:function(){this.component.clearActive(),this.get().removeAllRanges()},collapseToStart:function(){var e=this.get();e&&!e.isCollapsed&&e.collapseToStart()},collapseToEnd:function(){var e=this.get();e&&!e.isCollapsed&&e.collapseToEnd()},saveActiveComponent:function(){var e=this.component.getActive();return!!e&&(this.savedComponent=e,!0)},restoreActiveComponent:function(){return!!this.savedComponent&&(this.component.setActive(this.savedComponent),!0)},save:function(){this._clearSaved();var e=this.getElement(),t=["TD","TH","P","DIV","PRE","H1","H2","H3","H4","H5","H6","LI","BLOCKQUOTE"];!e||-1===t.indexOf(e.tagName)||""!==e.innerHTML&&"<br>"!==e.innerHTML?this.saveActiveComponent()||(this.saved=this.offset.get()):this.savedElement=e},restore:function(){(this.saved||this.savedComponent||this.savedElement)&&(this.editor.saveScroll(),this.savedElement?this.caret.setStart(this.savedElement):this.restoreActiveComponent()||this.offset.set(this.saved),this._clearSaved(),this.editor.restoreScroll())},saveMarkers:function(){this._clearSaved(),this.saveActiveComponent()||this.marker.insert()},restoreMarkers:function(){this.editor.saveScroll(),this.restoreActiveComponent()||this.marker.restore(),this._clearSaved(),this.editor.restoreScroll()},_getNextNode:function(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},_getNodesComponent:function(e){var t=this.getCurrent(),s=this.inspector.parse(t);return s.isFigcaption()?[s.getFigcaption()]:[e]},_getRangeSelectedNodes:function(){var e=[],t=this.getRange(),s=t.startContainer,i=t.startContainer,a=t.endContainer,r=this.editor.getElement();if(i===r.get()&&this.isAll())e=this.utils.getChildNodes(r);else if(s==a)e=[s];else{for(;s&&s!=a;)e.push(s=this._getNextNode(s));for(s=t.startContainer;s&&s!=t.commonAncestorContainer;)e.unshift(s),s=s.parentNode}return e},_isInNodesArray:function(e,t){return-1!==e.indexOf(t)},_filterEditor:function(e){for(var t=[],s=0;s<e.length;s++){var i=this.inspector.parse(e[s]);i.isInEditor()&&t.push(e[s])}return t},_filterServicesNodes:function(e){for(var t=[],s=0;s<e.length;s++){var i=$R.dom(e[s]),a=!1;e[s]&&3===e[s].nodeType&&this.utils.isEmpty(e[s])&&(a=!0),(i.hasClass("redactor-script-tag")||i.hasClass("redactor-component-caret")||i.hasClass("redactor-selection-marker")||i.hasClass("non-editable"))&&(a=!0),a||t.push(e[s])}return t},_filterNodesTexts:function(e,t){for(var s=[],i=0;i<e.length;i++)if(3===e[i].nodeType||t.keepbr&&"BR"===e[i].tagName){var a=this.getInline(e[i]),r=a&&t&&!1===t.inline;r||s.push(e[i])}return s},_filterNodesElements:function(e){for(var t=[],s=0;s<e.length;s++)3!==e[s].nodeType&&t.push(e[s]);return t},_filterNodesByTags:function(e,t,s){for(var i=[],a=0;a<e.length;a++)if(s&&3===e[a].nodeType)i.push(e[a]);else if(3!==e[a].nodeType){var r=e[a].tagName.toLowerCase();-1!==t.indexOf(r.toLowerCase())&&i.push(e[a])}return i},_filterBlocksFirst:function(e){for(var t=[],s=0;s<e.length;s++){var i=$R.dom(e[s]),a=i.parent().get(),r=i.parent().hasClass("redactor-in"),n=a&&("TD"===a.tagName||"TH"===a.tagName);(r||n)&&t.push(e[s])}return t},_filterInlinesInside:function(e){for(var t=[],s=0;s<e.length;s++)window.getSelection().containsNode(e[s],!0)&&t.push(e[s]);return t},_isTextSelected:function(e,t){var s=this.utils.removeInvisibleChars(e.textContent);return t===s||-1!==s.search(t)||-1!==t.search(new RegExp("^"+s))||-1!==t.search(new RegExp(s+"$"))},_isInlineNode:function(e){var t=this.inspector.parse(e);return this.inspector.isInlineTag(e.tagName)&&t.isInEditor()},_clearSaved:function(){this.saved=!1,this.savedComponent=!1,this.savedElement=!1}}),$R.add("service","element",{init:function(e){this.app=e,this.rootElement=e.rootElement,this.$element={},this.type="inline"},start:function(){this._build(),this._buildType()},isType:function(e){return e===this.type},getType:function(){return this.type},getElement:function(){return this.$element},_build:function(){this.$element=$R.dom(this.rootElement)},_buildType:function(){var e=this.$element.get().tagName;this.type="TEXTAREA"===e?"textarea":this.type,this.type="DIV"===e?"div":this.type,this.type=this.opts.inline?"inline":this.type}}),$R.add("service","editor",{init:function(e){this.app=e,this.scrolltop=!1,this.pasting=!1},start:function(){this._build()},focus:function(){this.isFocus()||this._isContenteditableFocus()||(this.saveScroll(),this.$editor.focus(),this.restoreScroll())},startFocus:function(){this.caret.setStart(this.getFirstNode())},endFocus:function(){this.caret.setEnd(this.getLastNode())},isPasting:function(){return this.pasting},enablePasting:function(){this.pasting=!0},disablePasting:function(){this.pasting=!1},saveScroll:function(){this.scrolltop=this._getScrollTarget().scrollTop()},restoreScroll:function(){!1!==this.scrolltop&&(this._getScrollTarget().scrollTop(this.scrolltop),this.scrolltop=!1)},disableNonEditables:function(){this.$noneditables=this.$editor.find("[contenteditable=false]"),this.$noneditables.attr("contenteditable",!0)},enableNonEditables:function(){this.$noneditables&&setTimeout(function(){this.$noneditables.attr("contenteditable",!1)}.bind(this),1)},getFirstNode:function(){return this.$editor.contents()[0]},getLastNode:function(){var e=this.$editor.contents();return e[e.length-1]},isSourceMode:function(){var e=this.source.getElement();return e.hasClass("redactor-source-open")},isEditor:function(e){var t=$R.dom(e).get();return t===this.$editor.get()},isEmpty:function(e){return this.utils.isEmptyHtml(this.$editor.html(),!1,e)},isFocus:function(){var e=$R.dom(document.activeElement),t=0!==this.$editor.find(".redactor-component-active").length;return t||0!==e.closest(".redactor-in-"+this.uuid).length},setEmpty:function(){this.$editor.html(this.opts.emptyHtml)},getElement:function(){return this.$editor},_build:function(){var e=this.element.getElement(),t=this.element.isType("textarea")?"<div>":e.get();this.$editor=$R.dom(t)},_getScrollTarget:function(){var e=this.$doc;return this.opts.toolbarFixedTarget!==document?$R.dom(this.opts.toolbarFixedTarget):this.opts.scrollTarget?$R.dom(this.opts.scrollTarget):e},_isContenteditableFocus:function(){var e=this.selection.getBlock(),t=e?$R.dom(e).closest("[contenteditable=true]").not(".redactor-in"):[];return 0!==t.length}}),$R.add("service","container",{init:function(e){this.app=e},start:function(){this._build()},getElement:function(){return this.$container},_build:function(){var e=this.element.isType("inline")?"<span>":"<div>";this.$container=$R.dom(e)}}),$R.add("service","source",{init:function(e){this.app=e,this.$source={},this.content=""},start:function(){this._build(),this._buildName(),this._buildStartedContent()},getElement:function(){return this.$source},getCode:function(){return this.$source.val()},getName:function(){return this.$source.attr("name")},getStartedContent:function(){return this.content},setCode:function(e){return this.insertion.set(e,!0,!1)},isNameGenerated:function(){return this.name},rebuildStartedContent:function(){this._buildStartedContent()},_build:function(){var e=this.element.getElement(),t=this.element.isType("textarea"),s=t?e.get():"<textarea>";this.$source=$R.dom(s)},_buildName:function(){var e=this.element.getElement();this.name=e.attr("name"),this.$source.attr("name",this.name?this.name:"content-"+this.uuid)},_buildStartedContent:function(){var e=this.element.getElement(),t=this.element.isType("textarea")?e.val():e.html();this.content=t.trim()}}),$R.add("service","statusbar",{init:function(e){this.app=e,this.$statusbar={},this.items=[]},start:function(){this.$statusbar=$R.dom("<ul>"),this.$statusbar.attr("dir",this.opts.direction)},add:function(e,t){return this.update(e,t)},update:function(e,t){var s;return"undefined"!=typeof this.items[e]?s=this.items[e]:(s=$R.dom("<li>"),this.$statusbar.append(s),this.items[e]=s),s.html(t)},get:function(e){return!!this.items[e]&&this.items[e]},remove:function(e){this.items[e]&&(this.items[e].remove(),delete this.items[e])},getItems:function(){return this.items},removeItems:function(){this.items={},this.$statusbar.html("")},getElement:function(){return this.$statusbar}}),$R.add("service","toolbar",{init:function(e){this.app=e,this.buttons=[],this.dropdownOpened=!1,this.buttonsObservers={}},start:function(){this.is()&&(this.opts.activeButtons=this.opts.activeButtonsAdd?this._extendActiveButtons():this.opts.activeButtons,this.create())},stopObservers:function(){this.buttonsObservers={}},create:function(){this.$wrapper=$R.dom("<div>"),this.$toolbar=$R.dom("<div>")},observe:function(){if(this.is()){var e,t;for(var s in this.setButtonsInactive(),this.buttonsObservers)t=this.buttonsObservers[s],e=this.getButton(s),this.app.broadcast("button."+t+".observe",e);var i=this.opts.activeButtons,a=this.selection.getInlinesAllSelected(),r=this.selection.getInline();this.selection.isCollapsed()&&r&&a.push(r);var n=this._inlinesToTags(a);for(var o in i)-1!==n.indexOf(o)&&(e=this.getButton(i[o]),e.setActive())}},is:function(){return!(!this.opts.toolbar||this.detector.isMobile()&&this.opts.air)},isAir:function(){return!!this.is()&&this.$toolbar.hasClass("redactor-air")},isFixed:function(){return!!this.is()&&this.$toolbar.hasClass("redactor-toolbar-fixed")},isContextBar:function(){var e=this.$body.find("#redactor-context-toolbar-"+this.uuid);return e.hasClass("open")},isTarget:function(){return this.opts.toolbarFixedTarget!==document},getElement:function(){return this.$toolbar},getWrapper:function(){return this.$wrapper},getDropdown:function(){return this.dropdownOpened},getTargetElement:function(){return $R.dom(this.opts.toolbarFixedTarget)},getButton:function(e){var t=this._findButton(".re-"+e);return 0!==t.length&&t.dataget("data-button-instance")},getButtonByIndex:function(e){var t=this.$toolbar.find(".re-button").eq(e);return 0!==t.length&&t.dataget("data-button-instance")},getButtons:function(){var e=[];return this._findButtons().each(function(t){var s=$R.dom(t);e.push(s.dataget("data-button-instance"))}),e},getButtonsKeys:function(){var e=[];return this._findButtons().each(function(t){var s=$R.dom(t);e.push(s.attr("data-re-name"))}),e},addButton:function(e,t,s,i,a){s=s||"end";var r=this._getButtonIndex(e),n=$R.create("toolbar.button",this.app,e,t);if(t.observe&&(this.opts.activeButtonsObservers[e]={observe:t.observe,button:n}),!0!==a)if(0===r)s="first";else if(-1!==r){var o=this.getButtonByIndex(r-1);o&&(s="after",i=o)}return this.is()&&("first"===s?this.$toolbar.prepend(n):"after"===s?i.after(n):"before"===s?i.before(n):this.$toolbar.append(n)),n},addButtonFirst:function(e,t){return this.addButton(e,t,"first")},addButtonAfter:function(e,t,s){var i=this.getButton(e);return i?this.addButton(t,s,"after",i):this.addButton(t,s)},addButtonBefore:function(e,t,s){var i=this.getButton(e);return i?this.addButton(t,s,"before",i):this.addButton(t,s)},addButtonObserver:function(e,t){this.buttonsObservers[e]=t},setButtons:function(e){this.buttons=e},setDropdown:function(e){this.dropdownOpened=e},setButtonsInactive:function(){for(var e=this.getButtons(),t=0;t<e.length;t++)e[t].setInactive()},setButtonsActive:function(){for(var e=this.getButtons(),t=0;t<e.length;t++)e[t].setActive()},disableButtons:function(){for(var e=this.getButtons(),t=0;t<e.length;t++)e[t].disable()},enableButtons:function(){for(var e=this.getButtons(),t=0;t<e.length;t++)e[t].enable()},_getButtonIndex:function(e){var t=this.buttons.indexOf(e);return-1!==t&&t},_findButton:function(e){return this.is()?this.$toolbar.find(e):$R.dom()},_findButtons:function(){return this.is()?this.$toolbar.find(".re-button"):$R.dom()},_extendActiveButtons:function(){return $R.extend({},this.opts.activeButtons,this.opts.activeButtonsAdd)},_inlinesToTags:function(e){for(var t=[],s=0;s<e.length;s++)t.push(e[s].tagName.toLowerCase());return t}}),$R.add("class","toolbar.button",{mixins:["dom"],init:function(e,t,s){this.app=e,this.opts=e.opts,this.lang=e.lang,this.$body=e.$body,this.toolbar=e.toolbar,this.detector=e.detector,this.obj=s,this.name=t,this.dropdown=!1,this.tooltip=!1,this._init()},isActive:function(){return this.hasClass("redactor-button-active")},isDisabled:function(){return this.hasClass("redactor-button-disabled")},hasIcon:function(){return this.obj.icon&&!this.opts.buttonsTextLabeled},setDropdown:function(e){this.obj.dropdown=e,this.obj.message=!1,this.dropdown=$R.create("toolbar.dropdown",this.app,this.name,this.obj.dropdown),this.attr("data-dropdown",!0)},setMessage:function(e,t){this.obj.message=e,this.obj.args=t,this.obj.dropdown=!1},setApi:function(e,t){this.obj.api=e,this.obj.args=t,this.obj.dropdown=!1},setTitle:function(e){this.obj.title=this.lang.parse(e),this.obj.tooltip=this.obj.title,this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip}),this.attr("data-re-icon")||this.html(this.obj.title)},setTooltip:function(e){this.obj.tooltip=this.lang.parse(e),this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip})},setIcon:function(e){this.opts.buttonsTextLabeled||(this.obj.icon=!0,this.$icon=$R.dom(e),this.html(""),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon"),this.setTooltip(this.obj.title),this._buildTooltip())},setActive:function(){this.addClass("redactor-button-active")},setInactive:function(){this.removeClass("redactor-button-active")},hideTooltip:function(){this.$body.find(".re-button-tooltip").remove()},getDropdown:function(){return this.dropdown},disable:function(){this.addClass("redactor-button-disabled")},enable:function(){this.removeClass("redactor-button-disabled")},toggle:function(e){e&&e.preventDefault(),this.isDisabled()||(this.obj.dropdown?this.dropdown.toggle(e):this.obj.api?this.app.api(this.obj.api,this.obj.args,this.name):this.obj.message&&this.app.broadcast(this.obj.message,this.obj.args,this.name),this.hideTooltip())},_init:function(){this._parseTitle(),this._parseTooltip(),this._build(),this._buildCallback(),this._buildAttributes(),this._buildObserver(),this.hasIcon()?(this._buildIcon(),this._buildTooltip()):this.html(this.obj.title)},_parseTooltip:function(){this.obj.tooltip=this.obj.tooltip?this.lang.parse(this.obj.tooltip):this.obj.title},_parseTitle:function(){this.obj.title=this.lang.parse(this.obj.title)},_build:function(){this.parse("<a>"),this.addClass("re-button re-"+this.name),this.attr("data-re-name",this.name),this.dataset("data-button-instance",this),this.obj.dropdown&&this.setDropdown(this.obj.dropdown)},_buildCallback:function(){this.on("click",this.toggle.bind(this))},_buildAttributes:function(){var e={href:"#",alt:this.obj.tooltip,rel:this.name,role:"button","aria-label":this.obj.tooltip,tabindex:"-1"};this.attr(e)},_buildObserver:function(){"undefined"!=typeof this.obj.observe&&this.toolbar.addButtonObserver(this.name,this.obj.observe)},_buildIcon:function(){var e=this.obj.icon,t=/(<([^>]+)>)/gi.test(e);this.$icon=t?$R.dom(e):$R.dom("<i>"),t||this.$icon.addClass("re-icon-"+this.name),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon")},_buildTooltip:function(){this.detector.isDesktop()&&(this.tooltip=$R.create("toolbar.button.tooltip",this.app,this))}}),$R.add("class","toolbar.button.tooltip",{mixins:["dom"],init:function(e,t){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.$body=e.$body,this.toolbar=e.toolbar,this.$button=t,this.created=!1,this._init()},open:function(){if(!this.$button.hasClass("redactor-button-disabled")&&!this.$button.hasClass("redactor-button-active")){this.created=!0,this.parse("<span>"),this.addClass("re-button-tooltip re-button-tooltip-"+this.uuid),this.$body.append(this),this.html(this.$button.attr("alt"));var e=this.$button.offset(),t="absolute",s=this.$button.height(),i=this.$button.width(),a=4;this.css({top:e.top+s+a+"px",left:e.left+i/2-this.width()/2+"px",position:t}),this.show()}},close:function(){this.created&&!this.$button.hasClass("redactor-button-disabled")&&(this.remove(),this.created=!1)},_init:function(){this.$button.on("mouseover",this.open.bind(this)),this.$button.on("mouseout",this.close.bind(this))}}),$R.add("class","toolbar.dropdown",{mixins:["dom"],init:function(e,t,s){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.$win=e.$win,this.$doc=e.$doc,this.$body=e.$body,this.animate=e.animate,this.toolbar=e.toolbar,this.name=t,this.started=!1,this.items=s,this.$items=[]},toggle:function(e){this.started||this._build(),this.isOpened()&&this.isActive()?this.close(!1):this.open(e)},isOpened:function(){var e=this.$body.find(".redactor-dropdown-"+this.uuid+".open");return 0!==e.length&&e.attr("data-re-name")===this.name},isActive:function(){var e=this.$body.find("#redactor-dropdown-"+this.uuid+"-"+this.name+".open");return 0!==e.length},getName:function(){return this.attr("data-re-name")},getItem:function(e){return this.$items[e]},getItemsByClass:function(e){var t=[];for(var s in this.$items)"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.$items[s])&&this.$items[s].hasClass(e)&&t.push(this.$items[s]);return t},open:function(e){this._closeAll(),this.$btn=this.toolbar.getButton(this.name),this.app.broadcast("dropdown.open",e,this,this.$btn),this.toolbar.setDropdown(this),this.show(),this.removeClass("redactor-animate-hide"),this.addClass("open"),this._observe(),this.$btn.hideTooltip(),this.$btn.setActive(),this.$doc.on("keyup.redactor.dropdown-"+this.uuid,this._handleKeyboard.bind(this)),this.$doc.on("click.redactor.dropdown-"+this.uuid+" touchstart.redactor.dropdown-"+this.uuid,this.close.bind(this)),this.updatePosition(),this.app.broadcast("dropdown.opened",e,this,this.$btn)},close:function(e,t){if(e){var s=$R.dom(e.target);if(this._isButton(e)||s.hasClass("redactor-dropdown-not-close")||s.hasClass("redactor-dropdown-item-disabled"))return void e.preventDefault()}this.app.broadcast("dropdown.close",this,this.$btn),this.toolbar.setDropdown(!1),this.$btn.setInactive(),!1===t?this._close():this.animate.start(this,"fadeOut",this._close.bind(this))},updatePosition:function(){var e=this.toolbar.isFixed(),t=this.$btn.offset();t.top=e?this.$btn.position().top:t.top;var s=this.$btn.height(),i=this.$btn.width(),a=e?"fixed":"absolute",r=e?2+this.opts.toolbarFixedTopOffset:2,n=0,o=t.left+n,l=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(this.css("width")),c=this.$win.width(),d=o+l>c?l-i:0,u=o-d;u=0>u?4:u,this.css({position:a,top:t.top+s+r+"px",left:u+"px"})},_build:function(){this.parse("<div>"),this.attr("dir",this.opts.direction),this.attr("id","redactor-dropdown-"+this.uuid+"-"+this.name),this.attr("data-re-name",this.name),this.addClass("redactor-dropdown redactor-dropdown-"+this.uuid+" redactor-dropdown-"+this.name),this.dataset("data-dropdown-instance",this);var e=this.items.dom||"string"==typeof this.items;e?this._buildDom():this._buildItems(),this.$body.append(this),this.started=!0},_buildDom:function(){this.html("").append($R.dom(this.items))},_buildItems:function(){for(var e in this.items="format"===this.name?this._buildFormattingItems():this.items,this.items){var t=this.items[e];if("observe"===e)this.attr("data-observe",this.items[e]);else{var s=$R.create("toolbar.dropdown.item",this.app,e,t,this);this.$items[e]=s,this.append(s)}}},_buildFormattingItems:function(){for(var e in this.items)-1===this.opts.formatting.indexOf(e)&&delete this.items[e];if(this.opts.formattingHide)for(var e in this.items)-1!==this.opts.formattingHide.indexOf(e)&&delete this.items[e];if(this.opts.formattingAdd)for(var e in this.opts.formattingAdd)this.items[e]=this.opts.formattingAdd[e];return this.items},_handleKeyboard:function(e){27===e.which&&this.close()},_isButton:function(e){var t=$R.dom(e.target),s=t.closest(".re-button");return s.get()===this.$btn.get()},_close:function(){this.$btn.setInactive(),this.$doc.off(".redactor.dropdown-"+this.uuid),this.removeClass("open"),this.addClass("redactor-animate-hide"),this.app.broadcast("dropdown.closed",this,this.$btn)},_closeAll:function(){this.$body.find(".redactor-dropdown-"+this.uuid+".open").each(function(e){var t=$R.dom(e),s=t.dataget("data-dropdown-instance");s._close()})},_observe:function(){var e=this.attr("data-observe");e&&this.app.broadcast("dropdown."+e+".observe",this)}}),$R.add("class","toolbar.dropdown.item",{mixins:["dom"],init:function(e,t,s,i){this.app=e,this.lang=e.lang,this.dropdown=i,this.name=t,this.obj=s,this._init()},setTitle:function(e){this.$span.html(e)},getTitle:function(){return this.$span.html()},enable:function(){this.removeClass("redactor-dropdown-item-disabled")},disable:function(){this.addClass("redactor-dropdown-item-disabled")},toggle:function(e){e&&e.preventDefault(),this.hasClass("redactor-dropdown-item-disabled")||(this.obj.message?this.app.broadcast(this.obj.message,this.obj.args,this.name):this.obj.api&&this.app.api(this.obj.api,this.obj.args,this.name))},_init:function(){this.parse("<a>"),this.attr("href","#"),this.addClass("redactor-dropdown-item-"+this.name),this.obj.classname&&this.addClass(this.obj.classname),this.attr("data-re-name",this.name),this.on("click",this.toggle.bind(this)),this.$span=$R.dom("<span>"),this.append(this.$span),this.setTitle(this.lang.parse(this.obj.title))}}),$R.add("service","cleaner",{init:function(e){this.app=e,this.opts=e.opts,this.storedComponents=[],this.storedImages=[],this.storedLinks=[],this.deniedTags=["font","html","head","link","title","body","meta","applet"],this.convertRules={},this.unconvertRules={},this.reComments=/<!--[\s\S]*?-->/g,this.reSpacedEmpty=/^(||\s||<br\s?\/?>||&nbsp;)$/i,this.reScriptTag=/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi},addConvertRules:function(e,t){this.convertRules[e]=t},addUnconvertRules:function(e,t){this.unconvertRules[e]=t},input:function(e,t,s){e=this.encodePreCode(e),e=e.replace(/\$/g,"&#36;"),e=e.replace(/&amp;/g,"&");var i=$R.create("cleaner.figure",this.app);return e=i.convert(e,this.convertRules),e=this.storeComponents(e),e=this.replaceTags(e,this.opts.replaceTags),e=this._setSpanAttr(e),e=this._setStyleCache(e),e=this.removeTags(e,this.deniedTags),e=this.opts.removeScript?this._removeScriptTag(e):this._replaceScriptTag(e),e=this.opts.removeComments?this.removeComments(e):e,e=this._isSpacedEmpty(e)?this.opts.emptyHtml:e,e=this.restoreComponents(e),e=this._cleanWrapped(e),t?this.paragraphize(e):e},output:function(e,t){if(e=this.removeInvisibleSpaces(e),this._isSpacedEmpty(e))return"";if(this._isParagraphEmpty(e))return"";e=this.removeServiceTagsAndAttrs(e,t),e=this.storeComponents(e),e=this.removeSpanWithoutAttributes(e),e=this.removeFirstBlockBreaklineInHtml(e),e=this.opts.removeScript?e:this._unreplaceScriptTag(e),e=this.opts.preClass?this._setPreClass(e):e,e=this.opts.linkNofollow?this._setLinkNofollow(e):e,e=this.opts.removeNewLines?this.cleanNewLines(e):e,e=this.restoreComponents(e);var s=$R.create("cleaner.figure",this.app);return e=s.unconvert(e,this.unconvertRules),e=this.removeEmptyAttributes(e,["style","class","rel","alt","title"]),e=this.cleanSpacesInPre(e),e=this.tidy(e),e=e.replace(/&amp;/g,"&"),""===e.replace(/\n/g,"")?"":e},paste:function(e){e=this.storeComponents(e);var t=this.deniedTags.concat(["iframe"]);e=this.removeTags(e,t),e=e.replace(new RegExp("<!doctype([\\s\\S]+?)>","gi"),""),e=e.replace(new RegExp("<style([\\s\\S]+?)</style>","gi"),""),e=e.replace(new RegExp("</p><br /><p","gi"),"</p><p");var s=this._isHtmlMsWord(e);if(e=this._cleanGDocs(e),e=s?this._cleanMsWord(e):e,!this.opts.pasteClean)return this.restoreComponents(e);if(this.opts.pastePlainText)return e=this.restoreComponents(e),this.pastePlainText(e);var i=this.opts.pasteBlockTags.concat(this.opts.pasteInlineTags);e=this.removeTagsExcept(e,i),e=this.opts.pasteLinks?e:this.removeTags(e,["a"]),e=this.opts.pasteImages?e:this.removeTags(e,["img"]);var a=this.utils.buildWrapper(e),r=a.find("*"),n=0!==this.opts.pasteKeepStyle.length?","+this.opts.pasteKeepStyle.join(","):"";r.not("[data-redactor-style-cache]"+n).removeAttr("style");var o=0!==this.opts.pasteKeepClass.length?","+this.opts.pasteKeepClass.join(","):"";r.not("[data-redactor-style-cache], span.redactor-component"+o).removeAttr("class");var l=0!==this.opts.pasteKeepAttrs.length?","+this.opts.pasteKeepAttrs.join(","):"";return r.not("img, a, span.redactor-component, [data-redactor-style-cache]"+l).each(function(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name)}),this.opts.pasteLinks&&!1!==this.opts.pasteLinkTarget&&a.find("a").attr("target",this.opts.pasteLinkTarget),a.find("[data-redactor-style-cache]").each(function(e){var t=e.getAttribute("data-redactor-style-cache");e.setAttribute("style",t)}),a.find("span").each(function(e){0===e.attributes.length&&$R.dom(e).unwrap()}),a.find(this.opts.inlineTags.join(",")).each(function(e){0===e.attributes.length&&this.utils.isEmptyHtml(e.innerHTML)&&$R.dom(e).unwrap()}.bind(this)),a.find("ul, ol").each(function(e){var t=e.previousSibling;if(t&&"LI"===t.tagName){var s=$R.dom(t);s.find("p").unwrap(),s.append(e)}}),e=this.utils.getWrapperHtml(a),e=e.replace(/<li><p>/gi,"<li>"),e=e.replace(/<\/p><\/li>/gi,"</li>"),e=e.replace(/<p>&nbsp;<\/p>/gi,"<p></p>"),e=e.replace(/<p><br\s?\/?><\/p>/gi,"<p></p>"),s&&(e=e.replace(/<p><\/p>/gi,""),e=e.replace(/<p>\s<\/p>/gi,"")),this.restoreComponents(e)},pastePlainText:function(e){return e=this.opts.pasteLinks?this.storeLinks(e):e,e=this.opts.pasteImages?this.storeImages(e):e,e=this.getPlainText(e),e=this._replaceNlToBr(e),e=this.opts.pasteLinks?this.restoreLinks(e):e,this.opts.pasteImages?this.restoreImages(e):e},tidy:function(e){return e},paragraphize:function(e){var t=$R.create("cleaner.paragraphize",this.app);return t.convert(e)},getFlatText:function(e){var t=$R.dom("<div>");return e.nodeType||e.dom?t.append(e):(e=e.toString(),e=e.trim(),t.html(e)),e=t.get().textContent||t.get().innerText||"",void 0===e?"":e},getPlainText:function(e){e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[\s\S]*?style>/gi,""),e=e.replace(/<p><\/p>/g,""),e=e.replace(/<\/div>|<\/li>|<\/td>/gi,"\n"),e=e.replace(/<\/p>/gi,"\n\n"),e=e.replace(/<\/H[1-6]>/gi,"\n\n");var t=document.createElement("div");return t.innerHTML=e,e=t.textContent||t.innerText,e.trim()},replaceTags:function(e,t){if(t){var s=this,i=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(t),a=this.utils.buildWrapper(e);a.find(i.join(",")).each(function(e){s.utils.replaceToTag(e,t[e.tagName.toLowerCase()])}),e=this.utils.getWrapperHtml(a)}return e},replaceNbspToSpaces:function(e){return e.replace("&nbsp;"," ")},replaceBlocksToBr:function(e){return e.replace(/<\/div>|<\/li>|<\/td>|<\/p>|<\/H[1-6]>/gi,"<br>")},cleanNewLines:function(e){return e.replace(/\r?\n/g,"")},cleanSpacesInPre:function(e){return e.replace("&nbsp;&nbsp;&nbsp;&nbsp;","    ")},removeInvisibleSpaces:function(e){return e=this.utils.removeInvisibleChars(e),e.replace(/&#65279;/gi,"")},removeNl:function(e){return e=e.replace(/\n/g," "),e.replace(/\s+/g,"s")},removeBrAtEnd:function(e){return e=e.replace(/<br\s?\/?>$/gi," "),e.replace(/<br\s?\/?><li/gi,"<li")},removeTags:function(e,t){var s=t?/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi:/(<([^>]+)>)/gi,i=t?function(e,s){return-1===t.indexOf(s.toLowerCase())?e:""}:"";return e.replace(s,i)},removeTagsExcept:function(e,t){if(void 0===t)return e.replace(/(<([^>]+)>)/gi,"");var s=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(s,function(e,s){return-1===t.indexOf(s.toLowerCase())?"":e})},removeComments:function(e){return e.replace(this.reComments,"")},removeServiceTagsAndAttrs:function(e,t){var s=this.utils.buildWrapper(e),i=this;return!1!==t&&s.find(".redactor-selection-marker").each(function(e){var t=$R.dom(e),s=i.utils.removeInvisibleChars(t.text());return""===s?t.remove():t.unwrap()}),s.find("[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),this.utils.getWrapperHtml(s)},removeSpanWithoutAttributes:function(e){var t=this.utils.buildWrapper(e);return t.find("span").removeAttr("data-redactor-span data-redactor-style-cache").each(function(e){0===e.attributes.length&&$R.dom(e).unwrap()}),this.utils.getWrapperHtml(t)},removeFirstBlockBreaklineInHtml:function(e){return e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>")},removeEmptyAttributes:function(e,t){for(var s=this.utils.buildWrapper(e),i=0;i<t.length;i++)s.find("["+t[i]+'=""]').removeAttr(t[i]);return this.utils.getWrapperHtml(s)},encodeHtml:function(e){return e=e.replace(/<br\s?\/?>/g,"\n"),e=e.replace(/&nbsp;/g," "),e=e.replace(//g,'"'),e=e.replace(//g,'"'),e=e.replace(//g,"'"),e=e.replace(//g,"'"),e=this.encodeEntities(e),e=e.replace(/\$/g,"&#36;"),this.opts.preSpaces&&(e=e.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),e},encodePreCode:function(e){var t=e.match(new RegExp("<code(.*?)>(.*?)<pre(.*?)>(.*?)</pre>(.*?)</code>","gi"));if(null!==t)for(var s=0;s<t.length;s++){var i=t[s].match(new RegExp("<pre(.*?)>([\\w\\W]*?)</pre>","i"));e=e.replace(i[0],this.encodeEntities(i[0]))}var a=this.utils.buildWrapper(e);return a.find("code code").replaceWith(this._encodeOuter.bind(this)),a.find("code pre").replaceWith(this._encodeOuter.bind(this)),a.find("pre pre").replaceWith(this._encodeOuter.bind(this)),a.find("code, pre").each(this._encodePreCodeLine.bind(this)),e=this.utils.getWrapperHtml(a),this._decodeMarkers(e)},encodeEntities:function(e){return e=this.decodeEntities(e),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},encodePhpCode:function(e){return e=e.replace("<?php","&lt;?php"),e=e.replace("<?","&lt;?"),e.replace("?>","?&gt;")},decodeEntities:function(e){return String(e).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},storeComponents:function(e){var t=this.utils.getElementsFromHtml(e,"figure","table");return this._storeMatched(e,t,"Components","figure")},restoreComponents:function(e){return this._restoreMatched(e,"Components","figure")},storeLinks:function(e){var t=this.utils.getElementsFromHtml(e,"a");return this._storeMatched(e,t,"Links","a")},storeImages:function(e){var t=this.utils.getElementsFromHtml(e,"img");return this._storeMatched(e,t,"Images","img")},restoreLinks:function(e){return this._restoreMatched(e,"Links","a")},restoreImages:function(e){return this._restoreMatched(e,"Images","img")},_cleanWrapped:function(e){return e.replace(new RegExp("<p><figure([\\w\\W]*?)</figure></p>","gi"),"<figure$1</figure>")},_cleanGDocs:function(e){return e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),e=e.replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>"),e=e.replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),e.replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>")},_cleanMsWord:function(e){e=e.replace(/<!--[\s\S]+?-->/gi,""),e=e.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),e=e.replace(/<(\/?)s>/gi,"<$1strike>"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""});var t=this.utils.buildWrapper(e);t.find("p").each(function(e){var t=$R.dom(e),s=t.attr("style"),i=/mso-list:\w+ \w+([0-9]+)/.exec(s);i&&t.data("_listLevel",_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(i[1],10))}),this._parseWordLists(t),t.find("[style]").removeAttr("style"),t.find("[align]").removeAttr("align"),t.find("[name]").removeAttr("name"),t.find("span").unwrap(),t.find("[class^='Mso']").removeAttr("class"),t.find("a").filter(function(e){return!e.hasAttribute("href")}).unwrap(),e=this.utils.getWrapperHtml(t),e=e.replace(/<p[^>]*><\/p>/gi,""),e=e.replace(/<li>/gi,"<li>"),e=e.trim(),e=e.replace(/\/(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)>\s+<(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)/gi,"/$1>\n<$2");for(var s="",i=e.split(/\n/),a=0;a<i.length;a++){var r=""!==i[a]&&-1===i[a].search(/>$/)?" ":"\n";s+=i[a]+r}return s},_parseWordLists:function(e){var t=0,s=null;e.find("p").each(function(e){var i=$R.dom(e),a=i.data("_listLevel");if(null!==a){var r=i.text(),n="<ul></ul>";if(/^\s*\w+\./.test(r)){var o=/([0-9])\./.exec(r);if(o){var l=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(o[1],10);n=l>1?'<ol start="'+l+'"></ol>':"<ol></ol>"}else n="<ol></ol>"}if(a>t)if(0===t)i.before(n),s=i.prev();else{var c=$R.dom(n);s.append(c)}if(t>a)for(var d=0;t-a>d;d++)s=s.parent();i.find("span").first().unwrap(),s.append("<li>"+i.html()+"</li>"),i.remove(),t=a}else t=0})},_isSpacedEmpty:function(e){return-1!==e.search(this.reSpacedEmpty)},_isParagraphEmpty:function(e){return-1!==e.search(/^<p><\/p>$/i)},_isHtmlMsWord:function(e){return e.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},_setSpanAttr:function(e){var t=this.utils.buildWrapper(e);return t.find("span").attr("data-redactor-span",!0),this.utils.getWrapperHtml(t)},_setStyleCache:function(e){var t=this.utils.buildWrapper(e);return t.find("[style]").each(function(e){var t=$R.dom(e);t.attr("data-redactor-style-cache",t.attr("style"))}),this.utils.getWrapperHtml(t)},_setPreClass:function(e){var t=this.utils.buildWrapper(e);return t.find("pre").addClass(this.opts.preClass),this.utils.getWrapperHtml(t)},_setLinkNofollow:function(e){var t=this.utils.buildWrapper(e);return t.find("a").attr("rel","nofollow"),this.utils.getWrapperHtml(t)},_replaceScriptTag:function(e){return e.replace(this.reScriptTag,'<pre class="redactor-script-tag" $1>$2</pre>')},_unreplaceScriptTag:function(e){return e.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2<\/script>")},_replaceNlToBr:function(e){return e.replace(/\n/g,"<br />")},_removeScriptTag:function(e){return e.replace(this.reScriptTag,"")},_storeMatched:function(e,t,s,i){if(this["stored"+s]=[],t)for(var a=0;a<t.length;a++)this["stored"+s][a]=t[a],e=e.replace(t[a],"####"+i+a+"####");return e},_restoreMatched:function(e,t,s){if(this["stored"+t])for(var i=0;i<this["stored"+t].length;i++)e=e.replace("####"+s+i+"####",this["stored"+t][i]);return e},_decodeMarkers:function(e){var t='<span id="selection-marker-$1" class="redactor-selection-marker"></span>';return e.replace(/&lt;span\sid="selection-marker-(start|end)"\sclass="redactor-selection-marker"&gt;(.*?[^>]?)&lt;\/span&gt;/g,t)},_encodeOuter:function(e){return this.encodeEntities(e.outerHTML)},_encodePreCodeLine:function(e){var t=e.firstChild;if("PRE"!=e.tagName||!t||"CODE"!==t.tagName){var s=this.decodeEntities(e.innerHTML);s=s.replace(/&nbsp;/g," ").replace(/<br\s?\/?>/g,"\n"),s=this.opts.preSpaces?s.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" ")):s,e.textContent=s}}}),$R.add("class","cleaner.figure",{init:function(e){this.app=e,this.opts=e.opts,this.utils=e.utils,this.detector=e.detector},convert:function(e,t){var s=this.utils.buildWrapper(e);return s.find("img").each(this._convertImage.bind(this)),s.find("hr").each(this._convertLine.bind(this)),s.find("iframe").each(this._convertIframe.bind(this)),s.find("table").each(this._convertTable.bind(this)),s.find("form").each(this._convertForm.bind(this)),s.find("figure pre").each(this._convertCode.bind(this)),s.find("[data-redactor-type=variable]").addClass("redactor-component"),s.find("figure").not(".redactor-component, .redactor-figure-code").each(this._convertWidget.bind(this)),s.find("figure pre").each(this._setContenteditableCode.bind(this)),s.find(".redactor-component, .non-editable").attr("contenteditable",!1),this.detector.isIe()&&s.find("[data-redactor-type=table]").attr("contenteditable",!0),s.find("figcaption, td, th").attr("contenteditable",!0),s.find(".redactor-component, figcaption").attr("tabindex","-1"),this._acceptExtraRules(s,t),this.utils.getWrapperHtml(s)},unconvert:function(e,t){var s=this.utils.buildWrapper(e);return s.find("th, td, figcaption, figure, pre, code, .redactor-component").removeAttr("contenteditable tabindex"),s.find("figure").removeClass("redactor-component redactor-component-active redactor-uploaded-figure"),s.find("[data-redactor-type=variable]").removeClass("redactor-component"),s.find("figure[data-redactor-type=line]").unwrap(),s.find("figure[data-redactor-type=widget]").each(this._unconvertWidget.bind(this)),s.find("figure[data-redactor-type=form]").each(this._unconvertForm.bind(this)),s.find("figure[data-redactor-type=table]").each(this._unconvertTable.bind(this)),s.find("figure[data-redactor-type=image]").removeAttr("rel").each(this._unconvertImages.bind(this)),s.find("img").removeAttr("data-redactor-type").removeClass("redactor-component"),s.find(".non-editable").removeAttr("contenteditable"),s.find("figure").each(this._removeTypes.bind(this)),s.find("span.redactor-component-caret").remove(),this.opts.breakline&&s.find('[data-redactor-tag="br"]').each(function(e){e.lastChild&&"BR"!==e.lastChild.tagName&&e.appendChild(document.createElement("br"))}).unwrap(),this._acceptExtraRules(s,t),e=this.utils.getWrapperHtml(s),e.replace(/<br\s?\/?>$/,"")},_convertImage:function(e){var t=$R.dom(e);if(!this._isNonEditable(t)){t.attr("data-image")||t.attr("data-image",this.utils.getRandomId());var s=t.closest("a"),i=t.closest("figure"),a=0===i.children().not("a, img, br, figcaption").length;a&&(0===i.length?i=0!==s.length?s.wrap("<figure>"):t.wrap("<figure>"):i.hasClass("redactor-uploaded-figure")?i.removeClass("redactor-uploaded-figure"):i.addClass("redactor-keep-figure"),this._setFigure(i,"image"))}},_convertTable:function(e){if(!this._isNonEditable(e)){var t=this._wrapFigure(e);this._setFigure(t,"table")}},_convertLine:function(e){if(!this._isNonEditable(e)){var t=this._wrapFigure(e);this._setFigure(t,"line")}},_convertForm:function(e){if(!this._isNonEditable(e)){var t=this.utils.replaceToTag(e,"figure");this._setFigure(t,"form")}},_convertIframe:function(e){if(!this._isNonEditable(e)){var t=$R.dom(e);if(0===t.closest(".redactor-component").length){var s=e.getAttribute("src"),i=s&&(s.match(this.opts.regex.youtube)||s.match(this.opts.regex.vimeo)),a=this._wrapFigure(e);i&&this._setFigure(a,"video")}}},_convertCode:function(e){if(!this._isNonEditable(e)){var t=this._wrapFigure(e);this._setFigure(t,"code")}},_convertWidget:function(e){if(!this._isNonEditable(e)){var t=$R.dom(e);t.addClass("redactor-component"),t.attr("data-redactor-type","widget"),t.attr("data-widget-code",encodeURI(e.innerHTML.trim()))}},_unconvertForm:function(e){this.utils.replaceToTag(e,"form")},_unconvertTable:function(e){var t=$R.dom(e);t.unwrap()},_unconvertWidget:function(e){var t=$R.dom(e);t.html(decodeURI(t.attr("data-widget-code"))),t.removeAttr("data-widget-code")},_unconvertImages:function(e){var t=$R.dom(e);t.removeClass("redactor-component");var s=0!==t.closest("li").length,i=0!==t.closest("table").length,a=0!==t.find("figcaption").length,r=t.attr("style"),n=!(null===r||""===r),o=""!==t.attr("class");(s||i&&!a&&!n&&!o)&&t.unwrap()},_removeTypes:function(e){var t=$R.dom(e),s=t.attr("data-redactor-type"),i=["image","widget","line","video","code","form","table"];if(s&&-1!==i.indexOf(s)&&t.removeAttr("data-redactor-type"),t.hasClass("redactor-keep-figure"))t.removeClass("redactor-keep-figure");else if(!1===this.opts.imageFigure){var a=0!==t.find("figcaption").length;a||t.unwrap()}},_wrapFigure:function(e){var t=$R.dom(e),s=t.closest("figure");return 0===s.length?t.wrap("<figure>"):s},_setFigure:function(e,t){e.addClass("redactor-component"),e.attr("data-redactor-type",t)},_setContenteditableCode:function(e){if(!this._isNonEditable(e)){var t=$R.dom(e),s=t.children("code").first(),i=0!==s.length?s:t;i.attr("contenteditable",!0).attr("tabindex","-1")}},_acceptExtraRules:function(e,t){for(var s in t)"function"==typeof t[s]&&t[s](e)},_isNonEditable:function(e){return 0!==$R.dom(e).closest(".non-editable").length}}),$R.add("class","cleaner.paragraphize",{init:function(e){this.app=e,this.opts=e.opts,this.utils=e.utils,this.element=e.element,this.stored=[],this.remStart="#####replace",this.remEnd="#####",this.paragraphizeTags=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"]},convert:function(e){var t=this._isConverted(e);return!0===t?this._convert(e):t},_convert:function(e){var t=this.opts.breakline?"sdivtag":this.opts.markup;return e=this._storeTags(e),e=e.trim(),this.opts.breakline?(e=e.replace(new RegExp("\\n#####","gi"),"xnonbreakmarkerz#####"),e=e.replace(new RegExp("#####\\n\\n","gi"),"#####\nxnonbreakmarkerz"),e=e.replace(new RegExp("#####\\n","gi"),"#####xnonbreakmarkerz"),e=e.replace(/<br\s?\/?>\n/gi,"<br>"),e=e.replace(/\n/g,"<br>"),e=e.replace(/xnonbreakmarkerz/gi,"\n")):e=e.replace(/[\n]+/g,"\n"),e=this._trimEmptyLines(e),e=this.opts.breakline?e:e.replace(/<br\s?\/?>\n/gi,"xbreakmarkerz\n"),e=e.replace(/(?:\r\n|\r|\n)/g,"xparagraphmarkerz"),e=e.replace(/xparagraphmarkerz/gi,"</"+t+">\n<"+t+">"),e=this.opts.breakline?e:e.replace(/xbreakmarkerz/gi,"<br>"),e="<"+t+">"+e+"</"+t+">",e=e.replace(new RegExp("<"+t+">#####","gi"),"#####"),e=e.replace(new RegExp("#####</"+t+">","gi"),"#####"),e=this._restoreTags(e),e=this.opts.breakline?e:e.replace(new RegExp("<"+t+"><br\\s?/?></"+t+">","gi"),"<"+t+"></"+t+">"),e=e.replace(new RegExp("<sdivtag>","gi"),'<div data-redactor-tag="br">'),e.replace(new RegExp("sdivtag","gi"),"div")},_storeTags:function(e){var t=this,s=this.utils.buildWrapper(e);return this.opts.breakline&&s.find("p").each(function(e){var t=$R.dom(e),s=0===t.closest("figure[data-redactor-type=widget],figure[data-redactor-type=form],.non-editable").length;s&&(t.append("<br><br>"),t.unwrap())}),s.find(this.paragraphizeTags.join(", ")).each(function(e,s){var i=document.createTextNode("\n"+t.remStart+s+t.remEnd+"\n");t.stored.push(e.outerHTML),e.parentNode.replaceChild(i,e)}),this.utils.getWrapperHtml(s)},_restoreTags:function(e){for(var t=0;t<this.stored.length;t++)this.stored[t]=this.stored[t].replace(/\$/g,"&#36;"),e=e.replace(this.remStart+t+this.remEnd,this.stored[t]);return e},_trimEmptyLines:function(e){for(var t="",s=e.split("\n"),i=0;i<s.length;i++)""!==s[i].trim()&&(t+=s[i]+"\n");return t.replace(/\n$/,"")},_isConverted:function(e){return this._isDisabled(e)?e:!this._isEmptyHtml(e)||this.opts.emptyHtml},_isDisabled:function(){return!1===this.opts.paragraphize||this.element.isType("inline")},_isEmptyHtml:function(e){return""===e||"<p></p>"===e||"<div></div>"===e}}),$R.add("service","detector",{init:function(e){this.app=e,this.userAgent=navigator.userAgent.toLowerCase()},isWebkit:function(){return/webkit/.test(this.userAgent)},isFirefox:function(){return this.userAgent.indexOf("firefox")>-1},isIe:function(e){return document.documentMode||/Edge/.test(navigator.userAgent)?"edge":(t=RegExp("msie"+(isNaN(e)?"":"\\s"+e),"i").test(navigator.userAgent),t||(t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),t);var t},isMobile:function(){return/(iPhone|iPod|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}),$R.add("service","offset",{init:function(e){this.app=e},get:function(e,t){var s={start:0,end:0},i=this.utils.getNode(e);if(!i)return!1;var a=this.editor.isEditor(i),r=!!a||this.selection.isIn(i),n=this.selection.getRange();if(a||r){if(this.selection.is()&&r){var o=$R.dom(n.startContainer),l=o.hasClass("redactor-component")?n.startOffset:0,c=n.cloneRange();c.selectNodeContents(i),c.setEnd(n.startContainer,n.startOffset);var d=this._getString(n,t);s.start=this._getString(c,t).length-l,s.end=s.start+d.length+l}}else s=!1;return s},set:function(e,t){if(!this._setComponentOffset(t)){this.component.clearActive();var s=this.utils.getNode(t);if(s){var i=this.size(s),a=0,r=document.createRange();e.end=e.end>i?i:e.end,r.setStart(s,0),r.collapse(!0);for(var n=[s],o=!1,l=!1;!l&&(s=n.pop());)if(3==s.nodeType){var c=a+s.length;!o&&!this._isFigcaptionNext(s)&&e.start>=a&&e.start<=c&&(r.setStart(s,e.start-a),o=!0),o&&e.end>=a&&e.end<=c&&(r.setEnd(s,e.end-a),l=!0),a=c}else for(var d=s.childNodes.length;d--;)n.push(s.childNodes[d]);this.selection.setRange(r)}}},size:function(e,t){var s=this.utils.getNode(e);if(s){var i=document.createRange(),a=i.cloneRange();return a.selectNodeContents(s),this._getString(a,t).length}return 0},_getString:function(e,t){var s=e.toString();return s=this.editor.isEmpty()?s.replace(/\uFEFF/g,""):s,t?s.trim():s},_setComponentOffset:function(e){return!!this.component.isNonEditable(e)&&this.component.setActive(e)},_isFigcaptionNext:function(e){var t=e.nextSibling;return""===e.nodeValue.trim()&&t&&"FIGCAPTION"===t.tagName}}),$R.add("service","inspector",{init:function(e){this.app=e},parse:function(e){return $R.create("inspector.parser",this.app,this,e)},isText:function(e){if("string"==typeof e&&!/^\s*<(\w+|!)[^>]*>/.test(e))return!0;var t=$R.dom(e).get();return t&&3===t.nodeType},isInlineTag:function(e,t){var s=this._extendTags(this.opts.inlineTags,t);return this._isTag(e)&&-1!==s.indexOf(e.toLowerCase())},isBlockTag:function(e,t){var s=this._extendTags(this.opts.blockTags,t);return this._isTag(e)&&-1!==s.indexOf(e.toLowerCase())},isTableCellTag:function(e){return-1!==["td","th"].indexOf(e.toLowerCase())},isHeadingTag:function(e){return-1!==["h1","h2","h3","h4","h5","h6"].indexOf(e.toLowerCase())},_isTag:function(e){return void 0!==e&&e},_extendTags:function(e,t){if(e=e.concat(e),t)for(var s=0;s<t.length;s++)e.push(t[s]);return e}}),$R.add("class","inspector.parser",{init:function(e,t,s){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.utils=e.utils,this.editor=e.editor,this.selection=e.selection,this.inspector=t,this.el=s,this.$el=$R.dom(this.el),this.node=this.$el.get(),this.$component=this.$el.closest(".redactor-component",".redactor-in")},isEditor:function(){return this.node===this.editor.getElement().get()},isInEditor:function(){return 0!==this.$el.parents(".redactor-in-"+this.uuid).length},isComponent:function(){return 0!==this.$component.length},isComponentType:function(e){return this.getComponentType()===e},isComponentActive:function(){return this.isComponent()&&this.$component.hasClass("redactor-component-active")},isComponentEditable:function(){var e=["code","table"],t=this.getComponentType();return this.isComponent()&&-1!==e.indexOf(t)},isFigcaption:function(){return this.getFigcaption()},isPre:function(){return this.getPre()},isCode:function(){var e=this.$el.closest("code"),t=e.parent("pre");return 0!==e.length&&0===t.length},isList:function(){return this.getList()},isFirstListItem:function(){return this._getLastOrFirstListItem("first")},isLastListItem:function(){return this._getLastOrFirstListItem("last")},isFirstTableCell:function(){return this._getLastOrFirstTableCell("first")},isLastTableCell:function(){return this._getLastOrFirstTableCell("last")},isTable:function(){return this.isComponentType("table")||this.getTable()},isHeading:function(){return this.getHeading()},isBlockquote:function(){return this.getBlockquote()},isDl:function(){return this.getDl()},isParagraph:function(){return this.getParagraph()},isLink:function(){return this.getLink()},isFile:function(){return this.getFile()},isText:function(){return this.inspector.isText(this.el)},isInline:function(){var e=this.opts.inlineTags;return!!this.isElement()&&-1!==e.indexOf(this.node.tagName.toLowerCase())},isBlock:function(){var e=this.opts.blockTags;return!!this.isElement()&&-1!==e.indexOf(this.node.tagName.toLowerCase())},isElement:function(){return this.node&&this.node.nodeType&&3!==this.node.nodeType},hasParent:function(e){return 0!==this.$el.closest(e.join(",")).length},getNode:function(){return this.node},getTag:function(){return!!this.isElement()&&this.node.tagName.toLowerCase()},getComponent:function(){return!!this.isComponent()&&this.$component.get()},getComponentType:function(){return!!this.isComponent()&&this.$component.attr("data-redactor-type")},getFirstNode:function(){return this.utils.getFirstNode(this.node)},getLastNode:function(){return this.utils.getLastNode(this.node)},getFirstElement:function(){return this.utils.getFirstElement(this.node)},getLastElement:function(){return this.utils.getLastElement(this.node)},getFigcaption:function(){return this._getClosestNode("figcaption")},getPre:function(){return this._getClosestNode("pre")},getCode:function(){return this._getClosestNode("code")},getList:function(){return this._getClosestNode("ul, ol")},getParentList:function(){return this._getClosestUpNode("ul, ol")},getListItem:function(){return this._getClosestNode("li")},getTable:function(){return this.getComponentType("table")?this.$component.find("table").get():this._getClosestNode("table")},getTableCell:function(){var e=this.$el.closest("td, th");return 0!==e.length&&e.get()},getComponentCodeElement:function(){return!!this.isComponentType("code")&&this.$component.find("pre code, pre").last().get()},getImageElement:function(){return!!this.isComponentType("image")&&this.$component.find("img").get()},getParagraph:function(){return this._getClosestNode("p")},getHeading:function(){return this._getClosestNode("h1, h2, h3, h4, h5, h6")},getDl:function(){return this._getClosestNode("dl")},getBlockquote:function(){return this._getClosestNode("blockquote")},getLink:function(){var e=this.isComponent()&&!this.isFigcaption(),t=this.isComponentType("table");if(t||!e){var s=this._getClosestElement("a");return!(!s||s.attr("data-file"))&&s.get()}return!1},getFile:function(){var e=this.isComponent(),t=this.isComponentType("table");if(t||!e){var s=this._getClosestElement("a");return!(!s||!s.attr("data-file"))&&s.get()}return!1},findFirstNode:function(e){return this.$el.find(e).first().get()},findLastNode:function(e){return this.$el.find(e).last().get()},_getLastOrFirstListItem:function(e){var t=this.getList(),s=this.getTag();if(t&&"li"===s){var i=$R.dom(t).find("li")[e]().get();if(i&&this.node===i)return!0}return!1},_getLastOrFirstTableCell:function(e){var t=this.getTable(),s=this.getTag();if(t&&("td"===s||"th"===s)){var i=$R.dom(t).find("td, th")[e]().get();if(i&&this.node===i)return!0}return!1},_getClosestUpNode:function(e){var t=this.$el.parents(e,".redactor-in").last();return 0!==t.length&&t.get()},_getClosestNode:function(e){var t=this.$el.closest(e,".redactor-in");return 0!==t.length&&t.get()},_getClosestElement:function(e){var t=this.$el.closest(e,".redactor-in");return 0!==t.length&&t}}),$R.add("service","marker",{init:function(e){this.app=e},build:function(e,t){var s=document.createElement("span");return s.id="selection-marker-"+this._getPos(e),s.className="redactor-selection-marker",s.innerHTML=this.opts.markerChar,t?s.outerHTML:s},buildHtml:function(e){return this.build(e,!0)},insert:function(e){this.remove();var t="both"!==e&&("start"===e||this.selection.isCollapsed());this.selection.is()||this.editor.focus();var s=this.selection.getRange();if(s){var i=this.build("start"),a=this.build("end"),r=s.cloneRange();return t||(r.collapse(!1),r.insertNode(a)),r.setStart(s.startContainer,s.startOffset),r.collapse(!0),r.insertNode(i),s.setStartAfter(i),t||s.setEndBefore(a),this.selection.setRange(s),i}},find:function(e,t){var s=this.editor.getElement(),i=(t||s).find("span#selection-marker-"+this._getPos(e));return 0!==i.length&&i.get()},restore:function(){var e=this.find("start"),t=this.find("end"),s=this.selection.getRange();if(s&&this.selection.is()||(this.editor.focus(),s=document.createRange()),e){var i=!!t&&t.previousSibling,a=e.nextSibling;a=(!a||3!==a.nodeType||""!==a.textContent.replace(/[\n\t]/g,""))&&a,t?a&&"selection-marker-end"===a.id?this._restoreInject(s,e):i&&a?(s.selectNodeContents(i),s.collapse(!1),s.setStart(a,0)):i&&!a?(s.selectNodeContents(i),s.collapse(!1),s.setStartAfter(e)):(s.setStartAfter(e),s.setEndBefore(t)):a?(s.selectNodeContents(a),s.collapse(!0)):this._restoreInject(s,e),this.selection.setRange(s),e&&e.parentNode.removeChild(e),t&&t.parentNode.removeChild(t)}},remove:function(){var e=this.find("start"),t=this.find("end");e&&e.parentNode.removeChild(e),t&&t.parentNode.removeChild(t)},_getPos:function(e){return void 0===e?"start":e},_restoreInject:function(e,t){var s=this.utils.createInvisibleChar();$R.dom(t).after(s),e.selectNodeContents(s),e.collapse(!1)}}),$R.add("service","component",{init:function(e){this.app=e,this.activeClass="redactor-component-active"},create:function(e,t){return $R.create(e+".component",this.app,t)},build:function(e){var t,s=$R.dom(e),i=s.attr("data-redactor-type");return i&&(t=this.create(i,e)),t||e},remove:function(e,t){var s=$R.dom(e).closest(".redactor-component"),i=s.attr("data-redactor-type"),a=s.parent(),r=this.inspector.parse(a),n=this.utils.findSiblings(s,"prev"),o=this.utils.findSiblings(s,"next"),l=this.app.broadcast(i+".delete",s);if(!1!==l){if(s.remove(),this.app.broadcast(i+".deleted",s),this.app.broadcast("contextbar.close"),this.app.broadcast("imageresizer.stop"),!1!==t){var c=r.getTableCell();c&&this.utils.isEmptyHtml(c.innerHTML)?this.caret.setStart(c):o?this.caret.setStart(o):n?this.caret.setEnd(n):this.editor.startFocus()}this.editor.isEmpty()&&(this.editor.setEmpty(),this.editor.startFocus(),this.app.broadcast("empty"))}},isNonEditable:function(e){var t=this.inspector.parse(e);return t.isComponent()&&!t.isComponentEditable()},isActive:function(e){var t;if(e){var s=this.inspector.parse(e);return t=$R.dom(s.getComponent()),t.hasClass(this.activeClass)}return t=this._find(),0!==t.length},getActive:function(e){var t=this._find();return 0!==t.length&&(e?t:t.get())},setActive:function(e){this.clearActive(),this.editor.focus();var t=this.inspector.parse(e),s=t.getComponent(),i=$R.dom(s);if(!t.isFigcaption()){var a=i.find(".redactor-component-caret");0===a.length&&(a=this._buildCaret(),i.prepend(a)),this.caret.setAtStart(a.get())}i.addClass(this.activeClass)},clearActive:function(){var e=this._find();e.removeClass(this.activeClass),e.find(".redactor-component-caret").remove(),this.app.broadcast("imageresizer.stop")},setOnEvent:function(e,t){this.clearActive();var s=this.inspector.parse(e.target);s.isFigcaption()||s.isComponentEditable()||s.isComponent()&&(this.setActive(e.target),!0!==t&&e.preventDefault())},executeScripts:function executeScripts(){for(var $editor=this.editor.getElement(),scripts=$editor.find("[data-redactor-type]").find("script").getAll(),i=0;i<scripts.length;i++)if(""!==scripts[i].src){var src=scripts[i].src;this.$doc.find('head script[src="'+src+'"]').remove();var $script=$R.dom("<script>");$script.attr("src",src),$script.attr("async defer"),-1!==src.search("instagram")&&$script.attr("onload","window.instgrm.Embeds.process()");var head=document.getElementsByTagName("head")[0];head&&head.appendChild($script.get())}else eval(scripts[i].innerHTML)},_find:function(){return this.editor.getElement().find("."+this.activeClass)},_buildCaret:function(){var e=$R.dom("<span>");return e.addClass("redactor-component-caret"),e.attr("contenteditable",!0),e}}),$R.add("service","insertion",{init:function(e){this.app=e},set:function(e,t,s){e=!1!==t?this.cleaner.input(e):e,e=!1!==t?this.cleaner.paragraphize(e):e;var i=this.editor.getElement();return i.html(e),!1!==s&&this.editor.endFocus(),e},insertNode:function(e,t){this.editor.focus();var s=this.utils.isFragment(e)?e:this.utils.createFragment(e);return this._collapseSelection(),this._insertFragment(s),this._setCaret(t,s),this._sendNodes(s.nodes)},insertBreakLine:function(){return this.insertNode(document.createElement("br"),"after")},insertNewline:function(){return this.insertNode(document.createTextNode("\n"),"after")},insertText:function(e){return this.insertHtml(this.cleaner.getFlatText(e))},insertChar:function(e){return this.insertNode(e,"after")},insertRaw:function(e){return this.insertHtml(e,!1)},insertToEnd:function(e,t){if(e){3===e.nodeType&&-1!==e.nodeValue.search(/^\n/)&&(e=e.previousElementSibling);var s=$R.dom(e);if(s.attr("data-redactor-type")===t){var i=this.opts.breakline?"<br>":"<p>",a=$R.dom(i);s.after(a),this.caret.setStart(a)}}},insertPoint:function(e){var t,s,i=this.marker.build("start"),a=!1,r=e.clientX,n=e.clientY;if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(r,n),l=document.getSelection();s=this.inspector.parse(o.offsetNode),s.isInEditor()&&(t=l.getRangeAt(0),t.setStart(o.offsetNode,o.offset),t.collapse(!0),t.insertNode(i),a=!0)}else document.caretRangeFromPoint&&(t=document.caretRangeFromPoint(r,n),s=this.inspector.parse(t.startContainer),s.isInEditor()&&(t.insertNode(i),a=!0));return a},insertToPoint:function(e,t,s){var i=!0===s||this.insertPoint(e);if(!i){var a=this.editor.getLastNode();$R.dom(a).after(this.marker.build("start"))}return this.component.clearActive(),this.selection.restoreMarkers(),this.insertHtml(t)},insertToOffset:function(e,t){return this.offset.set({start:e,end:e}),this.insertHtml(t)},insertHtml:function(e,t){if(this.opts.input){var s=this.utils.parseHtml(e);if(this.selection.isAll())return this._insertToAllSelected(s);if(!this.selection.is()){var i=$R.dom("<p>"),a=this.editor.getElement();a.append(i),this.caret.setStart(i)}var r=this.selection.isCollapsed(),n=this.selection.isText(),o=this.selection.getCurrent(),l=this.inspector.parse(o);this._collapseSelection(),s=this._getCleanedInput(s,l,t);var c,d,u=this._isFigure(s.html),h=this._isComponentSpan(s.html),p=this.inspector.isText(s.html);if(this.editor.isEmpty())return this._insertToEmptyEditor(s.html);if(l.isComponent()&&!l.isComponentEditable())return this._insertToWidget(o,l,s.html);if(h)return this.insertNode(s.nodes,"end");if(u&&!n&&!l.isList())return l.isInline()?this._insertToInline(o,s):(c=this.utils.createFragment(s.html),this.utils.splitNode(o,c),this.caret.setEnd(c.last),this._sendNodes(c.nodes));if(l.isCode())return this._insertToCode(s,o,t);if(l.isPre())return this._insertToPre(s,t);if(l.isHeading()||l.isFigcaption())return s.html=!1!==t?this.cleaner.removeTagsExcept(s.html,["a"]):s.html,s.html=!1!==t?this.cleaner.replaceNbspToSpaces(s.html):s.html,c=this.utils.createFragment(s.html),this.insertNode(c,"end");if(p)return!n&&"br"!==this.opts.markup&&this._hasBlocksAndImages(s.nodes)?(s.html=!1!==t?this.cleaner.paragraphize(s.html):s.html,c=this.utils.createFragment(s.html),this.utils.splitNode(o,c),this.caret.setEnd(c.last),this._sendNodes(c.nodes)):(s.html=!1!==t?s.html.replace(/\n/g,"<br>"):s.html,c=this.utils.createFragment(s.html),this.insertNode(c.nodes,"end"));if(!r&&!u)return s.html=!1!==t?this.cleaner.paragraphize(s.html):s.html,c=this.utils.createFragment(s.html),this.insertNode(c,"end");if(l.isInline()&&!this._isPlainHtml(s.html))return this._insertToInline(o,s);if(l.isBlockquote()||l.isDl())return d=this.opts.inlineTags,d.concat(["br"]),s.html=!1!==t?this.cleaner.replaceBlocksToBr(s.html):s.html,s.html=!1!==t?this.cleaner.removeTagsExcept(s.html,d):s.html,c=this.utils.createFragment(s.html),this.insertNode(c,"end");if(l.isParagraph())return this._isPlainHtml(s.html)?this.insertNode(s.nodes,"end"):(s.html=!1!==t?this.cleaner.paragraphize(s.html):s.html,c=this.utils.createFragment(s.html),this.utils.splitNode(o,c),this.caret.setEnd(c.last),this._sendNodes(c.nodes));if(l.isList()&&(d=this.opts.inlineTags,d=d.concat(["br","li","ul","ol","img"]),s.html=!1!==t?this.cleaner.replaceBlocksToBr(s.html):s.html,s.html=!1!==t?this.cleaner.removeTagsExcept(s.html,d):s.html,s.html=!1!==t?this.cleaner.removeBrAtEnd(s.html):s.html,c=this.utils.createFragment(s.html),s.nodes=c.nodes,this._containsTags(s.html,["ul","ol","li"]))){var m=this.selection.getElement(o);if(m&&"LI"===m.tagName&&this.caret.isStart(m)){s.nodes=$R.dom(c.nodes).unwrap("ul, ol").getAll(),$R.dom(m).before(s.nodes);var f=s.nodes[s.nodes.length-1];return this.caret.setEnd(f),this._sendNodes(s.nodes)}return this._isPlainHtml(s.html)?this.insertNode(c,"end"):(c=this._buildList(s,m,c),this.utils.splitNode(o,c,!0),this.caret.setEnd(c.last),this._sendNodes(c.nodes))}return this.insertNode(s.nodes,"end")}},_insertToAllSelected:function(e){var t=this.set(e.html),s=this.utils.parseHtml(t);return this._sendNodes(s.nodes)},_insertToEmptyEditor:function(e){e=this.cleaner.paragraphize(e);var t=this.utils.createFragment(e),s=this.editor.getElement();return s.html(""),s.append(t.frag),this.caret.setEnd(t.last),this._sendNodes(t.nodes)},_insertToInline:function(e,t){var s=this.utils.createFragment(t.html);return this.utils.splitNode(e,s,!1,!0),this.caret.setEnd(s.last),this._sendNodes(s.nodes)},_insertToCode:function(e,t,s){e.html=!1!==s?this.cleaner.encodeHtml(e.html):e.html,e.html=!1!==s?this.cleaner.removeNl(e.html):e.html;var i=this.utils.createFragment(e.html),a=this.insertNode(i,"end");return this.utils.normalizeTextNodes(t),a},_insertToPre:function(e,t){e.html=!1!==t?this.cleaner.encodeHtml(e.html):e.html;var s=this.utils.createFragment(e.html);return this.insertNode(s,"end")},_insertToWidget:function(e,t,s){s=this._isComponentSpan(s)?s:this.cleaner.paragraphize(s);var i=this.utils.createFragment(s),a=t.getComponent(),r=$R.dom(a);return r.after(i.frag),r.remove(),this.caret.setEnd(i.last),this._sendNodes(i.nodes)},_insertFragment:function(e){var t=this.selection.getRange();if(t){if(this.selection.isCollapsed()){var s=t.startContainer;3!==s.nodeType&&"BR"===s.tagName&&(this.caret.setAfter(s),s.parentNode.removeChild(s))}else t.deleteContents();t.insertNode(e.frag)}},_sendNodes:function(e){for(var t=0;t<e.length;t++){var s=e[t],i=3!==s.nodeType&&"function"==typeof s.getAttribute&&s.getAttribute("data-redactor-type");i&&this.app.broadcast(i+".inserted",this.component.build(s))}return this.detector.isIe()&&this.editor.getElement().find("[data-redactor-type=table]").attr("contenteditable",!0),this.app.broadcast("inserted",e),this.component.executeScripts(),e},_setCaret:function(e,t){var s=this._isLastInline(t);e?(e=s&&"end"===e?"after":e,this.caret["set"+this.utils.ucfirst(e)](t.last)):!1!==e&&s&&this.caret.setAfter(t.last)},_isLastInline:function(e){if(e.last){var t=this.inspector.parse(e.last);return t.isInline()}return!1},_getCleanedInput:function(e,t,s){var i=t.isCode()||t.isPre();return e.html=e.html.replace(/&nbsp;/g," "),e.html=i||!1===s?e.html:this.cleaner.input(e.html),i||!1===s?e:this.utils.parseHtml(e.html)},_getContainer:function(e){return $R.dom(this.utils.createTmpContainer(e))},_buildList:function(e,t,s){var i=e.nodes,a=i[0];if(a&&3!==a.nodeType&&"li"===a.tagName){var r=$R.dom(t),n=r.get().tagName.toLowerCase(),o=$R.dom("<"+n+" />");return o.append(s.nodes),this.utils.createFragment(o.get().outerHTML)}return s},_containsTags:function(e,t){return 0!==this._getContainer(e).find(t.join(",")).length},_collapseSelection:function(){},_hasFigureOrTable:function(e){return 0!==this._getContainer(e).find("figure, table").length},_hasBlocks:function(e){return 0!==this._getContainer(e).find(this.opts.blockTags.join(",")).length},_hasBlocksAndImages:function(e){return 0!==this._getContainer(e).find(this.opts.blockTags.join(",")+",img").length},_isPlainHtml:function(e){return 0===this._getContainer(e).find(this.opts.blockTags.join(",")+", img").length},_isFigure:function(e){return this._isHtmlString(e)?0!==$R.dom(e).closest("figure").length:void 0},_isComponentSpan:function(e){return this._isHtmlString(e)?0!==$R.dom(e).closest("span.redactor-component").length:void 0},_isHtmlString:function(e){return!("string"==typeof e&&!/^\s*<(\w+|!)[^>]*>/.test(e))}}),$R.add("service","block",{mixins:["formatter"],init:function(e){this.app=e},format:function(e){return this.type=e.type?e.type:"set",this.tag="string"==typeof e?e:e.tag,this.tag=this._prepareTag(this.tag),this.tag=this.tag.toLowerCase(),"string"==typeof e?this.args=!1:this.buildArgs(e),this._format()},getBlocks:function(e){return this.selection.getBlocks({tags:e||this._getTags(),first:!0})},getElements:function(e){var t=this.selection.getBlock();return this.selection.isCollapsed()||!t||"TD"!==t.tagName&&"TH"!==t.tagName?$R.dom(this.getBlocks(e)):this._wrapInsideTable("div")},clearFormat:function(e){this.selection.save();var t=this.getElements(e||this._getTags());return t.each(function(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name)}),this.selection.restore(),t.getAll()},_format:function(){this.selection.save();var e,t,s=this.getBlocks(),i=this.selection.getBlock(),a=[];if(1===s.length&&"DIV"===s[0].tagName){if(e=this._getTextNodesData(),!e||0===e.nodes.length)return a=this._replaceBlocks(s),a=this._sendNodes(a),setTimeout(function(){this.selection.restore()}.bind(this),0),a;t=this._getReplacedTag("set"),o=$R.dom("<"+t+">"),l=e.last.nextSibling,l&&"BR"===l.tagName&&$R.dom(l).remove();for(var r=0;r<e.nodes.length;r++)o.append(e.nodes[r]);return this.utils.splitNode(s[0],[o.get()]),a=this._sendNodes([o.get()]),this.utils.isEmptyHtml(o.html())?this.caret.setStart(o):setTimeout(function(){this.selection.restore()}.bind(this),0),a}if(s.length>0)return a=this._replaceBlocks(s),a=this._sendNodes(a),setTimeout(function(){this.selection.restore()}.bind(this),0),a;if(!this.selection.isCollapsed()&&i&&("TD"===i.tagName||"TH"===i.tagName))return t=this._getReplacedTag("set"),o=this._wrapInsideTable(t),this.selection.setAll(o),this._sendNodes([o.get()]);if(this.selection.isCollapsed()&&i&&("TD"===i.tagName||"TH"===i.tagName)){var n=this._getChildTextNodes(i);t=this._getReplacedTag("set");var o=$R.dom("<"+t+">");$R.dom(n.first).before(o);for(r=0;r<n.nodes.length;r++)o.append(n.nodes[r]);var l=o.get().nextSibling;return l&&"BR"===l.tagName&&$R.dom(l).remove(),this._sendNodes([o.get()])}return a},_wrapInsideTable:function(e){var t=this._getTextNodesData(),s=$R.dom("<"+e+">");$R.dom(t.first).before(s);for(var i=0;i<t.nodes.length;i++)s.append(t.nodes[i]);var a=s.get().nextSibling;return a&&"BR"===a.tagName&&$R.dom(a).remove(),s},_prepareTag:function(e){return"undefined"==typeof e?this.opts.markup:e},_sendNodes:function(e){return e.length>0&&(e=this.applyArgs(e,!1),e=this._combinePre(e),e=this._cleanBlocks(e)),e},_getTags:function(){return["div","p","blockquote","pre","h1","h2","h3","h4","h5","h6"]},_replaceBlocks:function(e){for(var t=[],s=this._isToggleFormatType(e)?"toggle":"set",i=this._getReplacedTag(s),a=0;a<e.length;a++){var r=this.utils.replaceToTag(e[a],i);t.push(r.get())}return t},_getReplacedTag:function(e){var t="toggle"===e?this.opts.markup:this.tag;return this.opts.breakline&&"p"===t?"div":t},_getChildTextNodes:function(e){for(var t=e.childNodes,s=t[0],i=[],a=0;a<=t.length;a++){var r=t[a];if(r&&3!==r.nodeType&&this.inspector.isBlockTag(r.tagName))break;i.push(r)}return{nodes:i,first:s}},_getTextNodesData:function(){var e=this.selection.getNodes({textnodes:!0,keepbr:!0});if(0===e.length)return!1;for(var t=e[0],s=e[e.length-1],i=s,a=!1;!a;){var r=this.selection.getInline(i);i=r?r.nextSibling:i.nextSibling,i&&(3===i.nodeType||"BR"!==i.tagName&&!this.inspector.isBlockTag(i.tagName))?e.push(i):a=!0}return{nodes:e,first:t,last:s}},_isToggleFormatType:function(e){for(var t=0,s=e.length,i=0;s>i;i++)e[i]&&this.tag===e[i].tagName.toLowerCase()&&t++;return t===s},_combinePre:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s].nextElementSibling;if(i&&"PRE"===e[s].tagName&&"PRE"===i.tagName){var a=$R.dom(e[s]),r=$R.dom(i),n=document.createTextNode("\n");a.append(n),a.append(r),r.unwrap("pre")}t.push(e[s])}return t},_cleanBlocks:function(e){for(var t=["h1","h2","h3","h4","h5","h6"],s=this.opts.inlineTags,i=0;i<e.length;i++){var a=e[i].tagName.toLowerCase(),r=$R.dom(e[i]);-1!==t.indexOf(a)?r.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker").unwrap():"pre"===a&&r.find(s.join(",")).not(".redactor-selection-marker").unwrap(),this.opts.breakline&&"div"===a?r.attr("data-redactor-tag","br"):r.removeAttr("data-redactor-tag"),this.utils.normalizeTextNodes(e[i])}return e}}),$R.add("service","inline",{mixins:["formatter"],init:function(e){this.app=e,this.count=0},format:function(e){if(!this._isFormat())return[];this.type=e.type?e.type:"set",this.tag="string"==typeof e?e:e.tag,this.tag=this.tag.toLowerCase(),this.tag=this.arrangeTag(this.tag),"string"==typeof e?this.args=!1:this.buildArgs(e),this.detector.isIe()||this.editor.disableNonEditables();var t=this.selection.isCollapsed()?this.formatCollapsed():this.formatUncollapsed();return this.detector.isIe()||this.editor.enableNonEditables(),t},_isFormat:function(){var e=this.selection.getCurrent(),t=this.inspector.parse(e),s=t.isComponent()&&!t.isComponentType("table")&&!t.isFigcaption();return!(!1!==e||!this.selection.isAll())||e&&!t.isPre()&&!t.isCode()&&!s},arrangeTag:function(e){var t=this.opts.replaceTags;for(var s in t)e===s&&(e=t[s]);return e},formatCollapsed:function(){var e,t,s,i,a=[],r=this.selection.getInlineFirst(),n=this.selection.getInlines({all:!0}),o=$R.dom(r);if(r){var l=this.inspector.parse(r),c=this.utils.isEmptyHtml(r.innerHTML);if(c)if(r.tagName.toLowerCase()===this.tag)if(this.hasSameArgs(r)){this.caret.setAfter(r),o.remove();var d=this.selection.getElement();this.utils.normalizeTextNodes(d)}else"span"===this.tag?(a=this.applyArgs([r],!1),this.caret.setStart(r)):a=this.insertInline(a);else l.hasParent([this.tag])?(e=o.closest(this.tag),t=e.get(),this.hasSameArgs(t)?(e.unwrap(),this.caret.setStart(r)):a=this.insertInline(a)):a=this.insertInline(a);else if(r.tagName.toLowerCase()===this.tag)this.hasSameArgs(r)?(i=this.utils.extractHtmlFromCaret(r),s=$R.dom("<"+this.tag+" />"),s=this.utils.cloneAttributes(r,s),o.after(s.append(i)),this.caret.setAfter(r)):a=this.insertInline(a);else if(l.hasParent([this.tag]))if(e=o.closest(this.tag),t=e.get(),this.hasSameArgs(t)){i=this.utils.extractHtmlFromCaret(t,t),s=$R.dom("<"+this.tag+" />"),s=this.utils.cloneAttributes(t,s);var u,h,p=0;n=n.reverse();for(var m=0;m<n.length;m++)n[m]!==t&&(h=$R.dom("<"+n[m].tagName.toLowerCase()+">"),0===p?u=h:u.append(h),p++);e.after(s.append(i)),e.after(u),this.caret.setStart(h)}else a=this.insertInline(a);else a=this.insertInline(a)}else a=this.insertInline(a);return a},insertInline:function(e){var t=document.createElement(this.tag);return e=this.insertion.insertNode(t,"start"),this.applyArgs(e,!1)},hasSameArgs:function(e){if(0===e.attributes.length&&!1===this.args)return!0;var t=!0;if(this.args){var s=0;for(var i in this.args){var a=$R.dom(e),r=this.args[i],n=this.utils.toParams(r),o=a.attr(i);if(r)if("style"===i){n=n.trim().replace(/;$/,"");for(var l=this.utils.styleToObj(a.attr("style")),c=n.split(";"),d=0,u=0;u<c.length;u++){var h=c[u].split(":"),p=h[0].trim(),m=h[1].trim();if(-1!==p.search(/color/)){var f=a.css(p);!f||f!==m&&this.utils.rgb2hex(f)!==m||d++}else a.css(p)===m&&d++}d===c.length&&_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(l).length===c.length&&s++}else o===n&&s++;else o&&""!==o||s++}t=s===_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(this.args).length}return t},formatUncollapsed:function(){var e=this.selection.getInlines({all:!0,inside:!0});this.detector.isIe()?this.selection.saveMarkers():this.selection.save(),this._convertTags("u"),this._convertTags("del"),this._convertToStrike(e),this.detector.isIe()?this.selection.restoreMarkers():this.selection.restore(),document.execCommand("strikethrough"),this._clearDecoration(),this.selection.save();var t=this._revertToInlines();t=this.applyArgs(t,!1);for(var s=0;s<t.length;s++){var i=t[s],a=i.tagName.toLowerCase(),r=i.attributes.length;a===this.tag&&0===r&&this.args&&($R.dom(i).unwrap(),t.splice(s,1))}return this.selection.restore(),this._clearEmptyStyle(),this._normalizeBlocks(t)},_convertTags:function(e){if(this.tag!==e){var t=this.editor.getElement();t.find(e).each(function(t){var s=this.utils.replaceToTag(t,"span");s.addClass("redactor-convertable-"+e)}.bind(this))}},_revertTags:function(e){var t=this.editor.getElement();t.find("span.redactor-convertable-"+e).each(function(t){var s=this.utils.replaceToTag(t,e);s.removeClass("redactor-convertable-"+e),this.utils.removeEmptyAttr(s,"class")&&s.removeAttr("class")}.bind(this))},_convertToStrike:function(e){for(var t=this.selection.getText().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s=0;s<e.length;s++){var i=this.arrangeTag(e[s].tagName.toLowerCase()),a=e[s],r=$R.dom(a),n=this.hasSameArgs(a);i===this.tag&&("span"===this.tag&&this._isTextSelected(a,t)?r.addClass("redactor-convertable-apply"):n&&"a"!==this.tag?this._replaceToStrike(r):"span"===this.tag?r.addClass("redactor-unconvertable-apply"):n||r.addClass("redactor-convertable-apply"))}},_replaceToStrike:function(e){e.replaceWith(function(){return $R.dom("<strike>").append(e.contents())})},_revertToInlines:function(){var e=[],t=this.editor.getElement();return"u"!==this.tag&&t.find("u").unwrap(),t.find(".redactor-convertable-apply").each(function(t){var s=$R.dom(t);s.find("strike").unwrap(),this._forceRemoveClass(s,"redactor-convertable-apply"),e.push(t)}.bind(this)),t.find("span.redactor-unconvertable-apply").each(function(e){var t=$R.dom(e);this._forceRemoveClass(t,"redactor-unconvertable-apply")}.bind(this)),t.find("strike").each(function(t){var s=this.utils.replaceToTag(t,this.tag);e.push(s.get())}.bind(this)),this._revertTags("u"),this._revertTags("del"),e},_normalizeBlocks:function(e){var t=this.opts.inlineTags,s=this.selection.getBlocks();if(s)for(var i=0;i<s.length;i++)if("PRE"===s[i].tagName){var a=$R.dom(s[i]);a.find(t.join(",")).not(".redactor-selection-marker").each(function(t){-1!==e.indexOf(t)&&(e=this.utils.removeFromArrayByValue(e,t)),$R.dom(t).unwrap()}.bind(this))}return e},_clearDecoration:function(){var e=this.editor.getElement();e.find(this.opts.inlineTags.join(",")).each(function(e){if("line-through"===e.style.textDecoration||"line-through"===e.style.textDecorationLine){var t=$R.dom(e);t.css("textDecorationLine",""),t.css("textDecoration",""),t.wrap("<strike>")}})},_clearEmptyStyle:function(){for(var e=this.getInlines(),t=0;t<e.length;t++){this._clearEmptyStyleAttr(e[t]);var s=e[t].childNodes;if(s)for(var i=0;i<s.length;i++)this._clearEmptyStyleAttr(s[i])}},_clearEmptyStyleAttr:function(e){3!==e.nodeType&&this.utils.removeEmptyAttr(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-redactor-style-cache"))},_forceRemoveClass:function(e,t){e.removeClass(t),this.utils.removeEmptyAttr(e,"class")&&e.removeAttr("class")},_isTextSelected:function(e,t){var s=this.utils.removeInvisibleChars(e.textContent);return t===s||-1!==t.search(new RegExp("^"+this.utils.escapeRegExp(s)+"$"))},getInlines:function(e){return e?this.selection.getInlines({tags:e,all:!0}):this.selection.getInlines({all:!0})},getElements:function(e){return $R.dom(this.getInlines(e))},clearFormat:function(){this.selection.save();for(var e=this.selection.getInlines({all:!0}),t=0;t<e.length;t++){var s=$R.dom(e[t]),i=this.selection.getInline(e[t]);i&&s.unwrap()}this.selection.restore()}}),$R.add("service","autoparser",{init:function(e){this.app=e},observe:function(){var e=this.editor.getElement(),t=e.find(".redactor-autoparser-object").each(function(e){var t=$R.dom(e);t.removeClass("redactor-autoparser-object"),""===t.attr("class")&&t.removeAttr("class")});t.length>0&&t.each(function(e){var t,s=!1,i=e.tagName;"A"===i?t="link":"IMG"===i?t="image":"IFRAME"===i&&(t="video"),t&&(s=$R.create(t+".component",this.app,e),this.app.broadcast(t+".inserted",s),this.app.broadcast("autoparse",t,s))}.bind(this))},format:function(e,t){this._isKey(t)&&this._format(t===this.keycodes.ENTER)},parse:function(e){var t=["figure","pre","iframe","code","a","img"],s=[],i=0;e=this.cleaner.encodePreCode(e);for(var a=0;a<t.length;a++){var r="img"===t[a]?"<"+t[a]+"[^>]*>":"<"+t[a]+"([\\w\\W]*?)</"+t[a]+">",n=e.match(new RegExp(r,"gi"));if(null!==n)for(var o=0;o<n.length;o++)e=e.replace(n[o],"#####replaceparse"+i+"#####"),s.push(n[o]),i++}if(this.opts.autoparseImages&&e.match(this.opts.regex.imageurl)){var l=e.match(this.opts.regex.imageurl);for(a=0;a<l.length;a++)e=e.replace(l[a],'<img class="redactor-autoparser-object" src="'+l[a]+'">')}if(this.opts.autoparseVideo&&(e.match(this.opts.regex.youtube)||e.match(this.opts.regex.vimeo))){var c,d,u='<iframe width="500" height="281" src="',h='" frameborder="0" allowfullscreen></iframe>';e.match(this.opts.regex.youtube)?(c="//www.youtube.com/embed/$1",d=this.opts.regex.youtube):e.match(this.opts.regex.vimeo)&&(c="//player.vimeo.com/video/$2",d=this.opts.regex.vimeo);var p=this.component.create("video",u+c+h);e=e.replace(d,p.get().outerHTML)}return this.opts.autoparseLinks&&e.match(this.opts.regex.url)&&(e=this._formatLinks(e)),e=this._restoreReplaced(s,e),this._restoreReplaced(s,e)},_isKey:function(e){return e===this.keycodes.ENTER||e===this.keycodes.SPACE},_format:function(e){var t=this.selection.getParent(),s=$R.dom(t),i=t&&0!==s.closest("figure, pre, code, img, a, iframe").length;if(!i&&this.selection.isCollapsed()){var a=this.utils.createInvisibleChar(),r=this.selection.getRange();r.insertNode(a);var n=this.selection.getCurrent(),o=this.inspector.parse(n),l=$R.dom(n);if(a.parentNode.removeChild(a),n&&3===n.nodeType){var c,d=n.textContent;if(this.opts.autoparseImages&&d.match(this._convertToRegExp(this.opts.regex.imageurl))){var u=o.isList(),h=d.match(this.opts.regex.imageurl),p=u?void 0:"<figure><img></figure>",m=this.component.create("image",p);m.setSrc(h[0]),m.addClass("redactor-autoparser-object"),d=d.replace(h[0],m.get().outerHTML),c="image"}else if(this.opts.autoparseVideo&&(d.match(this._convertToRegExp(this.opts.regex.youtube))||d.match(this._convertToRegExp(this.opts.regex.vimeo)))){var f,_,g='<iframe width="500" height="281" src="',v='" frameborder="0" allowfullscreen></iframe>';d.match(this.opts.regex.youtube)?(f="//www.youtube.com/embed/$1",_=this.opts.regex.youtube):d.match(this.opts.regex.vimeo)&&(f="//player.vimeo.com/video/$2",_=this.opts.regex.vimeo);var b=this.component.create("video",g+f+v);b.addClass("redactor-autoparser-object"),d=d.replace(_,b.get().outerHTML),c="video"}else this.opts.autoparseLinks&&d.match(this._convertToRegExp(this.opts.regex.url))&&(d=this._formatLinks(d,e),c="link");if(c){e?(this.selection.save(),l.replaceWith(d),this.selection.restore()):l.replaceWith(d);var y=this.editor.getElement(),C=y.find(".redactor-autoparser-object").removeClass("redactor-autoparser-object");if(C="link"===c?$R.create("link.component",this.app,C):C,"link"===c)e||this.caret.setAfter(C),this.app.broadcast("link.inserted",C);else{this.caret.setAfter(C);var k=C.clone();C.remove(),C=this.insertion.insertHtml(k),C=this.component.build(C)}this.app.broadcast("autoparse",c,C)}}}},_formatLinks:function(e,t){for(var s=e.match(this.opts.regex.url),i={},a=0;a<s.length;a++){t&&-1!==s[a].search(/\.$/)&&(s[a]=s[a].replace(/\.$/,""));var r=s[a],n=r,o=null!==r.match(/(https?|ftp):\/\//i)?"":"http://",l=-1!==["/","&","="].indexOf(r.slice(-1))?"":"\\b",c=!1!==this.opts.pasteLinkTarget?' target="'+this.opts.pasteLinkTarget+'"':"";n=n.length>this.opts.linkSize?n.substring(0,this.opts.linkSize)+"...":n,n=-1===n.search("%")?decodeURIComponent(n):n;var d="("+r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")",u=' class="redactor-autoparser-object"';i[d]='<a href="'+o+r.trim()+'"'+c+u+">"+n.trim()+"</a>"}for(var h in i)e=e.replace(new RegExp(h,"g"),i[h]);return e},_restoreReplaced:function(e,t){for(var s=0;s<e.length;s++)t=t.replace("#####replaceparse"+s+"#####",e[s]);return t},_convertToRegExp:function(e){return new RegExp(String(e).replace(/^\//,"").replace(/\/ig$/,"").replace(/\/gi$/,"")+"$","gi")}}),$R.add("service","storage",{init:function(e){this.app=e,this.data=[]},observeImages:function(){var e=this.editor.getElement(),t=e.find("[data-image]");t.each(this._addImage.bind(this))},observeFiles:function(){var e=this.editor.getElement(),t=e.find("[data-file]");t.each(this._addFile.bind(this))},setStatus:function(e,t){this.data[e].status=t},getChanges:function(){var e=this.editor.getElement();for(var t in this.data){var s=this.data[t],i=e.find("[data-"+s.type+'="'+s.id+'"]');this.setStatus(s.id,0!==i.length)}return this.data},add:function(e,t){var s=$R.dom(t),i=s.attr("data-"+e);this.data[i]={type:e,status:!0,node:s.get(),id:s.attr("data-"+e)}},_addImage:function(e){this.add("image",e)},_addFile:function(e){this.add("file",e)}}),$R.add("service","utils",{init:function(e){this.app=e},isEmpty:function(e){var t=!1;return e=$R.dom(e).get(),e&&(t=3===e.nodeType?""===e.textContent.trim().replace(/\n/,""):""===e.innerHTML),t},isEmptyHtml:function(e,t,s){return e=this.removeInvisibleChars(e),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,t?"br":""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/^<div>[^\W\w\D\d]*?<\/div>$/i,""),s&&(e=e.replace(/<ul(.*?[^>])>$/i,"ul"),e=e.replace(/<ol(.*?[^>])>$/i,"ol")),e=e.replace(/<hr(.*?[^>])>$/i,"hr"),e=e.replace(/<iframe(.*?[^>])>$/i,"iframe"),e=e.replace(/<source(.*?[^>])>$/i,"source"),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.trim(),""===e},trimSpaces:function(e){return this.removeInvisibleChars(e.trim())},createInvisibleChar:function(){return document.createTextNode(this.opts.markerChar)},searchInvisibleChars:function(e){return e.search(/^\uFEFF$/g)},removeInvisibleChars:function(e){return e.replace(/\uFEFF/g,"")},trimInvisibleChars:function(e){if(this.selection.isCollapsed()){var t=this.selection.getCurrent(),s="left"===e?this.selection.getTextBeforeCaret():this.selection.getTextAfterCaret(),i=t&&3===t.nodeType&&0===this.searchInvisibleChars(s);if(i)if("left"===e)$R.dom(t).replaceWith(t.textContent.trim());else{var a=this.offset.get();this.offset.set({start:a.start+1,end:a.end+1})}}},buildWrapper:function(e){return $R.dom("<div>").html(e)},getWrapperHtml:function(e){var t=e.html();return e.remove(),t},createTmpContainer:function(e){var t=$R.dom("<div>");return"string"==typeof e?t.html(e):t.append($R.dom(e).clone(!0)),t.get()},createFragment:function(e){for(var t,s,i,a=this.createTmpContainer(e),r=document.createDocumentFragment(),n=[],o=0;t=a.firstChild;){o++;var l=r.appendChild(t);1===o&&(s=l),n.push(l),i=l}return{frag:r,first:s,last:i,nodes:n}},isFragment:function(e){return"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)&&e.frag},parseHtml:function(e){var t=this.createTmpContainer(e);return{html:t.innerHTML,nodes:t.childNodes}},splitNode:function(e,t,s,i){var a;t=this.isFragment(t)?t.frag:t,a=i?this.inspector.isInlineTag(e.tagName)?e:this.selection.getInline(e):this.inspector.isBlockTag(e.tagName)?e:this.selection.getBlock(e);var r=$R.dom(a);if(!i&&this.isEmptyHtml(a.innerHTML,!0))return r.after(t),r.remove(),t;var n=r.get().tagName.toLowerCase(),o=this.caret.isEnd(a),l=this.caret.isStart(a);if(!o&&!l){var c=this.extractHtmlFromCaret(i),d=$R.dom("<"+n+" />");d=this.cloneAttributes(a,d),r.after(d.append(c))}if(l)return r.before(t);if(s)return r.append(t);t=r.after(t);var u=r.html();return u=this.removeInvisibleChars(u),u=u.replace(/&nbsp;/gi,""),""===u&&r.remove(),t},extractHtmlFromCaret:function(e,t){var s=this.selection.getRange();if(s&&(t=t||(e?this.selection.getInline():this.selection.getBlock()))){var i=s.cloneRange();return i.selectNodeContents(t),i.setStart(s.endContainer,s.endOffset),i.extractContents()}},createMarkup:function(e){var t=document.createElement(this.opts.markup);this.opts.breakline&&t.setAttribute("data-redactor-tag","br");var s=$R.dom(e);s.after(t),this.caret.setStart(t)},createMarkupBefore:function(e){var t=document.createElement(this.opts.markup);this.opts.breakline&&t.setAttribute("data-redactor-tag","br");var s=$R.dom(e);s.before(t),this.caret.setEnd(t)},getNode:function(e){var t=$R.dom(e).get(),s=this.editor.getElement().get();return"undefined"==typeof e?s:t||!1},findSiblings:function(e,t){for(e=$R.dom(e).get(),t="next"===t?"nextSibling":"previousSibling";e=e[t];)if((3!==e.nodeType||""!==e.textContent.trim())&&"BR"!==e.tagName)return e;return!1},getElementsFromHtml:function(e,t,s){var i=document.createElement("div");i.innerHTML=e;var a=i.querySelectorAll(t),r=function(e,t){if("number"==typeof this.length&&"function"==typeof e){var s=[];if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this))for(var i=0;i<this.length;i++){if(!(i in this))return;s[i]=e.call(t||this,this[i],i,this)}return s}};return r.call(a,function(e){var t=e.getAttribute("data-redactor-type");return s&&t&&t===s?void 0:e.outerHTML})},getChildNodes:function(e,t,s){e=e&&e.nodeType&&11===e.nodeType?e:$R.dom(e).get();var i=e.childNodes,a=[];if(i)for(var r=0;r<i.length;r++)if(!(!0===s&&3===i[r].nodeType||3===i[r].nodeType&&this.isEmpty(i[r])||(a.push(i[r]),!1===t))){var n=this.getChildNodes(i[r],s);n.length>0&&(a=a.concat(n))}return a},getChildElements:function(e){return this.getChildNodes(e,!0,!0)},getFirstNode:function(e){return this._getFirst(this.getChildNodes(e,!1))},getLastNode:function(e){return this._getLast(this.getChildNodes(e,!1))},getFirstElement:function(e){return this._getFirst(this.getChildNodes(e,!1,!0))},getLastElement:function(e){return this._getLast(this.getChildNodes(e,!1,!0))},replaceToTag:function(e,t){var s=$R.dom(e);return s.replaceWith(function(e){var s=$R.dom("<"+t+">").append($R.dom(e).contents());if(e.attributes)for(var i=e.attributes,a=0;a<i.length;a++)s.attr(i[a].nodeName,i[a].value);return s})},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},removeFromArrayByValue:function(e,t){for(var s,i=arguments,a=i.length;a>1&&e.length;)for(t=i[--a];-1!==(s=e.indexOf(t));)e.splice(s,1);return e},removeEmptyAttr:function(e,t){var s=$R.dom(e);return"undefined"==typeof s.attr(t)||null===s.attr(t)||""===s.attr(t)&&(s.removeAttr(t),!0)},cloneAttributes:function(e,t){e=$R.dom(e).get(),t=$R.dom(t);for(var s=e.attributes,i=s.length;i--;){var a=s[i];t.attr(a.name,a.value)}return t},toParams:function(e){if("object"!=Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e))return e;var t=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(e);if(!t.length)return"";for(var s="",i=0;i<t.length;i++){var a=t[i];s+=a+":"+e[a]+";"}return s},styleToObj:function(e){var t={};if(e)for(var s=e.replace(/;$/,"").split(";"),i=0;i<s.length;i++){var a=s[i].split(":");t[a[0].trim()]=a[1].trim()}return t},checkProperty:function(e){for(var t=arguments[1]&&_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(arguments[1])?arguments[1]:[].slice.call(arguments,1),s=0;s<t.length;s++){if(!e||"undefined"==typeof e[t[s]])return!1;e=e[t[s]]}return e},extendData:function(e,t){for(var s in t)if("elements"===s){var i=$R.dom(t[s]);i.each(function(t){var s=$R.dom(t);if("FORM"===t.tagName){var i=s.serialize(!0);for(var a in i)e=this._setData(e,a,i[a])}else{var r=s.attr("name")?s.attr("name"):s.attr("id");e=this._setData(e,r,s.val())}}.bind(this))}else e=this._setData(e,s,t[s]);return e},_setData:function(e,t,s){return e instanceof FormData?e.append(t,s):e[t]=s,e},normalizeTextNodes:function(e){e=$R.dom(e).get(),e&&e.normalize()},isRgb:function(e){return 0===e.search(/^rgb/i)},rgb2hex:function(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(e[1],10).toString(16)).slice(-2)+("0"+_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(e[2],10).toString(16)).slice(-2)+("0"+_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(e[3],10).toString(16)).slice(-2):""},hex2long:function(e){return-1!==e.search(/^#/)&&4===e.length&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e},escapeRegExp:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},getRandomId:function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz0123456789",s=0;12>s;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},_getFirst:function(e){return 0!==e.length&&e[0]},_getLast:function(e){return 0!==e.length&&e[e.length-1]}}),$R.add("service","progress",{init:function(e){this.app=e,this.$box=null,this.$bar=null},show:function(){this._is()||this._build(),this.$box.show()},hide:function(){this._is()&&this.animate.start(this.$box,"fadeOut",this._destroy.bind(this))},update:function(e){this.show(),this.$bar.css("width",e+"%")},_is:function(){return null!==this.$box},_build:function(){this.$bar=$R.dom("<span />"),this.$box=$R.dom('<div id="redactor-progress" />'),this.$box.append(this.$bar),this.$body.append(this.$box)},_destroy:function(){this._is()&&this.$box.remove(),this.$box=null,this.$bar=null}}),$R.add("module","starter",{init:function(e){this.app=e,this.opts=e.opts,this.plugin=e.plugin,this.module=e.module},onstart:function(){var e=["element","container","source","editor","statusbar","toolbar"],t=["element","container","source","editor","statusbar","contextbar","input"];this._startStop("start",this.app,e),this._startStop("start",this.module,t)},onstop:function(){var e=["observer","element","container","source","editor","contextbar"];this._startStop("stop",this.module,e)},onenable:function(){var e=["observer","toolbar"],t=this.opts.plugins;this._startStop("start",this.module,e),this._startStop("start",this.plugin,t)},ondisable:function(){var e=["observer","toolbar"],t=this.opts.plugins;this._startStop("stop",this.module,e),this._startStop("stop",this.plugin,t)},_startStop:function(e,t,s){for(var i=0;i<s.length;i++)"undefined"!=typeof t[s[i]]&&this.app.callInstanceMethod(t[s[i]],e)}}),$R.add("module","element",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.namespace=e.namespace,this.element=e.element,this.rootOpts=$R.extend({},!0,$R.options,e.rootOpts)},start:function(){this._build(),this._buildModes(),this._buildMarkup()},stop:function(){var e=this.element.getElement();e.removeData(this.namespace+"-uuid")},_build:function(){var e=this.element.getElement();e.data(this.namespace+"-uuid",this.uuid)},_buildModes:function(){var e=this.element.getType();"inline"===e&&this._redefineOptions(this.opts.modes.inline),"div"===e&&this._redefineOptions(this.opts.modes.original),"inline"!==e&&(this._isRootOption("styles")&&this.rootOpts.styles&&(this.opts.styles=!0),this._isRootOption("source")&&!this.rootOpts.source&&(this.opts.showSource=!1))},_buildMarkup:function(){var e=this.element.getType();"inline"===e?this.opts.emptyHtml="":this.opts.breakline?(this.opts.markup="div",this.opts.emptyHtml='<div data-redactor-tag="br">'+this.opts.markerChar+"</div>"):this.opts.emptyHtml="<"+this.opts.markup+"></"+this.opts.markup+">"},_redefineOptions:function(e){for(var t in e)this.opts[t]=e[t]},_isRootOption:function(){return"undefined"!=typeof this.rootOpts.styles}}),$R.add("module","editor",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.editor=e.editor,this.source=e.source,this.element=e.element,this.component=e.component,this.container=e.container,this.inspector=e.inspector,this.autoparser=e.autoparser,this.placeholder=!1,this.events=!1},onenable:function(){this.enable()},ondisable:function(){this.disable()},onenablefocus:function(){this._enableFocus()},oncontextmenu:function(e){this.component.setOnEvent(e,!0)},onclick:function(e){this.component.setOnEvent(e)},onkeyup:function(e){var t=this.inspector.parse(e.target);t.isComponent()||this.component.clearActive()},onenablereadonly:function(){this._enableReadOnly()},ondisablereadonly:function(){this._disableReadOnly()},onautoparseobserve:function(){this.autoparser.observe()},onplaceholder:{build:function(){this._buildPlaceholder()},toggle:function(){this._togglePlacehodler()}},start:function(){this._build(),this._buildEvents(),this._buildOptions(),this._buildAccesibility()},stop:function(){var e=this.editor.getElement(),t=this.container.getElement(),s=["redactor-in","redactor-in-"+this.uuid,"redactor-structure","redactor-placeholder","notranslate",this.opts.stylesClass],i=["redactor-focus","redactor-blur","redactor-over","redactor-styles-on","redactor-styles-off","redactor-toolbar-on","redactor-text-labeled-on","redactor-source-view"];e.removeAttr("spellcheck"),e.removeAttr("dir"),e.removeAttr("contenteditable"),e.removeAttr("placeholder"),e.removeAttr("data-gramm_editor"),e.removeClass(s.join(" ")),t.removeClass(i.join(" ")),this._destroyEvents(),0===e.get().classList.length&&e.removeAttr("class")},enable:function(){var e=this.editor.getElement(),t=this.container.getElement();e.addClass("redactor-in redactor-in-"+this.uuid),e.attr({contenteditable:!0}),this.opts.structure&&e.addClass("redactor-structure"),!this.opts.toolbar||this.opts.air||this.opts.toolbarExternal||t.addClass("redactor-toolbar-on"),this._disableBrowsersEditing()},disable:function(){var e=this.editor.getElement(),t=this.container.getElement();e.removeClass("redactor-in redactor-in-"+this.uuid),e.removeClass("redactor-structure"),e.removeAttr("contenteditable"),t.addClass("redactor-toolbar-on")},_build:function(){var e=this.editor.getElement(),t=this.element.getElement(),s=this.container.getElement();s.addClass("redactor-blur"),this.opts.grammarly||e.attr("data-gramm_editor",!1),this.opts.notranslate&&e.addClass("notranslate"),this.opts.styles?(e.addClass(this.opts.stylesClass),s.addClass("redactor-styles-on")):s.addClass("redactor-styles-off"),this.opts.buttonsTextLabeled&&s.addClass("redactor-text-labeled-on"),this.element.isType("textarea")&&t.before(e)},_buildEvents:function(){this.events=$R.create("editor.events",this.app)},_buildOptions:function(){var e=this.editor.getElement();e.attr("dir",this.opts.direction),this.opts.tabindex&&e.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&e.css("min-height",this.opts.minHeight),this.opts.maxHeight&&e.css("max-height",this.opts.maxHeight),this.opts.maxWidth&&e.css({"max-width":this.opts.maxWidth,margin:"auto"})},_buildAccesibility:function(){var e=this.editor.getElement();e.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},_buildPlaceholder:function(){this.placeholder=$R.create("editor.placeholder",this.app)},_enableFocus:function(){this.opts.showSource?this._enableFocusSource():this._enableFocusEditor()},_enableFocusSource:function(){var e=this.source.getElement();this.opts.focus?(e.focus(),e.get().setSelectionRange(0,0)):this.opts.focusEnd&&e.focus()},_enableFocusEditor:function(){this.opts.focus?setTimeout(this.editor.startFocus.bind(this.editor),100):this.opts.focusEnd&&setTimeout(this.editor.endFocus.bind(this.editor),100)},_togglePlacehodler:function(){this.placeholder&&this.placeholder.toggle()},_disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1);var e=this.editor.getElement(),t=e.get();t.addEventListener?t.addEventListener("mscontrolselect",function(e){e.preventDefault()}):t.attachEvent("oncontrolselect",function(e){e.returnValue=!1})}catch(s){}},_destroyEvents:function(){this.events&&this.events.destroy()},_enableReadOnly:function(){var e=this.editor.getElement();this._getEditables(e).removeAttr("contenteditable"),e.removeAttr("contenteditable"),e.addClass("redactor-read-only"),this.events&&this.events.destroy()},_disableReadOnly:function(){var e=this.editor.getElement();this._getEditables(e).attr({contenteditable:!0}),e.removeClass("redactor-read-only"),e.attr({contenteditable:!0}),this._buildEvents()},_getEditables:function(e){return e.find("figcaption, td, th")}}),$R.add("class","editor.placeholder",{init:function(e){this.app=e,this.opts=e.opts,this.editor=e.editor,this.element=e.element,this.build()},build:function(){var e=this.element.getElement(),t=this.editor.getElement();if(!1!==this.opts.placeholder||e.attr("placeholder")){var s=!1!==this.opts.placeholder?this.opts.placeholder:e.attr("placeholder");t.attr("placeholder",s),this.toggle()}},toggle:function(){return this.editor.isEmpty(!0)?this.show():this.hide()},show:function(){var e=this.editor.getElement();e.addClass("redactor-placeholder")},hide:function(){var e=this.editor.getElement();e.removeClass("redactor-placeholder")}}),$R.add("class","editor.events",{init:function(e){this.app=e,this.opts=e.opts,this.$doc=e.$doc,this.uuid=e.uuid,this.source=e.source,this.editor=e.editor,this.cleaner=e.cleaner,this.container=e.container,this.insertion=e.insertion,this.inspector=e.inspector,this.selection=e.selection,this.component=e.component,this.blurNamespace=".redactor-blur."+this.uuid,this.eventsList=["paste","click","contextmenu","keydown","keyup","mouseup","touchstart","cut","copy","dragenter","dragstart","drop","dragover","dragleave"],this._init()},destroy:function(){var e=this.editor.getElement();e.off(".redactor-focus"),this.$doc.off("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace),this._loop("off")},focus:function(e){var t=this.container.getElement();this.editor.isPasting()||t.hasClass("redactor-focus")||(t.addClass("redactor-focus"),t.removeClass("redactor-blur"),this.app.broadcast("observe",e),this.app.broadcast("focus",e),this.isFocused=!0,this.isBlured=!1)},blur:function(e){var t=this.container.getElement(),s=$R.dom(e.target),i=[".redactor-in-"+this.uuid,".redactor-toolbar",".redactor-dropdown",".redactor-context-toolbar","#redactor-modal","#redactor-image-resizer"];this.app.broadcast("originalblur",e),this.app.stopBlur||this.app.isStarted()&&!this.editor.isPasting()&&0===s.closest(i.join(",")).length&&(this.isBlured||t.hasClass("redactor-blur")||(t.removeClass("redactor-focus"),t.addClass("redactor-blur"),this.app.broadcast("blur",e),this.isFocused=!1,this.isBlured=!0))},cut:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t);this.app.broadcast("state",e),this.component.isNonEditable(t)&&(this._passSelectionToClipboard(e,s,!0),e.preventDefault())},copy:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t);this.app.broadcast("state",e),this.component.isNonEditable(t)&&(this._passSelectionToClipboard(e,s,!1),e.preventDefault())},drop:function(e){if(e=e.originalEvent||e,e.stopPropagation(),this._removeOverClass(),!1!==this.opts.dragUpload){if(this.app.isDragComponentInside()){var t=$R.dom(this.app.getDragComponentInside()),s=t.clone(!0);return this.insertion.insertToPoint(e,s),t.remove(),this.app.setDragComponentInside(!1),this.app.broadcast("state",e),this.app.broadcast("drop",e),this.app.broadcast("image.observe",e),void e.preventDefault()}if(this.app.isDragInside()&&this.opts.input){this.insertion.insertPoint(e);var i=e.dataTransfer,a=i.getData("text/html"),r=this.selection.getRange();if(r){var n=this.selection.getBlocks();r.deleteContents();for(var o=0;o<n.length;o++)""===n[o].innerHTML&&$R.dom(n[o]).remove()}return $R.create("input.paste",this.app,e,!0,a,!0),this.app.broadcast("state",e),this.app.broadcast("drop",e),this.app.setDragInside(!1),void e.preventDefault()}this.app.broadcast("state",e),this.app.broadcast("paste",e,e.dataTransfer),this.app.broadcast("drop",e)}else e.preventDefault()},dragenter:function(e){e.preventDefault()},dragstart:function(e){this.app.setDragComponentInside(!1),this.app.setDragInside(!1);var t=this.inspector.parse(e.target);!t.isComponent()||t.isComponentEditable()||t.isFigcaption()?this.selection.is()&&!this.selection.isCollapsed()&&(this.app.setDragInside(!0),this._setDragData(e)):this.app.setDragComponentInside(t.getComponent()),this.app.broadcast("dragstart",e)},dragover:function(e){this.app.broadcast("dragover",e)},dragleave:function(e){this.app.broadcast("dragleave",e)},paste:function(e){this.app.broadcast("paste",e)},contextmenu:function(e){this.editor.disableNonEditables(),setTimeout(function(){this.editor.enableNonEditables(),this.app.broadcast("contextmenu",e)}.bind(this),0)},click:function(e){if(3===e.detail){e.preventDefault();var t=this.selection.getBlock(),s=document.createRange();s.selectNodeContents(t),this.selection.setRange(s)}var i=$R.dom(e.target);if(i.hasClass("redactor-in")){var a=i.offset().top,r=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_12___default()(i.css("padding-bottom")),n=i.height(),o=a+n-2*r;o<e.pageY&&this.app.broadcast("bottomclick",e)}this.app.broadcast("state",e),this.app.broadcast("click",e)},keydown:function(e){this.app.broadcast("state",e);var t=this.app.broadcast("keydown",e);return!1===t?e.preventDefault():void 0},keyup:function(e){this.app.broadcast("keyup",e)},mouseup:function(e){this.app.broadcast("observe",e),this.app.broadcast("state",e)},touchstart:function(e){this.app.broadcast("observe",e),this.app.broadcast("state",e)},_init:function(){var e=this.editor.getElement();e.on("focus.redactor-focus click.redactor-focus",this.focus.bind(this)),this.$doc.on("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace,this.blur.bind(this)),this._loop("on")},_removeOverClass:function(){var e=this.editor.getElement();e.removeClass("over")},_loop:function(e){for(var t=this.editor.getElement(),s=0;s<this.eventsList.length;s++){var i=this.eventsList[s]+".redactor-events",a=this.eventsList[s];t[e](i,this[a].bind(this))}},_passAllToClipboard:function(e){var t=e.clipboardData,s=this.source.getCode();t.setData("text/html",s),t.setData("text/plain",s.toString().replace(/\n$/,""))},_passSelectionToClipboard:function(e,t,s){var i=e.clipboardData,a=t.getComponent(),r=$R.dom(a),n=r.clone();n.find(".redactor-component-caret").remove(),n.removeClass("redactor-component-active"),n.removeAttr("contenteditable"),n.removeAttr("tabindex");var o=n.get().outerHTML;s&&this.component.remove(a),i.setData("text/html",o),i.setData("text/plain",o.toString().replace(/\n$/,""))},_setDragData:function(e){e=e.originalEvent||e;var t=e.dataTransfer;t.effectAllowed="move",t.setData("text/Html",this.selection.getHtml())}}),$R.add("module","container",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.lang=e.lang,this.element=e.element,this.container=e.container},start:function(){this._build(),this._buildAccesibility()},stop:function(){var e=this.element.getElement(),t=this.container.getElement();t.after(e),t.remove(),e.show()},_build:function(){var e=this.element.getElement(),t=this.container.getElement();t.addClass("redactor-box"),t.attr("dir",this.opts.direction),this.element.isType("inline")&&t.addClass("redactor-inline"),e.after(t),t.append(e)},_buildAccesibility:function(){var e=this.container.getElement(),t=$R.dom("<span />");t.addClass("redactor-voice-label"),t.attr({id:"redactor-voice-"+this.uuid,"aria-hidden":!1}),t.html(this.lang.get("accessibility-help-label")),e.prepend(t)}}),$R.add("module","source",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.utils=e.utils,this.element=e.element,this.source=e.source,this.editor=e.editor,this.toolbar=e.toolbar,this.cleaner=e.cleaner,this.component=e.component,this.container=e.container,this.autoparser=e.autoparser,this.selection=e.selection,this.syncedHtml=""},onstartcode:function(){var e=this.source.getStartedContent(),t=this.editor.getElement(),s=this.source.getElement();this.opts.autoparse&&this.opts.autoparseStart&&(e=this.autoparser.parse(e));var i=this.cleaner.input(e,!0,!0),a=this.cleaner.output(i);t.html(i),s.val(a),this.syncedHtml=a,this.app.broadcast("placeholder.build"),this.app.broadcast("autoparseobserve"),this.component.executeScripts()},onstartcodeshow:function(){this.show()},ontrytosync:function(){this.sync()},onhardsync:function(){var e=this.editor.getElement(),t=e.html();t=this.app.broadcast("syncBefore",t),t=this.cleaner.output(t),this._syncing(t)},start:function(){this._build(),this._buildClasses()},stop:function(){var e=this.element.getElement(),t=this.source.getElement();e.removeClass("redactor-source redactor-source-open"),t.off("input.redactor-source"),t.removeAttr("data-gramm_editor"),0===t.get().classList.length&&t.removeAttr("class"),this.source.isNameGenerated()||e.removeAttr("name"),this.element.isType("textarea")||t.remove()},getCode:function(){return this.source.getCode()},toggle:function(){if(this.opts.source){var e=this.source.getElement();return e.hasClass("redactor-source-open")?this.hide():this.show()}},show:function(){if(this.opts.source){var e=this.editor.getElement(),t=this.source.getElement(),s=this.container.getElement(),i=t.val();this.app.isStarted()&&(i=this.app.broadcast("source.open",i));var a=$R.create("source.selection",this.app),r=a.insertMarkersToEditor();r=this.cleaner.output(r,!1),r=r.trim();var n=e.height();e.hide(),t.height(n),t.val(i.trim()),t.show(),t.addClass("redactor-source-open"),t.on("input.redactor-source-events",this._onChangedSource.bind(this)),t.on("keydown.redactor-source-events",this._onTabKey.bind(this)),t.on("focus.redactor-source-events",this._onFocus.bind(this)),s.addClass("redactor-source-view"),a.setSelectionOffsetSource(r),setTimeout(function(){this._disableButtons(),this._setActiveSourceButton()}.bind(this),100),this.app.isStarted()&&this.app.broadcast("source.opened")}},hide:function(){if(this.opts.source){var e=this.editor.getElement(),t=this.source.getElement(),s=this.container.getElement(),i=t.val(),a=$R.create("source.selection",this.app);i=a.insertMarkersToSource(i),i=this.cleaner.input(i,!0),i=this.utils.isEmptyHtml(i)?this.opts.emptyHtml:i,i=this.app.broadcast("source.close",i),this._enableButtons(),this._setInactiveSourceButton(),t.hide(),t.removeClass("redactor-source-open"),t.off(".redactor-source-events"),e.show(),e.html(i),s.removeClass("redactor-source-view"),setTimeout(function(){a.isOffset()?this.selection.restoreMarkers():a.isOffsetEnd()?this.editor.endFocus():this.editor.startFocus(),this.component.executeScripts()}.bind(this),0),this.app.broadcast("source.closed")}},sync:function(){var e=this,t=this.editor.getElement(),s=t.html();s=this.app.broadcast("syncBefore",s),s=this.cleaner.output(s),this._isSync(s)&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e._syncing(s)},200))},_build:function(){var e=this.source.getElement(),t=this.element.getElement();e.hide(),this.opts.grammarly||e.attr("data-gramm_editor",!1),this.element.isType("textarea")||t.after(e)},_buildClasses:function(){var e=this.source.getElement();e.addClass("redactor-source")},_syncing:function(e){e=this.app.broadcast("syncing",e);var t=this.source.getElement();t.val(e),this.app.broadcast("synced",e),this.app.broadcast("changed",e)},_isSync:function(e){return this.syncedHtml!==e&&(this.syncedHtml=e,!0)},_onChangedSource:function(){var e=this.source.getElement(),t=e.val();this.app.broadcast("changed",t),this.app.broadcast("source.changed",t)},_onTabKey:function(e){if(9!==e.keyCode)return!0;e.preventDefault();var t=this.source.getElement(),s=t.get(),i=s.selectionStart;t.val(t.val().substring(0,i)+"    "+t.val().substring(s.selectionEnd)),s.selectionStart=s.selectionEnd=i+4},_onFocus:function(){this.app.broadcast("sourcefocus")},_disableButtons:function(){this.toolbar.disableButtons()},_enableButtons:function(){this.toolbar.enableButtons()},_setActiveSourceButton:function(){var e=this.toolbar.getButton("html");e.enable(),e.setActive()},_setInactiveSourceButton:function(){var e=this.toolbar.getButton("html");e.setInactive()}}),$R.add("class","source.selection",{init:function(e){this.app=e,this.utils=e.utils,this.source=e.source,this.editor=e.editor,this.marker=e.marker,this.component=e.component,this.selection=e.selection,this.markersOffset=!1,this.markersOffsetEnd=!1},insertMarkersToEditor:function(){var e=this.editor.getElement(),t=this.marker.build("start"),s=this.marker.build("end"),i=this.component.getActive();if(i){this.marker.remove();var a=$R.dom(i);a.after(s),a.after(t)}else window.getSelection&&this.selection.is()&&this.marker.insert("both");return this._getHtmlAndRemoveMarkers(e)},setSelectionOffsetSource:function(e){var t=0,s=0,i=this.source.getElement();if(""!==e){var a=this.utils.removeInvisibleChars(this.marker.buildHtml("start")),r=this.utils.removeInvisibleChars(this.marker.buildHtml("end"));t=this._strpos(e,a),s=this._strpos(e,r)-r.toString().length-2,!1===t&&(t=0,s=0)}i.get().setSelectionRange(t,s),i.get().scrollTop=0,setTimeout(function(){i.focus()}.bind(this),0)},isOffset:function(){return this.markersOffset},isOffsetEnd:function(){return this.markersOffsetEnd},insertMarkersToSource:function(e){var t=this.source.getElement(),s=this.marker.buildHtml("start"),i=this.marker.buildHtml("end"),a=s.toString().length,r=this._enlargeOffset(e,t.get().selectionStart),n=this._enlargeOffset(e,t.get().selectionEnd),o=e.length;return r===o?this.markersOffsetEnd=!0:0!==r&&0!==n?(this.markersOffset=!0,e=e.substr(0,r)+s+e.substr(r),e=e.substr(0,n+a)+i+e.substr(n+a)):this.markersOffset=!1,e},_getHtmlAndRemoveMarkers:function(e){var t=e.html();return e.find(".redactor-selection-marker").remove(),t},_strpos:function(e,t,s){var i=e.indexOf(t,s);return i>=0&&i},_enlargeOffset:function(e,t){var s=e.length,i=0;if(">"===e[t])i++;else for(var a=t;s>=a&&(i++,">"!==e[a]);a++)if("<"===e[a]||a===s){i=0;break}return t+i}}),$R.add("module","observer",{init:function(e){this.app=e,this.editor=e.editor,this.observerUnit=!1},start:function(){if(window.MutationObserver){var e=this.editor.getElement(),t=e.get();this.observerUnit=this._build(t),this.observerUnit.observe(t,{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})}},stop:function(){this.observerUnit&&this.observerUnit.disconnect()},_build:function(e){var t=this;return new MutationObserver(function(s){t._observe(s[s.length-1],e)})},_observe:function(e,t){this.app.isReadOnly()||"attributes"===e.type&&e.target===t||(this.app.broadcast("observe"),this.app.broadcast("trytosync"),this.app.broadcast("placeholder.toggle"))}}),$R.add("module","clicktoedit",{init:function(e){this.app=e,this.opts=e.opts,this.source=e.source,this.editor=e.editor,this.container=e.container,this.selection=e.selection},onstartclicktoedit:function(){this.start()},onenablereadonly:function(){this._isEnabled()||this.stop()},ondisablereadonly:function(){this._isEnabled()||this.start()},onstop:function(){this.stop()},start:function(){this._build()},stop:function(){this.buttonSave&&this.buttonSave.stop(),this.buttonCancel&&this.buttonCancel.stop(),this._destroy(),this.app.broadcast("disable")},enable:function(){this.app.broadcast("clickStart");var e=this.editor.isEmpty();e||this.selection.saveMarkers(),this._setFocus(),this._destroy(),this.app.broadcast("enable"),this.buttonSave.enable(),this.buttonCancel.enable(),e||this.selection.restoreMarkers(),e&&this.editor.focus();var t=this.container.getElement();t.addClass("redactor-clicktoedit-enabled"),this.source.rebuildStartedContent(),this.app.broadcast("startcode"),this.app.broadcast("image.observe")},save:function(e){e&&e.preventDefault();var t=this.source.getCode();this.app.broadcast("disable"),this.app.broadcast("clickSave",t),this.app.broadcast("clickStop"),this._build()},cancel:function(e){e&&e.preventDefault();var t=this.saved,s=this.editor.getElement();s.html(t),this.saved="",this.app.broadcast("disable"),this.app.broadcast("clickCancel",t),this.app.broadcast("clickStop"),this._build()},_build:function(){this.buttonSave=$R.create("clicktoedit.button","save",this.app,this),this.buttonCancel=$R.create("clicktoedit.button","cancel",this.app,this),this.buttonSave.stop(),this.buttonCancel.stop();var e=this.editor.getElement(),t=this.container.getElement();e.on("click.redactor-click-to-edit mouseup.redactor-click-to-edit",this.enable.bind(this)),t.addClass("redactor-over"),t.removeClass("redactor-clicktoedit-enabled")},_isEnabled:function(){return this.container.getElement().hasClass("redactor-clicktoedit-enabled")},_destroy:function(){var e=this.editor.getElement(),t=this.container.getElement();e.off(".redactor-click-to-edit"),t.removeClass("redactor-over redactor-clicktoedit-enabled")},_setFocus:function(){this.saved=this.source.getCode(),this.buttonSave.start(),this.buttonCancel.start()}}),$R.add("class","clicktoedit.button",{init:function(e,t,s){this.app=t,this.opts=t.opts,this.toolbar=t.toolbar,this.context=s,this.type=e,this.name="save"===e?"clickToSave":"clickToCancel",this.objected=!1,this.enabled=!1,this.namespace=".redactor-click-to-edit",this._build()},enable:function(){if(this.objected){var e=this.opts[this.name];e.api="module.clicktoedit."+this.type,this.toolbar.addButton(this.type,e),this.enabled=!0}},start:function(){this.objected||(this.$button.off(this.namespace),this.$button.show(),this.$button.on("click"+this.namespace,this.context[this.type].bind(this.context)))},stop:function(){!this.objected&&this.enabled&&this.$button.hide()},_build:function(){this.objected="object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts[this.name]),this.objected||(this.$button=$R.dom(this.opts[this.name]),this.enabled=!0)}}),$R.add("module","statusbar",{init:function(e){this.app=e,this.opts=e.opts,this.element=e.element,this.statusbar=e.statusbar,this.container=e.container},start:function(){if(!this.element.isType("inline")){var e=this.statusbar.getElement(),t=this.container.getElement();e.addClass("redactor-statusbar"),t.append(e)}}}),$R.add("module","contextbar",{init:function(e){this.app=e,this.opts=e.opts,this.uuid=e.uuid,this.$win=e.$win,this.$doc=e.$doc,this.$body=e.$body,this.editor=e.editor,this.toolbar=e.toolbar,this.detector=e.detector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body},onenablereadonly:function(){this.stop()},ondisablereadonly:function(){this.start()},oncontextbar:{close:function(){this.close()}},start:function(){if(this.opts.toolbarContext){var e=this.editor.getElement();this._build(),e.on("click.redactor-context mouseup.redactor-context",this.open.bind(this)),this.opts.scrollTarget&&$R.dom(this.opts.scrollTarget).on("scroll.redactor-context",this.close.bind(this))}},stop:function(){var e=this.editor.getElement();e.off(".redactor-context"),this.$doc.off(".redactor-context"),this.$win.off(".redactor-context"),this.$contextbar&&this.$contextbar.remove(),this.opts.scrollTarget&&$R.dom(this.opts.scrollTarget).off(".redactor-context")},is:function(){return this.$contextbar&&this.$contextbar.hasClass("open")},set:function(e,t,s,i){for(var a in this.$contextbar.html(""),this.$el=$R.dom(t),s){var r=$R.create("contextbar.button",this.app,s[a]);""!==r.html()&&this.$contextbar.append(r)}var n=this._buildPosition(e,this.$el,i);this.$contextbar.css(n),this.$contextbar.show(),this.$contextbar.addClass("open"),this.$doc.on("click.redactor-context mouseup.redactor-context",this.close.bind(this)),this.$win.on("resize.redactor-context",this.close.bind(this))},open:function(e){setTimeout(function(){this.app.broadcast("contextbar",e,this)}.bind(this),0)},close:function(e){if(this.$contextbar){if(e){var t=$R.dom(e.target);if(this.$el&&0!==t.closest(this.$el).length)return}this.$contextbar.hide(),this.$contextbar.removeClass("open"),this.$doc.off(".redactor.context")}},_build:function(){this.$contextbar=$R.dom("<div>"),this.$contextbar.attr("id","redactor-context-toolbar-"+this.uuid),this.$contextbar.attr("dir",this.opts.direction),this.$contextbar.addClass("redactor-context-toolbar"),this.$contextbar.hide(),this.$target.append(this.$contextbar)},_buildPosition:function(e,t,s){var i,a,r=this.toolbar.isTarget(),n=r?t.position():t.offset(),o=t.width(),l=t.height(),c=this.$contextbar.width(),d=this.$contextbar.height(),u=r?this.$target.scrollTop()+this.$doc.scrollTop():this.$doc.scrollTop(),h=this.$target.offset(),p=r?h.left:0,m=r?h.top:0;return s?"top"===s?(i=n.top-d,a=n.left+o/2-c/2):"bottom"===s&&(i=n.top+l,a=n.left+o/2-c/2):(i=e.clientY+u-d,a=e.clientX-c/2),0>a&&(a=0),{top:i-m+"px",left:a-p+"px"}}}),$R.add("class","contextbar.button",{mixins:["dom"],init:function(e,t){this.app=e,this.obj=t,this._init()},_init:function(){this.parse("<a>"),this.attr("href","#"),this._buildTitle(),this._buildMessage()},_buildTitle:function(){this.html(this.obj.title)},_buildMessage:function(){"undefined"==typeof this.obj.message&&"undefined"==typeof this.obj.api||this.on("click",this._toggle.bind(this))},_toggle:function(e){e.preventDefault(),this.obj.message?this.app.broadcast(this.obj.message,this.obj.args):this.obj.api&&this.app.api(this.obj.api,this.obj.args)}}),$R.add("module","toolbar",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.utils=e.utils,this.toolbar=e.toolbar,this.buttons=[],this.toolbarModule=!1},onsource:{open:function(){!this.toolbar.isAir()&&this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},opened:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.createSourceHelper(),setTimeout(function(){$R.dom(".re-button-tooltip-"+this.uuid).remove()}.bind(this),100)},close:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.destroySourceHelper()},closed:function(){this.toolbar.is()&&this.opts.air&&this.toolbarModule.openSelected()}},onobserve:function(){this.toolbar.is()&&this.toolbar.observe()},onfocus:function(){this._setExternalOnFocus()},onsourcefocus:function(){this._setExternalOnFocus()},onempty:function(){this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},onenablereadonly:function(){this.toolbar.isAir()&&this.toolbarModule.close()},start:function(){this.toolbar.is()&&(this._buildButtons(),this._initToolbar(),this._initButtons())},stop:function(){this.toolbarModule&&this.toolbarModule.stop(),$R.dom(".redactor-dropdown-"+this.uuid).remove()},_buildButtons:function(){this.buttons=this.opts.buttons.concat(),this._buildImageButton(),this._buildFileButton(),this._buildSourceButton(),this._buildAdditionalButtons(),this._buildHiddenButtons()},_buildImageButton:function(){this.opts.imageUpload||this.utils.removeFromArrayByValue(this.buttons,"image")},_buildFileButton:function(){this.opts.fileUpload||this.utils.removeFromArrayByValue(this.buttons,"file")},_buildSourceButton:function(){this.opts.source||this.utils.removeFromArrayByValue(this.buttons,"html")},_buildAdditionalButtons:function(){var e,t;if(0!==this.opts.buttonsAdd.length&&(this.opts.buttonsAdd=this._removeExistButtons(this.opts.buttonsAdd),this.buttons=this.buttons.concat(this.opts.buttonsAdd)),0!==this.opts.buttonsAddFirst.length&&(this.opts.buttonsAddFirst=this._removeExistButtons(this.opts.buttonsAddFirst),this.buttons.unshift(this.opts.buttonsAddFirst)),!1!==this.opts.buttonsAddAfter){e=this.buttons.indexOf(this.opts.buttonsAddAfter.after)+1,t=this.opts.buttonsAddAfter.buttons;for(var s=0;s<t.length;s++)this.buttons.splice(e+s,0,t[s])}if(!1!==this.opts.buttonsAddBefore){e=this.buttons.indexOf(this.opts.buttonsAddBefore.before)+1,t=this.opts.buttonsAddBefore.buttons;for(s=0;s<t.length;s++)this.buttons.splice(e-(1-s),0,t[s])}},_buildHiddenButtons:function(){if(0!==this.opts.buttonsHide.length)for(var e=this.opts.buttonsHide,t=0;t<e.length;t++)this.utils.removeFromArrayByValue(this.buttons,e[t])},_removeExistButtons:function(e){for(var t=0;t<e.length;t++)-1!==this.opts.buttons.indexOf(e[t])&&this.utils.removeFromArrayByValue(e,e[t]);return e},_setExternalOnFocus:function(){!this.opts.air&&this.opts.toolbarExternal&&this.toolbarModule.setExternal()},_initToolbar:function(){this.toolbarModule=this.opts.air?$R.create("toolbar.air",this.app):$R.create("toolbar.standard",this.app)},_initButtons:function(){this.toolbar.setButtons(this.buttons);for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];$R.buttons[t]&&this.toolbar.addButton(t,$R.buttons[t],!1,!1,!0)}}}),$R.add("class","toolbar.air",{init:function(e){this.app=e,this.uuid=e.uuid,this.$doc=e.$doc,this.$win=e.$win,this.utils=e.utils,this.editor=e.editor,this.animate=e.animate,this.toolbar=e.toolbar,this.container=e.container,this.inspector=e.inspector,this.selection=e.selection,this.clicks=0,this._init()},stop:function(){var e=this.toolbar.getWrapper();e.remove();var t=this.editor.getElement();t.off(".redactor-air-trigger-"+this.uuid),this.$doc.off(".redactor-air-"+this.uuid),this.$doc.off(".redactor-air-trigger-"+this.uuid),this.toolbar.stopObservers()},createSourceHelper:function(){this.$airHelper=$R.dom("<span>"),this.$airHelper.addClass("redactor-air-helper"),this.$airHelper.html('<i class="re-icon-html"></i>'),this.$airHelper.on("click",function(e){e.preventDefault(),this.app.api("module.source.hide")}.bind(this));var e=this.container.getElement();e.append(this.$airHelper)},destroySourceHelper:function(){this.$airHelper&&this.$airHelper.remove()},openSelected:function(){setTimeout(function(){this._isSelection()&&this._open(!1)}.bind(this),0)},close:function(){this.$doc.off(".redactor-air-"+this.uuid);var e=this.toolbar.getElement();e.removeClass("open"),e.hide()},_init:function(){this.toolbar.create();var e=this.toolbar.getWrapper(),t=this.toolbar.getElement(),s=this.editor.getElement(),i=this.container.getElement();e.addClass("redactor-toolbar-wrapper-air"),t.addClass("redactor-air"),t.hide(),e.append(t),i.prepend(e),this.openSelected(),this.$doc.on("mouseup.redactor-air-trigger-"+this.uuid,this._open.bind(this)),s.on("keyup.redactor-air-trigger-"+this.uuid,this._openCmd.bind(this))},_isSelection:function(){return this.selection.is()&&!this.selection.isCollapsed()},_isOpened:function(){var e=this.toolbar.getElement();return e.hasClass("open")},_open:function(e){var t=!!e&&e.target,s=!!e&&$R.dom(e.target),i=this.inspector.parse(t),a=i.isComponent()&&!i.isComponentType("table"),r=i.isFigcaption(),n=s&&0!==s.closest(".redactor-modal").length,o=e&&0!==s.closest(".re-button").length,l=e&&0!==s.closest(".redactor-dropdown").length;if(!(l||o||n||r||a||this.toolbar.isContextBar())&&this._isSelection()){var c=this.selection.getPosition();setTimeout(function(){this.app.isReadOnly()||this._isSelection()&&this._doOpen(c)}.bind(this),1)}},_openCmd:function(){if(this.selection.isAll()){var e=this.toolbar.getElement(),t=this.selection.getPosition();t.top=t.top<20?0:t.top-e.height(),t.height=0,this._doOpen(t)}},_doOpen:function(e){var t=this.toolbar.getWrapper(),s=this.toolbar.getElement(),i=this.container.getElement(),a=i.offset(),r=0,n=this.$win.width(),o=s.width();if(n<e.left+o){var l=this.selection.getPosition();r=o-l.width}t.css({left:e.left-a.left-r+"px",top:e.top-a.top+e.height+this.$doc.scrollTop()+"px"}),this.app.broadcast("airOpen"),s.addClass("open"),s.show(),this.$doc.on("click.redactor-air-"+this.uuid,this._close.bind(this)),this.$doc.on("keydown.redactor-air-"+this.uuid,this._close.bind(this)),this.app.broadcast("airOpened")},_close:function(e){var t=!!e&&$R.dom(e.target),s=e&&0!==t.closest("[data-dropdown], .redactor-dropdown-not-close").length,i=!s&&e&&0!==t.closest(".re-button").length;(i||!s&&this._isOpened())&&(this.app.broadcast("airClose"),this.close(),this.app.broadcast("airClosed"))}}),$R.add("class","toolbar.fixed",{init:function(e){this.app=e,this.uuid=e.uuid,this.opts=e.opts,this.$doc=e.$doc,this.$win=e.$win,this.editor=e.editor,this.toolbar=e.toolbar,this.detector=e.detector,this.container=e.container,this._init()},stop:function(){this.$fixedTarget.off(".redactor-toolbar-"+this.uuid),this.$win.off(".redactor-toolbar-"+this.uuid)},reset:function(){var e=this.toolbar.getElement(),t=this.toolbar.getWrapper();t.css("height",""),e.removeClass("redactor-toolbar-fixed"),e.css({position:"",top:"",left:"",width:""});var s=this.toolbar.getDropdown();s&&s.updatePosition()},_init:function(){this.$fixedTarget=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$win,this._doFixed(),this.toolbar.isTarget()&&(this.$win.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$win.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))),this.$fixedTarget.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$fixedTarget.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))},_doFixed:function(){var e=this.editor.getElement(),t=this.container.getElement(),s=this.toolbar.getElement(),i=this.toolbar.getWrapper();if(!this.editor.isSourceMode()){var a=t.parents().filter(function(e){return"none"===getComputedStyle(e,null).display&&e});if(0===a.length){var r=e.height()<100,n=this.editor.isEmpty();if(!(r||n||this.editor.isSourceMode())){var o=s.height(),l=60,c=t.offset(),d=c.top,u=d+t.height()-l,h=this.$fixedTarget.scrollTop()+this.opts.toolbarFixedTopOffset,p=this.toolbar.isTarget()?this.$fixedTarget.offset().top-this.$win.scrollTop():0;if(h>d&&u>h){var m=this.detector.isDesktop()?"fixed":"absolute";p=this.detector.isDesktop()?p:h-d+this.opts.toolbarFixedTopOffset,this.detector.isMobile()&&(this.fixedScrollTimeout&&clearTimeout(this.fixedScrollTimeout),s.hide(),this.fixedScrollTimeout=setTimeout(function(){s.show()},250)),i.height(o),s.addClass("redactor-toolbar-fixed"),s.css({position:m,top:p+this.opts.toolbarFixedTopOffset+"px",width:t.width()+"px"});var f=this.toolbar.getDropdown();f&&f.updatePosition(),this.app.broadcast("toolbar.fixed")}else this.reset(),this.app.broadcast("toolbar.unfixed")}}}}}),$R.add("class","toolbar.standard",{init:function(e){this.app=e,this.opts=e.opts,this.uuid=e.uuid,this.$body=e.$body,this.toolbar=e.toolbar,this.container=e.container,this.isExternalMultiple=!1,this.toolbarFixed=!1,this._init()},stop:function(){var e=this.toolbar.getWrapper();e.remove(),this.toolbarFixed&&this.toolbarFixed.stop(),this.opts.toolbarExternal&&this._findToolbars(),this.toolbar.stopObservers(),this.$body.find(".re-button-tooltip-"+this.uuid).remove()},setExternal:function(){if(this._findToolbars(),this.isExternalMultiple){this.$toolbars.hide();var e=this.$external.find(".redactor-toolbar-external-"+this.uuid);e.show()}},resetPosition:function(){this.toolbarFixed&&this.toolbarFixed.reset()},_init:function(){if(this._build(),this.opts.toolbarExternal)this._buildExternal();else{this._buildFixed();var e=this.toolbar.getElement();e.show()}},_build:function(){this.toolbar.create();var e=this.toolbar.getWrapper(),t=this.toolbar.getElement();if(e.addClass("redactor-toolbar-wrapper"),t.addClass("redactor-toolbar"),t.hide(),e.append(t),!this.opts.toolbarExternal){var s=this.container.getElement();s.prepend(e)}},_buildExternal:function(){if(this._initExternal(),this._findToolbars(),this.isExternalMultiple)this._hideToolbarsExceptFirst();else{var e=this.toolbar.getElement();e.show()}},_buildFixed:function(){this.opts.toolbarFixed&&(this.toolbarFixed=$R.create("toolbar.fixed",this.app))},_initExternal:function(){var e=this.toolbar.getElement(),t=this.toolbar.getElement();e.addClass("redactor-toolbar-external redactor-toolbar-external-"+this.uuid),this.$external=$R.dom(this.opts.toolbarExternal),this.$external.append(t)},_findToolbars:function(){this.$toolbars=this.$external.find(".redactor-toolbar-external"),this.isExternalMultiple=this.$toolbars.length>1},_hideToolbarsExceptFirst:function(){this.$toolbars.hide();var e=this.$toolbars.first();e.show()}}),$R.add("module","line",{init:function(e){this.app=e,this.lang=e.lang,this.component=e.component,this.inspector=e.inspector,this.insertion=e.insertion},oncontextbar:function(e,t){var s=this.inspector.parse(e.target);if(s.isComponentType("line")){var i=s.getComponent(),a={remove:{title:this.lang.get("delete"),api:"module.line.remove",args:i}};t.set(e,i,a,"bottom")}},insert:function(){var e=this.component.create("line");this.insertion.insertRaw(e)},remove:function(e){this.component.remove(e)}}),$R.add("class","line.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,t&&void 0!==t.cmnt?t:this._init(t)},_init:function(e){var t,s;if("undefined"!=typeof e){var i=$R.dom(e),a=i.get();"HR"===a.tagName?s=a:"FIGURE"===a.tagName&&(t=a,s=i.find("hr").get())}this._buildWrapper(t),this._buildElement(s),this._initWrapper()},_buildElement:function(e){e?this.$element=$R.dom(e):(this.$element=$R.dom("<hr>"),this.append(this.$element))},_buildWrapper:function(e){e=e||"<figure>",this.parse(e)},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"line",tabindex:"-1",contenteditable:!1})}}),$R.add("module","link",{modals:{link:'<form action="">                 <div class="form-item">                     <label for="modal-link-url">URL <span class="req">*</span></label>                     <input type="text" id="modal-link-url" name="url">                 </div>                 <div class="form-item">                     <label for="modal-link-text">## text ##</label>                     <input type="text" id="modal-link-text" name="text">                 </div>                 <div class="form-item form-item-title">                     <label for="modal-link-title">## title ##</label>                     <input type="text" id="modal-link-title" name="title">                 </div>                 <div class="form-item form-item-target">                     <label class="checkbox">                         <input type="checkbox" name="target"> ## link-in-new-tab ##                     </label>                 </div>             </form>'},init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.caret=e.caret,this.utils=e.utils,this.inline=e.inline,this.editor=e.editor,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection,this.isCurrentLink=!1,this.currentText=!1},onmodal:{link:{open:function(e,t){this._setFormData(t,e)},opened:function(e,t){this._setFormFocus(t)},update:function(e,t){var s=t.getData();this._validateData(t,s)&&this._update(s)},insert:function(e,t){var s=t.getData();this._validateData(t,s)&&this._insert(s)},unlink:function(){this._unlink()}}},onbutton:{link:{observe:function(e){this._observeButton(e)}}},ondropdown:{link:{observe:function(e){this._observeUnlink(e),this._observeEdit(e)}}},oncontextbar:function(e,t){var s=this._getCurrent(),i=this.inspector.parse(s);if(i.isLink()){var a=i.getLink(),r=$R.dom(a),n=$R.dom("<a>"),o=r.attr("href");n.text(this._truncateText(o)),n.attr("href",o),n.attr("target","_blank");var l={link:{title:n},edit:{title:this.lang.get("edit"),api:"module.link.open"},unlink:{title:this.lang.get("unlink"),api:"module.link.unlink"}};t.set(e,a,l,"bottom")}},open:function(){this.$link=this._buildCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(e){this._insert(e)},update:function(e){this._update(e)},unlink:function(){this._unlink()},_observeButton:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t);s.isPre()||s.isCode()?e.disable():e.enable()},_observeUnlink:function(e){var t=e.getItem("unlink"),s=this._getLinks();0===s.length?t.disable():t.enable()},_observeEdit:function(e){var t=this._getCurrent(),s=e.getItem("link"),i=this.inspector.parse(t),a=i.isLink()?this.lang.get("link-edit"):this.lang.get("link-insert");s.setTitle(a)},_unlink:function(){this.app.api("module.modal.close");var e=[],t=this._getLinks();this.selection.save();for(var s=0;s<t.length;s++){var i=$R.create("link.component",this.app,t[s]);e.push(this.selection.getElement(t[s])),i.unwrap(),this.app.broadcast("link.deleted",i)}this.selection.restore();for(s=0;s<e.length;s++){var a=e[s]?e[s]:this.editor.getElement();this.utils.normalizeTextNodes(a)}this._resetCurrent()},_update:function(e){this.app.api("module.modal.close");var t=this._getLinks();this._setLinkData(t,e,"updated"),this._resetCurrent()},_insert:function(e){this.app.api("module.modal.close");var t=this._getLinks();this._insertSingle(t,e)||(this._removeInSelection(t),this._insertMultiple(e)),this._resetCurrent()},_removeInSelection:function(e){this.selection.save();for(var t=0;t<e.length;t++){var s=$R.create("link.component",this.app,e[t]),i=s.clone();s.unwrap(),this.app.broadcast("link.deleted",i)}this.selection.restore()},_insertMultiple:function(e){var t=this.selection.getRange();t&&this._isCurrentTextChanged(e)&&this._deleteContents(t);var s=this.inline.format({tag:"a"});this._setLinkData(s,e,"inserted")},_insertSingle:function(e,t){var s=this.selection.getInline();if(1===e.length&&e[0].textContext===this.selection.getText()||s&&"A"===s.tagName){var i=$R.create("link.component",this.app,e[0]);return i.setData(t),this.caret.setAfter(i),this.app.broadcast("link.inserted",i),!0}return!1},_setLinkData:function(e,t,s){t.text=""===t.text.trim()?this._truncateText(t.url):t.text;var i=!this.currentText||this.currentText!==t.text;this.selection.save();for(var a=0;a<e.length;a++){var r=$R.create("link.component",this.app,e[a]),n={};t.text&&i&&(n.text=t.text),t.url&&(n.url=t.url),void 0!==t.title&&(n.title=t.title),void 0!==t.target&&(n.target=t.target),r.setData(n),this.app.broadcast("link."+s,r)}setTimeout(this.selection.restore.bind(this.selection),0)},_deleteContents:function(e){var t=this.selection.getHtml(),s=this.utils.parseHtml(t),i=s.nodes[0];if(i&&3!==i.nodeType){var a=i.tagName.toLowerCase(),r=document.createElement(a);this.insertion.insertNode(r,"start")}else e.deleteContents()},_getModalData:function(){var e;e=this._isLink()?{update:{title:this.lang.get("save")},unlink:{title:this.lang.get("unlink"),type:"danger"},cancel:{title:this.lang.get("cancel")}}:{insert:{title:this.lang.get("insert")},cancel:{title:this.lang.get("cancel")}};var t={name:"link",title:this._isLink()?this.lang.get("link-edit"):this.lang.get("link-insert"),handle:this._isLink()?"update":"insert",commands:e};return t},_isLink:function(){return this.currentLink},_isCurrentTextChanged:function(e){return this.currentText&&this.currentText!==e.text},_buildCurrent:function(){var e,t=this._getCurrent(),s=this.inspector.parse(t);if(s.isLink())this.currentLink=!0,e=s.getLink(),e=$R.create("link.component",this.app,e);else{this.currentLink=!1,e=$R.create("link.component",this.app);var i={text:this.selection.getText()};e.setData(i)}return e},_getCurrent:function(){return this.selection.getInlinesAllSelected({tags:["a"]})[0]},_getLinks:function(){for(var e=this.selection.getInlines({all:!0,tags:["a"]}),t=[],s=0;s<e.length;s++){var i=this.inspector.parse(e[s]);i.isLink()&&t.push(e[s])}return t},_resetCurrent:function(){this.isCurrentLink=!1,this.currentText=!1},_truncateText:function(e){return e&&e.length>this.opts.linkSize?e.substring(0,this.opts.linkSize)+"...":e},_validateData:function(e,t){return""!==t.url.trim()||e.setError("url")},_setFormFocus:function(e){e.getField("url").focus()},_setFormData:function(e,t){var s=this.$link.getData(),i={url:s.url,text:s.text,title:s.title,target:this.opts.linkTarget||s.target};this.opts.linkNewTab||t.find(".form-item-target").hide(),this.opts.linkTitle||t.find(".form-item-title").hide(),e.setData(i),this.currentText=e.getField("text").val()}}),$R.add("class","link.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,this.opts=e.opts,this.reUrl=/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i,t&&void 0!==t.cmnt?t:this._init(t)},setData:function(e){for(var t in e)this._set(t,e[t])},getData:function(){for(var e=["url","text","target","title"],t={},s=0;s<e.length;s++)t[e[s]]=this._get(e[s]);return t},_init:function(e){var t=$R.dom(e);void 0===e?this.parse("<a>"):this.parse(t)},_set:function(e,t){this["_set_"+e](t)},_get:function(e){return this["_get_"+e]()},_get_target:function(){return!!this.attr("target")&&this.attr("target")},_get_url:function(){return this.attr("href")},_get_title:function(){return this.attr("title")},_get_text:function(){return this._getContext().text()},_getContext:function(){return this._findDeepestChild(this).element},_set_target:function(e){!1===e?this.removeAttr("target"):e&&this.attr("target",!0===e?"_blank":e)},_set_text:function(e){this._getContext().html(e)},_set_title:function(e){e&&""!==e?this.attr("title",e):this.removeAttr("title")},_set_url:function(e){this.opts.linkValidation&&(e=this._cleanUrl(e),this._isMailto(e)?e="mailto:"+e.replace("mailto:",""):this._isUrl(e)&&-1===e.search(/^(ftp|https?)/i)&&(e="http://"+e.replace(/(ftp|https?):\/\//i,""))),this.attr("href",e)},_isMailto:function(e){return-1!==e.search("@")&&!1===/(ftp|https?):\/\//i.test(e)},_isUrl:function(e){return this.reUrl.test(e)},_cleanUrl:function(e){return e.trim().replace(/[^\W\w\D\d+&\'@#\/%?=~_|!:,.;\(\)]/gi,"")},_findDeepestChild:function(e){var t={depth:0,element:e};return e.children().each(function(s){var i=$R.dom(s);if(s.outerHTML===e.html()){var a=this._findDeepestChild(i);a.depth+1>t.depth&&(t={depth:1+a.depth,element:a.element})}}.bind(this)),t}}),$R.add("module","modal",{init:function(e){this.app=e,this.lang=e.lang,this.$doc=e.$doc,this.$win=e.$win,this.$body=e.$body,this.utils=e.utils,this.editor=e.editor,this.animate=e.animate,this.detector=e.detector,this.selection=e.selection,this.$box=!1,this.$modal=!1,this.selectionMarkers=!1,this.defaults={name:!1,url:!1,title:!1,width:"600px",height:!1,handle:!1,commands:!1}},build:function(e){this._open(e)},close:function(){this._close()},stop:function(){this.$box&&(this.$box.remove(),this.$box=!1,this.$modal=!1,this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal")),this.$overlay&&this.$overlay.remove()},resize:function(){this.$modal.setWidth(this.p.width),this.$modal.updatePosition()},_isOpened:function(){return this.$modal&&this.$modal.hasClass("open")},_open:function(e){this._buildDefaults(e),this.p.url?this._openUrl():this._openTemplate()},_openUrl:function(){$R.ajax.post({url:this.p.url,success:this._doOpen.bind(this)})},_openTemplate:function(){if("undefined"!=typeof $R.modals[this.p.name]){var e=this.lang.parse($R.modals[this.p.name]);this._doOpen(e)}},_doOpen:function(e){this.stop(),this.selection.isCollapsed()?(this.selection.save(),this.selectionMarkers=!1):(this.selection.saveMarkers(),this.selectionMarkers=!0),this.detector.isDesktop()||document.activeElement.blur(),this._createModal(e),this._buildModalBox(),this._buildOverlay(),this._buildModal(),this._buildModalForm(),this._buildModalCommands(),this._broadcast("open"),this.$modal.updatePosition(),this._buildModalTabs(),this.animate.start(this.$box,"fadeIn",this._opened.bind(this)),this.animate.start(this.$overlay,"fadeIn")},_opened:function(){this.$modal.addClass("open"),this.$box.on("mousedown.redactor.modal",this._close.bind(this)),this.$doc.on("keyup.redactor.modal",this._handleEscape.bind(this)),this.$win.on("resize.redactor.modal",this.resize.bind(this)),this.$modal.getBody().find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor.modal",this._handleEnter.bind(this)),window.jQuery&&jQuery(document).off("focusin.modal"),this._broadcast("opened")},_close:function(e){if(this.$box&&this._isOpened()){if(e){if(!this._needToClose(e.target))return;e.stopPropagation(),e.preventDefault()}this.selectionMarkers?this.selection.restoreMarkers():this.selection.restore(),this.selectionMarkers=!1,this._broadcast("close"),this.animate.start(this.$box,"fadeOut",this._closed.bind(this)),this.animate.start(this.$overlay,"fadeOut")}},_closed:function(){this.$modal.removeClass("open"),this.$box.off(".redactor.modal"),this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal"),this._broadcast("closed")},_createModal:function(e){this.$modal=$R.create("modal.element",this.app,e)},_broadcast:function(e){this.app.broadcast("modal."+e,this.$modal,this.$modalForm),this.app.broadcast("modal."+this.p.name+"."+e,this.$modal,this.$modalForm)},_buildDefaults:function(e){this.p=$R.extend({},this.defaults,e)},_buildModalBox:function(){this.$box=$R.dom("<div>"),this.$box.attr("id","redactor-modal"),this.$box.addClass("redactor-animate-hide"),this.$box.html(""),this.$body.append(this.$box)},_buildOverlay:function(){this.$overlay=$R.dom("#redactor-overlay"),0===this.$overlay.length&&(this.$overlay=$R.dom("<div>"),this.$overlay.attr("id","redactor-overlay"),this.$overlay.addClass("redactor-animate-hide"),this.$body.prepend(this.$overlay))},_buildModal:function(){this.$box.append(this.$modal),this.$modal.setTitle(this.p.title),this.$modal.setHeight(this.p.height),this.$modal.setWidth(this.p.width)},_buildModalCommands:function(){if(this.p.commands){var e=this.p.commands,t=this.$modal.getFooter();for(var s in e){var i=$R.dom("<button>");i.html(e[s].title),i.attr("data-command",s),"cancel"===s&&(i.attr("data-action","close"),i.addClass("redactor-button-unstyled")),"undefined"!=typeof e[s].type&&"danger"===e[s].type&&i.addClass("redactor-button-danger"),i.on("click",this._handleCommand.bind(this)),t.append(i)}}},_buildModalTabs:function(){var e=this.$modal.getBody(),t=e.find(".redactor-modal-tab"),s=e.find(".redactor-modal-tabs");t.length>1&&(s=0===s.length?$R.dom("<div>"):s.html(""),s.addClass("redactor-modal-tabs"),t.each(function(e,t){var i=$R.dom(e),a=$R.dom("<a>");a.attr("href","#"),a.attr("rel",t),a.text(i.attr("data-title")),a.on("click",this._showTab.bind(this)),0===t&&a.addClass("active"),s.append(a)}.bind(this)),e.prepend(s))},_buildModalForm:function(){this.$modalForm=$R.create("modal.form",this.app,this.$modal.getForm())},_showTab:function(e){e.preventDefault();var t=$R.dom(e.target),s=t.attr("rel"),i=this.$modal.getBody(),a=i.find(".redactor-modal-tab");a.hide(),a.eq(s).show(),i.find(".redactor-modal-tabs a").removeClass("active"),t.addClass("active")},_needToClose:function(e){var t=$R.dom(e);return!("close"!==t.attr("data-action")&&!this.$modal.isCloseNode(e)&&0!==t.closest(".redactor-modal").length)},_handleCommand:function(e){var t=$R.dom(e.target).closest("button"),s=t.attr("data-command");"cancel"!==s&&e.preventDefault(),this._broadcast(s)},_handleEnter:function(e){13===e.which&&this.p.handle&&(e.preventDefault(),this._broadcast(this.p.handle))},_handleEscape:function(e){27===e.which&&this._close()}}),$R.add("class","modal.element",{mixins:["dom"],init:function(e,t){this.app=e,this.opts=e.opts,this.$win=e.$win,this._init(t)},getForm:function(){return this.find("form")},getHeader:function(){return this.$modalHeader},getBody:function(){return this.$modalBody},getFooter:function(){return this.$modalFooter},setTitle:function(e){e&&this.$modalHeader.html(e)},setWidth:function(e){e=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(e)>=this.$win.width()?"96%":e,this.css("max-width",e)},setHeight:function(e){!1!==e&&this.$modalBody.css("height",e)},updatePosition:function(){var e=this.width();this.css({left:"50%","margin-left":"-"+e/2+"px"});var t=this.$win.height(),s=this.height(),i=t/2-s/2;t>s&&0!==i&&this.css("margin-top",i+"px")},isCloseNode:function(e){return e===this.$modalClose.get()},_init:function(e){this._build(),this._buildClose(),this._buildHeader(),this._buildBody(),this._buildFooter(),this._buildTemplate(e)},_build:function(){this.parse("<div>"),this.addClass("redactor-modal"),this.attr("dir",this.opts.direction)},_buildClose:function(){this.$modalClose=$R.dom("<span>"),this.$modalClose.addClass("redactor-close"),this.append(this.$modalClose)},_buildHeader:function(){this.$modalHeader=$R.dom("<div>"),this.$modalHeader.addClass("redactor-modal-header"),this.append(this.$modalHeader)},_buildBody:function(){this.$modalBody=$R.dom("<div>"),this.$modalBody.addClass("redactor-modal-body"),this.append(this.$modalBody)},_buildFooter:function(){this.$modalFooter=$R.dom("<div>"),this.$modalFooter.addClass("redactor-modal-footer"),this.append(this.$modalFooter)},_buildTemplate:function(e){this.$modalBody.html(e)}}),$R.add("class","modal.form",{mixins:["dom"],init:function(e,t){this.app=e,this.build(t)},build:function(e){this.parse(e)},getData:function(){var e={};return this.find("[name]").each(function(t){var s=$R.dom(t);e[s.attr("name")]=s.val()}),e},setData:function(e){this.find("[name]").each(function(t){var s=$R.dom(t),i=s.attr("name");e.hasOwnProperty(i)&&(t.type&&"checkbox"===t.type?t.checked=e[i]:s.val(e[i]))})},getField:function(e){return this.find("[name="+e+"]")},setError:function(e){var t=this.getField(e);return t.addClass("error"),t.one(this._getFieldEventName(t.get()),this._clearError),!1},_clearError:function(){return $R.dom(this).removeClass("error")},_getFieldEventName:function(e){return"SELECT"===e.tagName||"checkbox"===e.type||"radio"===e.type?"change":"keyup"}}),$R.add("module","block",{init:function(e){this.app=e,this.block=e.block},format:function(e){var t=this.block.format(e);this.app.broadcast("format","block",t)},clearformat:function(){this.block.clearFormat()},clearstyle:function(){this.block.clearStyle()},clearclass:function(){this.block.clearClass()},clearattr:function(){this.block.clearAttr()},add:function(e,t){this.block.add(e,t)},toggle:function(e,t){this.block.toggle(e,t)},set:function(e,t){this.block.set(e,t)},remove:function(e,t){this.block.remove(e,t)}}),$R.add("module","inline",{init:function(e){this.app=e,this.inline=e.inline},format:function(e){var t=this.inline.format(e);this.app.broadcast("format","inline",t)},clearformat:function(){this.inline.clearFormat()},clearstyle:function(){this.inline.clearStyle()},clearclass:function(){this.inline.clearClass()},clearattr:function(){this.inline.clearAttr()},add:function(e,t){this.inline.add(e,t)},toggle:function(e,t){this.inline.toggle(e,t)},set:function(e,t){this.inline.set(e,t)},remove:function(e,t){this.inline.remove(e,t)}}),$R.add("module","autosave",{init:function(e){this.app=e,this.opts=e.opts,this.utils=e.utils,this.source=e.source},onsynced:function(){this.opts.autosave&&this._send()},_send:function(){var e=this.opts.autosaveName?this.opts.autosaveName:this.source.getName(),t={};t[e]=this.source.getCode(),t=this.utils.extendData(t,this.opts.autosaveData),$R.ajax.post({url:this.opts.autosave,data:t,success:function(s){this._complete(s,e,t)}.bind(this)})},_complete:function(e,t,s){var i=e&&e.error?"autosaveError":"autosave";this.app.broadcast(i,t,s,e)}}),$R.add("module","input",{init:function(e){this.app=e,this.opts=e.opts,this.utils=e.utils,this.editor=e.editor,this.keycodes=e.keycodes,this.element=e.element,this.selection=e.selection,this.insertion=e.insertion,this.inspector=e.inspector,this.autoparser=e.autoparser,this.lastShiftKey=!1},onpaste:function(e,t){return this.opts.input?$R.create("input.paste",this.app,e,t):void 0},onkeydown:function(e){if(this.opts.input){var t=e.which,s=$R.create("input.shortcut",this.app,e);if(!s.is()){if((e.ctrlKey||e.metaKey)&&!e.altKey&&65===t)return e.preventDefault(),this._selectAll();var i=[this.keycodes.ENTER,this.keycodes.SPACE,this.keycodes.BACKSPACE,this.keycodes.DELETE],a=[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.LEFT,this.keycodes.RIGHT],r=-1!==i.indexOf(t),n=-1!==a.indexOf(t),o=(e.ctrlKey||e.metaKey)&&88===t,l=!e.ctrlKey&&!e.metaKey&&(t>=48&&57>=t||t>=65&&90>=t);if(this.selection.isAll()&&n&&(o||!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey)){if(o)return this.editor.disableNonEditables(),void this.app.broadcast("empty");if(this._isArrowKey(t))return!0;if(r&&e.preventDefault(),this.element.isType("inline")){var c=this.editor.getElement();c.html(""),this.editor.startFocus()}else this.insertion.set(this.opts.emptyHtml);if(r)return;this.app.broadcast("empty")}return this.opts.autoparse&&this.autoparser.format(e,t),l&&this.selection.hasNonEditable()?void e.preventDefault():t===this.keycodes.ENTER?$R.create("input.enter",this.app,e,t):e.metaKey&&219===t?(e.preventDefault(),void this.app.api("module.list.outdent")):t===this.keycodes.TAB||e.metaKey&&221===t?$R.create("input.tab",this.app,e,t):t===this.keycodes.SPACE?$R.create("input.space",this.app,e,t,this.lastShiftKey):this._isDeleteKey(t)?$R.create("input.delete",this.app,e,t):this._isArrowKey(t)?$R.create("input.arrow",this.app,e,t):void 0}}},onkeyup:function(e){if(this.opts.input){var t=e.which;this.lastShiftKey=e.shiftKey,this.app.broadcast("contextbar.close");var s=$R.create("input.shortcode",this.app,e,t);if(!s.is()){if(t===this.keycodes.BACKSPACE){var i=this.editor.getElement(),a=this.utils.trimSpaces(i.html());if(a=a.replace(/<br\s?\/?>/g,""),a=a.replace(/<div><\/div>/,""),""===a)return e.preventDefault(),this.editor.setEmpty(),void this.editor.startFocus()}this.editor.isEmpty()&&this.app.broadcast("empty")}}},start:function(){this.opts.shortcutsAdd&&(this.opts.shortcuts=$R.extend({},!0,this.opts.shortcuts,this.opts.shortcutsAdd))},_selectAll:function(){var e,t=this.selection.getCurrent(),s=this.inspector.parse(t);return s.isComponentType("table")?(e=s.getTable(),void this.selection.setAll(e)):s.isComponentType("code")?(e=s.getComponentCodeElement(),void this.selection.setAll(e)):void this.selection.setAll()},_isArrowKey:function(e){return-1!==[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(e)},_isDeleteKey:function(e){return e===this.keycodes.BACKSPACE||e===this.keycodes.DELETE}}),$R.add("class","input.arrow",{init:function(e,t,s){this.app=e,this.opts=e.opts,this.utils=e.utils,this.caret=e.caret,this.offset=e.offset,this.marker=e.marker,this.editor=e.editor,this.keycodes=e.keycodes,this.component=e.component,this.inspector=e.inspector,this.selection=e.selection,this.key=s,this._init(t)},_init:function(e){if(!this._isRightLeftKey()||!this._isExitVariable(e)){if(this._isRightDownKey()){if(this._isExitOnDownRight(e))return;if(this._selectComponent(e,"End","next"))return}if(this._isLeftUpKey()){if(this._isExitOnUpLeft(e))return;if(this._selectComponent(e,"Start","prev"))return}this.key===this.keycodes.LEFT?this.utils.trimInvisibleChars("left"):this.key===this.keycodes.RIGHT&&this.utils.trimInvisibleChars("right")}},_isRightDownKey:function(){return-1!==[this.keycodes.DOWN,this.keycodes.RIGHT].indexOf(this.key)},_isLeftUpKey:function(){return-1!==[this.keycodes.UP,this.keycodes.LEFT].indexOf(this.key)},_isRightLeftKey:function(){return-1!==[this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(this.key)},_isExitVariable:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t),i=s.getComponent();if(s.isComponentType("variable")&&s.isComponentActive()){e.preventDefault();var a=this.key===this.keycodes.LEFT?"setBefore":"setAfter";this.caret[a](i)}else;},_isExitOnUpLeft:function(e){var t=this.selection.getCurrent(),s=this.selection.getBlock(t),i=this.inspector.parse(t),a=s.previousElementSibling,r=this.caret.isStart(s);if(r&&a&&"TABLE"===a.tagName)return e.preventDefault(),this.caret.setEnd(a),!0;if(i.isFigcaption()){s=i.getFigcaption(),r=this.caret.isStart(s);var n=$R.dom(s).closest(".redactor-component");if(r&&0!==n.length)return e.preventDefault(),this.caret.setEnd(n),!0}else{if(i.isTable()&&r)return e.preventDefault(),this.caret.setEnd(s.previousElementSibling),!0;if(!i.isComponentEditable()&&i.isComponent()&&!i.isComponentType("variable")){var o=i.getComponent();if(!o.previousElementSibling)return e.preventDefault(),this.component.clearActive(),this._exitPrevElement(e,i.getComponent());if(o.previousElementSibling)return e.preventDefault(),this.component.clearActive(),this.caret.setEnd(o.previousElementSibling),!0}}},_isExitOnDownRight:function(e){var t,s,i=this.editor.getElement(),a=this.selection.getCurrent(),r=this.inspector.parse(a),n=this.caret.isEnd();if(r.isTable()){if(s||n)return this._exitNextElement(e,r.getComponent())}else if(r.isFigcaption()){if(t=r.getFigcaption(),s=this.caret.isEnd(t),s||n)return this._exitNextElement(e,r.getComponent())}else if(r.isComponentType("code")){var o=r.getComponent(),l=$R.dom(r.getComponentCodeElement()).closest("pre");s=this.caret.isEnd(t);var c=l&&l.get().nextElementSibling;if(s&&!c)return this._exitNextElement(e,o)}else if(r.isPre()||r.isBlockquote()||r.isDl()){if(n){if(r.isPre())return this._exitNextElement(e,r.getPre());if(r.isBlockquote())return this._exitNextElement(e,r.getBlockquote());if(r.isDl())return this._exitNextElement(e,r.getDl())}}else if(r.isList()){var d=$R.dom(a).parents("ul, ol",i).last();if(s=this.caret.isEnd(d),s||n)return this._exitNextElement(e,d.get())}else if(r.isComponent()&&!r.isComponentType("variable")&&"span"!==r.getTag())return this.component.clearActive(),this._exitNextElement(e,r.getComponent())},_exitPrevElement:function(e,t){return e.preventDefault(),t.previousElementSibling?this.caret.setEnd(t.previousElementSibling):this.utils.createMarkupBefore(t),!0},_exitNextElement:function(e,t){return e.preventDefault(),t.nextElementSibling?this.caret.setStart(t.nextElementSibling):this.utils.createMarkup(t),!0},_selectComponent:function(e,t,s){var i=this.selection.getCurrent(),a=this.selection.getBlock(i),r=this.utils.findSiblings(i,s),n=this.utils.findSiblings(a,s);r&&this.caret["is"+t](i)?this._selectComponentItem(e,r,t):n&&this.caret["is"+t](a)&&this._selectComponentItem(e,n,t)},_selectComponentItem:function(e,t,s){return this.component.isNonEditable(t)?(e.preventDefault(),this.caret["set"+s](t),!0):void 0}}),$R.add("class","input.delete",{init:function(e,t,s){this.app=e,this.opts=e.opts,this.caret=e.caret,this.utils=e.utils,this.editor=e.editor,this.marker=e.marker,this.keycodes=e.keycodes,this.component=e.component,this.inspector=e.inspector,this.selection=e.selection,this.key=s,this._init(t)},_init:function(e){if(!this._removeActiveComponent(e)&&!this._removeAllSelectedTable(e)){if(this.key===this.keycodes.BACKSPACE){var t=this.editor.getElement(),s=this.utils.trimSpaces(t.html());if(s===this.opts.emptyHtml)return void e.preventDefault()}if(this._detectVariableOrNonEditable()||this.selection.hasNonEditable())return void e.preventDefault();this.selection.isCollapsed()&&(this.key===this.keycodes.BACKSPACE?this._traverseBackspace(e):this.key===this.keycodes.DELETE&&this._traverseDelete(e)),this.key===this.keycodes.BACKSPACE&&this.utils.trimInvisibleChars("left"),this._removeUnwantedStyles(),this._removeEmptySpans(),this._removeSpanTagsInHeadings(),this._removeInlineTagsInPre()}},_detectVariableOrNonEditable:function(){var e,t=this.selection.getBlock(),s=this.caret.isStart(t),i=this.caret.isEnd(t);if(this.key===this.keycodes.BACKSPACE&&s){if(e=t.previousSibling,this._isNonEditable(e))return!0}else if(this.key===this.keycodes.DELETE&&i&&(e=t.nextSibling,this._isNonEditable(e)))return!0;var a=this.selection.getCurrent(),r=this.caret.isStart(a),n=this.caret.isEnd(a),o=""===this.selection.getTextBeforeCaret().trim(),l=""===this.selection.getTextAfterCaret().trim();if(this.key===this.keycodes.BACKSPACE&&r&&!o){if(e=a.previousSibling,this._isVariable(e))return this.caret.setEnd(e),!0;if(this._isNonEditable(e))return!0}else if(this.key===this.keycodes.DELETE&&n&&!l){if(e=a.nextSibling,this._isVariable(e))return this.caret.setStart(e),!0;if(this._isNonEditable(e))return!0}},_isVariable:function(e){return 0!==$R.dom(e).closest('[data-redactor-type="variable"]').length},_isNonEditable:function(e){return 0!==$R.dom(e).closest(".non-editable").length},_getBlock:function(){var e=this.editor.getElement(),t=this.selection.getBlock(),s=this.inspector.parse(t);return t=s.isList()?$R.dom(t).parents("ul, ol",e).last().get():t,t=s.isDl()?s.getDl():t,s.isTable()?s.getTable():t},_traverseDelete:function(e){var t,s,i,a=this.selection.getCurrent(),r=this.inspector.parse(a);if(r.isFigcaption()){if(t=r.getFigcaption(),s=this.caret.isEnd(t))return void e.preventDefault()}else if(r.isComponentType("code")&&(t=r.getComponent(),s=this.caret.isEnd(t)))return void e.preventDefault();t=this._getBlock();var n=this.utils.findSiblings(t,"next");if(n){s=this.caret.isEnd(t);var o=this.inspector.parse(n),l="P"===n.tagName||"DIV"===n.tagName;if(s&&o.isComponentEditable())return e.preventDefault(),void this.component.remove(n,!1);if(s&&o.isComponent())return e.preventDefault(),this.caret.setStart(n),void(this.utils.isEmptyHtml(t.innerHTML)&&$R.dom(t).remove());if(s&&o.isList()){var c=$R.dom(t);if(i=$R.dom(n),r.isList())return e.preventDefault(),c.append(i),void i.unwrap();var d=i.children("li").first(),u=d.find("ul, ol");if(0!==u.length)return e.preventDefault(),i.prepend(u),u.unwrap(),c.append(d),void d.unwrap()}else if(s&&!r.isList()&&!r.isTable()&&l&&!this.utils.isEmptyHtml(t.innerHTML)){e.preventDefault();var h=$R.dom(t);return i=$R.dom(n),h.append(i),void i.unwrap()}}},_traverseBackspace:function(e){var t,s,i,a,r=this.selection.getCurrent(),n=this.inspector.parse(r);if(n.isFigcaption()){if(t=n.getFigcaption(),s=this.caret.isStart(t))return void e.preventDefault()}else if(n.isComponentType("code")&&(t=n.getComponent(),s=this.caret.isStart(t),s&&t.previousElementSibling))return e.preventDefault(),this.caret.setEnd(t.previousElementSibling),!0;t=this._getBlock();var o=this.utils.findSiblings(t,"prev");if(o){s=this.caret.isStart(t);var l=this.inspector.parse(o),c="P"===o.tagName||"DIV"===o.tagName;if(s&&l.isComponentEditable())return e.preventDefault(),void this.component.remove(o,!1);if(s&&l.isComponent())return e.preventDefault(),this.caret.setStart(o),void(this.utils.isEmptyHtml(t.innerHTML)&&$R.dom(t).remove());if(s&&n.isList())if(e.preventDefault(),a=$R.dom(t),i=$R.dom(o),l.isList())a.children("li").first().prepend(this.marker.build("start")),i.append(a),a.unwrap(),this.selection.restoreMarkers();else{var d=a.children("li").first(),u=d.get(),h=d.find("ul, ol"),p=this.utils.replaceToTag(u,this.opts.markup);this.opts.breakline&&p.attr("data-redactor-tag","br"),a.before(p),this.caret.setStart(p),0!==h.length&&(a.prepend(h),h.unwrap())}else if(s&&c){e.preventDefault();var m=this.utils.createInvisibleChar(),f=$R.dom(t);return i=$R.dom(o),this.caret.setEnd(i),f.prepend(m),i.append(f.contents()),void f.remove()}}else setTimeout(this._replaceBlock.bind(this),1)},_replaceBlock:function(){var e=this.selection.getBlock(),t=$R.dom(e);if("p"===this.opts.markup&&e&&this._isNeedToReplaceBlock(e)){var s=document.createElement(this.opts.markup);t.replaceWith(s),this.caret.setStart(s)}this.opts.breakline&&e&&"DIV"===e.tagName&&t.attr("data-redactor-tag","br")},_isNeedToReplaceBlock:function(e){return"DIV"===e.tagName&&this.utils.isEmptyHtml(e.innerHTML)},_removeActiveComponent:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t),i=s.getComponent();return s.isComponent()&&this.component.isActive(i)?(e.preventDefault(),this.component.remove(i),!0):void 0},_removeAllSelectedTable:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t),i=s.getTable();return i&&this.selection.isAll(i)?(e.preventDefault(),this.component.remove(i),!0):void 0},_removeUnwantedStyles:function(){var e=this.editor.getElement();setTimeout(function(){var t=e.find("*[style]");t.not("img, figure, iframe, [data-redactor-style-cache], [data-redactor-span]").removeAttr("style")},0)},_removeEmptySpans:function(){var e=this.editor.getElement();setTimeout(function(){e.find("span").each(function(e){0===e.attributes.length&&$R.dom(e).replaceWith(e.childNodes)})},0)},_removeSpanTagsInHeadings:function(){var e=this.editor.getElement();setTimeout(function(){e.find("h1, h2, h3, h4, h5, h6").each(function(e){var t=$R.dom(e);0===t.closest("figure").length&&t.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker, [data-redactor-style-cache], [data-redactor-span]").unwrap()})},1)},_removeInlineTagsInPre:function(){var e=this.editor.getElement(),t=this.opts.inlineTags;setTimeout(function(){e.find("pre").each(function(e){var s=$R.dom(e);0===s.closest("figure").length&&s.find(t.join(",")).not("code, .redactor-selection-marker").unwrap()})},1)}}),$R.add("class","input.enter",{init:function(e,t){this.app=e,this.opts=e.opts,this.utils=e.utils,this.caret=e.caret,this.editor=e.editor,this.insertion=e.insertion,this.selection=e.selection,this.inspector=e.inspector,this._init(t)},_init:function(e){if(!this.opts.enterKey)return this._disable(e);var t=this.app.broadcast("enter",e);return!1===t?e.preventDefault():this.selection.hasNonEditable()?void e.preventDefault():e.ctrlKey||e.shiftKey?this._insertBreak(e):void(this._isExit(e)||this._traverse(e))},_disable:function(e){e.preventDefault();var t=this.selection.getRange();t&&!t.collapsed&&t.deleteContents()},_insertBreak:function(e){e.preventDefault();var t=this.selection.getCurrent(),s=this.inspector.parse(t);s.isComponent()&&!s.isComponentEditable()||s.isCode()||(s.isPre()?this.insertion.insertNewline():this.insertion.insertBreakLine())},_isExit:function(e){var t=this.editor.getElement(),s=this.selection.getBlock(),i=this.inspector.parse(s),a=this.caret.isEnd(s),r=this.selection.getCurrent(),n=r.previousSibling;if(i.isBlockquote()){var o=a&&this._isExitableBlock(s,"P"),l=a&&this._isExitableDblBreak(n);if(o||l)return this._exitFromElement(e,l?n:s,i.getBlockquote())}else if(!i.isComponentType("code")&&i.isPre()){if(a){var c=s.innerHTML;if(c=this.utils.removeInvisibleChars(c),null!==c.match(/(\n\n\n)$/))return $R.dom(n.previousSibling.previousSibling).remove(),this._exitFromElement(e,n,s)}}else if(i.isDl()){if(a&&this._isExitableBlock(s,"DT"))return this._exitFromElement(e,s,i.getDl())}else if(i.isList()){var d=$R.dom(r).parents("ul, ol",t).last();if(a=this.caret.isEnd(d),a&&this._isExitableBlock(s,"LI"))return this._exitFromElement(e,s,d)}else if(i.isComponent()&&i.isComponentActive()&&!i.isFigcaption()&&!i.isComponentEditable())return this._exitFromElement(e,!1,i.getComponent())},_isExitableDblBreak:function(e){var t=!!e&&e.nextSibling;if(t){var s=this.utils.removeInvisibleChars(t.textContent);return 3===t.nodeType&&""===s.trim()}},_isExitableBlock:function(e,t){return e&&e.tagName===t&&this.utils.isEmptyHtml(e.innerHTML)},_exitFromElement:function(e,t,s){return e.preventDefault(),t&&$R.dom(t).remove(),this.utils.createMarkup(s),!0},_exitNextElement:function(e,t){return e.preventDefault(),t.nextSibling?this.caret.setStart(t.nextSibling):this.utils.createMarkup(t),!0},_traverse:function(e){var t=this.selection.getCurrent(),s=this.selection.isText(),i=this.selection.getBlock(),a=this.inspector.parse(t),r=!!i&&i.tagName.toLowerCase();if(a.isPre())return e.preventDefault(),this.insertion.insertNewline();if(!a.isBlockquote()){if(a.isFigcaption()){i=a.getFigcaption();var n=this.caret.isEnd(i),o=this.caret.isEnd();return n||o?this._exitNextElement(e,a.getComponent()):void e.preventDefault()}return a.isDl()?(e.preventDefault(),this._traverseDl(t)):s||this.opts.breakline&&"div"===r?(e.preventDefault(),this.insertion.insertBreakLine()):void setTimeout(this._replaceBlock.bind(this),1)}return i=this.selection.getBlock(t),i&&"BLOCKQUOTE"===i.tagName?(e.preventDefault(),this.insertion.insertBreakLine()):void 0},_traverseDl:function(e){var t=this.selection.getBlock(e),s=this.inspector.parse(t),i=s.getTag(),a=$R.dom(t),r=a.get().nextSibling||!1,n=$R.dom(r),o=r&&n.is("dd"),l=r&&n.is("dt"),c=this.caret.isEnd(t);if("dt"===i&&!o&&c){var d=document.createElement("dd");return a.after(d),void this.caret.setStart(d)}if("dd"===i&&!l&&c){var u=document.createElement("dt");return a.after(u),void this.caret.setStart(u)}return this.insertion.insertBreakLine()},_replaceBlock:function(){var e=this.selection.getBlock(),t=$R.dom(e);if("p"===this.opts.markup&&e&&this._isNeedToReplaceBlock(e)){var s=document.createElement(this.opts.markup);t.replaceWith(s),this.caret.setStart(s)}else if(e)if(this.utils.isEmptyHtml(e.innerHTML))this._clearBlock(t,e);else{var i=this.utils.getFirstNode(e);i&&"BR"===i.tagName&&($R.dom(i).remove(),this.caret.setStart(e))}e&&this._isNeedToCleanBlockStyle(e)&&this.opts.cleanOnEnter&&t.removeAttr("class style"),this.opts.breakline&&e&&"DIV"===e.tagName&&t.attr("data-redactor-tag","br")},_clearBlock:function(e,t){(this.opts.cleanInlineOnEnter||"<br>"===t.innerHTML)&&e.html(""),this.caret.setStart(t)},_isNeedToReplaceBlock:function(e){return"DIV"===e.tagName&&this.utils.isEmptyHtml(e.innerHTML)},_isNeedToCleanBlockStyle:function(e){return"P"===e.tagName&&this.utils.isEmptyHtml(e.innerHTML)}}),$R.add("class","input.paste",{init:function(e,t,s,i,a){this.app=e,this.opts=e.opts,this.editor=e.editor,this.cleaner=e.cleaner,this.container=e.container,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection,this.autoparser=e.autoparser,this.pasteHtml=i,this.pointInserted=a,this.dataTransfer=s,this._init(t)},_init:function(e){var t,s=this.dataTransfer||e.clipboardData,i=this.selection.getCurrent(),a=this.inspector.parse(i);if(this.dropPasted=this.dataTransfer,this.isRawCode=a.isPre()||a.isCode(),this.editor.enablePasting(),this.editor.saveScroll(),this.dropPasted||this.selection.saveMarkers(),this.isRawCode||!s)return t=this.isRawCode||s||!window.clipboardData?s.getData("text/plain"):window.clipboardData.getData("text"),e.preventDefault(),void this._insert(e,t);if(this.pasteHtml)e.preventDefault(),this._insert(e,this.pasteHtml);else{var r=s.getData("URL"),n=this._isPlainText(s)?s.getData("text/plain"):s.getData("text/html");if(n=r&&""!==r?r:n,null!==s.files&&s.files.length>0&&""===n){for(var o=[],l=0;l<s.files.length;l++){var c=s.files[l]||s.items[l].getAsFile();c&&o.push(c)}if(o.length>0)return e.preventDefault(),void this._insertFiles(e,o)}e.preventDefault(),this._insert(e,n)}},_isPlainText:function(e){var t=e.getData("text/plain"),s=e.getData("text/html");if(!t||!s)return null!==t;var i=document.createElement("div");return i.innerHTML=s,i.textContent===t?!i.querySelector(":not(meta)"):void 0},_restoreSelection:function(){this.editor.restoreScroll(),this.editor.disablePasting(),this.dropPasted||this.selection.restoreMarkers()},_insert:function(e,t){var s=this.app.broadcast("pasteBefore",t);if(t=void 0===s?t:s,t=this.isRawCode?t:this.cleaner.paste(t),t=this.isRawCode?this.cleaner.encodePhpCode(t):t,s=this.app.broadcast("pasting",t),t=void 0===s?t:s,this._restoreSelection(),this.opts.input){this.opts.autoparse&&this.opts.autoparsePaste&&(t=this.autoparser.parse(t));var i=this.dropPasted?this.insertion.insertToPoint(e,t,this.pointInserted):this.insertion.insertHtml(t);this.app.broadcast("pasted",i),this.app.broadcast("autoparseobserve")}},_insertFiles:function(e,t){this._restoreSelection();var s=-1!==this.opts.imageTypes.indexOf(t[0].type),i="undefined"==typeof this.dropPasted;s?this.app.broadcast("dropimage",e,t,i):this.app.broadcast("dropfile",e,t,i)}}),$R.add("class","input.shortcode",{init:function(e,t,s){this.app=e,this.opts=e.opts,this.utils=e.utils,this.marker=e.marker,this.keycodes=e.keycodes,this.selection=e.selection,this.worked=!1,s===this.keycodes.SPACE&&this._init()},is:function(){return this.worked},_init:function(){var e=this.selection.getCurrent();if(e&&3===e.nodeType){var t=this.utils.removeInvisibleChars(e.textContent),s=this.opts.shortcodes;for(var i in s){var a=new RegExp("^"+this.utils.escapeRegExp(i)),r=t.match(a);if(null!==r&&"undefined"!=typeof s[i].format)return this._format(s[i].format,e,a)}}},_format:function(e,t,s){var i=this.marker.insert("start");t=i.previousSibling;var a=t.textContent;a=this.utils.trimSpaces(a),a=a.replace(s,""),t.textContent=a;var r="ul"===e||"ol"===e?"module.list.toggle":"module.block.format";this.app.api(r,e),this.selection.restoreMarkers(),this.worked=!0}}),$R.add("class","input.shortcut",{init:function(e,t){this.app=e,this.opts=e.opts,this.worked=!1,this.hotkeys={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},this.hotkeysShiftNums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},this._init(t)},is:function(){return this.worked},_init:function(e){if(!1!==this.opts.shortcuts)for(var t in this.opts.shortcuts)this._build(e,t,this.opts.shortcuts[t]);else!e.ctrlKey&&!e.metaKey||66!==e.which&&73!==e.which||e.preventDefault()},_build:function(e,t,s){for(var i=t.split(","),a=i.length,r=0;a>r;r++)"string"==typeof i[r]&&this._handler(e,i[r].trim(),s)},_handler:function(e,t,s){t=t.toLowerCase().split(" ");for(var i=this.hotkeys[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),r="",n={},o=["meta","ctrl","alt","shift"],l=0;l<o.length;l++){var c=o[l];e[c+"Key"]&&i!==c&&(r+=c+"+")}i&&(n[r+i]=!0),a&&(n[r+a]=!0,n[r+this.hotkeysShiftNums[a]]=!0,"shift+"===r&&(n[this.hotkeysShiftNums[a]]=!0));var d=t.length;for(l=0;d>l;l++)if(n[t[l]])return e.preventDefault(),this.worked=!0,void(s.message?(this.app.broadcast(s.message,s.args),this.app.broadcast("buffer.trigger")):s.api&&(this.app.api(s.api,s.args),this.app.broadcast("buffer.trigger")))}}),$R.add("class","input.space",{init:function(e,t,s,i){this.app=e,this.keycodes=e.keycodes,this.insertion=e.insertion,this.selection=e.selection,this.key=s,this.lastShiftKey=i,this._init(t)},_init:function(e){return this.selection.hasNonEditable()?void e.preventDefault():this.lastShiftKey||this.key!==this.keycodes.SPACE||!e.ctrlKey&&!e.shiftKey||e.metaKey?void 0:(e.preventDefault(),void this.insertion.insertChar("&nbsp;"))}}),$R.add("class","input.tab",{init:function(e,t){this.app=e,this.opts=e.opts,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection,this._init(t)},_init:function(e){if(this.opts.tabKey){var t=this.app.broadcast("tab",e);return!1===t?e.preventDefault():void this._traverse(e)}},_traverse:function(e){var t=this.selection.getCurrent(),s=this.inspector.parse(t);return!s.isComponent()&&e.shiftKey?this._insertHardTab(e,4):s.isList()?(e.preventDefault(),this.app.api("module.list.indent")):s.isPre()||s.isComponentType("code")&&!s.isFigcaption()?this._tabCode(e):!1!==this.opts.tabAsSpaces?this._insertHardTab(e,this.opts.tabAsSpaces):void 0},_insertHardTab:function(e,t){e.preventDefault();var s=document.createTextNode(Array(t+1).join(""));return this.insertion.insertNode(s,"end")},_tabCode:function(e){e.preventDefault();var t=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join("")):document.createTextNode("\t");return this.insertion.insertNode(t,"end")}}),$R.add("module","upload",{init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.utils=e.utils,this.editor=e.editor,this.progress=e.progress,this.defaults={event:!1,element:!1,name:!1,files:!1,url:!1,data:!1,paramName:!1}},build:function(e){this.p=$R.extend(this.defaults,e),this.$el=$R.dom(this.p.element),"INPUT"===this.$el.get().tagName?this._buildInput():this._buildBox()},send:function(e){this.p=$R.extend(this.defaults,e),this.$uploadbox=this.editor.getElement(),this._send(this.p.event,this.p.files)},complete:function(e,t){this._complete(e,t)},_buildInput:function(){this.box=!1,this.prefix="",this.$uploadbox=$R.dom('<div class="upload-redactor-box" />'),this.$el.hide(),this.$el.after(this.$uploadbox),this.opts.multipleUpload?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this._buildPlaceholder(),this._buildEvents()},_buildBox:function(){this.box=!0,this.prefix="box-",this.$uploadbox=this.$el,this.$uploadbox.attr("ondragstart","return false;"),this.$uploadbox.on("drop.redactor.upload",this._onDropBox.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_buildPlaceholder:function(){this.$placeholder=$R.dom('<div class="upload-redactor-placeholder" />'),this.$placeholder.html(this.lang.get("upload-label")),this.$uploadbox.append(this.$placeholder)},_buildEvents:function(){this.$el.on("change.redactor.upload",this._onChange.bind(this)),this.$uploadbox.on("click.redactor.upload",this._onClick.bind(this)),this.$uploadbox.on("drop.redactor.upload",this._onDrop.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_onClick:function(e){e.preventDefault(),this.$el.click()},_onChange:function(e){this._send(e,this.$el.get().files)},_onDrop:function(e){e.preventDefault(),this._clear(),this._setStatusDrop(),this._send(e)},_onDragOver:function(e){return e.preventDefault(),this._setStatusHover(),!1},_onDragLeave:function(e){return e.preventDefault(),this._removeStatusHover(),!1},_onDropBox:function(e){e.preventDefault(),this._clear(),this._setStatusDrop(),this._send(e)},_removeStatusHover:function(){this.$uploadbox.removeClass("upload-redactor-"+this.prefix+"hover")},_setStatusDrop:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"drop")},_setStatusHover:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"hover")},_setStatusError:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"error")},_setStatusSuccess:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"success")},_clear:function(){for(var e=["drop","hover","error","success"],t=0;t<e.length;t++)this.$uploadbox.removeClass("upload-redactor-"+this.prefix+e[t]);this.$uploadbox.removeAttr("ondragstart")},_send:function(e,t){e=e.originalEvent||e,t=t||e.dataTransfer.files;var s=new FormData,i=this._getUploadParam();s=this._buildData(i,t,s),s=this.utils.extendData(s,this.p.data);var a=this.app.broadcast("upload.start",e,s,t);!1!==a&&this._sendData(s,t,e)},_sendData:function(e,t,s){if(this.progress.show(),"function"==typeof this.p.url){var i=this.p.url(e,t,s,this);i instanceof _Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_1___default.a||this._complete(i,s)}else $R.ajax.post({url:this.p.url,data:e,before:function(e){return this.app.broadcast("upload.beforeSend",e)}.bind(this),success:function(e){this._complete(e,s)}.bind(this)})},_getUploadParam:function(){return this.p.paramName?this.p.paramName:"file"},_buildData:function(e,t,s){if(1===t.length)s.append(e+"[]",t[0]);else if(t.length>1&&!1!==this.opts.multipleUpload)for(var i=0;i<t.length;i++)s.append(e+"[]",t[i]);return s},_complete:function(e,t){this._clear(),this.progress.hide(),e&&e.error?(this._setStatusError(),this.app.broadcast("upload."+this.p.name+".error",e,t),this.app.broadcast("upload.error",e)):(this._setStatusSuccess(),this.app.broadcast("upload."+this.p.name+".complete",e,t),this.app.broadcast("upload.complete",e),setTimeout(this._clear.bind(this),500))}}),$R.add("class","code.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,t&&void 0!==t.cmnt?t:this._init(t)},_init:function(e){var t;if("undefined"!=typeof e){var s=$R.dom(e),i=s.closest("figure");0!==i.length?this.parse(i):(this.parse("<figure>"),this.append(e)),t=this.find("pre code, pre").last()}else t=$R.dom("<pre>"),this.parse("<figure>"),this.append(t);this._initElement(t),this._initWrapper()},_initElement:function(e){e.attr({tabindex:"-1",contenteditable:!0})},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"code",tabindex:"-1",contenteditable:!1})}}),$R.add("module","form",{init:function(e){this.app=e,this.lang=e.lang,this.component=e.component,this.inspector=e.inspector},onform:{remove:function(e){this._remove(e)}},oncontextbar:function(e,t){var s=this.inspector.parse(e.target);if(s.isComponentType("form")){var i=s.getComponent(),a={remove:{title:this.lang.get("delete"),api:"module.form.remove",args:i}};t.set(e,i,a,"top")}},_remove:function(e){this.component.remove(e)}}),$R.add("class","form.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,this.utils=e.utils,t&&void 0!==t.cmnt?t:this._init(t)},_init:function(e){if("undefined"!=typeof e){var t=$R.dom(e),s=t.closest("form");if(0!==s.length){var i=this.utils.replaceToTag(e,"figure");this.parse(i)}else this.parse("<figure>"),this.append(e)}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"form",tabindex:"-1",contenteditable:!1})}}),$R.add("module","image",{modals:{image:'<div class="redactor-modal-tab" data-title="## upload ##"><form action="">                 <input type="file" name="file" accept="image/*">             </form></div>',imageedit:'<div class="redactor-modal-group">                 <div id="redactor-modal-image-preview" class="redactor-modal-side"></div>                 <form action="" class="redactor-modal-area">                     <div class="form-item">                         <label for="modal-image-title"> ## title ##</label>                         <input type="text" id="modal-image-title" name="title" />                     </div>                     <div class="form-item form-item-caption">                         <label for="modal-image-caption">## caption ##</label>                         <input type="text" id="modal-image-caption" name="caption" aria-label="## caption ##" />                     </div>                     <div class="form-item form-item-align">                         <label>## image-position ##</label>                         <select name="align" aria-label="## image-position ##">                             <option value="none">## none ##</option>                             <option value="left">## left ##</option>                             <option value="center">## center ##</option>                             <option value="right">## right ##</option>                         </select>                     </div>                     <div class="form-item form-item-link">                         <label for="modal-image-url">## link ##</label>                         <input type="text" id="modal-image-url" name="url" aria-label="## link ##" />                     </div>                     <div class="form-item form-item-link">                         <label class="checkbox"><input type="checkbox" name="target" aria-label="## link-in-new-tab ##"> ## link-in-new-tab ##</label>                     </div>                 </form>             </div>'},init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.caret=e.caret,this.utils=e.utils,this.editor=e.editor,this.storage=e.storage,this.component=e.component,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection,this.justResized=!1},oninsert:function(){this._observeImages()},onstarted:function(){this.storage.observeImages(),this.opts.imageResizable&&(this.resizer=$R.create("image.resize",this.app)),this._observeImages()},ondropimage:function(e,t,s){if(this.opts.imageUpload){var i={url:this.opts.imageUpload,event:!s&&e,files:t,name:"imagedrop",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",i)}},onstop:function(){this.resizer&&this.resizer.stop()},onbottomclick:function(){this.insertion.insertToEnd(this.editor.getLastNode(),"image")},onimageresizer:{stop:function(){this.resizer&&this.resizer.hide()}},onsource:{open:function(){this.resizer&&this.resizer.hide()},closed:function(){this._observeImages(),this.resizer&&this.resizer.rebuild()}},onupload:{complete:function(){this._observeImages()},image:{complete:function(e){this._insert(e)},error:function(e){this._uploadError(e)}},imageedit:{complete:function(e){this._change(e)},error:function(e){this._uploadError(e)}},imagedrop:{complete:function(e,t){this._insert(e,t)},error:function(e){this._uploadError(e)}},imagereplace:{complete:function(e){this._change(e,!1)},error:function(e){this._uploadError(e)}}},onmodal:{image:{open:function(e,t){this._setUpload(t)}},imageedit:{open:function(e,t){this._setFormData(e,t)},opened:function(e,t){this._setFormFocus(t)},remove:function(){this._remove(this.$image)},save:function(e,t){this._save(e,t)}}},onimage:{observe:function(){this._observeImages()},resized:function(){this.justResized=!0}},oncontextbar:function(e,t){if(this.justResized)this.justResized=!1;else{var s=this.selection.getCurrent(),i=this.inspector.parse(s);if(!i.isFigcaption()&&i.isComponentType("image")){var a=i.getComponent(),r={edit:{title:this.lang.get("edit"),api:"module.image.open"},remove:{title:this.lang.get("delete"),api:"module.image.remove",args:a}};t.set(e,a,r)}}},open:function(){this.$image=this._getCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(e){this._insert(e)},remove:function(e){this._remove(e)},_getModalData:function(){return this._isImage()&&this.opts.imageEditable?{name:"imageedit",width:"800px",title:this.lang.get("edit"),handle:"save",commands:{save:{title:this.lang.get("save")},remove:{title:this.lang.get("delete"),type:"danger"},cancel:{title:this.lang.get("cancel")}}}:{name:"image",title:this.lang.get("image")}},_isImage:function(){return this.$image},_getCurrent:function(){var e=this.selection.getCurrent(),t=this.inspector.parse(e);return!(!t.isComponentType("image")||!t.isComponentActive())&&this.component.create("image",t.getComponent())},_insert:function(e,t){if(this.app.api("module.modal.close"),_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(e)){for(var s={},i=0;i<e.length;i++)s=$R.extend(s,e[i]);e=s}else"string"==typeof e&&(e={file:{url:e}});if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)){var a=0;for(var r in e)"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e[r])&&a++;a>1?this._insertMultiple(e,t):this._insertSingle(e,t)}},_insertSingle:function(e,t){for(var s in e)if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e[s])){var i=this._createImageAndStore(e[s]),a=t?this.insertion.insertToPoint(t,i):this.insertion.insertHtml(i);this._removeSpaceBeforeFigure(a[0]),this.component.setActive(a[0]),this.app.broadcast("image.uploaded",a[0],e)}},_insertMultiple:function(e,t){var s,i=0,a=[];for(var r in e)if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e[r])){i++;var n=this._createImageAndStore(e[r]);if(1===i)a=t?this.insertion.insertToPoint(t,n):this.insertion.insertHtml(n);else{var o=$R.dom(a[0]);o.after(n),a=[n.get()],this.app.broadcast("image.inserted",n)}s=a[0],this._removeSpaceBeforeFigure(a[0]),this.app.broadcast("image.uploaded",a[0],e)}this.component.setActive(s)},_createImageAndStore:function(e){var t=this.component.create("image");return t.addClass("redactor-uploaded-figure"),t.setData({src:e.url,id:e.id?e.id:this.utils.getRandomId()}),this.storage.add("image",t.getElement()),t},_removeSpaceBeforeFigure:function(e){if(e){var t=e.previousSibling;t&&(this._removeInvisibleSpace(t),this._removeInvisibleSpace(t.previousSibling))}},_removeInvisibleSpace:function(e){e&&3===e.nodeType&&-1!==this.utils.searchInvisibleChars(e.textContent)&&e.parentNode.removeChild(e)},_save:function(e,t){var s=t.getData(),i={title:s.title};this.opts.imageLink&&(i.link={url:s.url,target:s.target}),this.opts.imageCaption&&(i.caption=s.caption),this.opts.imagePosition&&(i.align=s.align),this.$image.setData(i),this.resizer&&this.resizer.rebuild(),this.app.broadcast("image.changed",this.$image),this.app.api("module.modal.close")},_change:function(e,t){if("string"==typeof e&&(e={file:{url:e}}),"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)){var s;for(var i in e)if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e[i])){s=$R.dom("<img>"),s.attr("src",e[i].url),this.$image.changeImage(e[i]),this.app.broadcast("image.changed",this.$image,e),this.app.broadcast("image.uploaded",this.$image,e),this.app.broadcast("hardsync");break}!1!==t&&s.on("load",function(){this.$previewBox.html(s)}.bind(this))}},_uploadError:function(e){this.app.broadcast("image.uploadError",e)},_remove:function(e){this.app.api("module.modal.close"),this.component.remove(e)},_observeImages:function(){var e=this.editor.getElement(),t=this;e.find("img").each(function(e){var s=$R.dom(e);s.off(".drop-to-replace"),s.on("dragover.drop-to-replace dragenter.drop-to-replace",function(e){e.preventDefault()}),s.on("drop.drop-to-replace",function(e){return t.app.isDragComponentInside()?void 0:t._setReplaceUpload(e,s)})})},_setFormData:function(e,t){this._buildPreview(),this._buildPreviewUpload();var s=this.$image.getData(),i={title:s.title};this.opts.imageCaption?i.caption=s.caption:e.find(".form-item-caption").hide(),this.opts.imagePosition?i.align=s.align:e.find(".form-item-align").hide(),this.opts.imageLink?s.link&&(i.url=s.link.url,s.link.target&&(i.target=!0)):e.find(".form-item-link").hide(),t.setData(i)},_setFormFocus:function(e){e.getField("title").focus()},_setReplaceUpload:function(e,t){if(e=e.originalEvent||e,e.stopPropagation(),e.preventDefault(),this.opts.imageUpload){this.$image=this.component.create("image",t);var s={url:this.opts.imageUpload,files:e.dataTransfer.files,name:"imagereplace",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",s)}},_setUpload:function(e){var t={url:this.opts.imageUpload,element:e.getField("file"),name:"image",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",t)},_buildPreview:function(){this.$preview=$R.dom("#redactor-modal-image-preview");var e=this.$image.getData(),t=$R.dom("<img>");t.attr("src",e.src),this.$previewBox=$R.dom("<div>"),this.$previewBox.append(t),this.$preview.html(""),this.$preview.append(this.$previewBox)},_buildPreviewUpload:function(){if(this.opts.imageUpload){var e=$R.dom('<div class="desc">');e.html(this.lang.get("upload-change-label")),this.$preview.append(e);var t={url:this.opts.imageUpload,element:this.$previewBox,name:"imageedit",paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",t)}}}),$R.add("class","image.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,this.opts=e.opts,this.selection=e.selection,t&&void 0!==t.cmnt?t:this._init(t)},setData:function(e){for(var t in e)this._set(t,e[t])},getData:function(){for(var e=["src","title","caption","align","link","id"],t={},s=0;s<e.length;s++)t[e[s]]=this._get(e[s]);return t},getElement:function(){return this.$element},changeImage:function(e){this.$element.attr("src",e.url)},_init:function(e){var t=$R.dom(e),s=t.closest("figure");void 0===e?(this.$element=$R.dom("<img>"),this.parse("<figure>"),this.append(this.$element)):0===s.length?(this.parse("<figure>"),this.$element=t,this.$element.wrap(this)):(this.parse(s),this.$element=this.find("img")),this._initWrapper()},_set:function(e,t){this["_set_"+e](t)},_get:function(e){return this["_get_"+e]()},_set_src:function(e){this.$element.attr("src",e)},_set_id:function(e){this.$element.attr("data-image",e)},_set_title:function(e){e=e.trim().replace(/(<([^>]+)>)/gi,""),""===e?(this.$element.removeAttr("alt"),this.$element.removeAttr("title")):(this.$element.attr("alt",e),this.$element.attr("title",e))},_set_caption:function(e){var t=this.find("figcaption");return 0===t.length&&(t=$R.dom("<figcaption>"),t.attr("contenteditable","true"),this.append(t)),""===e?t.remove():t.html(e),t},_set_align:function(e){var t="",s="",i="",a=this,r=this.find("figcaption");if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts.imagePosition)){var n=this.opts.imagePosition;for(var o in n)a.removeClass(n[o]);var l="undefined"!=typeof n[e]&&n[e];l&&a.addClass(l)}else{switch(e){case"left":t="left",s="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":t="right",s="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":i="center"}a.css({float:t,margin:s,"text-align":i}),a.attr("rel",a.attr("style")),"center"===e?r.css("text-align","center"):r.css("text-align","")}},_set_link:function(e){var t=this._findLink();return""===e.url?void(t&&t.unwrap()):(t||(t=$R.dom("<a>"),this.$element.wrap(t)),t.attr("href",e.url),e.target?t.attr("target",!0===e.target?"_blank":e.target):t.removeAttr("target"),t)},_get_src:function(){return this.$element.attr("src")},_get_id:function(){return this.$element.attr("data-image")},_get_title:function(){var e=this.$element.attr("alt"),t=this.$element.attr("title");return e||(t||"")},_get_caption:function(){var e=this.find("figcaption");return 0===e.length?"":e.html()},_get_align:function(){var e="";if("object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(this.opts.imagePosition)){e="none";var t=this.opts.imagePosition;for(var s in t)if(this.hasClass(t[s])){e=s;break}}else e="center"===this.css("text-align")?"center":this.css("float");return e},_get_link:function(){var e=this._findLink();if(e){var t=!!e.attr("target");return{url:e.attr("href"),target:t}}},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"image",tabindex:"-1",contenteditable:!1})},_findLink:function(){var e=this.find("a").filter(function(e){return 0===$R.dom(e).closest("figcaption").length});return 0!==e.length&&e}}),$R.add("class","image.resize",{init:function(e){this.app=e,this.$doc=e.$doc,this.$win=e.$win,this.$body=e.$body,this.editor=e.editor,this.toolbar=e.toolbar,this.inspector=e.inspector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body,this._init()},rebuild:function(){this._setResizerPosition()},hide:function(){this.$target.find("#redactor-image-resizer").remove()},stop:function(){var e=this.editor.getElement();e.off(".redactor.image-resize"),this.$doc.off(".redactor.image-resize"),this.$win.off("resize.redactor.image-resize"),this.hide()},_init:function(){var e=this.editor.getElement();e.on("click.redactor.image-resize",this._build.bind(this)),this.$win.on("resize.redactor.image-resize",this._setResizerPosition.bind(this))},_build:function(e){this.$target.find("#redactor-image-resizer").remove();var t=this.inspector.parse(e.target),s=this.editor.getElement();t.isComponentType("image")&&(this.$resizableBox=s,this.$resizableImage=$R.dom(t.getImageElement()),this.$resizer=$R.dom("<span>"),this.$resizer.attr("id","redactor-image-resizer"),this.$target.append(this.$resizer),this._setResizerPosition(),this.$resizer.on("mousedown touchstart",this._set.bind(this)))},_setResizerPosition:function(){if(this.$resizer){var e=this.toolbar.isTarget(),t=this.$target.offset(),s=7,i=e?s-t.top+this.$target.scrollTop():s,a=e?s-t.left:s,r=this.$resizableImage.offset(),n=this.$resizableImage.width(),o=this.$resizableImage.height(),l=this.$resizer.width(),c=this.$resizer.height();this.$resizer.css({top:r.top+o-c+i+"px",left:r.left+n-l+a+"px"})}},_set:function(e){e.preventDefault(),this.resizeHandle={x:e.pageX,y:e.pageY,el:this.$resizableImage,ratio:this.$resizableImage.width()/this.$resizableImage.height(),h:this.$resizableImage.height()},e=e.originalEvent||e,e.targetTouches&&(this.resizeHandle.x=e.targetTouches[0].pageX,this.resizeHandle.y=e.targetTouches[0].pageY),this.app.broadcast("contextbar.close"),this.app.broadcast("image.resize",this.$resizableImage),this._start()},_start:function(){this.$doc.on("mousemove.redactor.image-resize touchmove.redactor.image-resize",this._move.bind(this)),this.$doc.on("mouseup.redactor.image-resize touchend.redactor.image-resize",this._stop.bind(this))},_stop:function(){this.$doc.off(".redactor.image-resize"),this.app.broadcast("image.resized",this.$resizableImage)},_move:function(e){e.preventDefault(),e=e.originalEvent||e;var t=this.resizeHandle.h;t+=e.targetTouches?e.targetTouches[0].pageY-this.resizeHandle.y:e.pageY-this.resizeHandle.y;var s=t*this.resizeHandle.ratio;20>t||100>s||this._getResizableBoxWidth()<=s||(this.resizeHandle.el.attr({width:s,height:t}),this.resizeHandle.el.width(s),this.resizeHandle.el.height(t),this._setResizerPosition())},_getResizableBoxWidth:function(){var e=this.$resizableBox.width();return e-_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(this.$resizableBox.css("padding-left"))-_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(this.$resizableBox.css("padding-right"))}}),$R.add("module","file",{modals:{file:'<div class="redactor-modal-tab" data-title="## upload ##"><form action="">                 <div class="form-item form-item-title">                     <label for="modal-file-title"> ## filename ## <span class="desc">(## optional ##)</span></label>                     <input type="text" id="modal-file-title" name="title" />                 </div>                 <input type="file" name="file">             </form></div>'},init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.caret=e.caret,this.utils=e.utils,this.storage=e.storage,this.component=e.component,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection},onstarted:function(){this.storage.observeFiles()},ondropfile:function(e,t,s){if(this.opts.fileUpload){var i={url:this.opts.fileUpload,event:!s&&e,files:t,name:"filedrop",data:this.opts.fileData};this.app.api("module.upload.send",i)}},onmodal:{file:{open:function(e,t){this._setFormData(e,t),this._setUpload(t)},opened:function(e,t){this._setFormFocus(t),this.$form=t}}},onupload:{file:{complete:function(e){this._insert(e)},error:function(e){this._uploadError(e)}},filedrop:{complete:function(e,t){this._insert(e,t)},error:function(e){this._uploadError(e)}}},oncontextbar:function(e,t){var s=this.selection.getCurrent(),i=this.inspector.parse(s);if(i.isFile()){var a=i.getFile(),r={remove:{title:this.lang.get("delete"),api:"module.file.remove",args:a}};t.set(e,a,r,"bottom")}},open:function(){this._open()},insert:function(e){this._insert(e)},remove:function(e){this._remove(e)},_open:function(){this.app.api("module.modal.build",this._getModalData())},_getModalData:function(){var e={name:"file",title:this.lang.get("file")};return e},_insert:function(e,t){if(this.app.api("module.modal.close"),"object"==Object(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_17__["a"])(e)){if(_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_6___default()(e)){for(var s={},i=0;i<e.length;i++)s=$R.extend(s,e[i]);e=s}var a=_Applications_files_insites_modular_insites_site_manager_vue_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_16___default()(e).length>1;a?this._insertMultiple(e,t):this._insertSingle(e,t),this.$form=!1}},_insertSingle:function(e,t){var s=[];for(var i in e){var a=this._createFileAndStore(e[i]);s=this.opts.fileAttachment?this._insertAsAttachment(a):t?this.insertion.insertToPoint(t,a):this.insertion.insertRaw(a),this.app.broadcast("file.uploaded",s[0],e)}},_insertMultiple:function(e,t){var s,i=0,a=[];for(var r in e){i++;var n=this._createFileAndStore(e[r]);if(this.opts.fileAttachment)a=this._insertAsAttachment(n,e);else if(1===i)a=t?this.insertion.insertToPoint(t,n):this.insertion.insertRaw(n);else{var o=$R.dom(a[0]);o.after(n).after(" "),a=[n.get()],this.app.broadcast("file.inserted",n)}s=n,this.app.broadcast("file.uploaded",a[0],e)}this.opts.fileAttachment||this.caret.setAfter(s)},_insertAsAttachment:function(e,t){var s=$R.dom(this.opts.fileAttachment),i=e.wrapAttachment();s.append(i);var a=[i.get()];return this.app.broadcast("file.appended",a[0],t),a},_createFileAndStore:function(e){var t=!!this.$form&&this.$form.getData(),s=e.name?e.name:e.url,i=!this.opts.fileAttachment&&t&&""!==t.title?t.title:this._truncateUrl(s),a=this.component.create("file");return a.attr("href",e.url),a.attr("data-file",e.id?e.id:this.utils.getRandomId()),a.attr("data-name",e.name),a.html(i),this.storage.add("file",a),a},_remove:function(e){this.selection.save();var t=this.component.create("file",e),s=this.app.broadcast("file.delete",t);!1!==s?(t.unwrap(),this.selection.restore(),this.app.broadcast("file.deleted",t)):this.selection.restore()},_truncateUrl:function(e){return-1!==e.search(/^http/)&&e.length>20?e.substring(0,20)+"...":e},_setUpload:function(e){var t={url:this.opts.fileUpload,element:e.getField("file"),name:"file",data:this.opts.fileData,paramName:this.opts.fileUploadParam};this.app.api("module.upload.build",t)},_setFormData:function(e,t){this.opts.fileAttachment?e.find(".form-item-title").hide():t.setData({title:this.selection.getText()})},_setFormFocus:function(e){e.getField("title").focus()},_uploadError:function(e){this.app.broadcast("file.uploadError",e)}}),$R.add("class","file.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,this.opts=e.opts,t&&void 0!==t.cmnt?t:this._init(t)},wrapAttachment:function(){return this.$wrapper=$R.dom('<span class="redactor-file-item">'),this.$remover=$R.dom('<span class="redactor-file-remover">'),this.$remover.html("&times;"),this.$remover.on("click",this.removeAttachment.bind(this)),this.$wrapper.append(this),this.$wrapper.append(this.$remover),this.$wrapper},removeAttachment:function(e){e.preventDefault();var t=this.app.broadcast("file.delete",this,this.$wrapper);!1!==t&&(this.$wrapper.remove(),this.app.broadcast("file.deleted",this),this.app.broadcast("file.removeAttachment",this))},_init:function(e){if(void 0===e)this.parse("<a>");else{var t=$R.dom(e).closest("a");this.parse(t)}}}),$R.add("module","buffer",{init:function(e){this.app=e,this.opts=e.opts,this.editor=e.editor,this.offset=e.offset,this.keycodes=e.keycodes,this.selection=e.selection,this.state=!1,this.passed=!1,this.keyPressed=!1,this.savedHtml=!1,this.savedOffset=!1,this.undoStorage=[],this.redoStorage=[]},onkeydown:function(e){this._listen(e)},onsyncing:function(){this.keyPressed||this.trigger(),this.keyPressed=!1},onbuffer:{trigger:function(){this.trigger()}},onstate:function(e,t,s){e&&(e.ctrlKey||e.metaKey)||e&&(this._isUndo(e)||this._isRedo(e))||(this.passed=!1,this._saveState(t,s))},onenable:function(){this.clear()},clear:function(){this.state=!1,this.undoStorage=[],this.redoStorage=[]},undo:function(){this._getUndo()},redo:function(){this._getRedo()},trigger:function(){this.state&&!1===this.passed&&this._setUndo()},_saveState:function(e,t){var s=this.editor.getElement();this.state={html:e||s.html(),offset:t||this.offset.get()}},_listen:function(e){var t=e.which,s=e.ctrlKey||e.metaKey,i=s||e.shiftKey||e.altKey,a=[this.keycodes.SPACE,this.keycodes.ENTER,this.keycodes.BACKSPACE,this.keycodes.DELETE,this.keycodes.TAB,this.keycodes.LEFT,this.keycodes.RIGHT,this.keycodes.UP,this.keycodes.DOWN];return this._isUndo(e)?(e.preventDefault(),void this.undo()):this._isRedo(e)?(e.preventDefault(),void this.redo()):((s||-1===a.indexOf(t))&&(!s||88!==t&&67!==t)||(i=!0,this.trigger()),i||this._hasUndo()||this.trigger(),void(this.keyPressed=!0))},_isUndo:function(e){var t=e.which,s=e.ctrlKey||e.metaKey;return s&&90===t&&!e.shiftKey&&!e.altKey},_isRedo:function(e){var t=e.which,s=e.ctrlKey||e.metaKey;return s&&(90===t&&e.shiftKey||89===t&&!e.shiftKey)&&!e.altKey},_setUndo:function(){var e=this.undoStorage[this.undoStorage.length-1];"undefined"!=typeof e&&e[0]===this.state.html||(this.undoStorage.push([this.state.html,this.state.offset]),this._removeOverStorage())},_setRedo:function(){var e=this.editor.getElement(),t=this.offset.get(),s=e.html();this.redoStorage.push([s,t]),this.redoStorage=this.redoStorage.slice(0,this.opts.bufferLimit)},_getUndo:function(){if(this._hasUndo()){this.passed=!0;var e=this.editor.getElement(),t=this.undoStorage.pop();this._setRedo(),e.html(t[0]),this.offset.set(t[1]),this.selection.restore(),this.app.broadcast("undo",t[0],t[1])}},_getRedo:function(){if(this._hasRedo()){this.passed=!0;var e=this.editor.getElement(),t=this.redoStorage.pop();this._setUndo(),e.html(t[0]),this.offset.set(t[1]),this.app.broadcast("redo",t[0],t[1])}},_removeOverStorage:function(){this.undoStorage.length>this.opts.bufferLimit&&(this.undoStorage=this.undoStorage.slice(0,this.undoStorage.length-this.opts.bufferLimit))},_hasUndo:function(){return 0!==this.undoStorage.length},_hasRedo:function(){return 0!==this.redoStorage.length}}),$R.add("module","list",{init:function(e){this.app=e,this.opts=e.opts,this.utils=e.utils,this.block=e.block,this.toolbar=e.toolbar,this.inspector=e.inspector,this.selection=e.selection},onbutton:{list:{observe:function(e){this._observeButton(e)}}},ondropdown:{list:{observe:function(e){this._observeDropdown(e)}}},toggle:function(e){var t=this._getBlocks(),s=this.selection.getBlock(),i=$R.dom(s).parents("ul, ol",".redactor-in").last();return 0===t.length&&0!==i.length&&(t=[i.get()]),!s||"TD"!==s.tagName&&"TH"!==s.tagName||(t=this.block.format("div")),this.selection.saveMarkers(),t=0!==t.length&&this._isUnformat(e,t)?this._unformat(e,t):this._format(e,t),this.selection.restoreMarkers(),t},indent:function(){var e=this.selection.isCollapsed(),t=this.selection.getCurrent(),s=this.inspector.parse(t),i=!!s.isList()&&s.getListItem(),a=$R.dom(i),r=a.prevElement(),n=r.get(),o=e&&i&&n&&"LI"===n.tagName;if(o){this.selection.saveMarkers(),r=$R.dom(n);var l=r.children("ul, ol"),c=a.closest("ul, ol");if(0!==l.length)l.append(a);else{var d=c.get().tagName.toLowerCase(),u=$R.dom("<"+d+">");u.append(a),r.append(u)}this.selection.restoreMarkers()}},outdent:function(){var e=this.selection.isCollapsed(),t=this.selection.getCurrent(),s=this.inspector.parse(t),i=!!s.isList()&&s.getListItem(),a=$R.dom(i);if(e&&i){var r,n,o,l,c=a.parent(),d=c.closest("li",".redactor-in"),u=a.prevElement(),h=a.nextElement(),p=u.get(),m=h.get(),f=!1===p,_=!1!==p&&!1!==m,g=!f&&!1===m;if(this.selection.saveMarkers(),0!==d.length)if(_){r=this._getAllNext(a.get()),o=$R.dom("<"+c.get().tagName.toLowerCase()+">");for(var v=0;v<r.length;v++)o.append(r[v]);d.after(a),a.append(o)}else d.after(a),0===c.children().length?c.remove():f&&a.append(c);else{var b=this._createUnformatContainer(a),y=b.find("ul, ol").first();if(f)c.before(b);else if(g)c.after(b);else if(_){o=$R.dom("<"+c.get().tagName.toLowerCase()+">"),r=this._getAllNext(a.get());for(v=0;v<r.length;v++)o.append(r[v]);c.after(b),b.after(o)}0!==y.length&&(l=b.nextElement(),n=l.get(),n&&n.tagName===c.get().tagName?($R.dom(n).prepend(y),y.unwrap()):b.after(y)),a.remove()}this.selection.restoreMarkers()}},_getAllNext:function(e){for(var t=[];e;){var s=$R.dom(e).nextElement();if(e=s.get(),!e)return t;t.push(e)}return t},_isUnformat:function(e,t){for(var s=0,i=0;i<t.length;i++)if(3!==t[i].nodeType){var a=t[i].tagName.toLowerCase();a!==e&&"figure"!==a||s++}return s===t.length},_format:function(e,t){var s=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6","ul","ol"],i=this._uniteBlocks(t,s),a=[];for(var r in i){for(var n=i[r],o=this._createList(e,i[r]),l=0;l<n.length;l++){var c;if(3===n[l].nodeType||"UL"!==n[l].tagName&&"OL"!==n[l].tagName)c=this._createListItem(n[l]),this.utils.normalizeTextNodes(c),o.append(c);else{var d=$R.dom(n[l]);c=d.contents(),o.append(c),this.utils.isEmpty(d)&&d.remove()}}a.push(o.get())}return a},_uniteBlocks:function(e,t){for(var s=0,i={0:[]},a=!1,r=0;r<e.length;r++){var n=$R.dom(e[r]),o=n.closest("th, td");0!==o.length?(o.get()!==a&&(s++,i[s]=[]),this._isUniteBlock(e[r],t)&&i[s].push(e[r])):this._isUniteBlock(e[r],t)?i[s].push(e[r]):(s++,i[s]=[]),a=o.get()}return i},_isUniteBlock:function(e,t){return 3===e.nodeType||-1!==t.indexOf(e.tagName.toLowerCase())},_createList:function(e,t){var s=t[t.length-1],i=$R.dom(s),a=$R.dom("<"+e+">");return i.after(a),a},_createListItem:function(e){var t=$R.dom("<li>");if(3===e.nodeType)t.append(e);else{var s=$R.dom(e);t.append(s.contents()),s.remove()}return t},_unformat:function(e,t){if(1===t.length){var s=$R.dom(t[0]),i=s.find("li"),a=this.selection.getNodes({tags:["li"]}),r=this.selection.getBlock(),n=$R.dom(r).closest("li");if(0===a.length&&0!==n.length&&(a=[n.get()]),a.length===i.length)return this._unformatEntire(t[0]);var o=this._getItemsPosition(i,a);if("Top"===o)return this._unformatAtSide("before",a,s);if("Bottom"===o)return a.reverse(),this._unformatAtSide("after",a,s);if("Middle"===o){var l=$R.dom(a[a.length-1]),c=!1,d=!1,u=$R.dom("<"+s.get().tagName.toLowerCase()+">");i.each(function(e){if(c){var t=$R.dom(e);0!==t.closest(".redactor-split-item").length||!1!==d&&0!==t.closest(d).length||t.addClass("redactor-split-item"),d=t}e===l.get()&&(c=!0)}),i.filter(".redactor-split-item").each(function(e){var t=$R.dom(e);t.removeClass("redactor-split-item"),u.append(e)}),s.after(u),a.reverse();for(var h=0;h<a.length;h++){var p=$R.dom(a[h]),m=this._createUnformatContainer(p);s.after(m),m.find("ul, ol").remove(),p.remove()}return}}else for(h=0;h<t.length;h++)3!==t[h].nodeType&&t[h].tagName.toLowerCase()===e&&this._unformatEntire(t[h])},_unformatEntire:function(e){var t=$R.dom(e),s=t.find("li");s.each(function(e){var s=$R.dom(e),i=this._createUnformatContainer(s);s.remove(),t.before(i)}.bind(this)),t.remove()},_unformatAtSide:function(e,t,s){for(var i=0;i<t.length;i++){var a=$R.dom(t[i]),r=this._createUnformatContainer(a);s[e](r);var n=r.find("ul, ol").first();a.append(n),n.each(function(e){var s=$R.dom(e),a=s.closest("li");a.get()===t[i]&&(s.unwrap(),a.addClass("r-unwrapped"))}),this.utils.isEmptyHtml(a.html())&&a.remove()}s.find(".r-unwrapped").each(function(e){var t=$R.dom(e);""===t.html().trim()?t.remove():t.removeClass("r-unwrapped")})},_getItemsPosition:function(e,t){var s="Middle",i=t[0],a=t[t.length-1],r=e.first().get(),n=e.last().get();return r===i&&n!==a?s="Top":r!==i&&n===a&&(s="Bottom"),s},_createUnformatContainer:function(e){var t=$R.dom("<"+this.opts.markup+">");return this.opts.breakline&&t.attr("data-redactor-tag","br"),t.append(e.contents()),t},_getBlocks:function(){return this.selection.getBlocks({first:!0})},_observeButton:function(){var e=this.selection.getCurrent(),t=this.inspector.parse(e),s=t.isPre()||t.isCode()||t.isFigcaption();this._observeButtonsList(s,["lists","ul","ol","outdent","indent"]);var i=this.toolbar.getButton("outdent"),a=this.toolbar.getButton("indent");this._observeIndent(a,i)},_observeDropdown:function(e){var t=e.getItem("outdent"),s=e.getItem("indent");this._observeIndent(s,t)},_observeIndent:function(e,t){var s=this.selection.isCollapsed(),i=this.selection.getCurrent(),a=this.inspector.parse(i),r=!!a.isList()&&a.getListItem(),n=$R.dom(r),o=n.prevElement(),l=o.get(),c=s&&r&&l&&"LI"===l.tagName;t&&(r&&s?t.enable():t.disable()),e&&(r&&c?e.enable():e.disable())},_observeButtonsList:function(e,t){for(var s=0;s<t.length;s++){var i=this.toolbar.getButton(t[s]);i&&(e?i.disable():i.enable())}}}),$R.add("class","video.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,t&&void 0!==t.cmnt?t:this._init(t)},_init:function(e){if("undefined"!=typeof e){var t=$R.dom(e),s=t.closest("figure");0!==s.length?this.parse(s):(this.parse("<figure>"),this.append(e))}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"video",tabindex:"-1",contenteditable:!1})}}),window.Redactor=window.$R=$R,window.addEventListener("load",function(){$R("[data-redactor]")})}()},"920e":function(e,t,s){"use strict";var i=s("12f9"),a=s.n(i);a.a},"94cb":function(e,t,s){},"973c":function(e,t,s){"use strict";var i=s("daaa"),a=s.n(i);a.a},"9b93":function(e,t,s){},"9d14":function(e,t,s){"use strict";var i=s("74ac"),a=s.n(i);a.a},"9e72":function(e,t,s){},"9f94":function(e,t,s){"use strict";s.r(t);s("7514");!function(e){e.add("plugin","table",{translations:{en:{table:"Table","insert-table":"Insert table","insert-row-above":"Insert row above","insert-row-below":"Insert row below","insert-column-left":"Insert column left","insert-column-right":"Insert column right","add-head":"Add head","delete-head":"Delete head","delete-column":"Delete column","delete-row":"Delete row","delete-table":"Delete table"}},init:function(e){this.app=e,this.lang=e.lang,this.opts=e.opts,this.caret=e.caret,this.editor=e.editor,this.toolbar=e.toolbar,this.component=e.component,this.inspector=e.inspector,this.insertion=e.insertion,this.selection=e.selection},ondropdown:{table:{observe:function(e){this._observeDropdown(e)}}},onbottomclick:function(){this.insertion.insertToEnd(this.editor.getLastNode(),"table")},start:function(){var e={observe:"table","insert-table":{title:this.lang.get("insert-table"),api:"plugin.table.insert"},"insert-row-above":{title:this.lang.get("insert-row-above"),classname:"redactor-table-item-observable",api:"plugin.table.addRowAbove"},"insert-row-below":{title:this.lang.get("insert-row-below"),classname:"redactor-table-item-observable",api:"plugin.table.addRowBelow"},"insert-column-left":{title:this.lang.get("insert-column-left"),classname:"redactor-table-item-observable",api:"plugin.table.addColumnLeft"},"insert-column-right":{title:this.lang.get("insert-column-right"),classname:"redactor-table-item-observable",api:"plugin.table.addColumnRight"},"add-head":{title:this.lang.get("add-head"),classname:"redactor-table-item-observable",api:"plugin.table.addHead"},"delete-head":{title:this.lang.get("delete-head"),classname:"redactor-table-item-observable",api:"plugin.table.deleteHead"},"delete-column":{title:this.lang.get("delete-column"),classname:"redactor-table-item-observable",api:"plugin.table.deleteColumn"},"delete-row":{title:this.lang.get("delete-row"),classname:"redactor-table-item-observable",api:"plugin.table.deleteRow"},"delete-table":{title:this.lang.get("delete-table"),classname:"redactor-table-item-observable",api:"plugin.table.deleteTable"}},t={title:this.lang.get("table")},s=this.toolbar.addButtonBefore("link","table",t);s.setIcon('<i class="re-icon-table"></i>'),s.setDropdown(e)},insert:function(){for(var e=this.component.create("table"),t=0;t<2;t++)e.addRow(3);e=this.insertion.insertHtml(e),this.caret.setStart(e)},addRowAbove:function(){var e=this._getComponent();if(e){var t=this.selection.getCurrent(),s=e.addRowTo(t,"before");this.caret.setStart(s)}},addRowBelow:function(){var e=this._getComponent();if(e){var t=this.selection.getCurrent(),s=e.addRowTo(t,"after");this.caret.setStart(s)}},addColumnLeft:function(){var e=this._getComponent();if(e){var t=this.selection.getCurrent();this.selection.save(),e.addColumnTo(t,"left"),this.selection.restore()}},addColumnRight:function(){var e=this._getComponent();if(e){var t=this.selection.getCurrent();this.selection.save(),e.addColumnTo(t,"right"),this.selection.restore()}},addHead:function(){var e=this._getComponent();e&&(this.selection.save(),e.addHead(),this.selection.restore())},deleteHead:function(){var t=this._getComponent();if(t){var s=this.selection.getCurrent();0!==e.dom(s).closest("thead").length?(t.removeHead(),this.caret.setStart(t)):(this.selection.save(),t.removeHead(),this.selection.restore())}},deleteColumn:function(){var t=this._getComponent();if(t){var s=this.selection.getCurrent(),i=e.dom(s).closest("td, th"),a=i.nextElement().get(),r=i.prevElement().get();t.removeColumn(s),a?this.caret.setStart(a):r?this.caret.setEnd(r):this.deleteTable()}},deleteRow:function(){var t=this._getComponent();if(t){var s=this.selection.getCurrent(),i=e.dom(s).closest("tr"),a=i.nextElement().get(),r=i.prevElement().get();t.removeRow(s),a?this.caret.setStart(a):r?this.caret.setEnd(r):this.deleteTable()}},deleteTable:function(){var e=this._getTable();e&&this.component.remove(e)},_getTable:function(){var e=this.selection.getCurrent(),t=this.inspector.parse(e);if(t.isTable())return t.getTable()},_getComponent:function(){var e=this.selection.getCurrent(),t=this.inspector.parse(e);if(t.isTable()){var s=t.getTable();return this.component.create("table",s)}},_observeDropdown:function(e){var t=this._getTable(),s=e.getItemsByClass("redactor-table-item-observable"),i=e.getItem("insert-table");t?(this._observeItems(s,"enable"),i.disable()):(this._observeItems(s,"disable"),i.enable())},_observeItems:function(e,t){for(var s=0;s<e.length;s++)e[s][t]()}})}(Redactor),function(e){e.add("class","table.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,t&&void 0!==t.cmnt?t:this._init(t)},addHead:function(){this.removeHead();var t=this.$element.find("tr").first().children("td, th").length,s=e.dom("<thead>"),i=this._buildRow(t,"<th>");s.append(i),this.$element.prepend(s)},addRow:function(e){var t=this._buildRow(e);return this.$element.append(t),t},addRowTo:function(e,t){return this._addRowTo(e,t)},addColumnTo:function(t,s){var i=e.dom(t),a=i.closest("tr"),r=i.closest("td, th"),n=0;a.find("td, th").each(function(e,t){e===r.get()&&(n=t)}),this.$element.find("tr").each(function(t){var i=e.dom(t).find("td, th").get(n),a=e.dom(i),r=a.clone();r.html(""),"right"===s?a.after(r):a.before(r)})},removeHead:function(){var e=this.$element.find("thead");0!==e.length&&e.remove()},removeRow:function(t){e.dom(t).closest("tr").remove()},removeColumn:function(t){var s=e.dom(t),i=s.closest("tr"),a=s.closest("td, th"),r=0;i.find("td, th").each(function(e,t){e===a.get()&&(r=t)}),this.$element.find("tr").each(function(t){var s=e.dom(t).find("td, th").get(r);e.dom(s).remove()})},_init:function(t){var s,i;if(void 0!==t){var a=e.dom(t),r=a.get(),n=a.closest("figure");0!==n.length?(s=n,i=n.find("table").get()):"TABLE"===r.tagName&&(i=r)}this._buildWrapper(s),this._buildElement(i),this._initWrapper()},_addRowTo:function(t,s){var i=e.dom(t).closest("tr");if(0!==i.length){var a=i.children("td, th").length,r=this._buildRow(a);return i[s](r),r}},_buildRow:function(t,s){s=s||"<td>";for(var i=e.dom("<tr>"),a=0;a<t;a++){var r=e.dom(s);r.attr("contenteditable",!0),i.append(r)}return i},_buildElement:function(t){t?this.$element=e.dom(t):(this.$element=e.dom("<table>"),this.append(this.$element))},_buildWrapper:function(e){e=e||"<figure>",this.parse(e)},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"table",tabindex:"-1",contenteditable:!1})}})}(Redactor)},a0f9:function(e,t,s){"use strict";var i=s("6a29"),a=s.n(i);a.a},b3f3:function(e,t,s){"use strict";var i=s("7177"),a=s.n(i);a.a},b652:function(e,t,s){"use strict";var i=s("0bd3"),a=s.n(i);a.a},b6bd:function(e,t,s){},c42e:function(e,t,s){"use strict";var i=s("9b93"),a=s.n(i);a.a},ced5:function(e,t,s){},d3f0:function(e,t,s){"use strict";var i=s("9e72"),a=s.n(i);a.a},d650:function(e,t){Redactor.add("plugin","alignment",{translations:{en:{align:"Align","align-left":"Align Left","align-center":"Align Center","align-right":"Align Right","align-justify":"Align Justify"}},init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.block=e.block,this.toolbar=e.toolbar},start:function(){var e={};e.left={title:this.lang.get("align-left"),api:"plugin.alignment.set",args:"left"},e.center={title:this.lang.get("align-center"),api:"plugin.alignment.set",args:"center"},e.right={title:this.lang.get("align-right"),api:"plugin.alignment.set",args:"right"},e.justify={title:this.lang.get("align-justify"),api:"plugin.alignment.set",args:"justify"};var t=this.toolbar.addButton("alignment",{title:this.lang.get("align")});t.setIcon('<i class="re-icon-alignment"></i>'),t.setDropdown(e)},set:function(e){if("left"===e&&"ltr"===this.opts.direction)return this._remove();var t={style:{"text-align":e}};this.block.toggle(t)},_remove:function(){this.block.remove({style:"text-align"})}})},d706:function(e,t,s){},d75d:function(e,t,s){"use strict";var i=s("d706"),a=s.n(i);a.a},daaa:function(e,t,s){},dcdb:function(e,t,s){},dd93:function(e,t,s){"use strict";var i=s("ced5"),a=s.n(i);a.a},ddc5:function(e,t,s){},e14f:function(e,t,s){"use strict";s.r(t);var i=s("f499"),a=s.n(i),r=s("7618");!function(e){e.add("plugin","imagemanager",{translations:{en:{choose:"Choose"}},init:function(e){this.app=e,this.lang=e.lang,this.opts=e.opts},onmodal:{image:{open:function(e,t){this.opts.imageManagerJson&&this._load(e)}}},_load:function(t){var s=t.getBody();this.$box=e.dom("<div>"),this.$box.attr("data-title",this.lang.get("choose")),this.$box.addClass("redactor-modal-tab"),this.$box.hide(),this.$box.css({overflow:"auto",height:"300px","line-height":1}),s.append(this.$box),e.ajax.get({url:this.opts.imageManagerJson,success:this._parse.bind(this)})},_parse:function(t){for(var s in t){var i=t[s];if("object"==Object(r["a"])(i)){var n=e.dom("<img>"),o=i.thumb?i.thumb:i.url;n.attr("src",o),n.attr("data-params",encodeURI(a()(i))),n.css({width:"96px",height:"72px",margin:"0 4px 2px 0",cursor:"pointer"}),n.on("click",this._insert.bind(this)),this.$box.append(n)}}},_insert:function(t){t.preventDefault();var s=e.dom(t.target),i=JSON.parse(decodeURI(s.attr("data-params")));this.app.api("module.image.insert",{image:i})}})}(Redactor)},e415:function(e,t,s){"use strict";var i=s("94cb"),a=s.n(i);a.a},e9b9:function(e,t,s){},f266:function(e,t,s){"use strict";var i=s("e9b9"),a=s.n(i);a.a},f361:function(e,t,s){"use strict";var i=s("834a"),a=s.n(i);a.a},f4b5:function(e,t,s){},f5ad:function(e,t,s){"use strict";var i=s("2318"),a=s.n(i);a.a},f688:function(e,t,s){"use strict";var i=s("7bdd"),a=s.n(i);a.a},f87c:function(e,t,s){},fe1d:function(e,t,s){}});
//# sourceMappingURL=app.8ce3aef2.js.map